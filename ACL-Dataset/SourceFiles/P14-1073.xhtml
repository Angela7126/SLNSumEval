<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" "http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Robust Entity Clustering via Phylogenetic Inference</title>
<!--Generated on Tue Jun 10 18:07:41 2014 by LaTeXML (version 0.8.0) http://dlmf.nist.gov/LaTeXML/.-->

<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8"/>
<link rel="stylesheet" href="LaTeXML.css" type="text/css"/>
<link rel="stylesheet" href="ltx-article.css" type="text/css"/>
</head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<div class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Robust Entity Clustering via Phylogenetic Inference</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Nicholas Andrews 
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Jason Eisner 
</span></span>
<span class="ltx_author_before">  </span><span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Mark Dredze 
<br class="ltx_break"/>Department of Computer Science and Human Language Technology Center of Excellence 
<br class="ltx_break"/>Johns Hopkins University 
<br class="ltx_break"/>3400 N. Charles St., Baltimore, MD 21218 USA 
<br class="ltx_break"/>{<span class="ltx_text ltx_font_typewriter">noa,eisner,mdredze</span>}<span class="ltx_text ltx_font_typewriter">@jhu.edu</span>

</span></span></div>

<div class="ltx_abstract"><h6 class="ltx_title ltx_title_abstract">Abstract</h6>
<p class="ltx_p">Entity clustering must determine when two named-entity mentions refer to the same entity. Typical approaches use a pipeline architecture that clusters the mentions using fixed or learned measures of name and context similarity. In this paper, we propose a model for cross-document coreference resolution that achieves robustness by learning similarity from unlabeled data. The generative process assumes that each entity mention arises from copying and optionally mutating an earlier name from a similar context. Clustering the mentions into entities depends on recovering this copying tree jointly with estimating models of the mutation process and parent selection process. We present a block Gibbs sampler for posterior inference and an empirical evaluation on several datasets.</p>
</div>
<div id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section"><span class="ltx_tag ltx_tag_section">1 </span>Introduction</h2>

<div id="S1.p1" class="ltx_para">
<p class="ltx_p">Variation poses a serious challenge for determining who
or what a name refers to. For instance, Wikipedia contains more than 100
variations of the name <span class="ltx_text ltx_font_sansserif ltx_font_small">Barack Obama</span> as redirects to the
U.S. President article, including:</p>
<table class="ltx_tabular ltx_centering ltx_align_middle">
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left"><span class="ltx_text ltx_font_sansserif ltx_font_small">President Obama</span></td>
<td class="ltx_td ltx_align_left"><span class="ltx_text ltx_font_sansserif ltx_font_small">Barack H. Obama, Jr.</span></td></tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left"><span class="ltx_text ltx_font_sansserif ltx_font_small">Barak Obamba</span></td>
<td class="ltx_td ltx_align_left"><span class="ltx_text ltx_font_sansserif ltx_font_small">Barry Soetoro</span></td></tr>
</tbody>
</table>
<p class="ltx_p">To relate different names, one solution is to use specifically tailored measures of name similarity such as
Jaro-Winkler similarity <cite class="ltx_cite">[]</cite>. This approach is brittle, however, and fails to adapt to the test data. Another option is to train a model like stochastic edit distance from known pairs of similar names <cite class="ltx_cite">[]</cite>, but this requires supervised data in the test domain.</p>
</div>
<div id="S1.p2" class="ltx_para">
<p class="ltx_p">Even the best model of name similarity is not enough by itself, since two names that are similar—even identical—do not <span class="ltx_text ltx_font_italic">necessarily</span> corefer. Document context is needed to determine whether they may be talking about two different people.</p>
</div>
<div id="S1.p3" class="ltx_para">
<p class="ltx_p">In this paper, we propose a method for jointly (1) learning similarity between names and (2) clustering name mentions into entities, the two major components of cross-document coreference resolution systems <cite class="ltx_cite">[]</cite>. Our model is an evolutionary generative
process based on the name variation model of
<cite class="ltx_cite"/>, which stipulates that names are often copied from previously
generated names, perhaps with mutation (spelling edits). This can
deduce that rather than being names for different entities, <span class="ltx_text ltx_font_sansserif ltx_font_small">Barak
Obamba</span> and <span class="ltx_text ltx_font_sansserif ltx_font_small">Barock obama</span> more likely arose from the frequent
name <span class="ltx_text ltx_font_sansserif ltx_font_small">Barack Obama</span> as a common ancestor, which accounts for most
of their letters.
This can also relate seemingly dissimilar names via multiple steps in the generative process:</p>
<p class="ltx_p ltx_align_center"><span class="ltx_text ltx_font_sansserif ltx_font_small">Taylor Swift</span> <math xmlns="http://www.w3.org/1998/Math/MathML" id="S1.p3.m1" class="ltx_Math" alttext="\rightarrow" display="inline"><mo>→</mo></math> <span class="ltx_text ltx_font_sansserif ltx_font_small">T-Swift</span> <math xmlns="http://www.w3.org/1998/Math/MathML" id="S1.p3.m2" class="ltx_Math" alttext="\rightarrow" display="inline"><mo>→</mo></math> <span class="ltx_text ltx_font_sansserif ltx_font_small">T-Swizzle</span></p>
<p class="ltx_p">Our model learns without supervision that these all refer to the
the same entity.
Such creative spellings are especially common on Twitter and other
social media; we give more examples of
coreferents learned by our model in Section <a href="#S8.SS4" title="8.4 Discussion ‣ 8 Experiments ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8.4</span></a>.</p>
</div>
<div id="S1.p4" class="ltx_para">
<p class="ltx_p">Our primary contributions are improvements on <cite class="ltx_cite"/> for the entity clustering task. Their inference procedure only clustered types (distinct names) rather
than tokens (mentions in context), and relied on expensive matrix inversions for learning. Our novel approach features:</p>
<ul id="I1" class="ltx_itemize">[noitemsep,nolistsep]

<li id="I1.ix1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_itemize">§<a href="#S4.SS1" title="4.1 Sub-model for parent selection ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.1</span></a></span> 
<div id="I1.ix1.p1" class="ltx_para">
<p class="ltx_p">A topical model of which entities from previously written text an author tends to mention from previously written text.</p>
</div></li>
<li id="I1.ix2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_itemize">§<a href="#S4.SS2" title="4.2 Sub-model for name mutation ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.2</span></a></span> 
<div id="I1.ix2.p1" class="ltx_para">
<p class="ltx_p">A name mutation model that is sensitive
to features of the input and output characters and takes a
reader’s comprehension into account.</p>
</div></li>
<li id="I1.ix3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_itemize">§<a href="#S5" title="5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a></span> 
<div id="I1.ix3.p1" class="ltx_para">
<p class="ltx_p">A scalable Markov chain Monte Carlo sampler
used in training and inference.</p>
</div></li>
<li id="I1.ix4" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_itemize">§<a href="#S7" title="7 Consensus Clustering ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a></span> 
<div id="I1.ix4.p1" class="ltx_para">
<p class="ltx_p">A minimum Bayes risk decoding procedure to
pick an output clustering. The procedure is applicable to any model capable
of producing a posterior over coreference decisions.</p>
</div></li>
</ul>
</div>
<div id="S1.p5" class="ltx_para">
<p class="ltx_p">We evaluate our approach by comparing to several baselines on datasets from three different genres: Twitter, newswire, and blogs. <span class="ltx_ERROR undefined">\todo</span>[author=jason,color=RedOrange,fancyline,size=<span class="ltx_text ltx_font_small">,]summarize results? and add John Smith here if you do it in the conclusions</span></p>
</div>
</div>
<div id="S2" class="ltx_section">
<h2 class="ltx_title ltx_font_small ltx_title_section"><span class="ltx_tag ltx_tag_section">2 </span>Overview and Related Work</h2>

<div id="S2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Cross-document coreference resolution (CDCR) was first introduced by </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">. Most approaches since then are based on the intuitions that coreferent names tend to have “similar” spellings and tend to appear in “similar” contexts. The distinguishing feature of our system is that both notions of similarity are learned together without supervision.</span></p>
</div>
<div id="S2.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">We adopt a “phylogenetic” generative model of coreference. The basic insight is that coreference is created when an author thinks of an entity that was mentioned earlier in a similar context, and mentions it again in a similar way. The author may alter the name mention string when copying it, but both names refer to the same entity. Either name may later be copied further, leading to an evolutionary tree of mentions—a phylogeny. </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]please add a figure with an example of a phylogeny? Phylogenetic models are new to information extraction. In computational historical linguistics, </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small"> have also modeled the mutation of strings along the edges of a phylogeny; but for them the phylogeny is observed and most mentions are not, while we observe the mentions only.</span></p>
</div>
<div id="S2.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">To apply our model to the CDCR task, we observe that the probability that two name mentions are coreferent is the probability that they arose from a common ancestor in the phylogeny. So we design a Monte Carlo sampler to reconstruct likely phylogenies. A phylogeny must explain every observed name. While our model is capable of generating each name independently, </span><span class="ltx_text ltx_font_italic ltx_font_small">a phylogeny will generally achieve higher probability if it explains similar names as being similar by mutation (rather than by coincidence)</span><span class="ltx_text ltx_font_small">. Thus, our sampled phylogenies tend to make similar names coreferent—especially long or unusual names that would be expensive to generate repeatedly, and especially in contexts that are topically similar and therefore have a higher prior probability of coreference.</span></p>
</div>
<div id="S2.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">For learning, we iteratively adjust our model’s parameters to better explain our samples. That is, we do unsupervised training via Monte Carlo EM.</span></p>
</div>
<div id="S2.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">What is learned? An important component of a CDCR system is its model of name similarity </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">, which is often fixed up front. This role is played in our system by the name mutation model, which we take to be a variant of stochastic edit distance </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">. Rather than fixing its parameters before we begin CDCR, we </span><span class="ltx_text ltx_font_italic ltx_font_small">learn</span><span class="ltx_text ltx_font_small"> them (without supervision) as part of CDCR, by training from samples of reconstructed phylogenies.</span></p>
</div>
<div id="S2.p6" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Name similarity is also an important component of </span><span class="ltx_text ltx_font_italic ltx_font_small">within</span><span class="ltx_text ltx_font_small">-document coreference resolution, and efforts in that area bear resemblance to our approach. </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small"> describe an “entity-centered” model where a distance-dependent Chinese restaurant process is used to pick previous coreferent mentions </span><span class="ltx_text ltx_font_italic ltx_font_small">within</span><span class="ltx_text ltx_font_small"> a document. Similarly, </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small"> learn a mention similarity model based on labeled data. Our </span><span class="ltx_text ltx_font_italic ltx_font_small">cross</span><span class="ltx_text ltx_font_small">-document setting has no observed mention ordering and no observed entities: we must sum over all possibilities, a challenging inference problem.</span></p>
</div>
<div id="S2.p7" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">The second major component of CDCR is context-based disambiguation of similar or identical names that refer to the same entity. Like </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small"> and </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small"> we use topics as the contexts, but learn mention topics </span><span class="ltx_text ltx_font_italic ltx_font_small">jointly</span><span class="ltx_text ltx_font_small"> with other model parameters.
</span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=noa,color=SeaGreen,fancyline,size=,]I removed a paragraph here that I think is funny and not really necessary.
</span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]I think with this paragraph Mark was trying to work in citations of Wick and Yogotama, but I agree the paragraph didn’t fit. Mark? I added a nocite to ensure they’re at least in the bib.
</span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small"></span></p>
</div><span class="ltx_ERROR undefined">\todo</span>
<div id="S2.p8" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]probably add discussion of “name-ethnicity classification and ethnicity-sensitive name matching” (AAAI 2012)</span></p>
</div>
</div>
<div id="S3" class="ltx_section">
<h2 class="ltx_title ltx_font_small ltx_title_section"><span class="ltx_tag ltx_tag_section">3 </span>Generative Model of Coreference</h2>

<div id="S3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Let </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p1.m1" class="ltx_Math" alttext="\bm{x}=(x_{1},\ldots,x_{N})" display="inline"><mrow><mi>𝒙</mi><mo>=</mo><mrow><mo>(</mo><mrow><msub><mi>x</mi><mn>1</mn></msub><mo>,</mo><mi mathvariant="normal">…</mi><mo>,</mo><msub><mi>x</mi><mi>N</mi></msub></mrow><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> denote an ordered sequence of distinct
named-entity mentions in documents </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p1.m2" class="ltx_Math" alttext="\bm{d}=(d_{1},\ldots,d_{D})" display="inline"><mrow><mi>𝒅</mi><mo>=</mo><mrow><mo>(</mo><mrow><msub><mi>d</mi><mn>1</mn></msub><mo>,</mo><mi mathvariant="normal">…</mi><mo>,</mo><msub><mi>d</mi><mi>D</mi></msub></mrow><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small">. We assume that each document has a (single) known
</span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=mark,color=RoyalBlue,fancyline,size=,]We got dinged in the last submission for trying to generalize the model to language without any data to back it up. I think its fine to do this, but we should remember that was an issue for a reviewer. </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]As you see, I already amplified the footnote to give our defense of this. I also expanded the discussion of multilinguality in Appendix </span><a href="#S4" title="4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4</span></a><span class="ltx_text ltx_font_small">.
language,
and that its mentions and their types have been identified by a
named-entity recognizer. We use the object-oriented notation </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p1.m3" class="ltx_Math" alttext="x.v" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>v</mi></mrow></math><span class="ltx_text ltx_font_small">
for attribute </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p1.m4" class="ltx_Math" alttext="v" display="inline"><mi>v</mi></math><span class="ltx_text ltx_font_small"> of mention </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p1.m5" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S3.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Our model generates an ordered sequence </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p2.m1" class="ltx_Math" alttext="\bm{x}" display="inline"><mi>𝒙</mi></math><span class="ltx_text ltx_font_small"> although we do not
observe its order. Thus each mention </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p2.m2" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> has </span><span class="ltx_text ltx_font_italic ltx_font_small">latent</span><span class="ltx_text ltx_font_small"> position
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p2.m3" class="ltx_Math" alttext="x.i" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>i</mi></mrow></math><span class="ltx_text ltx_font_small"> (e.g., </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p2.m4" class="ltx_Math" alttext="x_{729}.i=729" display="inline"><mrow><msub><mi>x</mi><mn>729</mn></msub><mo separator="true">.</mo><mrow><mi>i</mi><mo>=</mo><mn>729</mn></mrow></mrow></math><span class="ltx_text ltx_font_small">). The entire corpus, including these
entities, is generated according to standard topic model assumptions;
we first generate a topic distribution for a document, then sample topics and words
for the document </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">.
However, any topic may generate an entity type, e.g. </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">person</span><span class="ltx_text ltx_font_small">,
which is then replaced by a
specific name: when </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">person</span><span class="ltx_text ltx_font_small"> is generated, the model chooses a
</span><span class="ltx_text ltx_font_italic ltx_font_small">previous</span><span class="ltx_text ltx_font_small"> mention of any person and copies it, perhaps mutating its
name.</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">1</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">1</sup><span class="ltx_text ltx_font_small">We make the closed-world assumption that the author is
only aware of previous mentions </span><span class="ltx_text ltx_font_italic ltx_font_small">from our corpus</span><span class="ltx_text ltx_font_small">. This means
that two mentions cannot be derived from a common ancestor outside
our corpus. To mitigate this unrealistic assumption, we allow any
ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p2.m5" class="ltx_Math" alttext="\bm{x}" display="inline"><mi>𝒙</mi></math><span class="ltx_text ltx_font_small"> of the observed mentions, not respecting document timestamps or forcing the mentions from a given document to be generated as a contiguous subsequence of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p2.m6" class="ltx_Math" alttext="\bm{x}" display="inline"><mi>𝒙</mi></math><span class="ltx_text ltx_font_small">.</span></span></span></span><span class="ltx_text ltx_font_small">
Alternatively, the model may manufacture a name for a new person, though
the name itself may not be new.</span></p>
</div>
<div id="S3.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">If all previous </span><span class="ltx_text ltx_font_italic ltx_font_small">mentions</span><span class="ltx_text ltx_font_small"> were
equally likely, this would be a Chinese Restaurant Process
(CRP) in
which frequently mentioned </span><span class="ltx_text ltx_font_italic ltx_font_small">entities</span><span class="ltx_text ltx_font_small"> are more likely to be mentioned
again (“the rich get richer”). We refine that idea by saying that the
current topic, language, and document influence the choice of
which previous mention to copy, similar to the distance-dependent CRP
</span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">.</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">2</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">2</sup><span class="ltx_text ltx_font_small">Unlike the ddCRP, our generative story is careful to prohibit derivational cycles: each mention is copied from a </span><span class="ltx_text ltx_font_italic ltx_font_small">previous</span><span class="ltx_text ltx_font_small"> mention in the latent ordering. This is why our phylogeny is a </span><span class="ltx_text ltx_font_italic ltx_font_small">tree</span><span class="ltx_text ltx_font_small">, and why our sampler is more complex. Also unlike the ddCRP, we permit asymmetric
“distances”: if a certain topic or language likes to copy mentions from another, the compliment is not necessarily returned.</span></span></span></span><span class="ltx_text ltx_font_small"> This will help distinguish multiple
</span><span class="ltx_text ltx_font_sansserif ltx_font_small">John Smith</span><span class="ltx_text ltx_font_small"> entities if they tend to appear in different
contexts.</span></p>
</div>
<div id="S3.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Formally, each mention </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> is derived from a parent mention </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m2" class="ltx_Math" alttext="x.p" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi></mrow></math><span class="ltx_text ltx_font_small">
where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m3" class="ltx_Math" alttext="x.p.i&lt;x.i" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mrow><mi>i</mi><mo>&lt;</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>i</mi></mrow></math><span class="ltx_text ltx_font_small"> (the parent came first), </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m4" class="ltx_Math" alttext="x.e=x.p.e" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mrow><mi>e</mi><mo>=</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mi>e</mi></mrow></math><span class="ltx_text ltx_font_small"> (same entity) and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m5" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> is a copy or
mutation of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m6" class="ltx_Math" alttext="x.p.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small">. In the special case where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m7" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> is a first
mention of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m8" class="ltx_Math" alttext="x.e" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>e</mi></mrow></math><span class="ltx_text ltx_font_small">, </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m9" class="ltx_Math" alttext="x.p" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi></mrow></math><span class="ltx_text ltx_font_small"> is the special symbol </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m10" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small">, </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m11" class="ltx_Math" alttext="x.e" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>e</mi></mrow></math><span class="ltx_text ltx_font_small"> is a newly
allocated entity of some appropriate type, and the name </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p4.m12" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> is
generated from scratch.</span></p>
</div>
<div id="S3.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Our goal is to reconstruct mappings </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p5.m1" class="ltx_Math" alttext="\bm{p},\bm{i},\bm{z}" display="inline"><mrow><mi>𝒑</mi><mo>,</mo><mi>𝒊</mi><mo>,</mo><mi>𝒛</mi></mrow></math><span class="ltx_text ltx_font_small"> that
specify the latent properties of the mentions </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p5.m2" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small">.
The mapping </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p5.m3" class="ltx_Math" alttext="\bm{p}:x\mapsto x.p" display="inline"><mrow><mi>𝒑</mi><mo>:</mo><mi>x</mi><mo>↦</mo><mi>x</mi><mo>.</mo><mi>p</mi></mrow></math><span class="ltx_text ltx_font_small"> forms a phylogenetic tree on the
mentions, with root </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p5.m4" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small">. Each entity corresponds to a subtree
that is rooted at some child of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p5.m5" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small">. The mapping </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p5.m6" class="ltx_Math" alttext="\bm{i}:x\mapsto x.i" display="inline"><mrow><mi>𝒊</mi><mo>:</mo><mi>x</mi><mo>↦</mo><mi>x</mi><mo>.</mo><mi>i</mi></mrow></math><span class="ltx_text ltx_font_small"> gives an ordering consistent with that tree in the sense that </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p5.m7" class="ltx_Math" alttext="(\forall x)x.p.i&lt;x.i" display="inline"><mrow><mrow><mrow><mo>(</mo><mrow><mo>∀</mo><mi>x</mi></mrow><mo>)</mo></mrow><mo>⁢</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mrow><mi>i</mi><mo>&lt;</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>i</mi></mrow></math><span class="ltx_text ltx_font_small">.
Finally, the mapping </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p5.m8" class="ltx_Math" alttext="\bm{z}:x\mapsto x.z" display="inline"><mrow><mi>𝒛</mi><mo>:</mo><mi>x</mi><mo>↦</mo><mi>x</mi><mo>.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small"> specifies, for each
mention, the topic that generated it. While </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p5.m9" class="ltx_Math" alttext="\bm{i}" display="inline"><mi>𝒊</mi></math><span class="ltx_text ltx_font_small"> and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p5.m10" class="ltx_Math" alttext="\bm{z}" display="inline"><mi>𝒛</mi></math><span class="ltx_text ltx_font_small"> are not
necessary for creating coref clusters, they are needed to produce </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S3.p5.m11" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
</div>
<div id="S4" class="ltx_section">
<h2 class="ltx_title ltx_font_small ltx_title_section"><span class="ltx_tag ltx_tag_section">4 </span>Detailed generative story</h2>

<div id="S4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Given a few constants that are referenced in the main text, we assume that the
corpus </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p1.m1" class="ltx_Math" alttext="\bm{d}" display="inline"><mi>𝒅</mi></math><span class="ltx_text ltx_font_small"> was generated as follows.</span></p>
</div>
<div id="S4.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">First, for each topic </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p2.m1" class="ltx_Math" alttext="z=1,\ldots K" display="inline"><mrow><mi>z</mi><mo>=</mo><mrow><mn>1</mn><mo>,</mo><mrow><mi mathvariant="normal">…</mi><mo>⁢</mo><mi>K</mi></mrow></mrow></mrow></math><span class="ltx_text ltx_font_small"> and each language </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p2.m2" class="ltx_Math" alttext="\ell" display="inline"><mi mathvariant="normal">ℓ</mi></math><span class="ltx_text ltx_font_small">, choose a multinomial
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p2.m3" class="ltx_Math" alttext="\bm{\beta}_{z\ell}" display="inline"><msub><mi>𝜷</mi><mrow><mi>z</mi><mo>⁢</mo><mi mathvariant="normal">ℓ</mi></mrow></msub></math><span class="ltx_text ltx_font_small"> over the word vocabulary, from a symmetric Dirichlet with concentration parameter </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p2.m4" class="ltx_Math" alttext="\eta" display="inline"><mi>η</mi></math><span class="ltx_text ltx_font_small">. Then set </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p2.m5" class="ltx_Math" alttext="m=0" display="inline"><mrow><mi>m</mi><mo>=</mo><mn>0</mn></mrow></math><span class="ltx_text ltx_font_small"> (entity count), </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p2.m6" class="ltx_Math" alttext="i=0" display="inline"><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow></math><span class="ltx_text ltx_font_small"> (mention count), and for each document index </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p2.m7" class="ltx_Math" alttext="d=1,\ldots,D" display="inline"><mrow><mi>d</mi><mo>=</mo><mrow><mn>1</mn><mo>,</mo><mi mathvariant="normal">…</mi><mo>,</mo><mi>D</mi></mrow></mrow></math><span class="ltx_text ltx_font_small">:</span></p>
<ol id="I2" class="ltx_enumerate">
<li id="I2.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">1.</span></span> 
<div id="I2.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Choose the document’s length </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.i1.p1.m1" class="ltx_Math" alttext="L" display="inline"><mi>L</mi></math><span class="ltx_text ltx_font_small"> and language </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.i1.p1.m2" class="ltx_Math" alttext="\ell" display="inline"><mi mathvariant="normal">ℓ</mi></math><span class="ltx_text ltx_font_small">. (The distributions
used to choose these are unimportant because these variables are always observed.)</span></p>
</div></li>
<li id="I2.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">2.</span></span> 
<div id="I2.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Choose its topic distribution </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.i2.p1.m1" class="ltx_Math" alttext="\bm{\psi}_{d}" display="inline"><msub><mi>𝝍</mi><mi>d</mi></msub></math><span class="ltx_text ltx_font_small"> from an asymmetric
Dirichlet prior with parameters </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.i2.p1.m2" class="ltx_Math" alttext="\bm{m}" display="inline"><mi>𝒎</mi></math><span class="ltx_text ltx_font_small"> </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">.</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">3</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">3</sup><span class="ltx_text ltx_font_small">Extension: This choice could depend
on the language </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.i2.p1.m3" class="ltx_Math" alttext="d.\ell" display="inline"><mrow><mi>d</mi><mo separator="true">.</mo><mi mathvariant="normal">ℓ</mi></mrow></math><span class="ltx_text ltx_font_small">.</span></span></span></span><span class="ltx_text ltx_font_small"> </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]If we’re using </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">, then don’t we have to say how </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.i2.p1.m4" class="ltx_Math" alttext="\bm{m}" display="inline"><mi>𝒎</mi></math><span class="ltx_text ltx_font_small"> is sampled? Note: I simplified it from </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.i2.p1.m5" class="ltx_Math" alttext="\tau\bm{m}" display="inline"><mrow><mi>τ</mi><mo>⁢</mo><mi>𝒎</mi></mrow></math><span class="ltx_text ltx_font_small"> here and in the main document. So now </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.i2.p1.m6" class="ltx_Math" alttext="\bm{m}" display="inline"><mi>𝒎</mi></math><span class="ltx_text ltx_font_small"> is unnormalized.</span></p>
</div></li>
<li id="I2.i3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">3.</span></span> 
<div id="I2.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">For each token position </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.i3.p1.m1" class="ltx_Math" alttext="k=1,\ldots,L" display="inline"><mrow><mi>k</mi><mo>=</mo><mrow><mn>1</mn><mo>,</mo><mi mathvariant="normal">…</mi><mo>,</mo><mi>L</mi></mrow></mrow></math><span class="ltx_text ltx_font_small">:</span></p>
<ol id="I2.I1" class="ltx_enumerate">
<li id="I2.I1.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">(a)</span></span> 
<div id="I2.I1.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Choose a topic </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.i1.p1.m1" class="ltx_Math" alttext="z_{dk}\sim\bm{\psi}_{d}" display="inline"><mrow><msub><mi>z</mi><mrow><mi>d</mi><mo>⁢</mo><mi>k</mi></mrow></msub><mo>∼</mo><msub><mi>𝝍</mi><mi>d</mi></msub></mrow></math><span class="ltx_text ltx_font_small">.</span></p>
</div></li>
<li id="I2.I1.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">(b)</span></span> 
<div id="I2.I1.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Choose a word conditioned on the topic and language, </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.i2.p1.m1" class="ltx_Math" alttext="w_{dk}\sim\bm{\beta}_{z_{dk}\ell}" display="inline"><mrow><msub><mi>w</mi><mrow><mi>d</mi><mo>⁢</mo><mi>k</mi></mrow></msub><mo>∼</mo><msub><mi>𝜷</mi><mrow><msub><mi>z</mi><mrow><mi>d</mi><mo>⁢</mo><mi>k</mi></mrow></msub><mo>⁢</mo><mi mathvariant="normal">ℓ</mi></mrow></msub></mrow></math><span class="ltx_text ltx_font_small">.</span></p>
</div></li>
<li id="I2.I1.i3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">(c)</span></span> 
<div id="I2.I1.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">If </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.i3.p1.m1" class="ltx_Math" alttext="w_{dk}" display="inline"><msub><mi>w</mi><mrow><mi>d</mi><mo>⁢</mo><mi>k</mi></mrow></msub></math><span class="ltx_text ltx_font_small"> is a named entity type (</span><span class="ltx_text ltx_font_smallcaps ltx_font_small">person</span><span class="ltx_text ltx_font_small">, </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">place</span><span class="ltx_text ltx_font_small">, </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">org</span><span class="ltx_text ltx_font_small">, …) rather than an ordinary word,
then increment </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.i3.p1.m2" class="ltx_Math" alttext="i" display="inline"><mi>i</mi></math><span class="ltx_text ltx_font_small"> and:</span></p>
<ol id="I2.I1.I1" class="ltx_enumerate">
<li id="I2.I1.I1.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">i.</span></span> 
<div id="I2.I1.I1.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">create a new mention </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i1.p1.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> with </span>
<br class="ltx_break"/><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i1.p1.m2" class="ltx_Math" alttext="\begin{aligned}\displaystyle x.e.t&amp;\displaystyle=w_{dk}&amp;\displaystyle x.d&amp;%&#10;\displaystyle=d&amp;\displaystyle x.\ell&amp;\displaystyle=\ell\\&#10;\displaystyle x.i&amp;\displaystyle=i&amp;\displaystyle x.z&amp;\displaystyle=z_{dk}&amp;%&#10;\displaystyle x.k&amp;\displaystyle=k\end{aligned}" display="inline"><mtable columnspacing="0.4em" rowspacing="0.2ex"><mtr><mtd columnalign="right"><mrow><mi>x</mi><mo separator="true">.</mo><mi>e</mi><mo separator="true">.</mo><mi>t</mi></mrow></mtd><mtd columnalign="left"><mrow><mi/><mo>=</mo><msub><mi>w</mi><mrow><mi>d</mi><mo>⁢</mo><mi>k</mi></mrow></msub></mrow></mtd><mtd columnalign="right"><mrow><mi>x</mi><mo separator="true">.</mo><mi>d</mi></mrow></mtd><mtd columnalign="left"><mrow><mi/><mo>=</mo><mi>d</mi></mrow></mtd><mtd columnalign="right"><mrow><mi>x</mi><mo separator="true">.</mo><mi mathvariant="normal">ℓ</mi></mrow></mtd><mtd columnalign="left"><mrow><mi/><mo>=</mo><mi mathvariant="normal">ℓ</mi></mrow></mtd></mtr><mtr><mtd columnalign="right"><mrow><mi>x</mi><mo separator="true">.</mo><mi>i</mi></mrow></mtd><mtd columnalign="left"><mrow><mi/><mo>=</mo><mi>i</mi></mrow></mtd><mtd columnalign="right"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></mtd><mtd columnalign="left"><mrow><mi/><mo>=</mo><msub><mi>z</mi><mrow><mi>d</mi><mo>⁢</mo><mi>k</mi></mrow></msub></mrow></mtd><mtd columnalign="right"><mrow><mi>x</mi><mo separator="true">.</mo><mi>k</mi></mrow></mtd><mtd columnalign="left"><mrow><mi/><mo>=</mo><mi>k</mi></mrow></mtd></mtr></mtable></math><span class="ltx_text ltx_font_small"></span></p>
</div></li>
<li id="I2.I1.I1.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">ii.</span></span> 
<div id="I2.I1.I1.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Choose the parent </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i2.p1.m1" class="ltx_Math" alttext="x.p" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi></mrow></math><span class="ltx_text ltx_font_small"> from a
distribution conditioned on the attributes just set (see
§</span><a href="#S4.SS1" title="4.1 Sub-model for parent selection ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.1</span></a><span class="ltx_text ltx_font_small">). </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]if we restore </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i2.p1.m2" class="ltx_Math" alttext="\alpha" display="inline"><mi>α</mi></math><span class="ltx_text ltx_font_small"> then it should be mentioned here</span></p>
</div></li>
<li id="I2.I1.I1.i3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">iii.</span></span> 
<div id="I2.I1.I1.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">If </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i3.p1.m1" class="ltx_Math" alttext="x.p=\diamondsuit" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mrow><mi>p</mi><mo>=</mo><mi mathvariant="normal">♢</mi></mrow></mrow></math><span class="ltx_text ltx_font_small">, increment </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i3.p1.m2" class="ltx_Math" alttext="m" display="inline"><mi>m</mi></math><span class="ltx_text ltx_font_small"> and set </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i3.p1.m3" class="ltx_Math" alttext="x.e=\mbox{}" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mrow><mi>e</mi><mo>=</mo><mrow/></mrow></mrow></math><span class="ltx_text ltx_font_small"> a
new entity </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i3.p1.m4" class="ltx_Math" alttext="\text{e}_{m}" display="inline"><msub><mtext mathsize="small" stretchy="false">e</mtext><mi>m</mi></msub></math><span class="ltx_text ltx_font_small">. Else set </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i3.p1.m5" class="ltx_Math" alttext="x.e=x.p.e" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mrow><mi>e</mi><mo>=</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mi>e</mi></mrow></math><span class="ltx_text ltx_font_small">.</span></p>
</div></li>
<li id="I2.I1.I1.i4" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">iv.</span></span> 
<div id="I2.I1.I1.i4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Choose </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i4.p1.m1" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> from a distribution conditioned on
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i4.p1.m2" class="ltx_Math" alttext="x.p.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I2.I1.I1.i4.p1.m3" class="ltx_Math" alttext="x.\ell" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi mathvariant="normal">ℓ</mi></mrow></math><span class="ltx_text ltx_font_small"> (see §</span><a href="#S4.SS2" title="4.2 Sub-model for name mutation ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.2</span></a><span class="ltx_text ltx_font_small">).</span></p>
</div></li>
</ol>
</div></li>
</ol>
</div></li>
</ol>
</div>
<div id="S4.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Notice that the tokens </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p3.m1" class="ltx_Math" alttext="w_{dk}" display="inline"><msub><mi>w</mi><mrow><mi>d</mi><mo>⁢</mo><mi>k</mi></mrow></msub></math><span class="ltx_text ltx_font_small"> in document </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p3.m2" class="ltx_Math" alttext="d" display="inline"><mi>d</mi></math><span class="ltx_text ltx_font_small"> are exchangeable: by
collapsing out </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p3.m3" class="ltx_Math" alttext="\bm{\psi}_{d}" display="inline"><msub><mi>𝝍</mi><mi>d</mi></msub></math><span class="ltx_text ltx_font_small">, we can regard them as having been generated
from a CRP. Thus, for fixed values of the non-mention tokens and
their topics, the probability of generating the mention sequence
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p3.m4" class="ltx_Math" alttext="\bm{x}" display="inline"><mi>𝒙</mi></math><span class="ltx_text ltx_font_small"> is proportional to the product of the probabilities of the
choices in step </span><a href="#I2.i3" title="3. ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a><span class="ltx_text ltx_font_small"> at the positions </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p3.m5" class="ltx_Math" alttext="dk" display="inline"><mrow><mi>d</mi><mo>⁢</mo><mi>k</mi></mrow></math><span class="ltx_text ltx_font_small"> where mentions
were generated. These choices generate a topic </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p3.m6" class="ltx_Math" alttext="x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small"> (from the CRP
for document </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p3.m7" class="ltx_Math" alttext="d" display="inline"><mi>d</mi></math><span class="ltx_text ltx_font_small">), a type </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p3.m8" class="ltx_Math" alttext="x.e.t" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>e</mi><mo separator="true">.</mo><mi>t</mi></mrow></math><span class="ltx_text ltx_font_small"> (from </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p3.m9" class="ltx_Math" alttext="\beta_{x.z}" display="inline"><msub><mi>β</mi><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></msub></math><span class="ltx_text ltx_font_small">), a parent
mention (from the distribution over previous mentions), and a name
string (conditioned on the parent’s name if any).
§</span><a href="#S5" title="5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a><span class="ltx_text ltx_font_small"> uses this fact to construct an MCMC sampler for
the latent parts of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.p3.m10" class="ltx_Math" alttext="\bm{x}" display="inline"><mi>𝒙</mi></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S4.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">4.1 </span>Sub-model for parent selection</h3>

<div id="S4.SS1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">To select a parent for a mention </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p1.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> of type </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p1.m2" class="ltx_Math" alttext="t=x.e.t" display="inline"><mrow><mrow><mi>t</mi><mo>=</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>e</mi><mo separator="true">.</mo><mi>t</mi></mrow></math><span class="ltx_text ltx_font_small">, a simple
model (as mentioned above) would be a CRP: each previous mention of
the same type is selected with probability proportional to 1, and
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p1.m3" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small"> is selected with probability proportional to </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p1.m4" class="ltx_Math" alttext="\alpha_{t}&gt;0" display="inline"><mrow><msub><mi>α</mi><mi>t</mi></msub><mo>&gt;</mo><mn>0</mn></mrow></math><span class="ltx_text ltx_font_small">.
A larger choice of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p1.m5" class="ltx_Math" alttext="\alpha_{t}" display="inline"><msub><mi>α</mi><mi>t</mi></msub></math><span class="ltx_text ltx_font_small"> results in smaller entity clusters,
because it prefers to create new entities of type </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p1.m6" class="ltx_Math" alttext="t" display="inline"><mi>t</mi></math><span class="ltx_text ltx_font_small">
rather than copying old ones.</span></p>
</div>
<div id="S4.SS1.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">We modify this story by re-weighting </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m1" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small"> and previous mentions according to their relative suitability as the parent of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m2" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small">:
</span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=noa,color=SeaGreen,fancyline,size=,]I have features on </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m3" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small"> here since e.g. position in document may be predictive of if a new entity is being started. </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]Ok, but then the factors of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m4" class="ltx_Math" alttext="\frac{\alpha_{t}}{n(x)+\alpha_{t}}" display="inline"><mfrac><msub><mi>α</mi><mi>t</mi></msub><mrow><mrow><mi>n</mi><mo>⁢</mo><mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow><mo>+</mo><msub><mi>α</mi><mi>t</mi></msub></mrow></mfrac></math><span class="ltx_text ltx_font_small"> should no longer be used, so I deleted them and simplified. Presumably you’re not still using those?? In fact, we no longer have any </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m5" class="ltx_Math" alttext="\alpha" display="inline"><mi>α</mi></math><span class="ltx_text ltx_font_small"> parameter.</span></p>
<table id="S4.E1" class="ltx_equation">

<tr class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_align_center"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.E1.m1" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits_{\bm{\phi}}(x.p\mid x)=\frac{\exp\left(\bm{\phi}\cdot%&#10;\mathbf{f}(x.p,x)\right)}{Z(x)}" display="block"><mrow><msub><mo>Pr</mo><mi mathvariant="bold-italic">ϕ</mi></msub><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>p</mi><mo>∣</mo><mi>x</mi><mo>)</mo></mrow><mo>=</mo><mfrac><mrow><mi>exp</mi><mrow><mo>(</mo><mi mathvariant="bold-italic">ϕ</mi><mo>⋅</mo><mi>𝐟</mi><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>p</mi><mo>,</mo><mi>x</mi><mo>)</mo></mrow><mo>)</mo></mrow></mrow><mrow><mi>Z</mi><mo>⁢</mo><mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow></mfrac></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(1)</span></td></tr>
</table>
<p class="ltx_p"><span class="ltx_text ltx_font_small">where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m6" class="ltx_Math" alttext="x.p" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi></mrow></math><span class="ltx_text ltx_font_small"> ranges over </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m7" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small"> and all previous mentions of the same type as </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m8" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small">, that is, mentions </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m9" class="ltx_Math" alttext="p" display="inline"><mi>p</mi></math><span class="ltx_text ltx_font_small"> such that </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m10" class="ltx_Math" alttext="p.i&lt;x.i" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mrow><mi>i</mi><mo>&lt;</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>i</mi></mrow></math><span class="ltx_text ltx_font_small"> and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m11" class="ltx_Math" alttext="p.e.t=x.e.t" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mi>e</mi><mo separator="true">.</mo><mrow><mi>t</mi><mo>=</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>e</mi><mo separator="true">.</mo><mi>t</mi></mrow></math><span class="ltx_text ltx_font_small">.
The normalizing constant </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p2.m12" class="ltx_Math" alttext="Z(x)\;\stackrel{\mbox{\tiny def}}{=}\;\sum_{p}\exp\left(\bm{\phi}\cdot\mathbf{%&#10;f}(x.p,x)\right)" display="inline"><mrow><mi>Z</mi><mrow><mo>(</mo><mi>x</mi><mo rspace="5.3pt">)</mo></mrow><mpadded width="+2.8pt"><mover><mo movablelimits="false">=</mo><mtext mathsize="small" stretchy="false">def</mtext></mover></mpadded><msub><mo largeop="true" symmetric="true">∑</mo><mi>p</mi></msub><mi>exp</mi><mrow><mo>(</mo><mi mathvariant="bold-italic">ϕ</mi><mo>⋅</mo><mi>𝐟</mi><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>p</mi><mo>,</mo><mi>x</mi><mo>)</mo></mrow><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> is chosen so that the probabilities sum to 1.</span></p>
</div>
<div id="S4.SS1.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">This is a conditional log-linear model parameterized by </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m1" class="ltx_Math" alttext="\bm{\phi}" display="inline"><mi mathvariant="bold-italic">ϕ</mi></math><span class="ltx_text ltx_font_small">,
where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m2" class="ltx_Math" alttext="\phi_{k}\sim\mathcal{N}(0,\sigma^{2}_{k})" display="inline"><mrow><msub><mi>ϕ</mi><mi>k</mi></msub><mo>∼</mo><mrow><mi class="ltx_font_mathcaligraphic">𝒩</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><mn>0</mn><mo>,</mo><msubsup><mi>σ</mi><mi>k</mi><mn>2</mn></msubsup></mrow><mo>)</mo></mrow></mrow></mrow></math><span class="ltx_text ltx_font_small">. </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]formerly </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m3" class="ltx_Math" alttext="\mathcal{N}(\mu_{k},\sigma_{k})" display="inline"><mrow><mi class="ltx_font_mathcaligraphic">𝒩</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><msub><mi>μ</mi><mi>k</mi></msub><mo>,</mo><msub><mi>σ</mi><mi>k</mi></msub></mrow><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> which I think was wrong The features
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m4" class="ltx_Math" alttext="\mathbf{f}" display="inline"><mi>𝐟</mi></math><span class="ltx_text ltx_font_small"> are extracted from the attributes of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m5" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m6" class="ltx_Math" alttext="x.p" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi></mrow></math><span class="ltx_text ltx_font_small">. Our most important feature tests whether </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m7" class="ltx_Math" alttext="x.p.z=x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mrow><mi>z</mi><mo>=</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small">. This binary feature has a high weight if authors mainly choose mentions from the same topic. To model which (other) topics tend to be selected, we also have a binary feature for each parent topic </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m8" class="ltx_Math" alttext="x.p.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small"> and each topic pair </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m9" class="ltx_Math" alttext="(x.p.z,x.z)" display="inline"><mrow><mo>(</mo><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mrow><mi>z</mi><mo>,</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>z</mi></mrow><mo>)</mo></mrow></math><span class="ltx_text ltx_font_small">.</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">4</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">4</sup><span class="ltx_text ltx_font_small">Many other features could be added. In a multilingual setting, one would similarly want to model whether English authors select Arabic mentions. One could also imagine features that reward proximity in the generative order (</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m10" class="ltx_Math" alttext="x.p.i\approx x.i" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mrow><mi>i</mi><mo>≈</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>i</mi></mrow></math><span class="ltx_text ltx_font_small">), local linguistic relationships (when </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m11" class="ltx_Math" alttext="x.p.d=x.d" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mrow><mi>d</mi><mo>=</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>d</mi></mrow></math><span class="ltx_text ltx_font_small"> and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m12" class="ltx_Math" alttext="x.p.k\approx x.k" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mrow><mi>k</mi><mo>≈</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>k</mi></mrow></math><span class="ltx_text ltx_font_small">), or social information flow (e.g., from mainstream media to Twitter). One could also make more specific versions of any feature by conjoining it with the entity type </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS1.p3.m13" class="ltx_Math" alttext="t" display="inline"><mi>t</mi></math><span class="ltx_text ltx_font_small">.</span></span></span></span><span class="ltx_text ltx_font_small"></span></p>
</div>
</div>
<div id="S4.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">4.2 </span>Sub-model for name mutation</h3>

<div id="S4.SS2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Let </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p1.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> denote a mention with parent </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p1.m2" class="ltx_Math" alttext="p=x.p" display="inline"><mrow><mrow><mi>p</mi><mo>=</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>p</mi></mrow></math><span class="ltx_text ltx_font_small">. As in
</span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">, its name </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p1.m3" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> is a stochastic transduction of
its parent’s name </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p1.m4" class="ltx_Math" alttext="p.n" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small">. That is,</span></p>
<table id="S4.E2" class="ltx_equation">

<tr class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_align_center"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.E2.m1" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits_{\bm{\theta}}(x.n\mid p.n)" display="block"><mrow><msub><mo>Pr</mo><mi>𝜽</mi></msub><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>n</mi><mo>∣</mo><mi>p</mi><mo>.</mo><mi>n</mi><mo>)</mo></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(2)</span></td></tr>
</table>
<p class="ltx_p"><span class="ltx_text ltx_font_small">is given by the probability that applying a random sequence of edits
to the characters of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p1.m5" class="ltx_Math" alttext="p.n" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> would yield </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p1.m6" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small">. The contextual
probabilities of different edits depend on learned parameters
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p1.m7" class="ltx_Math" alttext="\bm{\theta}" display="inline"><mi>𝜽</mi></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S4.SS2.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">(</span><a href="#S4.E2" title="(2) ‣ 4.2 Sub-model for name mutation ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a><span class="ltx_text ltx_font_small">) is the total probability of </span><span class="ltx_text ltx_font_italic ltx_font_small">all</span><span class="ltx_text ltx_font_small"> edit
sequences that derive </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p2.m1" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> from </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p2.m2" class="ltx_Math" alttext="p.n" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small">. It can be computed in
time </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p2.m3" class="ltx_Math" alttext="O(|x.n|\cdot|p.n|)" display="inline"><mrow><mi>O</mi><mrow><mo>(</mo><mo>|</mo><mi>x</mi><mo>.</mo><mi>n</mi><mo>|</mo><mo>⋅</mo><mo>|</mo><mi>p</mi><mo>.</mo><mi>n</mi><mo>|</mo><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> by dynamic programming.</span></p>
</div>
<div id="S4.SS2.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">The probability of a </span><span class="ltx_text ltx_font_italic ltx_font_small">single</span><span class="ltx_text ltx_font_small"> edit sequence, which corresponds to
a monotonic alignment of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m1" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> to </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m2" class="ltx_Math" alttext="p.n" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small">, is a product of individual
edit probabilities of the form </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m3" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits_{\bm{\theta}}((\substack{a\\&#10;b})\mid\hat{a})" display="inline"><mrow><msub><mo>Pr</mo><mi>𝜽</mi></msub><mrow><mo>(</mo><mrow><mo>(</mo><mstyle scriptlevel="+1"><mtable columnspacing="0.4em" rowspacing="0.2ex"><mtr><mtd><mi>a</mi></mtd></mtr><mtr><mtd><mi>b</mi></mtd></mtr></mtable></mstyle><mo>)</mo></mrow><mo>∣</mo><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small">, which
is conditioned on the next input character </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m4" class="ltx_Math" alttext="\hat{a}" display="inline"><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover></math><span class="ltx_text ltx_font_small">. The edit
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m5" class="ltx_Math" alttext="(\substack{a\\&#10;b})" display="inline"><mrow><mo>(</mo><mstyle scriptlevel="+1"><mtable columnspacing="0.4em" rowspacing="0.2ex"><mtr><mtd><mi>a</mi></mtd></mtr><mtr><mtd><mi>b</mi></mtd></mtr></mtable></mstyle><mo>)</mo></mrow></math><span class="ltx_text ltx_font_small"> replaces input </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m6" class="ltx_Math" alttext="a\in\{\epsilon,\hat{a}\}" display="inline"><mrow><mi>a</mi><mo>∈</mo><mrow><mo>{</mo><mrow><mi>ϵ</mi><mo>,</mo><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover></mrow><mo>}</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> with
output </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m7" class="ltx_Math" alttext="b\in\{\epsilon\}\cup\Sigma" display="inline"><mrow><mi>b</mi><mo>∈</mo><mrow><mrow><mo>{</mo><mi>ϵ</mi><mo>}</mo></mrow><mo>∪</mo><mi mathvariant="normal">Σ</mi></mrow></mrow></math><span class="ltx_text ltx_font_small"> (where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m8" class="ltx_Math" alttext="\epsilon" display="inline"><mi>ϵ</mi></math><span class="ltx_text ltx_font_small"> is the empty
string and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m9" class="ltx_Math" alttext="\Sigma" display="inline"><mi mathvariant="normal">Σ</mi></math><span class="ltx_text ltx_font_small"> is the
alphabet of language </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m10" class="ltx_Math" alttext="x.\ell" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi mathvariant="normal">ℓ</mi></mrow></math><span class="ltx_text ltx_font_small">). Insertions and deletions are the
cases where respectively </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m11" class="ltx_Math" alttext="a=\epsilon" display="inline"><mrow><mi>a</mi><mo>=</mo><mi>ϵ</mi></mrow></math><span class="ltx_text ltx_font_small"> or </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m12" class="ltx_Math" alttext="b=\epsilon" display="inline"><mrow><mi>b</mi><mo>=</mo><mi>ϵ</mi></mrow></math><span class="ltx_text ltx_font_small">—we do not
allow both at once. All other edits are substitutions.
When </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m13" class="ltx_Math" alttext="\hat{a}" display="inline"><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover></math><span class="ltx_text ltx_font_small"> is the special end-of-string symbol </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m14" class="ltx_Math" alttext="\#" display="inline"><mi mathvariant="normal">#</mi></math><span class="ltx_text ltx_font_small">,
the only allowed edits are the insertion </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m15" class="ltx_Math" alttext="(\substack{\epsilon\\&#10;b})" display="inline"><mrow><mo>(</mo><mstyle scriptlevel="+1"><mtable columnspacing="0.4em" rowspacing="0.2ex"><mtr><mtd><mi>ϵ</mi></mtd></mtr><mtr><mtd><mi>b</mi></mtd></mtr></mtable></mstyle><mo>)</mo></mrow></math><span class="ltx_text ltx_font_small"> and the substitution </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p3.m16" class="ltx_Math" alttext="(\substack{\#\\&#10;\#})" display="inline"><mrow><mo>(</mo><mstyle scriptlevel="+1"><mtable columnspacing="0.4em" rowspacing="0.2ex"><mtr><mtd><mi mathvariant="normal">#</mi></mtd></mtr><mtr><mtd><mi mathvariant="normal">#</mi></mtd></mtr></mtable></mstyle><mo>)</mo></mrow></math><span class="ltx_text ltx_font_small">. We
define the edit probability using a locally normalized log-linear
model:</span></p>
<table id="A2.EGx1" class="ltx_equationgroup ltx_eqn_align">

<tr id="S4.E3" class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_td ltx_align_right"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.E3.m1" class="ltx_Math" alttext="\displaystyle\text{Pr}_{\bm{\theta}}((\substack{a\\&#10;b})\mid\hat{a})=\frac{\exp(\bm{\theta}\cdot\mathbf{f}(\hat{a},a,b))}{\sum_{a^{%&#10;\prime},b^{\prime}}\exp(\bm{\theta}\cdot\mathbf{f}(\hat{a},a^{\prime},b^{%&#10;\prime}))}" display="inline"><mrow><msub><mtext mathsize="small" stretchy="false">Pr</mtext><mi>𝜽</mi></msub><mrow><mo>(</mo><mrow><mo>(</mo><mstyle scriptlevel="+1"><mtable columnspacing="0.4em" rowspacing="0.2ex"><mtr><mtd><mi>a</mi></mtd></mtr><mtr><mtd><mi>b</mi></mtd></mtr></mtable></mstyle><mo>)</mo></mrow><mo>∣</mo><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover><mo>)</mo></mrow><mo>=</mo><mstyle displaystyle="true"><mfrac><mrow><mi>exp</mi><mo>⁡</mo><mrow><mo>(</mo><mrow><mrow><mi>𝜽</mi><mo>⋅</mo><mi>𝐟</mi></mrow><mo>⁢</mo><mrow><mo>(</mo><mrow><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover><mo>,</mo><mi>a</mi><mo>,</mo><mi>b</mi></mrow><mo>)</mo></mrow></mrow><mo>)</mo></mrow></mrow><mrow><msub><mo largeop="true" symmetric="true">∑</mo><mrow><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msup><mi>b</mi><mo>′</mo></msup></mrow></msub><mrow><mi>exp</mi><mo>⁡</mo><mrow><mo>(</mo><mrow><mrow><mi>𝜽</mi><mo>⋅</mo><mi>𝐟</mi></mrow><mo>⁢</mo><mrow><mo>(</mo><mrow><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover><mo>,</mo><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msup><mi>b</mi><mo>′</mo></msup></mrow><mo>)</mo></mrow></mrow><mo>)</mo></mrow></mrow></mrow></mfrac></mstyle></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(3)</span></td></tr>
</table>
</div>
<div id="S4.SS2.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">We use a small set of simple feature functions </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p4.m1" class="ltx_Math" alttext="\mathbf{f}" display="inline"><mi>𝐟</mi></math><span class="ltx_text ltx_font_small">, which consider conjunctions of the attributes of the characters </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p4.m2" class="ltx_Math" alttext="\hat{a}" display="inline"><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover></math><span class="ltx_text ltx_font_small"> and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p4.m3" class="ltx_Math" alttext="b" display="inline"><mi>b</mi></math><span class="ltx_text ltx_font_small">: character, character class (letter, digit, etc.), and case (upper vs. lower).</span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=noa,color=SeaGreen,fancyline,size=,]Will add more features back in for camera-ready most likely: they slow down the experiments a lot and didn’t help that much on dev data.</span></p>
</div>
<div id="S4.SS2.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">More generally, the probability (</span><a href="#S4.E2" title="(2) ‣ 4.2 Sub-model for name mutation ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a><span class="ltx_text ltx_font_small">) may also be
conditioned on other variables such as on the languages </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p5.m1" class="ltx_Math" alttext="p.\ell" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mi mathvariant="normal">ℓ</mi></mrow></math><span class="ltx_text ltx_font_small"> and
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p5.m2" class="ltx_Math" alttext="x.\ell" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi mathvariant="normal">ℓ</mi></mrow></math><span class="ltx_text ltx_font_small">—this leaves room for a transliteration model when </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p5.m3" class="ltx_Math" alttext="x.\ell\neq p.\ell" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mrow><mi mathvariant="normal">ℓ</mi><mo>≠</mo><mi>p</mi></mrow><mo separator="true">.</mo><mi mathvariant="normal">ℓ</mi></mrow></math><span class="ltx_text ltx_font_small">—and on the entity type </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p5.m4" class="ltx_Math" alttext="x.t" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>t</mi></mrow></math><span class="ltx_text ltx_font_small">.
The features in (</span><a href="#S4.E3" title="(3) ‣ 4.2 Sub-model for name mutation ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a><span class="ltx_text ltx_font_small">) may then depend on these
variables as well.</span></p>
</div>
<div id="S4.SS2.p6" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Notice that we use a locally normalized probability for each edit. This enables faster and simpler training than the similar model of </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">, which uses a globally normalized probability for the whole edit sequence.</span></p>
</div>
<div id="S4.SS2.p7" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">When </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p7.m1" class="ltx_Math" alttext="p=\diamondsuit" display="inline"><mrow><mi>p</mi><mo>=</mo><mi mathvariant="normal">♢</mi></mrow></math><span class="ltx_text ltx_font_small">, we are generating a new name </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p7.m2" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small">. We use the same model, taking </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p7.m3" class="ltx_Math" alttext="\diamondsuit.n" display="inline"><mrow><mi mathvariant="normal">♢</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> to be the empty string (but with </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p7.m4" class="ltx_Math" alttext="\#_{\diamondsuit}" display="inline"><msub><mi mathvariant="normal">#</mi><mi mathvariant="normal">♢</mi></msub></math><span class="ltx_text ltx_font_small"> rather than </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p7.m5" class="ltx_Math" alttext="\#" display="inline"><mi mathvariant="normal">#</mi></math><span class="ltx_text ltx_font_small"> as the end-of-string symbol). This yields a feature-based unigram language model (whose character probabilities may differ from usual insertion probabilities because they see </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p7.m6" class="ltx_Math" alttext="\#_{\diamondsuit}" display="inline"><msub><mi mathvariant="normal">#</mi><mi mathvariant="normal">♢</mi></msub></math><span class="ltx_text ltx_font_small"> as the lookahead character).</span></p>
</div>
<div id="S4.SS2.p8" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold ltx_font_small">Pragmatics.</span><span class="ltx_text ltx_font_small"> We can optionally make the model more sophisticated. Authors tend to </span><span class="ltx_text ltx_font_italic ltx_font_small">avoid</span><span class="ltx_text ltx_font_small"> names </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p8.m1" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> that readers would misinterpret (given the previously generated names). The edit model thinks that </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p8.m2" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits_{\bm{\theta}}(\textsf{\small CIA}\mid\diamondsuit)" display="inline"><mrow><msub><mo>Pr</mo><mi>𝜽</mi></msub><mrow><mo>(</mo><mtext mathsize="small" stretchy="false">𝖢𝖨𝖠</mtext><mo>∣</mo><mi mathvariant="normal">♢</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> is relatively high (because </span><span class="ltx_text ltx_font_sansserif ltx_font_small">CIA</span><span class="ltx_text ltx_font_small"> is a short string) and so is </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p8.m3" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits_{\bm{\theta}}(\textsf{\small CIA}\mid\textsf{\small&#10;Chuck%&#10;'s Ice Art})" display="inline"><mrow><msub><mo>Pr</mo><mi>𝜽</mi></msub><mrow><mo>(</mo><mtext mathsize="small" stretchy="false">𝖢𝖨𝖠</mtext><mo>∣</mo><mtext mathsize="small" mathvariant="sans-serif" stretchy="false">Chuck’s Ice Art</mtext><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small">. But in fact, if </span><span class="ltx_text ltx_font_sansserif ltx_font_small">CIA</span><span class="ltx_text ltx_font_small"> has already been frequently used to refer to the Central Intelligence Agency, then an author is unlikely to use it for a different entity.</span></p>
</div>
<div id="S4.SS2.p9" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">To model this pragmatic effect, we multiply our definition of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m1" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits_{\bm{\theta}}(x.n\mid p.n)" display="inline"><mrow><msub><mo>Pr</mo><mi>𝜽</mi></msub><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>n</mi><mo>∣</mo><mi>p</mi><mo>.</mo><mi>n</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> by an extra factor </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m2" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits(x.e\mid x)^{\gamma}" display="inline"><mrow><mo>Pr</mo><msup><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>e</mi><mo>∣</mo><mi>x</mi><mo>)</mo></mrow><mi>γ</mi></msup></mrow></math><span class="ltx_text ltx_font_small">, where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m3" class="ltx_Math" alttext="\gamma\geq 0" display="inline"><mrow><mi>γ</mi><mo>≥</mo><mn>0</mn></mrow></math><span class="ltx_text ltx_font_small"> is the effect strength.</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">5</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">5</sup><span class="ltx_text ltx_font_small">Currently we omit the step of renormalizing this deficient model. Our training procedure also ignores the extra factor.</span></span></span></span><span class="ltx_text ltx_font_small"> Here </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m4" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits(x.e\mid x)" display="inline"><mrow><mo>Pr</mo><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>e</mi><mo>∣</mo><mi>x</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> is the probability that a reader correctly identifies the entity </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m5" class="ltx_Math" alttext="x.e" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>e</mi></mrow></math><span class="ltx_text ltx_font_small">. We take this to be the probability that a reader who knows our sub-models would guess some parent having the correct entity (or </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m6" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small"> if </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m7" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> is a first mention): </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m8" class="ltx_Math" alttext="\sum_{p^{\prime}:p^{\prime}.e=x.e}w(p^{\prime},x)/\sum_{p^{\prime}}w(p^{\prime%&#10;},x)" display="inline"><mrow><msub><mo largeop="true" symmetric="true">∑</mo><mrow><msup><mi>p</mi><mo>′</mo></msup><mo>:</mo><msup><mi>p</mi><mo>′</mo></msup><mo>.</mo><mi>e</mi><mo>=</mo><mi>x</mi><mo>.</mo><mi>e</mi></mrow></msub><mrow><mrow><mi>w</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><msup><mi>p</mi><mo>′</mo></msup><mo>,</mo><mi>x</mi></mrow><mo>)</mo></mrow></mrow><mo>/</mo><mrow><msub><mo largeop="true" symmetric="true">∑</mo><msup><mi>p</mi><mo>′</mo></msup></msub><mrow><mi>w</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><msup><mi>p</mi><mo>′</mo></msup><mo>,</mo><mi>x</mi></mrow><mo>)</mo></mrow></mrow></mrow></mrow></mrow></math><span class="ltx_text ltx_font_small">.
Here </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m9" class="ltx_Math" alttext="p^{\prime}" display="inline"><msup><mi>p</mi><mo>′</mo></msup></math><span class="ltx_text ltx_font_small"> ranges over mentions (including </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m10" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small">) that precede </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m11" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> in the ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m12" class="ltx_Math" alttext="\bm{i}" display="inline"><mi>𝒊</mi></math><span class="ltx_text ltx_font_small">, and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m13" class="ltx_Math" alttext="w(p^{\prime},x)" display="inline"><mrow><mi>w</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><msup><mi>p</mi><mo>′</mo></msup><mo>,</mo><mi>x</mi></mrow><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small">—defined later in sec. </span><a href="#S5.SS3" title="5.3 Resampling the phylogeny p ‣ 5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.3</span></a><span class="ltx_text ltx_font_small">—is proportional to the posterior probability that </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m14" class="ltx_Math" alttext="x.p=p^{\prime}" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mrow><mi>p</mi><mo>=</mo><msup><mi>p</mi><mo>′</mo></msup></mrow></mrow></math><span class="ltx_text ltx_font_small">, given </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]really also given all the rest of the state of the sampler. Also, for footnote, could consider guess of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m15" class="ltx_Math" alttext="p^{\prime}.z" display="inline"><mrow><msup><mi>p</mi><mo>′</mo></msup><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small"> name </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m16" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> and topic </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m17" class="ltx_Math" alttext="x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small">.</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">6</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">6</sup><span class="ltx_text ltx_font_small">Better, one could integrate over the reader’s </span><span class="ltx_text ltx_font_italic ltx_font_small">guess</span><span class="ltx_text ltx_font_small"> of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S4.SS2.p9.m18" class="ltx_Math" alttext="x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small">.</span></span></span></span><span class="ltx_text ltx_font_small"></span></p>
</div>
</div>
</div>
<div id="S5" class="ltx_section">
<h2 class="ltx_title ltx_font_small ltx_title_section"><span class="ltx_tag ltx_tag_section">5 </span>Inference by Block Gibbs Sampling</h2>

<div id="S5.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">We use a block Gibbs sampler, which from an initial state </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.p1.m1" class="ltx_Math" alttext="(\bm{p}_{0},\bm{i}_{0},\bm{z}_{0})" display="inline"><mrow><mo>(</mo><mrow><msub><mi>𝒑</mi><mn>0</mn></msub><mo>,</mo><msub><mi>𝒊</mi><mn>0</mn></msub><mo>,</mo><msub><mi>𝒛</mi><mn>0</mn></msub></mrow><mo>)</mo></mrow></math><span class="ltx_text ltx_font_small"> repeats these steps:</span></p>
<ol id="I3" class="ltx_enumerate">[nosep]

<li id="I3.i1" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">1.</span></span> 
<div id="I3.i1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Sample the ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I3.i1.p1.m1" class="ltx_Math" alttext="\bm{i}" display="inline"><mi>𝒊</mi></math><span class="ltx_text ltx_font_small"> from its conditional distribution given all other variables.</span></p>
</div></li>
<li id="I3.i2" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">2.</span></span> 
<div id="I3.i2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Sample the topic vector </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I3.i2.p1.m1" class="ltx_Math" alttext="\bm{z}" display="inline"><mi>𝒛</mi></math><span class="ltx_text ltx_font_small"> likewise.</span></p>
</div></li>
<li id="I3.i3" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">3.</span></span> 
<div id="I3.i3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Sample the phylogeny </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I3.i3.p1.m1" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small"> likewise.</span></p>
</div></li>
<li id="I3.i4" class="ltx_item" style="list-style-type:none;"><span class="ltx_tag ltx_tag_enumerate"><span class="ltx_text ltx_font_small">4.</span></span> 
<div id="I3.i4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Output the current sample </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="I3.i4.p1.m1" class="ltx_Math" alttext="s_{t}=(\bm{p},\bm{i},\bm{z})" display="inline"><mrow><msub><mi>s</mi><mi>t</mi></msub><mo>=</mo><mrow><mo>(</mo><mrow><mi>𝒑</mi><mo>,</mo><mi>𝒊</mi><mo>,</mo><mi>𝒛</mi></mrow><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small">.</span></p>
</div></li>
</ol>
</div>
<div id="S5.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">It is difficult to draw exact samples at steps </span><a href="#I3.i1" title="1. ‣ 5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a><span class="ltx_text ltx_font_small"> and
</span><a href="#I3.i2" title="2. ‣ 5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a><span class="ltx_text ltx_font_small">. Thus, we sample </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.p2.m1" class="ltx_Math" alttext="\bm{i}" display="inline"><mi>𝒊</mi></math><span class="ltx_text ltx_font_small"> or </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.p2.m2" class="ltx_Math" alttext="\bm{z}" display="inline"><mi>𝒛</mi></math><span class="ltx_text ltx_font_small"> from a
simpler proposal distribution, but correct the discrepancy using the
Independent Metropolis-Hastings (IMH) strategy: with an appropriate probability, reject the proposed new value and instead use another copy of the current value </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S5.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">5.1 </span>Resampling the ordering <math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.m1" class="ltx_Math" alttext="\bm{i}" display="inline"><mi mathsize="normal" stretchy="false">𝒊</mi></math></h3>

<div id="S5.SS1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">We resample the ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p1.m1" class="ltx_Math" alttext="\bm{i}" display="inline"><mi>𝒊</mi></math><span class="ltx_text ltx_font_small"> of the mentions </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p1.m2" class="ltx_Math" alttext="\bm{x}" display="inline"><mi>𝒙</mi></math><span class="ltx_text ltx_font_small">,
conditioned on the other variables. The current phylogeny </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p1.m3" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small">
already defines a partial order on </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p1.m4" class="ltx_Math" alttext="\bm{x}" display="inline"><mi>𝒙</mi></math><span class="ltx_text ltx_font_small">, since each parent must
precede its children. For instance, phylogeny (a) below requires
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p1.m5" class="ltx_Math" alttext="\diamondsuit\prec x" display="inline"><mrow><mi mathvariant="normal">♢</mi><mo>≺</mo><mi>x</mi></mrow></math><span class="ltx_text ltx_font_small"> and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p1.m6" class="ltx_Math" alttext="\diamondsuit\prec y" display="inline"><mrow><mi mathvariant="normal">♢</mi><mo>≺</mo><mi>y</mi></mrow></math><span class="ltx_text ltx_font_small">. This partial order
is compatible with 2 total orderings, </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p1.m7" class="ltx_Math" alttext="\diamondsuit\prec x\prec y" display="inline"><mrow><mi mathvariant="normal">♢</mi><mo>≺</mo><mi>x</mi><mo>≺</mo><mi>y</mi></mrow></math><span class="ltx_text ltx_font_small">
and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p1.m8" class="ltx_Math" alttext="\diamondsuit\prec y\prec x" display="inline"><mrow><mi mathvariant="normal">♢</mi><mo>≺</mo><mi>y</mi><mo>≺</mo><mi>x</mi></mrow></math><span class="ltx_text ltx_font_small">. By contrast, phylogeny (b)
requires the total ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p1.m9" class="ltx_Math" alttext="\diamondsuit\prec x\prec y" display="inline"><mrow><mi mathvariant="normal">♢</mi><mo>≺</mo><mi>x</mi><mo>≺</mo><mi>y</mi></mrow></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S5.F2" class="ltx_figure">
<p class="ltx_p"><span class="ltx_text ltx_font_small">
<span class="ltx_ERROR undefined ltx_centering ltx_centering ltx_centering">{subfigure}</span>[b]0.3
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xml:id="S5.F2.pic1" class="ltx_centering ltx_centering ltx_centering" fragid="S5.F2.pic1" imagesrc="P14-1073/image002.png" imagewidth="1779" imageheight="87" imagedepth="65" width="50" height="20" viewBox="-5 -10 45 10" overflow="visible"><g transform="translate(0,0)"><g transform="scale(1 -1)"><g transform="scale(1 -1) translate(-5,-10)"><foreignObject width="50" height="20"><svg height="1" version="1.1" viewBox="0 0 1 1" width="1"><g transform="matrix(1 0 0 -1 0 1)"><g><g stroke="#000000"><g fill="#000000"><g stroke-width="0.4pt"><g><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.F2.pic1.m1" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathsize="normal" mathvariant="normal" stretchy="false">♢</mi></math><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.F2.pic1.m2" class="ltx_Math" alttext="x" display="inline"><mi mathsize="normal" stretchy="false">x</mi></math><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.F2.pic1.m3" class="ltx_Math" alttext="y" display="inline"><mi mathsize="normal" stretchy="false">y</mi></math></g></g></g></g></g></g></svg></foreignObject></g><g transform="scale(1 -1) translate(-5,-10)"><foreignObject width="50" height="20"><span xmlns="http://www.w3.org/1999/xhtml" class="ltx_ERROR undefined">\Tree</span></foreignObject></g></g></g></svg>

<div class="ltx_caption ltx_centering ltx_centering ltx_centering"><span class="ltx_tag ltx_tag_text">Figure 1: </span></div>

 <span class="ltx_ERROR undefined ltx_centering ltx_centering">{subfigure}</span>[b]0.3
<svg xmlns="http://www.w3.org/2000/svg" version="1.1" xml:id="S5.F2.pic2" class="ltx_centering ltx_centering" fragid="S5.F2.pic2" imagesrc="P14-1073/image001.png" imagewidth="1756" imageheight="140" imagedepth="119" width="50" height="20" viewBox="-5 -10 45 10" overflow="visible"><g transform="translate(0,0)"><g transform="scale(1 -1)"><g transform="scale(1 -1) translate(-5,-10)"><foreignObject width="50" height="20"><svg height="1" version="1.1" viewBox="0 0 1 1" width="1"><g transform="matrix(1 0 0 -1 0 1)"><g><g stroke="#000000"><g fill="#000000"><g stroke-width="0.4pt"><g><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.F2.pic2.m1" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathsize="normal" mathvariant="normal" stretchy="false">♢</mi></math><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.F2.pic2.m2" class="ltx_Math" alttext="x" display="inline"><mi mathsize="normal" stretchy="false">x</mi></math><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.F2.pic2.m3" class="ltx_Math" alttext="y" display="inline"><mi mathsize="normal" stretchy="false">y</mi></math></g></g></g></g></g></g></svg></foreignObject></g><g transform="scale(1 -1) translate(-5,-10)"><foreignObject width="50" height="20"><span xmlns="http://www.w3.org/1999/xhtml" class="ltx_ERROR undefined">\Tree</span></foreignObject></g></g></g></svg>

<div class="ltx_caption ltx_centering ltx_centering"><span class="ltx_tag ltx_tag_text">Figure 2: </span></div>

</span><span class="ltx_text ltx_font_small"></span></p>
</div>
<div id="S5.SS1.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">We first sample an ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p2.m1" class="ltx_Math" alttext="\bm{i}_{\diamondsuit}" display="inline"><msub><mi>𝒊</mi><mi mathvariant="normal">♢</mi></msub></math><span class="ltx_text ltx_font_small"> (the ordering of mentions with parent </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p2.m2" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small">, i.e. all mentions) </span><span class="ltx_text ltx_font_italic ltx_font_small">uniformly</span><span class="ltx_text ltx_font_small"> at random from the set of orderings compatible with the current </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p2.m3" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small">. (We provide details about this procedure in Appendix </span><a href="#A1" title="Appendix A Sampling orderings uniformly at random conditioned on a phylogeny ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">A</span></a><span class="ltx_text ltx_font_small">.)</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">7</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">7</sup><span class="ltx_text ltx_font_small">The full version of this paper is available at </span><a href="http://cs.jhu.edu/~noa/publications/phylo-acl-14.pdf" title="" class="ltx_ref ltx_url"><span class="ltx_text ltx_font_typewriter ltx_font_small">http://cs.jhu.edu/~noa/publications/phylo-acl-14.pdf</span></a></span></span></span><span class="ltx_text ltx_font_small"> However, such orderings
are not in fact equiprobable given the other variables—some
orderings better explain why that phylogeny was chosen in the first
place, according to our competitive parent selection model
(§</span><a href="#S4.SS1" title="4.1 Sub-model for parent selection ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.1</span></a><span class="ltx_text ltx_font_small">). To correct for this bias using IMH,
we accept the proposed ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p2.m4" class="ltx_Math" alttext="\bm{i}_{\diamondsuit}" display="inline"><msub><mi>𝒊</mi><mi mathvariant="normal">♢</mi></msub></math><span class="ltx_text ltx_font_small"> with probability</span></p>
<table id="A2.EGx2" class="ltx_equationgroup ltx_eqn_align">

<tr id="S5.E4" class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_td ltx_align_right"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.E4.m1" class="ltx_Math" alttext="\displaystyle a=\min\left(1,\frac{\mathop{\rm Pr}\nolimits(\bm{p},\bm{i_{%&#10;\diamondsuit}},\bm{z},\bm{x}\mid\bm{\theta},\bm{\phi})}{\mathop{\rm Pr}%&#10;\nolimits(\bm{p},\bm{i},\&gt;\&gt;\bm{z},\bm{x}\mid\bm{\theta},\bm{\phi})}\right)" display="inline"><mrow><mi>a</mi><mo>=</mo><mrow><mo movablelimits="false">min</mo><mo>⁡</mo><mrow><mo>(</mo><mrow><mn>1</mn><mo>,</mo><mstyle displaystyle="true"><mfrac><mrow><mo>Pr</mo><mrow><mo>(</mo><mi>𝒑</mi><mo>,</mo><msub><mi>𝒊</mi><mi mathvariant="bold">♢</mi></msub><mo>,</mo><mi>𝒛</mi><mo>,</mo><mi>𝒙</mi><mo>∣</mo><mi>𝜽</mi><mo>,</mo><mi mathvariant="bold-italic">ϕ</mi><mo>)</mo></mrow></mrow><mrow><mo>Pr</mo><mrow><mo>(</mo><mi>𝒑</mi><mo>,</mo><mi>𝒊</mi><mo rspace="6.9pt">,</mo><mi>𝒛</mi><mo>,</mo><mi>𝒙</mi><mo>∣</mo><mi>𝜽</mi><mo>,</mo><mi mathvariant="bold-italic">ϕ</mi><mo>)</mo></mrow></mrow></mfrac></mstyle></mrow><mo>)</mo></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(4)</span></td></tr>
</table>
<p class="ltx_p"><span class="ltx_text ltx_font_small">where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p2.m5" class="ltx_Math" alttext="\bm{i}" display="inline"><mi>𝒊</mi></math><span class="ltx_text ltx_font_small"> is the current ordering. Otherwise we reject
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p2.m6" class="ltx_Math" alttext="\bm{i}_{\diamondsuit}" display="inline"><msub><mi>𝒊</mi><mi mathvariant="normal">♢</mi></msub></math><span class="ltx_text ltx_font_small"> and reuse </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS1.p2.m7" class="ltx_Math" alttext="\bm{i}" display="inline"><mi>𝒊</mi></math><span class="ltx_text ltx_font_small"> for the new sample.</span></p>
</div>
</div>
<div id="S5.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">5.2 </span>Resampling the topics <math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.m1" class="ltx_Math" alttext="\bm{z}" display="inline"><mi mathsize="normal" stretchy="false">𝒛</mi></math></h3>

<div id="S5.SS2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Each context word and each named entity is associated with a latent
topic. The topics of </span><span class="ltx_text ltx_font_italic ltx_font_small">context words</span><span class="ltx_text ltx_font_small"> are assumed exchangeable, and
so we resample them using Gibbs sampling </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">. </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]when and how often do you do this? do you use auxiliary data?</span></p>
</div>
<div id="S5.SS2.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Unfortunately, this is prohibitively expensive for the (non-exchangeable) topics of the </span><span class="ltx_text ltx_font_italic ltx_font_small">named mentions</span><span class="ltx_text ltx_font_small"> </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p2.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small">. A Gibbs sampler would have to choose a new value for </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p2.m2" class="ltx_Math" alttext="x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small"> with probability proportional to the resulting joint probability of the full sample. This probability is expensive to evaluate because changing </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p2.m3" class="ltx_Math" alttext="x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small"> will change the probability of </span><span class="ltx_text ltx_font_italic ltx_font_small">many</span><span class="ltx_text ltx_font_small"> edges in the current phylogeny </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p2.m4" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small">. (Equation (</span><a href="#S4.E1" title="(1) ‣ 4.1 Sub-model for parent selection ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a><span class="ltx_text ltx_font_small">) puts </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p2.m5" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> is in competition with other parents, so </span><span class="ltx_text ltx_font_italic ltx_font_small">every</span><span class="ltx_text ltx_font_small"> mention </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p2.m6" class="ltx_Math" alttext="y" display="inline"><mi>y</mi></math><span class="ltx_text ltx_font_small"> that follows </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p2.m7" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> must recompute how happy it is with its current parent </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p2.m8" class="ltx_Math" alttext="y.p" display="inline"><mrow><mi>y</mi><mo separator="true">.</mo><mi>p</mi></mrow></math><span class="ltx_text ltx_font_small">.)</span></p>
</div>
<div id="S5.SS2.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Rather than resampling one topic at a time, we resample </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p3.m1" class="ltx_Math" alttext="\bm{z}" display="inline"><mi>𝒛</mi></math><span class="ltx_text ltx_font_small"> as a block. We use a proposal distribution for which block sampling is efficient, and use IMH to correct the error in this proposal distribution.</span></p>
</div>
<div id="S5.SS2.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Our proposal distribution is an undirected graphical model whose random variables are the topics </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m1" class="ltx_Math" alttext="\bm{z}" display="inline"><mi>𝒛</mi></math><span class="ltx_text ltx_font_small"> and whose graph structure is given by the current phylogeny </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m2" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small">: </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]abuse of notation in referring to </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m3" class="ltx_Math" alttext="x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small"> here</span></p>
<table id="S5.E5" class="ltx_equation">

<tr class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_align_center"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.E5.m1" class="ltx_Math" alttext="Q(\bm{z})\;\propto\;\prod_{x\neq\diamondsuit}\Psi_{x}(x.z)\Psi_{x.p,x}(x.p.z,x%&#10;.z)" display="block"><mrow><mi>Q</mi><mrow><mo>(</mo><mi>𝒛</mi><mo rspace="5.3pt">)</mo></mrow><mo rspace="5.3pt">∝</mo><munder><mo largeop="true" movablelimits="false" symmetric="true">∏</mo><mrow><mi>x</mi><mo>≠</mo><mi mathvariant="normal">♢</mi></mrow></munder><msub><mi mathvariant="normal">Ψ</mi><mi>x</mi></msub><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>z</mi><mo>)</mo></mrow><msub><mi mathvariant="normal">Ψ</mi><mrow><mi>x</mi><mo separator="true">.</mo><mrow><mi>p</mi><mo>,</mo><mi>x</mi></mrow></mrow></msub><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>p</mi><mo>.</mo><mi>z</mi><mo>,</mo><mi>x</mi><mo>.</mo><mi>z</mi><mo>)</mo></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(5)</span></td></tr>
</table>
<p class="ltx_p"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m4" class="ltx_Math" alttext="Q(\bm{z})" display="inline"><mrow><mi>Q</mi><mo>⁢</mo><mrow><mo>(</mo><mi>𝒛</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> is an approximation to the posterior distribution over </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m5" class="ltx_Math" alttext="\bm{z}" display="inline"><mi>𝒛</mi></math><span class="ltx_text ltx_font_small">. As detailed below, a proposal can be sampled from </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m6" class="ltx_Math" alttext="Q(\bm{z})" display="inline"><mrow><mi>Q</mi><mo>⁢</mo><mrow><mo>(</mo><mi>𝒛</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> in time </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m7" class="ltx_Math" alttext="O(|\bm{z}|K^{2})" display="inline"><mrow><mi>O</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><mrow><mo fence="true">|</mo><mi>𝒛</mi><mo fence="true">|</mo></mrow><mo>⁢</mo><msup><mi>K</mi><mn>2</mn></msup></mrow><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m8" class="ltx_Math" alttext="K" display="inline"><mi>K</mi></math><span class="ltx_text ltx_font_small"> is the number of topics, because the only interactions among topics are along the edges of the tree </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m9" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small">. The unary factor </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m10" class="ltx_Math" alttext="\Psi_{x}" display="inline"><msub><mi mathvariant="normal">Ψ</mi><mi>x</mi></msub></math><span class="ltx_text ltx_font_small"> gives a weight for each possible value of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m11" class="ltx_Math" alttext="x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small">, and the binary factor </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m12" class="ltx_Math" alttext="\Psi_{x.p,x}" display="inline"><msub><mi mathvariant="normal">Ψ</mi><mrow><mi>x</mi><mo separator="true">.</mo><mrow><mi>p</mi><mo>,</mo><mi>x</mi></mrow></mrow></msub></math><span class="ltx_text ltx_font_small"> gives a weight for each possible value of the pair </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p4.m13" class="ltx_Math" alttext="(x.p.z,x.z)" display="inline"><mrow><mo>(</mo><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mrow><mi>z</mi><mo>,</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>z</mi></mrow><mo>)</mo></mrow></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S5.SS2.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">The </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p5.m1" class="ltx_Math" alttext="\Psi_{x}(x.z)" display="inline"><mrow><msub><mi mathvariant="normal">Ψ</mi><mi>x</mi></msub><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>z</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> factors in (</span><a href="#S5.E5" title="(5) ‣ 5.2 Resampling the topics z ‣ 5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a><span class="ltx_text ltx_font_small">) approximate the topic model’s prior distribution over </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p5.m2" class="ltx_Math" alttext="\bm{z}" display="inline"><mi>𝒛</mi></math><span class="ltx_text ltx_font_small">. </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p5.m3" class="ltx_Math" alttext="\Psi_{x}(x.z)" display="inline"><mrow><msub><mi mathvariant="normal">Ψ</mi><mi>x</mi></msub><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>z</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> is proportional to the probability that a Gibbs sampling step for an ordinary topic model would choose this value of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p5.m4" class="ltx_Math" alttext="x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small">. This depends on whether—in the current sample—</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p5.m5" class="ltx_Math" alttext="x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small"> is currently common in </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p5.m6" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small">’s document and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p5.m7" class="ltx_Math" alttext="x.t" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>t</mi></mrow></math><span class="ltx_text ltx_font_small"> is commonly generated by </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p5.m8" class="ltx_Math" alttext="x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small">. It ignores the fact that we will also be resampling the topics of the other mentions.</span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]cut a nice point here for space</span></p>
</div>
<div id="S5.SS2.p6" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">The </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p6.m1" class="ltx_Math" alttext="\Psi_{x.p,x}" display="inline"><msub><mi mathvariant="normal">Ψ</mi><mrow><mi>x</mi><mo separator="true">.</mo><mrow><mi>p</mi><mo>,</mo><mi>x</mi></mrow></mrow></msub></math><span class="ltx_text ltx_font_small"> factors in (</span><a href="#S5.E5" title="(5) ‣ 5.2 Resampling the topics z ‣ 5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a><span class="ltx_text ltx_font_small">) approximate </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p6.m2" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits(\bm{p}\mid\bm{z},\bm{i})" display="inline"><mrow><mo>Pr</mo><mrow><mo>(</mo><mi>𝒑</mi><mo>∣</mo><mi>𝒛</mi><mo>,</mo><mi>𝒊</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> (up to a constant factor), where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p6.m3" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small"> is the current phylogeny. Specifically, </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p6.m4" class="ltx_Math" alttext="\Psi_{x.p,x}" display="inline"><msub><mi mathvariant="normal">Ψ</mi><mrow><mi>x</mi><mo separator="true">.</mo><mrow><mi>p</mi><mo>,</mo><mi>x</mi></mrow></mrow></msub></math><span class="ltx_text ltx_font_small"> approximates the probability of a single edge. It ought to be given by (</span><a href="#S4.E1" title="(1) ‣ 4.1 Sub-model for parent selection ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a><span class="ltx_text ltx_font_small">), but we use only the numerator of (</span><a href="#S4.E1" title="(1) ‣ 4.1 Sub-model for parent selection ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a><span class="ltx_text ltx_font_small">), which avoids modeling the competition among parents.</span></p>
</div>
<div id="S5.SS2.p7" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">We sample from </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p7.m1" class="ltx_Math" alttext="Q" display="inline"><mi>Q</mi></math><span class="ltx_text ltx_font_small"> using standard methods, </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]can
we cite a section of Koller &amp; Friedman? similar to sampling from
a linear-chain CRF by running the backward algorithm followed by
forward sampling. Specifically, we run the sum-product algorithm from
the leaves up to the root </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p7.m2" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small">, at each node </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p7.m3" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> computing the following for each topic </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p7.m4" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math><span class="ltx_text ltx_font_small">:</span></p>
<table id="S5.Ex1" class="ltx_equation">

<tr class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_align_center"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.Ex1.m1" class="ltx_Math" alttext="\beta_{x}(z)\;\stackrel{\mbox{\tiny def}}{=}\;\Psi_{x}(z)\cdot\smashoperator[l%&#10;]{\prod_{y\in\text{children}(x)}}\sum_{z^{\prime}}\Psi_{x,y}(z,z^{\prime})%&#10;\cdot\beta_{y}(z^{\prime})" display="block"><mrow><mrow><msub><mi>β</mi><mi>x</mi></msub><mo>⁢</mo><mpadded width="+2.8pt"><mrow><mo>(</mo><mi>z</mi><mo>)</mo></mrow></mpadded></mrow><mpadded width="+2.8pt"><mover><mo movablelimits="false">=</mo><mtext mathsize="small" stretchy="false">def</mtext></mover></mpadded><mrow><mrow><mrow><msub><mi mathvariant="normal">Ψ</mi><mi>x</mi></msub><mo>⁢</mo><mrow><mo>(</mo><mi>z</mi><mo>)</mo></mrow></mrow><mo>⋅</mo><merror class="ltx_ERROR undefined undefined"><mtext>\smashoperator</mtext></merror></mrow><mo>⁢</mo><mrow><mo>[</mo><mi>l</mi><mo>]</mo></mrow><mo>⁢</mo><mrow><munder><mo largeop="true" movablelimits="false" symmetric="true">∏</mo><mrow><mi>y</mi><mo>∈</mo><mrow><mtext mathsize="small" stretchy="false">children</mtext><mo>⁢</mo><mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow></mrow></munder><mrow><munder><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><msup><mi>z</mi><mo>′</mo></msup></munder><mrow><mrow><mrow><msub><mi mathvariant="normal">Ψ</mi><mrow><mi>x</mi><mo>,</mo><mi>y</mi></mrow></msub><mo>⁢</mo><mrow><mo>(</mo><mrow><mi>z</mi><mo>,</mo><msup><mi>z</mi><mo>′</mo></msup></mrow><mo>)</mo></mrow></mrow><mo>⋅</mo><msub><mi>β</mi><mi>y</mi></msub></mrow><mo>⁢</mo><mrow><mo>(</mo><msup><mi>z</mi><mo>′</mo></msup><mo>)</mo></mrow></mrow></mrow></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/></tr>
</table>
<p class="ltx_p"><span class="ltx_text ltx_font_small">Then we sample from the root down to the leaves, first sampling
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p7.m5" class="ltx_Math" alttext="\diamondsuit.z" display="inline"><mrow><mi mathvariant="normal">♢</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small"> from </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p7.m6" class="ltx_Math" alttext="\beta_{\diamondsuit}" display="inline"><msub><mi>β</mi><mi mathvariant="normal">♢</mi></msub></math><span class="ltx_text ltx_font_small">, then at each </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p7.m7" class="ltx_Math" alttext="x\neq\diamondsuit" display="inline"><mrow><mi>x</mi><mo>≠</mo><mi mathvariant="normal">♢</mi></mrow></math><span class="ltx_text ltx_font_small"> sampling the topic </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p7.m8" class="ltx_Math" alttext="x.z" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>z</mi></mrow></math><span class="ltx_text ltx_font_small"> to be </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p7.m9" class="ltx_Math" alttext="z" display="inline"><mi>z</mi></math><span class="ltx_text ltx_font_small"> with probability
proportional to </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p7.m10" class="ltx_Math" alttext="\Psi_{x.p,x}(x.p.z,z)\cdot\beta_{x}(z)" display="inline"><mrow><msub><mi mathvariant="normal">Ψ</mi><mrow><mi>x</mi><mo separator="true">.</mo><mrow><mi>p</mi><mo>,</mo><mi>x</mi></mrow></mrow></msub><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>p</mi><mo>.</mo><mi>z</mi><mo>,</mo><mi>z</mi><mo>)</mo></mrow><mo>⋅</mo><msub><mi>β</mi><mi>x</mi></msub><mrow><mo>(</mo><mi>z</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S5.SS2.p8" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Again we use IMH to correct for the bias in </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p8.m1" class="ltx_Math" alttext="Q" display="inline"><mi>Q</mi></math><span class="ltx_text ltx_font_small">: we accept the
resulting proposal </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p8.m2" class="ltx_Math" alttext="\hat{\bm{z}}" display="inline"><mover accent="true"><mi>𝒛</mi><mo stretchy="false">^</mo></mover></math><span class="ltx_text ltx_font_small"> with probability</span></p>
<table id="S5.E6" class="ltx_equation">

<tr class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_align_center"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.E6.m1" class="ltx_Math" alttext="\min\left(1,\;\frac{\mathop{\rm Pr}\nolimits(\bm{p},\bm{i},\hat{\bm{z}},\bm{x}%&#10;\mid\bm{\theta},\bm{\phi})}{\mathop{\rm Pr}\nolimits(\bm{p},\bm{i},\bm{z},\bm{%&#10;x}\mid\bm{\theta},\bm{\phi})}\cdot\frac{Q(\bm{z})}{Q(\hat{\bm{z}})}\right)" display="block"><mrow><mo movablelimits="false">min</mo><mo>⁡</mo><mrow><mo>(</mo><mrow><mn>1</mn><mo separator="true">, </mo><mrow><mfrac><mrow><mo>Pr</mo><mrow><mo>(</mo><mi>𝒑</mi><mo>,</mo><mi>𝒊</mi><mo>,</mo><mover accent="true"><mi>𝒛</mi><mo stretchy="false">^</mo></mover><mo>,</mo><mi>𝒙</mi><mo>∣</mo><mi>𝜽</mi><mo>,</mo><mi mathvariant="bold-italic">ϕ</mi><mo>)</mo></mrow></mrow><mrow><mo>Pr</mo><mrow><mo>(</mo><mi>𝒑</mi><mo>,</mo><mi>𝒊</mi><mo>,</mo><mi>𝒛</mi><mo>,</mo><mi>𝒙</mi><mo>∣</mo><mi>𝜽</mi><mo>,</mo><mi mathvariant="bold-italic">ϕ</mi><mo>)</mo></mrow></mrow></mfrac><mo>⋅</mo><mfrac><mrow><mi>Q</mi><mo>⁢</mo><mrow><mo>(</mo><mi>𝒛</mi><mo>)</mo></mrow></mrow><mrow><mi>Q</mi><mo>⁢</mo><mrow><mo>(</mo><mover accent="true"><mi>𝒛</mi><mo stretchy="false">^</mo></mover><mo>)</mo></mrow></mrow></mfrac></mrow></mrow><mo>)</mo></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(6)</span></td></tr>
</table>
<p class="ltx_p"><span class="ltx_text ltx_font_small">While </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p8.m3" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits(\bm{p},\bm{i},\hat{\bm{z}},\bm{x}\mid\bm{\theta},\bm{%&#10;\phi})" display="inline"><mrow><mo>Pr</mo><mrow><mo>(</mo><mi>𝒑</mi><mo>,</mo><mi>𝒊</mi><mo>,</mo><mover accent="true"><mi>𝒛</mi><mo stretchy="false">^</mo></mover><mo>,</mo><mi>𝒙</mi><mo>∣</mo><mi>𝜽</mi><mo>,</mo><mi mathvariant="bold-italic">ϕ</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small">
might seem slow to compute because it contains many factors (</span><a href="#S4.E1" title="(1) ‣ 4.1 Sub-model for parent selection ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a><span class="ltx_text ltx_font_small">) with different denominators </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p8.m4" class="ltx_Math" alttext="Z(x)" display="inline"><mrow><mi>Z</mi><mo>⁢</mo><mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small">, one can share work by visiting the mentions </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p8.m5" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> in their order </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p8.m6" class="ltx_Math" alttext="\bm{i}" display="inline"><mi>𝒊</mi></math><span class="ltx_text ltx_font_small">. Most summands in </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p8.m7" class="ltx_Math" alttext="Z(x)" display="inline"><mrow><mi>Z</mi><mo>⁢</mo><mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> were already included in </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p8.m8" class="ltx_Math" alttext="Z(x^{\prime})" display="inline"><mrow><mi>Z</mi><mo>⁢</mo><mrow><mo>(</mo><msup><mi>x</mi><mo>′</mo></msup><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small">, where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p8.m9" class="ltx_Math" alttext="x^{\prime}" display="inline"><msup><mi>x</mi><mo>′</mo></msup></math><span class="ltx_text ltx_font_small"> is the latest previous mention having the same attributes as </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS2.p8.m10" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> (e.g., same topic).</span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]Nick, I assume you use this trick?</span></p>
</div><span class="ltx_ERROR undefined">\todo</span>
<div id="S5.SS2.p9" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]cut out a speedup here for space</span></p>
</div>
</div>
<div id="S5.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">5.3 </span>Resampling the phylogeny <math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.m1" class="ltx_Math" alttext="\bm{p}" display="inline"><mi mathsize="normal" stretchy="false">𝒑</mi></math></h3>

<div id="S5.SS3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">It is easy to resample the phylogeny. For each </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p1.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small">, we must choose a parent </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p1.m2" class="ltx_Math" alttext="x.p" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi></mrow></math><span class="ltx_text ltx_font_small"> from among the possible parents </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p1.m3" class="ltx_Math" alttext="p" display="inline"><mi>p</mi></math><span class="ltx_text ltx_font_small"> (having </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p1.m4" class="ltx_Math" alttext="p.i&lt;x.i" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mrow><mi>i</mi><mo>&lt;</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>i</mi></mrow></math><span class="ltx_text ltx_font_small"> and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p1.m5" class="ltx_Math" alttext="p.e.t=x.e.t" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mi>e</mi><mo separator="true">.</mo><mrow><mi>t</mi><mo>=</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>e</mi><mo separator="true">.</mo><mi>t</mi></mrow></math><span class="ltx_text ltx_font_small">). Since the ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p1.m6" class="ltx_Math" alttext="\bm{i}" display="inline"><mi>𝒊</mi></math><span class="ltx_text ltx_font_small"> prevents cycles, the resulting phylogeny </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p1.m7" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small"> is indeed a tree.</span></p>
</div>
<div id="S5.SS3.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Given the topics </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p2.m1" class="ltx_Math" alttext="\bm{z}" display="inline"><mi>𝒛</mi></math><span class="ltx_text ltx_font_small">, the ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p2.m2" class="ltx_Math" alttext="\bm{i}" display="inline"><mi>𝒊</mi></math><span class="ltx_text ltx_font_small">, and the observed
names, we choose an </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p2.m3" class="ltx_Math" alttext="x.p" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi></mrow></math><span class="ltx_text ltx_font_small"> value according to its posterior probability. This is proportional to </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p2.m4" class="ltx_Math" alttext="w(x.p,x)\;\stackrel{\mbox{\tiny def}}{=}\;\mathop{\rm Pr}\nolimits_{\bm{\phi}}%&#10;(x.p\mid x)\cdot\mathop{\rm Pr}\nolimits_{\bm{\theta}}(x.n\mid x.p.n)" display="inline"><mrow><mi>w</mi><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>p</mi><mo>,</mo><mi>x</mi><mo rspace="5.3pt">)</mo></mrow><mpadded width="+2.8pt"><mover><mo movablelimits="false">=</mo><mtext mathsize="small" stretchy="false">def</mtext></mover></mpadded><msub><mo>Pr</mo><mi mathvariant="bold-italic">ϕ</mi></msub><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>p</mi><mo>∣</mo><mi>x</mi><mo>)</mo></mrow><mo>⋅</mo><msub><mo>Pr</mo><mi>𝜽</mi></msub><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>n</mi><mo>∣</mo><mi>x</mi><mo>.</mo><mi>p</mi><mo>.</mo><mi>n</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small">, independent of any other mention’s choice of parent. The two factors here are given by (</span><a href="#S4.E1" title="(1) ‣ 4.1 Sub-model for parent selection ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a><span class="ltx_text ltx_font_small">) and (</span><a href="#S4.E2" title="(2) ‣ 4.2 Sub-model for name mutation ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a><span class="ltx_text ltx_font_small">) respectively. As in the previous section, the denominators </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p2.m5" class="ltx_Math" alttext="Z(x)" display="inline"><mrow><mi>Z</mi><mo>⁢</mo><mrow><mo>(</mo><mi>x</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> in the </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p2.m6" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits(x.p\mid x)" display="inline"><mrow><mo>Pr</mo><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>p</mi><mo>∣</mo><mi>x</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> factors can be computed efficiently with shared work.</span></p>
</div>
<div id="S5.SS3.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">With the pragmatic model (section </span><a href="#S4.SS2" title="4.2 Sub-model for name mutation ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.2</span></a><span class="ltx_text ltx_font_small">), the parent choices are no longer independent; then the samples of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS3.p3.m1" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small"> should be corrected by IMH as usual.</span></p>
</div>
</div>
<div id="S5.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">5.4 </span>Initializing the sampler</h3>

<div id="S5.SS4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">The initial sampler state </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m1" class="ltx_Math" alttext="(\bm{z}_{0},\bm{p}_{0},\bm{i}_{0})" display="inline"><mrow><mo>(</mo><mrow><msub><mi>𝒛</mi><mn>0</mn></msub><mo>,</mo><msub><mi>𝒑</mi><mn>0</mn></msub><mo>,</mo><msub><mi>𝒊</mi><mn>0</mn></msub></mrow><mo>)</mo></mrow></math><span class="ltx_text ltx_font_small"> is obtained as follows. </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]nick, a LaTeXnote: you can use inline lists with itemize* if you want to compactify like this (we’re already using enumitem package)
(1) We fix topics </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m2" class="ltx_Math" alttext="\bm{z}_{0}" display="inline"><msub><mi>𝒛</mi><mn>0</mn></msub></math><span class="ltx_text ltx_font_small"> via collapsed Gibbs sampling </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">. The sampler is run for 1000 iterations, and the final sampler state is taken to be </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m3" class="ltx_Math" alttext="\bm{z}_{0}" display="inline"><msub><mi>𝒛</mi><mn>0</mn></msub></math><span class="ltx_text ltx_font_small">. This process treats all topics as exchangeable, including those associated with named entities.</span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]Well, maybe they’re exchangeable if you’re ignoring the names at this step and just treating the types as words. Are you?
(2) Given the topic assignment </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m4" class="ltx_Math" alttext="\bm{z}_{0}" display="inline"><msub><mi>𝒛</mi><mn>0</mn></msub></math><span class="ltx_text ltx_font_small">, initialize </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m5" class="ltx_Math" alttext="\bm{p}_{0}" display="inline"><msub><mi>𝒑</mi><mn>0</mn></msub></math><span class="ltx_text ltx_font_small"> to the phylogeny rooted at </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m6" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small"> that maximizes </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m7" class="ltx_Math" alttext="\sum_{x}\log w(x.p,x)" display="inline"><mrow><msub><mo largeop="true" symmetric="true">∑</mo><mi>x</mi></msub><mi>log</mi><mi>w</mi><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>p</mi><mo>,</mo><mi>x</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small">. This is a maximum rooted directed spanning tree problem that can be solved in time </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m8" class="ltx_Math" alttext="O(n^{2})" display="inline"><mrow><mi>O</mi><mo>⁢</mo><mrow><mo>(</mo><msup><mi>n</mi><mn>2</mn></msup><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">. The weight </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m9" class="ltx_Math" alttext="w(x.p,x)" display="inline"><mrow><mi>w</mi><mrow><mo>(</mo><mi>x</mi><mo>.</mo><mi>p</mi><mo>,</mo><mi>x</mi><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> is defined as in section </span><a href="#S5.SS3" title="5.3 Resampling the phylogeny p ‣ 5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.3</span></a><span class="ltx_text ltx_font_small">—except that since we do not yet have an ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m10" class="ltx_Math" alttext="\bm{i}" display="inline"><mi>𝒊</mi></math><span class="ltx_text ltx_font_small">, we do not restrict the possible values of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m11" class="ltx_Math" alttext="x.p" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>p</mi></mrow></math><span class="ltx_text ltx_font_small"> to mentions </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m12" class="ltx_Math" alttext="p" display="inline"><mi>p</mi></math><span class="ltx_text ltx_font_small"> with </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m13" class="ltx_Math" alttext="p.i&lt;x.p.i" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mrow><mi>i</mi><mo>&lt;</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>p</mi><mo separator="true">.</mo><mi>i</mi></mrow></math><span class="ltx_text ltx_font_small">.
(3) Given </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m14" class="ltx_Math" alttext="\bm{p}_{0}" display="inline"><msub><mi>𝒑</mi><mn>0</mn></msub></math><span class="ltx_text ltx_font_small">, sample an ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S5.SS4.p1.m15" class="ltx_Math" alttext="\bm{i}_{0}" display="inline"><msub><mi>𝒊</mi><mn>0</mn></msub></math><span class="ltx_text ltx_font_small"> using the procedure described in §</span><a href="#S5.SS1" title="5.1 Resampling the ordering i ‣ 5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.1</span></a><span class="ltx_text ltx_font_small">.</span></p>
</div>
</div>
</div>
<div id="S6" class="ltx_section">
<h2 class="ltx_title ltx_font_small ltx_title_section"><span class="ltx_tag ltx_tag_section">6 </span>Parameter Estimation</h2>

<div id="S6.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Evaluating the likelihood and its partial derivatives with respect to the parameters of the model requires marginalizing over our latent variables. As this marginalization is intractable, we resort to Monte Carlo EM
procedure </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small"> which iterates the following two steps:</span></p>
</div>
<div id="S6.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold ltx_font_small">E-step:</span><span class="ltx_text ltx_font_small"> Collect samples by MCMC simulation as
in §</span><a href="#S5" title="5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5</span></a><span class="ltx_text ltx_font_small">,
given current model parameters
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p2.m1" class="ltx_Math" alttext="\bm{\theta}" display="inline"><mi>𝜽</mi></math><span class="ltx_text ltx_font_small"> and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p2.m2" class="ltx_Math" alttext="\bm{\phi}" display="inline"><mi mathvariant="bold-italic">ϕ</mi></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S6.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold ltx_font_small">M-step:</span><span class="ltx_text ltx_font_small"> Improve </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p3.m1" class="ltx_Math" alttext="\bm{\theta}" display="inline"><mi>𝜽</mi></math><span class="ltx_text ltx_font_small"> and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p3.m2" class="ltx_Math" alttext="\bm{\phi}" display="inline"><mi mathvariant="bold-italic">ϕ</mi></math><span class="ltx_text ltx_font_small"> to increase</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">8</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">8</sup><span class="ltx_text ltx_font_small">We actually do MAP-EM, which augments (</span><a href="#S6.E7" title="(7) ‣ 6 Parameter Estimation ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a><span class="ltx_text ltx_font_small">) by adding the log-likelihoods of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p3.m3" class="ltx_Math" alttext="\theta" display="inline"><mi>θ</mi></math><span class="ltx_text ltx_font_small"> and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p3.m4" class="ltx_Math" alttext="\phi" display="inline"><mi>ϕ</mi></math><span class="ltx_text ltx_font_small"> under a Gaussian prior.</span></span></span></span><span class="ltx_text ltx_font_small"></span></p>
<table id="A2.EGx3" class="ltx_equationgroup ltx_eqn_align">

<tr id="S6.E7" class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_td ltx_align_right"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.E7.m1" class="ltx_Math" alttext="\displaystyle\mathcal{L}\;\stackrel{\mbox{\tiny def}}{=}\;\frac{1}{S}\sum_{s=1%&#10;}^{S}\log\mathop{\rm Pr}\nolimits_{\bm{\theta},\bm{\phi}}(\bm{x},\bm{p}_{s},%&#10;\bm{i}_{s},\bm{z}_{s})" display="inline"><mrow><mpadded width="+2.8pt"><mi class="ltx_font_mathcaligraphic">ℒ</mi></mpadded><mpadded width="+2.8pt"><mover><mo movablelimits="false">=</mo><mtext mathsize="small" stretchy="false">def</mtext></mover></mpadded><mrow><mstyle displaystyle="true"><mfrac><mn>1</mn><mi>S</mi></mfrac></mstyle><mo>⁢</mo><mrow><mstyle displaystyle="true"><munderover><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><mrow><mi>s</mi><mo>=</mo><mn>1</mn></mrow><mi>S</mi></munderover></mstyle><mrow><mi>log</mi><mo>⁢</mo><mrow><msub><mo>Pr</mo><mrow><mi>𝜽</mi><mo>,</mo><mi mathvariant="bold-italic">ϕ</mi></mrow></msub><mrow><mo>(</mo><mrow><mi>𝒙</mi><mo>,</mo><msub><mi>𝒑</mi><mi>s</mi></msub><mo>,</mo><msub><mi>𝒊</mi><mi>s</mi></msub><mo>,</mo><msub><mi>𝒛</mi><mi>s</mi></msub></mrow><mo>)</mo></mrow></mrow></mrow></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(7)</span></td></tr>
</table>
</div>
<div id="S6.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">It is not necessary to locally maximize </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p4.m1" class="ltx_Math" alttext="\mathcal{L}" display="inline"><mi class="ltx_font_mathcaligraphic">ℒ</mi></math><span class="ltx_text ltx_font_small"> at each M-step, merely to
improve it if it is not already at a local maximum </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">. We improve it by a single update: at the </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p4.m2" class="ltx_Math" alttext="t" display="inline"><mi>t</mi></math><span class="ltx_text ltx_font_small">th M-step, we update our parameters to </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p4.m3" class="ltx_Math" alttext="\Phi_{t}=(\bm{\theta}_{t},\bm{\phi}_{t})" display="inline"><mrow><msub><mi mathvariant="normal">Φ</mi><mi>t</mi></msub><mo>=</mo><mrow><mo>(</mo><mrow><msub><mi>𝜽</mi><mi>t</mi></msub><mo>,</mo><msub><mi mathvariant="bold-italic">ϕ</mi><mi>t</mi></msub></mrow><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"></span></p>
<table id="A2.EGx4" class="ltx_equationgroup ltx_eqn_align">

<tr id="S6.E8" class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_td ltx_align_right"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.E8.m1" class="ltx_Math" alttext="\displaystyle\Phi_{t}=\Phi_{t-1}+\varepsilon\Sigma_{t}\nabla_{\Phi}\mathcal{L}%&#10;(\bm{x},\Phi_{t-1})" display="inline"><mrow><msub><mi mathvariant="normal">Φ</mi><mi>t</mi></msub><mo>=</mo><mrow><msub><mi mathvariant="normal">Φ</mi><mrow><mi>t</mi><mo>-</mo><mn>1</mn></mrow></msub><mo>+</mo><mrow><mi>ε</mi><mo>⁢</mo><msub><mi mathvariant="normal">Σ</mi><mi>t</mi></msub><mo>⁢</mo><mrow><msub><mo>∇</mo><mi mathvariant="normal">Φ</mi></msub><mo>⁡</mo><mi class="ltx_font_mathcaligraphic">ℒ</mi></mrow><mo>⁢</mo><mrow><mo>(</mo><mrow><mi>𝒙</mi><mo>,</mo><msub><mi mathvariant="normal">Φ</mi><mrow><mi>t</mi><mo>-</mo><mn>1</mn></mrow></msub></mrow><mo>)</mo></mrow></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(8)</span></td></tr>
</table><span class="ltx_ERROR undefined">\todo</span>
<p class="ltx_p"><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p4.m4" class="ltx_Math" alttext="\Sigma_{t}" display="inline"><msub><mi mathvariant="normal">Σ</mi><mi>t</mi></msub></math><span class="ltx_text ltx_font_small"> looks too much like a summation; please change name. Also, should </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p4.m5" class="ltx_Math" alttext="\Sigma_{t}" display="inline"><msub><mi mathvariant="normal">Σ</mi><mi>t</mi></msub></math><span class="ltx_text ltx_font_small"> be described as a (diagonal) matrix?
where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p4.m6" class="ltx_Math" alttext="\varepsilon" display="inline"><mi>ε</mi></math><span class="ltx_text ltx_font_small"> is a fixed scaling term and </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p4.m7" class="ltx_Math" alttext="\Sigma_{t}" display="inline"><msub><mi mathvariant="normal">Σ</mi><mi>t</mi></msub></math><span class="ltx_text ltx_font_small"> is an adaptive
learning rate given by AdaGrad </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S6.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">We now describe how to compute the gradient </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m1" class="ltx_Math" alttext="\nabla_{\Phi}\mathcal{L}" display="inline"><mrow><msub><mo>∇</mo><mi mathvariant="normal">Φ</mi></msub><mo>⁡</mo><mi class="ltx_font_mathcaligraphic">ℒ</mi></mrow></math><span class="ltx_text ltx_font_small">.
The gradient with respect to the parent selection parameters </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m2" class="ltx_Math" alttext="\bm{\phi}" display="inline"><mi mathvariant="bold-italic">ϕ</mi></math><span class="ltx_text ltx_font_small"> is</span></p>
<table id="A2.EGx5" class="ltx_equationgroup ltx_eqn_align">

<tr id="S6.E9" class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_td ltx_align_right"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.E9.m1" class="ltx_Math" alttext="\displaystyle\sum\frac{1}{S}\left(\mathbf{f}(p,x)-\sum_{p^{\prime}}\mathop{\rm&#10;Pr%&#10;}\nolimits_{\bm{\phi}}(p^{\prime}\mid x)\mathbf{f}(p^{\prime},x)\right)" display="inline"><mrow><mstyle displaystyle="true"><mo largeop="true" movablelimits="false" symmetric="true">∑</mo></mstyle><mstyle displaystyle="true"><mfrac><mn>1</mn><mi>S</mi></mfrac></mstyle><mrow><mo>(</mo><mi>𝐟</mi><mrow><mo>(</mo><mi>p</mi><mo>,</mo><mi>x</mi><mo>)</mo></mrow><mo>-</mo><mstyle displaystyle="true"><munder><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><msup><mi>p</mi><mo>′</mo></msup></munder></mstyle><msub><mo>Pr</mo><mi mathvariant="bold-italic">ϕ</mi></msub><mrow><mo>(</mo><msup><mi>p</mi><mo>′</mo></msup><mo>∣</mo><mi>x</mi><mo>)</mo></mrow><mi>𝐟</mi><mrow><mo>(</mo><msup><mi>p</mi><mo>′</mo></msup><mo>,</mo><mi>x</mi><mo>)</mo></mrow><mo>)</mo></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(9)</span></td></tr>
</table>
<p class="ltx_p"><span class="ltx_text ltx_font_small">The outer summation ranges over all edges in the </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m3" class="ltx_Math" alttext="S" display="inline"><mi>S</mi></math><span class="ltx_text ltx_font_small"> samples. The other variables in (</span><a href="#S6.E9" title="(9) ‣ 6 Parameter Estimation ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">9</span></a><span class="ltx_text ltx_font_small">) are associated with the edge being summed over. That edge explains a mention </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m4" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> as a mutation of some parent </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m5" class="ltx_Math" alttext="p" display="inline"><mi>p</mi></math><span class="ltx_text ltx_font_small"> in the context of a particular sample </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m6" class="ltx_Math" alttext="(\bm{p}_{s},\bm{i}_{s},\bm{z}_{s})" display="inline"><mrow><mo>(</mo><mrow><msub><mi>𝒑</mi><mi>s</mi></msub><mo>,</mo><msub><mi>𝒊</mi><mi>s</mi></msub><mo>,</mo><msub><mi>𝒛</mi><mi>s</mi></msub></mrow><mo>)</mo></mrow></math><span class="ltx_text ltx_font_small">. The possible parents </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m7" class="ltx_Math" alttext="p^{\prime}" display="inline"><msup><mi>p</mi><mo>′</mo></msup></math><span class="ltx_text ltx_font_small"> range over </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m8" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small"> and the mentions that precede </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m9" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> according to the ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m10" class="ltx_Math" alttext="\bm{i}_{s}" display="inline"><msub><mi>𝒊</mi><mi>s</mi></msub></math><span class="ltx_text ltx_font_small">, while the features </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m11" class="ltx_Math" alttext="\bm{f}" display="inline"><mi>𝒇</mi></math><span class="ltx_text ltx_font_small"> and distribution </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m12" class="ltx_Math" alttext="\mathop{\rm Pr}\nolimits_{\bm{\phi}}" display="inline"><msub><mo>Pr</mo><mi mathvariant="bold-italic">ϕ</mi></msub></math><span class="ltx_text ltx_font_small"> depend on the topics </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p5.m13" class="ltx_Math" alttext="\bm{z}_{s}" display="inline"><msub><mi>𝒛</mi><mi>s</mi></msub></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S6.p6" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">As for the mutation parameters, let </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m1" class="ltx_Math" alttext="c_{p,x}" display="inline"><msub><mi>c</mi><mrow><mi>p</mi><mo>,</mo><mi>x</mi></mrow></msub></math><span class="ltx_text ltx_font_small"> be the fraction of samples in which </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m2" class="ltx_Math" alttext="p" display="inline"><mi>p</mi></math><span class="ltx_text ltx_font_small"> is the parent of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m3" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small">. This is the expected number of times that the string </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m4" class="ltx_Math" alttext="p.n" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> mutated into </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m5" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small">. Given this weighted set of string pairs, let </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m6" class="ltx_Math" alttext="c_{\hat{a},a,b}" display="inline"><msub><mi>c</mi><mrow><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover><mo>,</mo><mi>a</mi><mo>,</mo><mi>b</mi></mrow></msub></math><span class="ltx_text ltx_font_small"> be the expected number of times that edit </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m7" class="ltx_Math" alttext="(\substack{a\\&#10;b})" display="inline"><mrow><mo>(</mo><mstyle scriptlevel="+1"><mtable columnspacing="0.4em" rowspacing="0.2ex"><mtr><mtd><mi>a</mi></mtd></mtr><mtr><mtd><mi>b</mi></mtd></mtr></mtable></mstyle><mo>)</mo></mrow></math><span class="ltx_text ltx_font_small"> was chosen in context </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m8" class="ltx_Math" alttext="\hat{a}" display="inline"><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover></math><span class="ltx_text ltx_font_small">: this can be computed using dynamic programming to marginalize over the latent edit sequence that maps </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m9" class="ltx_Math" alttext="p.n" display="inline"><mrow><mi>p</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small"> to </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m10" class="ltx_Math" alttext="x.n" display="inline"><mrow><mi>x</mi><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small">, for each </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m11" class="ltx_Math" alttext="(p,x)" display="inline"><mrow><mo>(</mo><mrow><mi>p</mi><mo>,</mo><mi>x</mi></mrow><mo>)</mo></mrow></math><span class="ltx_text ltx_font_small">.
The gradient of </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m12" class="ltx_Math" alttext="\mathcal{L}" display="inline"><mi class="ltx_font_mathcaligraphic">ℒ</mi></math><span class="ltx_text ltx_font_small"> with respect to </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.p6.m13" class="ltx_Math" alttext="\bm{\theta}" display="inline"><mi>𝜽</mi></math><span class="ltx_text ltx_font_small"> is</span></p>
<table id="A2.EGx6" class="ltx_equationgroup ltx_eqn_align">

<tr id="S6.E10" class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_td ltx_align_right"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S6.E10.m1" class="ltx_Math" alttext="\displaystyle\sum_{\hat{a},a,b}c_{\hat{a},a,b}(\mathbf{f}(\hat{a},a,b)-\sum_{a%&#10;^{\prime},b^{\prime}}\mathop{\rm Pr}\nolimits_{\bm{\theta}}(a^{\prime},b^{%&#10;\prime}\mid\hat{a})\mathbf{f}(\hat{a},a^{\prime},b^{\prime}))" display="inline"><mrow><mstyle displaystyle="true"><munder><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><mrow><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover><mo>,</mo><mi>a</mi><mo>,</mo><mi>b</mi></mrow></munder></mstyle><msub><mi>c</mi><mrow><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover><mo>,</mo><mi>a</mi><mo>,</mo><mi>b</mi></mrow></msub><mrow><mo>(</mo><mi>𝐟</mi><mrow><mo>(</mo><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover><mo>,</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo>)</mo></mrow><mo>-</mo><mstyle displaystyle="true"><munder><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><mrow><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msup><mi>b</mi><mo>′</mo></msup></mrow></munder></mstyle><msub><mo>Pr</mo><mi>𝜽</mi></msub><mrow><mo>(</mo><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msup><mi>b</mi><mo>′</mo></msup><mo>∣</mo><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover><mo>)</mo></mrow><mi>𝐟</mi><mrow><mo>(</mo><mover accent="true"><mi>a</mi><mo stretchy="false">^</mo></mover><mo>,</mo><msup><mi>a</mi><mo>′</mo></msup><mo>,</mo><msup><mi>b</mi><mo>′</mo></msup><mo>)</mo></mrow><mo>)</mo></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(10)</span></td></tr>
</table>
</div>
</div>
<div id="S7" class="ltx_section">
<h2 class="ltx_title ltx_font_small ltx_title_section"><span class="ltx_tag ltx_tag_section">7 </span>Consensus Clustering</h2>

<div id="S7.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">From a single phylogeny </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p1.m1" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small">, we deterministically obtain a clustering
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p1.m2" class="ltx_Math" alttext="\bm{e}" display="inline"><mi>𝒆</mi></math><span class="ltx_text ltx_font_small"> by removing the root </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p1.m3" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small">. Each of the resulting
connected components corresponds to a cluster of mentions. Our model gives a distribution over phylogenies </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p1.m4" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small"> (given
observations </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p1.m5" class="ltx_Math" alttext="\bm{x}" display="inline"><mi>𝒙</mi></math><span class="ltx_text ltx_font_small"> and learned parameters </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p1.m6" class="ltx_Math" alttext="\Phi" display="inline"><mi mathvariant="normal">Φ</mi></math><span class="ltx_text ltx_font_small">)—and thus gives
a posterior distribution over clusterings </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p1.m7" class="ltx_Math" alttext="\bm{e}" display="inline"><mi>𝒆</mi></math><span class="ltx_text ltx_font_small">, which can be used
to answer various queries.</span></p>
</div>
<div id="S7.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">A traditional query is to request a </span><span class="ltx_text ltx_font_italic ltx_font_small">single</span><span class="ltx_text ltx_font_small"> clustering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p2.m1" class="ltx_Math" alttext="\bm{e}" display="inline"><mi>𝒆</mi></math><span class="ltx_text ltx_font_small">. We prefer the
clustering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p2.m2" class="ltx_Math" alttext="\bm{e}^{*}" display="inline"><msup><mi>𝒆</mi><mo>*</mo></msup></math><span class="ltx_text ltx_font_small"> that minimizes Bayes risk
(MBR) </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">:</span></p>
<table id="A2.EGx7" class="ltx_equationgroup ltx_eqn_align">

<tr id="S7.E11" class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_td ltx_align_right"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.E11.m1" class="ltx_Math" alttext="\displaystyle\bm{e}^{*}=\operatorname*{argmin}_{\bm{e}^{\prime}}\sum_{\bm{e}}L%&#10;(\bm{e}^{\prime},\bm{e})\mathop{\rm Pr}\nolimits(\bm{e}\mid\bm{x},\bm{\theta},%&#10;\bm{\phi})" display="inline"><mrow><msup><mi>𝒆</mi><mo>*</mo></msup><mo>=</mo><msub><mo movablelimits="false">argmin</mo><msup><mi>𝒆</mi><mo>′</mo></msup></msub><mstyle displaystyle="true"><munder><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><mi>𝒆</mi></munder></mstyle><mi>L</mi><mrow><mo>(</mo><msup><mi>𝒆</mi><mo>′</mo></msup><mo>,</mo><mi>𝒆</mi><mo>)</mo></mrow><mo>Pr</mo><mrow><mo>(</mo><mi>𝒆</mi><mo>∣</mo><mi>𝒙</mi><mo>,</mo><mi>𝜽</mi><mo>,</mo><mi mathvariant="bold-italic">ϕ</mi><mo>)</mo></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(11)</span></td></tr>
</table>
<p class="ltx_p"><span class="ltx_text ltx_font_small">This minimizes our expected loss, where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p2.m3" class="ltx_Math" alttext="L(\bm{e}^{\prime},\bm{e})" display="inline"><mrow><mi>L</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><msup><mi>𝒆</mi><mo>′</mo></msup><mo>,</mo><mi>𝒆</mi></mrow><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> denotes
the loss associated with picking </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p2.m4" class="ltx_Math" alttext="\bm{e}^{\prime}" display="inline"><msup><mi>𝒆</mi><mo>′</mo></msup></math><span class="ltx_text ltx_font_small"> when the true clustering is
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p2.m5" class="ltx_Math" alttext="\bm{e}" display="inline"><mi>𝒆</mi></math><span class="ltx_text ltx_font_small">.
In practice, we again estimate the expectation by sampling </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p2.m6" class="ltx_Math" alttext="\bm{e}" display="inline"><mi>𝒆</mi></math><span class="ltx_text ltx_font_small"> values.</span></p>
</div>
<div id="S7.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">The Rand index </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">—unlike our actual evaluation measure—is an </span><span class="ltx_text ltx_font_italic ltx_font_small">efficient</span><span class="ltx_text ltx_font_small"> choice of loss function </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p3.m1" class="ltx_Math" alttext="L" display="inline"><mi>L</mi></math><span class="ltx_text ltx_font_small"> for use with (</span><a href="#S7.E11" title="(11) ‣ 7 Consensus Clustering ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">11</span></a><span class="ltx_text ltx_font_small">):</span></p>
<table id="A2.EGx8" class="ltx_equationgroup ltx_eqn_align">

<tr id="S7.Ex2" class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_td ltx_align_right"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.Ex2.m1" class="ltx_Math" alttext="\displaystyle R(\bm{e}^{\prime},\bm{e})" display="inline"><mrow><mi>R</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><msup><mi>𝒆</mi><mo>′</mo></msup><mo>,</mo><mi>𝒆</mi></mrow><mo>)</mo></mrow></mrow></math></td>
<td class="ltx_td ltx_align_left"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.Ex2.m2" class="ltx_Math" alttext="\displaystyle\;\stackrel{\mbox{\tiny def}}{=}\;\frac{\text{TP}+\text{TN}}{%&#10;\text{TP}+\text{FP}+\text{TN}+\text{FN}}=\frac{\text{TP}+\text{TN}}{{{N}%&#10;\choose{2}}}" display="inline"><mrow><mi mathvariant="normal"> </mi><mpadded width="+2.8pt"><mover><mo movablelimits="false">=</mo><mtext mathsize="small" stretchy="false">def</mtext></mover></mpadded><mstyle displaystyle="true"><mfrac><mrow><mtext mathsize="small" stretchy="false">TP</mtext><mo>+</mo><mtext mathsize="small" stretchy="false">TN</mtext></mrow><mrow><mtext mathsize="small" stretchy="false">TP</mtext><mo>+</mo><mtext mathsize="small" stretchy="false">FP</mtext><mo>+</mo><mtext mathsize="small" stretchy="false">TN</mtext><mo>+</mo><mtext mathsize="small" stretchy="false">FN</mtext></mrow></mfrac></mstyle><mo>=</mo><mstyle displaystyle="true"><mfrac><mrow><mtext mathsize="small" stretchy="false">TP</mtext><mo>+</mo><mtext mathsize="small" stretchy="false">TN</mtext></mrow><mrow><mo>(</mo><mstyle scriptlevel="+1"><mtable columnspacing="0.4em" rowspacing="0.2ex"><mtr><mtd><mi>N</mi></mtd></mtr><mtr><mtd><mn>2</mn></mtd></mtr></mtable></mstyle><mo>)</mo></mrow></mfrac></mstyle></mrow></math></td>
<td class="ltx_eqn_center_padright"/></tr>
</table>
<p class="ltx_p"><span class="ltx_text ltx_font_small">where the true positives (TP), true negatives (TN), false positives
(FP), and false negatives (FN) use the clustering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p3.m2" class="ltx_Math" alttext="\bm{e}" display="inline"><mi>𝒆</mi></math><span class="ltx_text ltx_font_small">
to evaluate how well </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p3.m3" class="ltx_Math" alttext="\bm{e}^{\prime}" display="inline"><msup><mi>𝒆</mi><mo>′</mo></msup></math><span class="ltx_text ltx_font_small"> classifies the </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p3.m4" class="ltx_Math" alttext="N\choose 2" display="inline"><mrow><mo>(</mo><mstyle scriptlevel="+1"><mtable columnspacing="0.4em" rowspacing="0.2ex"><mtr><mtd><mi>N</mi></mtd></mtr><mtr><mtd><mn>2</mn></mtd></mtr></mtable></mstyle><mo>)</mo></mrow></math><span class="ltx_text ltx_font_small"> mention
pairs as coreferent or not. More similar clusterings achieve larger
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p3.m5" class="ltx_Math" alttext="R" display="inline"><mi>R</mi></math><span class="ltx_text ltx_font_small">, with </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p3.m6" class="ltx_Math" alttext="R(\bm{e}^{\prime},\bm{e})=1" display="inline"><mrow><mrow><mi>R</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><msup><mi>𝒆</mi><mo>′</mo></msup><mo>,</mo><mi>𝒆</mi></mrow><mo>)</mo></mrow></mrow><mo>=</mo><mn>1</mn></mrow></math><span class="ltx_text ltx_font_small"> iff </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p3.m7" class="ltx_Math" alttext="\bm{e}^{\prime}=\bm{e}" display="inline"><mrow><msup><mi>𝒆</mi><mo>′</mo></msup><mo>=</mo><mi>𝒆</mi></mrow></math><span class="ltx_text ltx_font_small">. In all cases,
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p3.m8" class="ltx_Math" alttext="0\leq R(\bm{e}^{\prime},\bm{e})=R(\bm{e},\bm{e}^{\prime})\leq 1" display="inline"><mrow><mn>0</mn><mo>≤</mo><mrow><mi>R</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><msup><mi>𝒆</mi><mo>′</mo></msup><mo>,</mo><mi>𝒆</mi></mrow><mo>)</mo></mrow></mrow><mo>=</mo><mrow><mi>R</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><mi>𝒆</mi><mo>,</mo><msup><mi>𝒆</mi><mo>′</mo></msup></mrow><mo>)</mo></mrow></mrow><mo>≤</mo><mn>1</mn></mrow></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S7.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">The MBR decision rule for the (negated) Rand index is easily seen to be equivalent to</span></p>
<table id="A2.EGx9" class="ltx_equationgroup ltx_eqn_align">

<tr id="S7.E12" class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_td ltx_align_right"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.E12.m1" class="ltx_Math" alttext="\displaystyle\bm{e}^{*}" display="inline"><msup><mi>𝒆</mi><mo>*</mo></msup></math></td>
<td class="ltx_td ltx_align_left"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.E12.m2" class="ltx_Math" alttext="\displaystyle=\operatorname*{argmax}_{\bm{e}^{\prime}}\mathbb{E}[\text{TP}]+%&#10;\mathbb{E}[\text{TN}]" display="inline"><mrow><mi/><mo>=</mo><mrow><mrow><mrow><msub><mo movablelimits="false">argmax</mo><msup><mi>𝒆</mi><mo>′</mo></msup></msub><mo>⁡</mo><mi>𝔼</mi></mrow><mo>⁢</mo><mrow><mo>[</mo><mtext mathsize="small" stretchy="false">TP</mtext><mo>]</mo></mrow></mrow><mo>+</mo><mrow><mi>𝔼</mi><mo>⁢</mo><mrow><mo>[</mo><mtext mathsize="small" stretchy="false">TN</mtext><mo>]</mo></mrow></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/>
<td rowspan="1" class="ltx_align_middle ltx_align_right"><span class="ltx_tag ltx_tag_equation">(12)</span></td></tr>
<tr id="S7.Ex3" class="ltx_equation ltx_align_baseline">
<td class="ltx_eqn_center_padleft"/>
<td class="ltx_td ltx_align_right"/>
<td class="ltx_td ltx_align_left"><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.Ex3.m2" class="ltx_Math" alttext="\displaystyle=\operatorname*{argmax}_{\bm{e}^{\prime}}\smashoperator[r]{\sum_{%&#10;i,j:\;x_{i}\sim x_{j}}}s_{ij}+\smashoperator[r]{\sum_{i,j:\;x_{i}\not\sim x_{j%&#10;}}}(1-s_{ij})" display="inline"><mrow><mi/><mo>=</mo><mrow><mrow><mrow><msub><mo movablelimits="false">argmax</mo><msup><mi>𝒆</mi><mo>′</mo></msup></msub><mo>⁡</mo><merror class="ltx_ERROR undefined undefined"><mtext>\smashoperator</mtext></merror></mrow><mo>⁢</mo><mrow><mo>[</mo><mi>r</mi><mo>]</mo></mrow><mo>⁢</mo><mrow><mstyle displaystyle="true"><munder><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><mrow><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow><mo rspace="5.3pt">:</mo><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>∼</mo><msub><mi>x</mi><mi>j</mi></msub></mrow></mrow></munder></mstyle><msub><mi>s</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></mrow></mrow><mo>+</mo><mrow><merror class="ltx_ERROR undefined undefined"><mtext>\smashoperator</mtext></merror><mo>⁢</mo><mrow><mo>[</mo><mi>r</mi><mo>]</mo></mrow><mo>⁢</mo><mrow><mstyle displaystyle="true"><munder><mo largeop="true" movablelimits="false" symmetric="true">∑</mo><mrow><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow><mo rspace="5.3pt">:</mo><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>≁</mo><msub><mi>x</mi><mi>j</mi></msub></mrow></mrow></munder></mstyle><mrow><mo>(</mo><mrow><mn>1</mn><mo>-</mo><msub><mi>s</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></mrow><mo>)</mo></mrow></mrow></mrow></mrow></mrow></math></td>
<td class="ltx_eqn_center_padright"/></tr>
</table>
<p class="ltx_p"><span class="ltx_text ltx_font_small">where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p4.m1" class="ltx_Math" alttext="\sim" display="inline"><mo>∼</mo></math><span class="ltx_text ltx_font_small"> denotes coreference according to </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p4.m2" class="ltx_Math" alttext="\bm{e}^{\prime}" display="inline"><msup><mi>𝒆</mi><mo>′</mo></msup></math><span class="ltx_text ltx_font_small">.
As explained above, the </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p4.m3" class="ltx_Math" alttext="s_{ij}" display="inline"><msub><mi>s</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math><span class="ltx_text ltx_font_small"> are coreference probabilities </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p4.m4" class="ltx_Math" alttext="s_{ij}" display="inline"><msub><mi>s</mi><mrow><mi>i</mi><mo>⁢</mo><mi>j</mi></mrow></msub></math><span class="ltx_text ltx_font_small"> that can be estimated from a sample of clusterings </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S7.p4.m5" class="ltx_Math" alttext="\bm{e}" display="inline"><mi>𝒆</mi></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S7.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">This objective corresponds to min-max graph cut </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">, an NP-hard
problem with an approximate solution </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">.</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">9</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">9</sup><span class="ltx_text ltx_font_small">In our experiments, we run the clustering algorithm five times, initialized from samples chosen at random from the last 10% of the sampler run, and keep the clustering that achieved highest expected Rand score.</span></span></span></span><span class="ltx_text ltx_font_small"></span></p>
</div>
</div>
<div id="S8" class="ltx_section">
<h2 class="ltx_title ltx_font_small ltx_title_section"><span class="ltx_tag ltx_tag_section">8 </span>Experiments</h2>

<div id="S8.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">In this section, we describe experiments on three different datasets. Our main results are described first: Twitter features many instances of name variation that we would like our model to be able to learn. We also report the performance of different ablations of our full approach, in order to see which consistently helped across the different splits. We report additional experiments on the ACE 2008 corpus, and on a political blog corpus, to demonstrate that our approach is applicable in different settings.</span></p>
</div>
<div id="S8.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">For Twitter and ACE 2008, we report the standard </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S8.p2.m1" class="ltx_Math" alttext="\text{B}^{3}" display="inline"><msup><mtext mathsize="small" stretchy="false">B</mtext><mn>3</mn></msup></math><span class="ltx_text ltx_font_small"> metric </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">. For the political blog dataset, the reference does not consist of entity annotations, and so we follow the evaluation procedure of </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">.</span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]re-insert reference here to significance testing discussion (and actual tests) in supplementary material</span></p>
</div>
<div id="S8.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">8.1 </span>Twitter</h3>

<div id="S8.SS1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold ltx_font_small">Data.</span><span class="ltx_text ltx_font_small"> We use a novel corpus of Twitter posts
discussing the 2013 Grammy Award ceremony. This is a challenging
corpus, featuring many instances of name variation. The dataset consists of five
splits (by entity), the smallest of which is 604 mentions and the
largest is 1374. We reserve the largest split for development
purposes, and report our results on the remaining four. Appendix </span><a href="#A2" title="Appendix B Twitter Grammy corpus ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B</span></a><span class="ltx_text ltx_font_small"> provides more detail about the dataset.</span></p>
</div>
<div id="S8.SS1.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold ltx_font_small">Baselines.</span><span class="ltx_text ltx_font_small"> We use the discriminative entity clustering
algorithm of </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small"> as our baseline; their approach was
found to outperform another generative model which produced a flat
clustering of mentions via a Dirichlet process mixture model. Their
method uses Jaro-Winkler string similarity to match names, then
clusters mentions with matching names (for disambiguation) by
comparing their unigram context distributions using the Jenson-Shannon
metric.
We also compare to the </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">exact-match</span><span class="ltx_text ltx_font_small"> baseline, which
assigns all strings with the same name to the same entity.</span></p>
</div>
<div id="S8.SS1.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold ltx_font_small">Procedure.</span><span class="ltx_text ltx_font_small"> We run four test experiments in which one split is used to pick model hyperparameters and the remaining three are used for test.
For the discriminative baseline, we tune the string match threshold,
context threshold, and the weight of the context model prior (all via
grid search). For our model, we tune </span><span class="ltx_text ltx_font_italic ltx_font_small">only</span><span class="ltx_text ltx_font_small"> the fixed weight of the root feature, which determines the
precision/recall trade-off (larger values of this feature result in
more attachments to </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S8.SS1.p3.m1" class="ltx_Math" alttext="\diamondsuit" display="inline"><mi mathvariant="normal">♢</mi></math><span class="ltx_text ltx_font_small"> and hence more entities). We leave other
hyperparameters fixed: 16 latent topics, and Gaussian priors </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S8.SS1.p3.m2" class="ltx_Math" alttext="{\cal N}(0,1)" display="inline"><mrow><mi class="ltx_font_mathcaligraphic">𝒩</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> on all log-linear parameters. For </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">phylo</span><span class="ltx_text ltx_font_small">, the
entity clustering is the result of (1) training the model using EM,
(2) sampling from the posterior to obtain a distribution over
clusterings, and (3) finding a consensus clustering. We use 20
iterations of EM with 100 samples per E-step for training, and use
1000 samples after training to estimate the posterior. We report
results using three variations of our model: </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">phylo</span><span class="ltx_text ltx_font_small"> does not
consider mention context (all mentions effectively have the same
topic) and determines mention entities from a single sample of
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S8.SS1.p3.m3" class="ltx_Math" alttext="\bm{p}" display="inline"><mi>𝒑</mi></math><span class="ltx_text ltx_font_small"> (the last); </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">phylo+topic</span><span class="ltx_text ltx_font_small"> adds context
(§</span><a href="#S5.SS2" title="5.2 Resampling the topics z ‣ 5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.2</span></a><span class="ltx_text ltx_font_small">); </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">phylo+topic+mbr</span><span class="ltx_text ltx_font_small"> uses the full posterior
and consensus clustering to pick the output clustering
(§</span><a href="#S7" title="7 Consensus Clustering ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">7</span></a><span class="ltx_text ltx_font_small">). Our results are shown in
Table </span><a href="#S8.T1" title="Table 1 ‣ 8.1 Twitter ‣ 8 Experiments ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">1</span></a><span class="ltx_text ltx_font_small">.</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">10</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">10</sup><span class="ltx_text ltx_font_small">Our single-threaded implementation took around 15 minutes per fold of the Twitter corpus on a personal laptop with a 2.3 Ghz Intel Core i7 processor (including time required to parse the data files). Typical acceptance rates for ordering and topic proposals ranged from 0.03 to 0.08.</span></span></span></span><span class="ltx_text ltx_font_small"></span></p>
</div>
<div id="S8.T1" class="ltx_table">
<table class="ltx_tabular ltx_centering ltx_align_middle" style="width:433.62pt;">
<thead class="ltx_thead">
<tr class="ltx_tr">
<th class="ltx_td ltx_border_r ltx_border_tt"/>
<th class="ltx_td ltx_align_center ltx_border_tt" colspan="3"><span class="ltx_text ltx_font_bold ltx_font_small">Mean Test <math xmlns="http://www.w3.org/1998/Math/MathML" id="S8.T1.m1" class="ltx_Math" alttext="\text{B}^{3}" display="inline"><msup><mtext mathsize="small" stretchy="false">𝐁</mtext><mn mathsize="normal" mathvariant="normal" stretchy="false">3</mn></msup></math></span></th></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_border_r"/>
<th class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">P</span></th>
<th class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">R</span></th>
<th class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">F1</span></th></tr>
</thead>
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_smallcaps ltx_font_small">exact-match</span></th>
<td class="ltx_td ltx_align_justify ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_small">99.6</span></td>
<td class="ltx_td ltx_align_justify ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_small">53.7</span></td>
<td class="ltx_td ltx_align_justify ltx_border_t"><span class="ltx_text ltx_font_small">69.8</span></td></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_r"><cite class="ltx_cite"/></th>
<td class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">92.1</span></td>
<td class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">69.8</span></td>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">79.3</span></td></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_r"><span class="ltx_text ltx_font_smallcaps ltx_font_small">phylo</span></th>
<td class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">85.3</span></td>
<td class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">91.4</span></td>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">88.7</span></td></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_r"><span class="ltx_text ltx_font_smallcaps ltx_font_small">phylo+topic</span></th>
<td class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">92.8</span></td>
<td class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">90.8</span></td>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">91.8</span></td></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_bb ltx_border_r"><span class="ltx_text ltx_font_smallcaps ltx_font_small">phylo+topic+mbr</span></th>
<td class="ltx_td ltx_align_justify ltx_border_bb ltx_border_r"><span class="ltx_text ltx_font_small">92.9</span></td>
<td class="ltx_td ltx_align_justify ltx_border_bb ltx_border_r"><span class="ltx_text ltx_font_small">90.9</span></td>
<td class="ltx_td ltx_align_justify ltx_border_bb"><span class="ltx_text ltx_font_small">91.9</span></td></tr>
</tbody>
</table>
<div class="ltx_caption ltx_centering ltx_font_small"><span class="ltx_tag ltx_tag_table">Table 1: </span> Results for the Twitter
dataset. Higher <math xmlns="http://www.w3.org/1998/Math/MathML" id="S8.T1.m3" class="ltx_Math" alttext="\text{B}^{3}" display="inline"><msup><mtext mathsize="small" stretchy="false">B</mtext><mn mathsize="normal" stretchy="false">3</mn></msup></math> scores are better. Note that each number is averaged over four different test splits. In three out of four experiments, <span class="ltx_text ltx_font_smallcaps">phylo+topic+mbr</span> achieved the highest F1 score; in one case <span class="ltx_text ltx_font_smallcaps">phylo+topic</span> won by a small margin.</div>
</div>
</div>
<div id="S8.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">8.2 </span>Newswire</h3>

<div id="S8.SS2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold ltx_font_small">Data.</span><span class="ltx_text ltx_font_small">
We use the ACE 2008 dataset, which is described in detail in
</span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">.
It is split into a development portion and a test
portion.
The baseline system took the first mention from each (gold)
within-document coreference chain as the canonical mention, ignoring
other mentions in the chain; we follow the same procedure in our
experiments.</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">11</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">11</sup><span class="ltx_text ltx_font_small">That is, each within-document coreference chain
is mapped to a single mention as a preprocessing step.</span></span></span></span><span class="ltx_text ltx_font_small"></span></p>
</div>
<div id="S8.SS2.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold ltx_font_small">Baselines &amp; Procedure.</span><span class="ltx_text ltx_font_small"> We use the same baselines as in §</span><a href="#S8.SS1" title="8.1 Twitter ‣ 8 Experiments ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">8.1</span></a><span class="ltx_text ltx_font_small">. On development data, modeling pragmatics as in §</span><a href="#S4.SS2" title="4.2 Sub-model for name mutation ‣ 4 Detailed generative story ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">4.2</span></a><span class="ltx_text ltx_font_small"> gave large improvements for organizations (8 points in F-measure), </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]but maybe just for </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">org</span><span class="ltx_text ltx_font_small">? correcting the tendency to assume that short names like </span><span class="ltx_text ltx_font_sansserif ltx_font_small">CIA</span><span class="ltx_text ltx_font_small"> were coincidental homonyms. Hence we allowed </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S8.SS2.p2.m1" class="ltx_Math" alttext="\gamma&gt;0" display="inline"><mrow><mi>γ</mi><mo>&gt;</mo><mn>0</mn></mrow></math><span class="ltx_text ltx_font_small"> and tuned it on development data.</span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">12</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">12</sup><span class="ltx_text ltx_font_small">We used only a simplified version of the pragmatic model, approximating </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S8.SS2.p2.m2" class="ltx_Math" alttext="w(p^{\prime},x)" display="inline"><mrow><mi>w</mi><mo>⁢</mo><mrow><mo>(</mo><mrow><msup><mi>p</mi><mo>′</mo></msup><mo>,</mo><mi>x</mi></mrow><mo>)</mo></mrow></mrow></math><span class="ltx_text ltx_font_small"> as 1 or 0 according to whether </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S8.SS2.p2.m3" class="ltx_Math" alttext="p^{\prime}.n=x.n" display="inline"><mrow><msup><mi>p</mi><mo>′</mo></msup><mo separator="true">.</mo><mrow><mi>n</mi><mo>=</mo><mi>x</mi></mrow><mo separator="true">.</mo><mi>n</mi></mrow></math><span class="ltx_text ltx_font_small">. We also omitted the IMH step from section </span><a href="#S5.SS3" title="5.3 Resampling the phylogeny p ‣ 5 Inference by Block Gibbs Sampling ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">5.3</span></a><span class="ltx_text ltx_font_small">. The other results we report do not use pragmatics at all, since we found that it gave only a slight improvement on Twitter.</span></span></span></span><span class="ltx_text ltx_font_small"> </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]let’s test pragmatics everywhere for the final version, and fix the issues in the footnote
Results are in Table </span><a href="#S8.T2" title="Table 2 ‣ 8.2 Newswire ‣ 8 Experiments ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">2</span></a><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S8.T2" class="ltx_table">
<table class="ltx_tabular ltx_centering ltx_align_middle" style="width:433.62pt;">
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<th class="ltx_td ltx_border_tt"/>
<th class="ltx_td ltx_border_r ltx_border_tt"/>
<td class="ltx_td ltx_align_center ltx_border_tt" colspan="3"><span class="ltx_text ltx_font_bold ltx_font_small">Test <math xmlns="http://www.w3.org/1998/Math/MathML" id="S8.T2.m1" class="ltx_Math" alttext="\text{B}^{3}" display="inline"><msup><mtext mathsize="small" stretchy="false">𝐁</mtext><mn mathsize="normal" mathvariant="normal" stretchy="false">3</mn></msup></math></span></td>
<td class="ltx_td ltx_align_justify ltx_border_tt"/>
<td class="ltx_td ltx_align_justify ltx_border_tt"/>
<td class="ltx_td ltx_align_justify ltx_border_tt"/></tr>
<tr class="ltx_tr">
<th class="ltx_td"/>
<th class="ltx_td ltx_border_r"/>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">P</span></td>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">R</span></td>
<td class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">F1</span></td>
<td class="ltx_td ltx_align_justify"/>
<td class="ltx_td ltx_align_justify"/>
<td class="ltx_td ltx_align_justify"/></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_r ltx_border_t" rowspan="3"><span class="ltx_text ltx_font_smallcaps ltx_font_small">per</span></th>
<th class="ltx_td ltx_align_left ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_smallcaps ltx_font_small">exact-match</span></th>
<td class="ltx_td ltx_align_justify ltx_border_t"><span class="ltx_text ltx_font_small">98.0</span></td>
<td class="ltx_td ltx_align_justify ltx_border_t"><span class="ltx_text ltx_font_small">81.2</span></td>
<td class="ltx_td ltx_align_justify ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_small">88.8</span></td>
<td class="ltx_td ltx_align_justify ltx_border_t"/>
<td class="ltx_td ltx_align_justify ltx_border_t"/>
<td class="ltx_td ltx_align_justify ltx_border_t"/></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_r"><cite class="ltx_cite"/></th>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">95.0</span></td>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">88.9</span></td>
<td class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">91.9</span></td>
<td class="ltx_td ltx_align_justify"/>
<td class="ltx_td ltx_align_justify"/>
<td class="ltx_td ltx_align_justify"/></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_r"><span class="ltx_text ltx_font_smallcaps ltx_font_small">phylo+topic+mbr</span></th>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">97.2</span></td>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">88.6</span></td>
<td class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">92.7</span></td>
<td class="ltx_td ltx_align_justify"/>
<td class="ltx_td ltx_align_justify"/>
<td class="ltx_td ltx_align_justify"/></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_r ltx_border_t" rowspan="3"><span class="ltx_text ltx_font_smallcaps ltx_font_small">org</span></th>
<th class="ltx_td ltx_align_left ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_smallcaps ltx_font_small">exact-match</span></th>
<td class="ltx_td ltx_align_justify ltx_border_t"><span class="ltx_text ltx_font_small">98.2</span></td>
<td class="ltx_td ltx_align_justify ltx_border_t"><span class="ltx_text ltx_font_small">78.3</span></td>
<td class="ltx_td ltx_align_justify ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_small">87.1</span></td>
<td class="ltx_td ltx_align_justify ltx_border_t"/>
<td class="ltx_td ltx_align_justify ltx_border_t"/>
<td class="ltx_td ltx_align_justify ltx_border_t"/></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_r"><cite class="ltx_cite"/></th>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">92.1</span></td>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">88.5</span></td>
<td class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">90.3</span></td>
<td class="ltx_td ltx_align_justify"/>
<td class="ltx_td ltx_align_justify"/>
<td class="ltx_td ltx_align_justify"/></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_r"><span class="ltx_text ltx_font_smallcaps ltx_font_small">phylo+topic+mbr</span></th>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">95.5</span></td>
<td class="ltx_td ltx_align_justify"><span class="ltx_text ltx_font_small">80.9</span></td>
<td class="ltx_td ltx_align_justify ltx_border_r"><span class="ltx_text ltx_font_small">87.6</span></td>
<td class="ltx_td ltx_align_justify"/>
<td class="ltx_td ltx_align_justify"/>
<td class="ltx_td ltx_align_justify"/></tr>
<tr class="ltx_tr">
<th class="ltx_td ltx_align_left ltx_border_r ltx_border_tt"/>
<th class="ltx_td ltx_border_tt"/>
<td class="ltx_td ltx_align_justify ltx_border_tt"/>
<td class="ltx_td ltx_align_justify ltx_border_tt"/>
<td class="ltx_td ltx_align_justify ltx_border_tt"/>
<td class="ltx_td ltx_align_justify ltx_border_tt"/>
<td class="ltx_td ltx_align_justify ltx_border_tt"/>
<td class="ltx_td ltx_align_justify ltx_border_tt"/></tr>
</tbody>
</table>
<div class="ltx_caption ltx_centering ltx_font_small"><span class="ltx_tag ltx_tag_table">Table 2: </span> Results for the ACE 2008
newswire dataset.</div>
</div>
</div>
<div id="S8.SS3" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">8.3 </span>Blogs</h3>

<div id="S8.SS3.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold ltx_font_small">Data.</span><span class="ltx_text ltx_font_small"> The CMU political blogs
dataset consists of 3000 documents about
U.S. politics </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">. Preprocessed as described in </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">,
the data consists of 10647 entity mentions. Unlike our other datasets,
mentions are not annotated with entities: the reference consists of a
table of 126 entities, where each row is the </span><span class="ltx_text ltx_font_italic ltx_font_small">canonical name</span><span class="ltx_text ltx_font_small"> of one
entity.</span></p>
</div>
<div id="S8.SS3.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold ltx_font_small">Baselines.</span><span class="ltx_text ltx_font_small"> We compare to the system results reported
in Figure 2 of </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">. This includes a baseline
hierarchical clustering approach, the “EEA” name canonicalization
system of </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">, as well the model proposed by
</span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">. Like the output of our model, the output of
their hierarchical clustering baseline is a mention clustering, and
therefore must be mapped to a table of canonical entity names to
compare to the reference table.</span></p>
</div>
<div id="S8.SS3.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_bold ltx_font_small">Procedure &amp; Results</span><span class="ltx_text ltx_font_small">
We tune our method as in previous experiments, on the initialization
data used by </span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small"> which consists of a subset of 700
documents of the full dataset. The tuned model then produced a mention
clustering on the full political blog corpus. As the
mapping from clusters to a table is not fully detailed in
</span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">, we used a simple heuristic: the
</span><span class="ltx_text ltx_font_italic ltx_font_small">most frequent</span><span class="ltx_text ltx_font_small"> name in each cluster is taken as the
canonical name, augmented by any titles from a predefined list appearing
in any other name in the cluster. The resulting table is
then evaluated against the reference, as described in
</span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">. We achieved a response score of 0.17 and a
reference score of 0.61. Though not state-of-the-art, this result is
close to the score of the “EEA” system of
</span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">, as reported in Figure 2 of
</span><cite class="ltx_cite"/><span class="ltx_text ltx_font_small">, </span><span class="ltx_ERROR undefined">\todo</span><span class="ltx_text ltx_font_small">[author=jason,color=RedOrange,fancyline,size=,]so we lose slightly to EEA but EEA loses big to Yogotama?
which is specifically designed for the task of
canonicalization.</span></p>
</div>
</div>
<div id="S8.SS4" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">8.4 </span>Discussion</h3>

<div id="S8.SS4.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">On the Twitter dataset, we obtained a 12.6-point F1 improvement over the baseline. To understand our model’s
behavior, we looked at the sampled phylogenetic
trees on development data. One reason our model does well in
this noisy domain is that it is able to relate seemingly dissimilar names
via successive steps. For instance, our model learned to relate many variations of </span><span class="ltx_text ltx_font_sansserif ltx_font_small">LL
Cool J</span><span class="ltx_text ltx_font_small">:</span></p>
<table class="ltx_tabular ltx_centering ltx_align_middle">
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left"><span class="ltx_text ltx_font_sansserif ltx_font_small">Cool James</span></td>
<td class="ltx_td ltx_align_left"><span class="ltx_text ltx_font_sansserif ltx_font_small">LLCoJ</span></td>
<td class="ltx_td ltx_align_left"><span class="ltx_text ltx_font_sansserif ltx_font_small">El-El Cool John</span></td></tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left"><span class="ltx_text ltx_font_sansserif ltx_font_small">LL</span></td>
<td class="ltx_td ltx_align_left"><span class="ltx_text ltx_font_sansserif ltx_font_small">LL COOL JAMES</span></td>
<td class="ltx_td ltx_align_left"><span class="ltx_text ltx_font_sansserif ltx_font_small">LLCOOLJ</span></td></tr>
</tbody>
</table>
<p class="ltx_p"><span class="ltx_text ltx_font_small">In the sample we inspected, these mentions were also assigned the
same topic, further boosting the probability of the configuration.</span></p>
</div>
<div id="S8.SS4.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">The ACE dataset, consisting of editorialized newswire, naturally
contains less name variation than Twitter data. Nonetheless, we find that
the variation that does appear is often properly handled by our
model. For instance, we see several instances of variation due to
transliteration that were all correctly grouped together, such
as </span><span class="ltx_text ltx_font_sansserif ltx_font_small">Megawati Soekarnoputri</span><span class="ltx_text ltx_font_small"> and </span><span class="ltx_text ltx_font_sansserif ltx_font_small">Megawati Sukarnoputri</span><span class="ltx_text ltx_font_small">.
The pragmatic model was also effective in grouping common acronyms into the same entity.</span></p>
</div>
<div id="S8.SS4.p3" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">We found that multiple samples tend to give different phylogenies (so
the sampler is mobile), but essentially the same clustering into
entities (which is why consensus clustering did not improve much over
simply using the last sample). Random restarts of EM might create
more variety by choosing different locally optimal parameter settings.
It may also be beneficial to explore other sampling techniques </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">.</span></p>
</div>
<div id="S8.SS4.p4" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Our method assembles observed names into an evolutionary tree. However, the true tree must include many names that fall outside our small observed corpora, so our model would be a more appropriate fit for a far larger corpus. Larger corpora also offer stronger signals that might enable our Monte Carlo methods to mix faster and detect regularities more accurately.</span></p>
</div>
<div id="S8.SS4.p5" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">A common error of our system is to connect mentions that share long substrings, such as different </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">person</span><span class="ltx_text ltx_font_small">s who share a last name, or different </span><span class="ltx_text ltx_font_smallcaps ltx_font_small">organization</span><span class="ltx_text ltx_font_small">s that contain </span><span class="ltx_text ltx_font_sansserif ltx_font_small">University of</span><span class="ltx_text ltx_font_small">. A more powerful name mutation than the one we use here would recognize entire words, for example inserting a common title or replacing a first name with its common nickname. Modeling the </span><span class="ltx_text ltx_font_italic ltx_font_small">internal structure</span><span class="ltx_text ltx_font_small"> of names </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small"> in the mutation model is a promising future direction.</span></p>
</div>
</div>
</div>
<div id="S9" class="ltx_section">
<h2 class="ltx_title ltx_font_small ltx_title_section"><span class="ltx_tag ltx_tag_section">9 </span>Conclusions</h2>

<div id="S9.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Our primary contribution consists of new modeling ideas, and associated inference techniques, for the problem of cross-document coreference resolution. We have described how writers systematically plunder (</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S9.p1.m1" class="ltx_Math" alttext="\bm{\phi}" display="inline"><mi mathvariant="bold-italic">ϕ</mi></math><span class="ltx_text ltx_font_small">) and then systematically modify (</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S9.p1.m2" class="ltx_Math" alttext="\bm{\theta}" display="inline"><mi>𝜽</mi></math><span class="ltx_text ltx_font_small">) the work of past writers. Inference under such models could also play a role in tracking evolving memes and social influence, not merely in establishing strict coreference. Our model also provides an alternative to the distance-dependent CRP.</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="S9.p1.m3" class="ltx_Math" alttext="{}^{\ref{fn:ddcrp}}" display="inline"><msup><mi/><mtext href="#S3"><a xmlns="http://www.w3.org/1999/xhtml" href="#S3" title="3 Generative Model of Coreference ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">3</span></a></mtext></msup></math><span class="ltx_text ltx_font_small"></span></p>
</div>
<div id="S9.p2" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Our implementation is available for research use at: </span><a href="https://bitbucket.org/noandrews/phyloinf" title="" class="ltx_ref ltx_url"><span class="ltx_text ltx_font_typewriter ltx_font_small">https://bitbucket.org/noandrews/phyloinf</span></a><span class="ltx_text ltx_font_small">.</span></p>
</div>
</div>
<div id="bib" class="ltx_bibliography">
<h2 class="ltx_title ltx_font_small ltx_title_bibliography">References</h2>

<ul id="L1" class="ltx_biblist">
<li id="bib.bib7" class="ltx_bibitem ltx_bib_inproceedings"><span class="ltx_bibtag ltx_bib_key ltx_role_refnum">[1]</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_bib_author">M. Dredze, M. J. Paul, S. Bergsma and H. Tran</span><span class="ltx_text ltx_bib_year">(2013)</span>
</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_bib_title">Carmen: a twitter geolocation system with applications to public health</span>.
</span>
<span class="ltx_bibblock ltx_bib_cited">Cited by: <a href="#A2.SS1.p1" title="B.1 Collection ‣ Appendix B Twitter Grammy corpus ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1</span></a>.
</span></li>
<li id="bib.bib12" class="ltx_bibitem ltx_bib_inproceedings"><span class="ltx_bibtag ltx_bib_key ltx_role_refnum">[2]</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_bib_author">S. Guo, M. Chang and E. Kıcıman</span><span class="ltx_text ltx_bib_year">(2013)</span>
</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_bib_title">To link or not to link? a study on end-to-end tweet entity linking</span>.
</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_bib_pages"> pp. 1020–1030</span>.
</span>
<span class="ltx_bibblock ltx_bib_cited">Cited by: <a href="#A2.SS2.p1" title="B.2 Annotation ‣ Appendix B Twitter Grammy corpus ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.2</span></a>.
</span></li>
<li id="bib.bib6" class="ltx_bibitem ltx_bib_inproceedings"><span class="ltx_bibtag ltx_bib_key ltx_role_refnum">[3]</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_bib_author">A. Ritter, S. Clark and O. Etzioni</span><span class="ltx_text ltx_bib_year">(2011)</span>
</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_bib_title">Named entity recognition in tweets: an experimental study</span>.
</span>
<span class="ltx_bibblock"><span class="ltx_text ltx_bib_pages"> pp. 1524–1534</span>.
</span>
<span class="ltx_bibblock ltx_bib_cited">Cited by: <a href="#A2.SS1.p1" title="B.1 Collection ‣ Appendix B Twitter Grammy corpus ‣ Robust Entity Clustering via Phylogenetic Inference" class="ltx_ref"><span class="ltx_text ltx_ref_tag">B.1</span></a>.
</span></li>
</ul>
</div>
<div class="ltx_pagination ltx_role_newpage"/><span class="ltx_ERROR undefined">\appendixpage</span>
<div id="A1" class="ltx_appendix">
<h2 class="ltx_title ltx_font_small ltx_title_appendix"><span class="ltx_tag ltx_tag_appendix">Appendix A </span>Sampling orderings uniformly at random conditioned on a phylogeny</h2>

<div id="A1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">In general, the subtree rooted at vertex </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m1" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> defines a partial ordering on its own mentions. To sample a total
ordering </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m2" class="ltx_Math" alttext="\bm{i}_{x}" display="inline"><msub><mi>𝒊</mi><mi>x</mi></msub></math><span class="ltx_text ltx_font_small"> uniformly at random from among those compatible
with that partial ordering, first recursively sample </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m3" class="ltx_Math" alttext="M" display="inline"><mi>M</mi></math><span class="ltx_text ltx_font_small"> orderings
</span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m4" class="ltx_Math" alttext="\bm{i}_{y_{1}},\ldots,\bm{i}_{y_{M}}" display="inline"><mrow><msub><mi>𝒊</mi><msub><mi>y</mi><mn>1</mn></msub></msub><mo>,</mo><mi mathvariant="normal">…</mi><mo>,</mo><msub><mi>𝒊</mi><msub><mi>y</mi><mi>M</mi></msub></msub></mrow></math><span class="ltx_text ltx_font_small"> compatible with the </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m5" class="ltx_Math" alttext="M" display="inline"><mi>M</mi></math><span class="ltx_text ltx_font_small"> subtrees
rooted at </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m6" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small">’s children. Then uniformly sample an interleaving of
the </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m7" class="ltx_Math" alttext="M" display="inline"><mi>M</mi></math><span class="ltx_text ltx_font_small"> orderings,and prepend </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m8" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> itself to this
interleaving to obtain </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m9" class="ltx_Math" alttext="\bm{i}_{x}" display="inline"><msub><mi>𝒊</mi><mi>x</mi></msub></math><span class="ltx_text ltx_font_small">. To sample an interleaving, select one of the input orderings </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m10" class="ltx_Math" alttext="\bm{i}_{y}" display="inline"><msub><mi>𝒊</mi><mi>y</mi></msub></math><span class="ltx_text ltx_font_small"> at random, with probability proportional
to its size </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m11" class="ltx_Math" alttext="|\bm{i}_{y}|" display="inline"><mrow><mo fence="true">|</mo><msub><mi>𝒊</mi><mi>y</mi></msub><mo fence="true">|</mo></mrow></math><span class="ltx_text ltx_font_small">, and print and delete its first element.
Repeating this step until all of the input orderings are empty will
print a random interleaving. Note that in the base case where </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m12" class="ltx_Math" alttext="x" display="inline"><mi>x</mi></math><span class="ltx_text ltx_font_small"> is a leaf (so </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m13" class="ltx_Math" alttext="M=0" display="inline"><mrow><mi>M</mi><mo>=</mo><mn>0</mn></mrow></math><span class="ltx_text ltx_font_small">), this procedure terminates immediately, having printed the empty ordering. Our </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m14" class="ltx_Math" alttext="\bm{i}_{\diamondsuit}" display="inline"><msub><mi>𝒊</mi><mi mathvariant="normal">♢</mi></msub></math><span class="ltx_text ltx_font_small"> is
the output of running this recursive process with </span><math xmlns="http://www.w3.org/1998/Math/MathML" id="A1.p1.m15" class="ltx_Math" alttext="x=\diamondsuit" display="inline"><mrow><mi>x</mi><mo>=</mo><mi mathvariant="normal">♢</mi></mrow></math><span class="ltx_text ltx_font_small">.</span></p>
</div>
</div>
<div id="A2" class="ltx_appendix">
<h2 class="ltx_title ltx_font_small ltx_title_appendix"><span class="ltx_tag ltx_tag_appendix">Appendix B </span>Twitter Grammy corpus</h2>

<div id="A2.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">B.1 </span>Collection</h3>

<div id="A2.SS1.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">Using the Twitter 1% streaming API, we collected all tweets during the 2013 Grammy music awards ceremony, which occurred on Feb 10, 2013 between 8pm eastern (1:00am GMT) and 11:30pm (4:30 GMT).
We used Carmen geolocation </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><a href="#bib.bib7" title="Carmen: a twitter geolocation system with applications to public health" class="ltx_ref">1</a><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small"> to identify tweets that originated in the United States or Canada and removed tweets that did not have a language of English selected as the UI for the tweet author. This yielded a total of 564,892 tweets. We then selected tweets that contained the string “grammy” (case insensitive), reducing the set to 50,429 tweets. These tweets were processed for POS and NER using the University of Washington Twitter NLP tools </span><span class="ltx_note ltx_role_footnote"><sup class="ltx_note_mark">13</sup><span class="ltx_note_outer"><span class="ltx_note_content"><sup class="ltx_note_mark">13</sup><a href="https://github.com/aritter/twitter_nlp" title="" class="ltx_ref ltx_url"><span class="ltx_text ltx_font_typewriter ltx_font_small">https://github.com/aritter/twitter_nlp</span></a></span></span></span><span class="ltx_text ltx_font_small"> </span><cite class="ltx_cite"><span class="ltx_text ltx_font_small">[</span><a href="#bib.bib6" title="Named entity recognition in tweets: an experimental study" class="ltx_ref">3</a><span class="ltx_text ltx_font_small">]</span></cite><span class="ltx_text ltx_font_small">. Tweets that did not include a person mention were removed. For simplicity, we selected a single person reference per tweet. The final set contained 15,736 tweets. Of these, 5000 have been annotated for entities.</span></p>
</div>
</div>
<div id="A2.SS2" class="ltx_subsection">
<h3 class="ltx_title ltx_font_small ltx_title_subsection"><span class="ltx_tag ltx_tag_subsection">B.2 </span>Annotation</h3>

<div id="A2.SS2.p1" class="ltx_para">
<p class="ltx_p"><span class="ltx_text ltx_font_small">A first human annotator made a first pass of 1,000 tweets and then considered the remaining 4,000 tweets. This provided an opportunity to refine the annotation guidelines after reviewing some of the data.
The annotator was asked to assign a unique integer to each entity and to annotate each tweet containing a mention of that person with the corresponding integer. Additionally, the annotator was asked to fix incorrect mention strings. If the extracted mention was incorrect or referred to a non-person, it was removed. If it was mostly correct, but omitted/excluded a token, the annotator corrected it.
Similar to </span><cite class="ltx_cite">Guo<span class="ltx_text ltx_bib_etal"> et al.</span> (<a href="#bib.bib12" title="To link or not to link? a study on end-to-end tweet entity linking" class="ltx_ref">2013</a>)</cite><span class="ltx_text ltx_font_small">, ambiguous mentions were removed. However, unlike their annotation effort, all persons, including those not in Wikipedia, were included. Mentions that were comprised of usernames were excluded (e.g. @taylorswift13). Following this protocol, the annotator removed 423 tweets.
A second annotator inspected the annotations to correct mistakes and fix ambiguous references. The final annotated corpus contains 4,577 annotated tweets and 273 distinct entities. This corpus was then split into five folds by first sorting the entities by number of mentions, then performing systematic sampling of the entities on the sorted list.</span></p>
</div>
</div>
</div>
</div>
</div>
<div class="ltx_page_footer">
<div class="ltx_page_logo">Generated  on Tue Jun 10 18:07:41 2014 by <a href="http://dlmf.nist.gov/LaTeXML/">LaTeXML <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"/></a></div></div>
</div>
</body>
</html>
