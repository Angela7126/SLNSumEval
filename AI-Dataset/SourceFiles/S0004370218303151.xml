<?xml version="1.0" encoding="UTF-8"?><root><url>https://www.sciencedirect.com/science/article/pii//S0004370218303151</url><title>Dynamics in matching and coalition formation games with structural constraints</title><authors>Martin Hoefer,Daniel Vaz,Lisa Wagner</authors><abstract>Matching and coalition formation are fundamental aspects in the organization of many multi-agent systems. In large populations, the emergence of coalitions is often restricted by structural constraints under which agents can reorganize, e.g., local visibility or externality constraints among the agents. We study this aspect using a novel framework for dynamics with constraints within the popular domain of hedonic coalition formation games. We analyze the effects of structural constraints on the convergence of matching and coalition formation processes to stable states. Our main result are tight characterizations for the constraint structures based on which dynamic coalition formation can stabilize quickly. We show a variety of convergence results for matching and coalition formation games with different forms of locality and externality constraints. In particular, we propose and analyze a new model of graph-based visibility for coalition formation games and tightly characterize the graph structures that allow polynomial-time convergence – it can be achieved if and only if coalition formation is based on complete or star graphs.</abstract><keywords>Stable matching;Hedonic games;Path to stability;Convergence</keywords><content><section label="1"><section-title>Introduction</section-title><paragraph>Stable matching and hedonic games  Matching and coalition formation problems form the basis for a variety of assignment and allocation tasks encountered in computer science, operations research, and economics. In multi-agent systems, the formation of coalitions is a natural process to exploit synergies. In this domain, the model of hedonic games [7], [18], [25], [26], [59] represents a natural and versatile approach to analyze aspects of coalition formation processes in multi-agent systems.</paragraph><paragraph>Perhaps the most prominent domain of hedonic games are classes of stable matching. In the classic stable marriage problem, there is a set of men and a set of women. Each agent strives to find a partner from the other gender, and it has a preference list over possible partners. Given a matching (i.e., a set of mutually disjoint man–woman pairs), a blocking pair is a man–woman pair such that both partners strictly improve over their current match if the pair is formed. A matching without blocking pair is called a stable matching. Since its introduction by Gale and Shapley in 1962 [27], stable matching has been successfully applied to capture assignment problems in multi-agent systems in a large variety of applications, e.g., assignment of jobs to workers [5], [41], organs to patients [55], and many others. In addition, stable marriage problems have been successfully used to study distributed resource allocation problems in networks [3], [28], [46]. As such, stable marriage occupies a central position in the analysis of decentralized coalition formation.</paragraph><paragraph>There are several natural generalizations of stable marriage that have been intensively studied. Stable roommates instances drop the assumption of two sides – there is simply a single set of n agents, and each agent can match to some (possibly arbitrary) subset of other agents [40]. More generally, hedonic games allow the formation of coalitions of three or more agents. Their main characteristics are that (1) each agent can be part of at most one coalition, and (2) the preference or payoff an agent receives for being in a coalition depends only on the agents in that coalition, but not on how the remaining agents are partitioned. A variety of stability concepts in hedonic games and their aspects have been studied in recent years (see for example [8], [9], [11], [18]). We here concentrate on the natural approach of core-stability, where agents have cardinal preferences for the coalitions they are part of. A state is a set of non-overlapping coalitions, and a blocking coalition is a group of agents that could (all individually) improve by abandoning their current coalitions and forming a new one together. A state is core-stable if there is no blocking coalition.</paragraph><paragraph>Structural constraints and improvement dynamics  In the standard model of hedonic games, improvement in terms of preferences is the only criterion for deviation to other coalitions. In contrast, there can be a variety of additional constraints that govern the coalition formation process. Our main contribution in this paper is the formulation of a general framework for hedonic coalition formation with additional constraints. We study the consequences of these constraints on the existence of stable states and their reachability by myopic improvement dynamics.</paragraph><paragraph>Within our general framework, we put a focus on constraints derived from two natural properties of multi-agent systems – local visibility and (positive) externalities. As a concrete application, consider the prominent special case of stable matching. In large matching markets, it is unrealistic to assume that agents have full information about all other agents and possible partners. Instead, agents are often only aware about a subset of the population. For example, consider agents looking for a partner to do a joint activity (such as, e.g., playing squash or chess). We would not expect to form all possible and profitable matching pairs instantaneously. Instead, a pair of actors first have to get to know (about) each other before they can start a joint project. For the task of finding a partner, one often relies on existing relationships from family or co-workers. As a stylized model, we can capture this idea by extending the standard model of stable matching using a network – possible matching pairs have to be connected in an underlying social network to be available for formation. More interestingly, by engaging in an activity with a new partner, we get to know their friends and partners and possibly discover new and better matches. When we incorporate this aspect, we arrive at what has been termed locally stable matching[5], [19], [23], [31], [37]. Here the agents of a (local) blocking pair must have a hop-distance of at most 2 in the underlying network of social contacts and existing matched pairs. A variation of this model can be used to study job markets, where we strive to match jobs to workers. It is known that a large portion of jobs are assigned based on social contacts to co-workers in the same firm. Here the social network is present only among workers, but firms can match to multiple workers [5].</paragraph><paragraph>More generally, instead of visibility it is also natural to imagine that social contacts have a positive externality (or “altruistic”) effect on actors. Beyond anecdotal evidence, there are studies in experimental game theory that support this assumption [43], [44]. In addition to social ties and friendship, such an altruistic or considerate behavior can also arise, e.g., due to the existence of formal contracts or business relations among agents. Recently, such effects have received increased interest in a variety of game-theoretic models, including potential games [21], [33], [34], matching [4], and hedonic coalition formation [49]. In this case, agents are assumed to consider the (negative) effects on others when forming a new match and thereby, e.g., “stealing” the current partner of one of their friends or family members. A frequently explored model in games with cardinal utility is to express the trade-off between individual improvement and externality using a numerical value {a mathematical formula}cu,v≥0 for each pair {a mathematical formula}u,v of agents. The perceived utility of an agent u then is a weighted sum of his individual utility and the utilities of all other agents v (weighted with {a mathematical formula}cu,v). Here the agents of a (friendship) blocking pair must have improved perceived utilities.</paragraph><paragraph>In this paper, our goal is to shed light on the properties of a variety of extensions of stable matching and hedonic coalition formation games, in which coalition formation is restricted by additional constraints. Such constraints can arise due to many aspects, for example, spatial closeness, previous collaborations, or social ties based on family, friendship, or co-worker relations. The general model we study here includes a variety of special cases that have found recent interest in the literature, such as socially and locally stable matchings [5], [6], [19], [23], [31], [37] or friendship stable matching [4]. In addition, we also outline a natural model of considerate stable matching.</paragraph><paragraph>Our interest is in the properties of these games when the system is governed by dynamic and myopic coalitional deviations. Intuitively, such systems will eventually converge to a stable matching or core-stable state (if it exists). We study improvement dynamics, that is, the type of dynamics arising when we allow the iterative resolution of blocking coalitions until a stable state is reached. A blocking coalition is resolved by deleting all overlapping coalitions from the state and then adding the blocking coalition – possibly leaving some agents single. Thus, some agents improve in terms of their preference while others deteriorate. In consequence, such a sequence of improvement steps can take very long until it reaches a stable state, or it might even run into cycles. Of course, such behavior is undesirable, and our main interest is to identify and characterize conditions under which stable states can be reached (quickly).</paragraph><paragraph>A common aspect in all the example domains discussed above is that a blocking pair – in addition to being an improvement in terms of their preference for both incident agents – also has to fulfill additional graph-theoretic properties. A stable matching in these variants is a matching that has no blocking pair that satisfies such additional properties. Consequently, each stable matching remains stable, even when we require additional constraints for deviation. However, a state that is stable under a set of additional constraints might not be a (globally) stable matching. We analyze the effects of such constraints on the reachability of stable states using sequential improvement dynamics.</paragraph><paragraph>Since every stable matching remains stable under additional structural constraints, one might be tempted to think that stable matchings with constraints become easier to find and/or reach using distributed dynamics. In contrast, we show that stable matchings with constraints have a rich structure and can behave quite differently than stable matchings in unconstrained settings. More generally, our main results characterize sequences of improvement steps for a broad class of hedonic games with general conditions on the structural constraints.</paragraph><section label="1.1"><section-title>Contribution and outline</section-title><paragraph>We study a broad domain of different matching and coalition formation game settings with structural constraints. In addition, we concentrate on the four matching variants (locally, socially, considerate and friendship stable matching) sketched above with their diverse facets. Our main focus lies on improvement dynamics and on (fast) reachability of stable states in the presence of structural constraints. A central question we study in this paper is the existence of a path to stability: Given an initial state, is there a path to stability, i.e., a sequence of resolutions of blocking coalitions that leads into a stable state? The existence of finite paths to stability guarantees that random improvement dynamics, in which blocking coalitions are chosen uniformly at random for resolution, converge to a stable state with probability 1 in the limit. Moreover, we are interested in the length of the paths to stability, and whether we can compute them in polynomial time.</paragraph><paragraph>We concentrate on matching and coalition formation games with correlated preferences, in which each coalition is characterized by a single benefit or quality value, and agents prefer coalitions with higher value. This domain has a natural appeal, e.g., it generalizes weighted matching problems that are ubiquitous in many applications. Furthermore, it guarantees existence of and convergence to core-stable states due to the existence of a lexicographical potential function [1], [46], [59]. In contrast, the case of general preferences over coalitions is much harder to tackle, since already deciding the existence of core-stable states is an extremely hard problem in seemingly special cases [51], [52], [53], [58], [59]. Characterizing convergence properties in this general domain represents an interesting direction for future work.</paragraph><paragraph>In Section 2 we first review a number of stable matching variants that formulate constraints on the matching process and have found recent interest in the literature. These games are special cases of our novel class of games termed coalition formation games with constraints, which we introduce in Section 3. For these games, we represent the improvement dynamics and consistent constraints using two sets of rules that depend on the current state. There is a set of self-generating coalitions {a mathematical formula}Cg that can always be considered for deviation. In addition, generation rules specify a subset of coalitions that can be considered for deviation, which is based on the current state. Domination rules specify a subset of coalitions that are unavailable for deviation, which is based on the current state. Blocking coalitions for a state are undominated coalitions that can be generated. In principle, the rules can create arbitrary dependencies of blocking coalitions on the entire state.</paragraph><paragraph>We put special emphasis on games with consistency conditions given as follows. Consistent generation rules are of the form {a mathematical formula}(C′,C), when availability of coalition C depends only on existence of a single overlapping coalition {a mathematical formula}C′ with {a mathematical formula}C′∩C≠∅. For consistent domination rules {a mathematical formula}({C1,C2,…,Ck},C) – which implies C is dominated when all coalitions {a mathematical formula}C1,…,Ck exist – we assume that there is at least one overlapping{a mathematical formula}Ci with {a mathematical formula}Ci∩C≠∅. With consistent constraints the set of blocking coalitions can depend on the current state in a non-trivial way. However, the non-trivial blocking coalitions are in some sense local – a coalition can be generated only when some other overlapping coalition exists in the current state. Moreover, a coalition being dominated can be traced back to existence of some overlapping coalition in the current state.</paragraph><paragraph>We show that consistent constraints guarantee the existence of paths to stability with polynomial length. To highlight the broad applicability of these results, we show that all the matching variants discussed in the introduction yield consistent generation and domination rules. A detailed reduction is given in Appendix A. Furthermore, we show that our characterization is tight. The tightness result does not only apply when dropping consistency for generation and/or domination rules, but also with respect to relaxation of their intrinsic conditions described above. If generation rules are consistent and there are two coalitions allowed in the precondition of a generation rule, exponential paths to stability can become necessary. The same holds for consistent generation rules and when the single coalition in the domination rule is allowed to be non-overlapping with the target coalition. As long as domination rules are consistent, however, we can always guarantee that all paths to stability are finite. In contrast, for consistent domination rules and generation rules that are allowed to be non-overlapping with the target coalition, there are instances where no (finite) path to stability exists.</paragraph><paragraph>Consistent constraints guarantee paths of polynomial length to some stable state. Moreover, we show that they imply that there is a path of polynomial length to any reachable state. However, if we ask if there is a path to stability to a given stable state, this question becomes {a mathematical formula}NP-hard to decide in many cases. In fact, we prove a general reduction that shows the hardness result for locally, socially, considerate and friendship stable matching with correlated preferences. Moreover, it shows the hardness result also for classic two-sided stable marriage with strict preferences (and without any additional constraints). To our knowledge, this result was not known before – in contrast, it has been known for more than two decades that polynomial paths to some stable marriage always exist [57].</paragraph><paragraph>As an additional domain, in Section 4 we consider a class of hedonic games with correlated preferences and visibility based on formation graphs. This represents a generalization of locally stable matching. In these games, we show another tight characterization of paths to stability with polynomial length. They are guaranteed to exist if and only if the formation graphs are either only complete graphs or only star graphs. While games based on star graphs turn out to yield consistent constraints, for complete graphs we show the result using a different set of arguments.</paragraph><paragraph>Our results are strongest when agents strive to form coalitions of small size. Let n be the number of agents and m be the number of possible coalitions that can form. In the prominent domain of matching, coalitions have size at most 2 and thus {a mathematical formula}m≤(n2). Our upper bounds on the length of paths to stability are polynomial in n and m. In contrast, the lower bound gadgets yield lengths exponential in n and only use coalitions of constant size. While the results apply in general, they are strongest when {a mathematical formula}m∈poly(n) (e.g., for matching or when all coalitions that can form have constant size), since in this case we obtain a clear dichotomy of polynomial in n vs. exponential in n. Moreover, if {a mathematical formula}m∈poly(n), then many involved problems in constructing improvement steps (finding a local blocking coalition, or the one with maximum benefit) can be solved trivially in time {a mathematical formula}poly(n).</paragraph><paragraph>This work has partly appeared as extended abstracts in the proceedings of the 29th AAAI Conference on Artificial Intelligence (AAAI 2015) [35] and the 10th International Conference on Web and Internet Economics (WINE 2014) [36].</paragraph></section><section label="1.2"><section-title>Related work</section-title><paragraph>Coalition formation and matching games are fundamental in the area of cooperative game theory, as they allow to model a variety of assignment, allocation, and formation problems. Applications can be found, for example, in computer science, operations research, and economics (for an overview see [10], [30]). Hedonic games are a central concept for modeling coalition formation in multi-agent systems, game theory, and algorithms. In these games the payoff for an agent is determined solely by the coalition it is part of. Since the initial work of Dreze and Greenberg [25], stability concepts in hedonic coalition formation games, their efficiency, and their computation have received significant attention in game theory [11], [18], [26], [58] and computer science [7], [20], [59]. In general, computing core-stable partitions is a very hard problem, lying at the second level of the polynomial hierarchy. For a recent overview on this problem we refer to Woeginger [59]. More recent developments on characterizing tractable cases can be found in [51], [52], [53], [54].</paragraph><paragraph>Besides interest in graph theory, matching problems have received great attention in computer science, economics, and psychology due to many applications in assignment and allocation problems. For the two-sided stable marriage problem, where agents are divided into two sets and the potential matching edges form a bipartite graph, there has been a large amount of work on various aspects, for example, ties, incomplete lists, and many-to-many matchings. For an introduction to stable marriage and many of its variants see, e.g. [29], [45], [56].</paragraph><paragraph>There is a significant literature on matching dynamics, especially in economics, which is too broad to survey here. These works usually do not address issues like computational complexity or worst-case bounds. Here we focus on a subset of prominent analytical works related to our scenario.</paragraph><paragraph>In the stable marriage problem, a stable matching can always be reached in a polynomial number of improvement steps [57]. On the other hand, if in each step the blocking pair is chosen uniformly at random, convergence time can become exponential [2]. Furthermore, there exist instances and sequences of improvement steps such that the dynamics cycle [42]. However, if preferences are randomized, short convergence time can be observed experimentally [15]. For weighted or correlated matching, random dynamics can be shown to converge in expected polynomial time [2], [47]. More recently, convergence time of random dynamics using combinatorial properties of preferences have been studied [38].</paragraph><paragraph>In the stable roommates problem, where every pair of agents can be matched, stable matchings might not exist. However, deciding existence and computing a stable matching, if they exist, can be done in polynomial time [24], [40]. Several works have studied the computation of (variants of) stable matchings using iterative entry dynamics [14], [16], [17], [22], or matching problems in scenarios with payments or profit sharing [4], [13].</paragraph><paragraph>For socially stable matchings, the problem of computing a maximum-cardinality stable matching has found interest. There is a 1.5-approximation algorithm and approximation hardness within {a mathematical formula}1.5−ϵ under the unique games conjecture [6].</paragraph><paragraph>Locally stable matching games were first studied for the special case of two-sided job-markets, where social links only exist among one partition [5]. Using a potential function argument, existence and reachability of stable states is always guaranteed for correlated preferences, even for networks with arbitrary links in the roommates problem. There always exist paths to stability of polynomial length, but random dynamics might need an exponential number of steps to converge [31]. For maximum locally stable matchings, the problem cannot be approximated within {a mathematical formula}(21/19−ϵ) unless P = {a mathematical formula}NP[23] and within 3/2 under the unique games conjecture [37]. Local algorithms perform arbitrarily badly [19]. Similar ideas of limited and dynamic visibility have recently been studied in the context of network creation games [12].</paragraph><paragraph>Our approach to locality is related to existing graph-based models for limited interaction. Most prominently, there is a large body of works treating the Myerson value in graph-based cooperative games [48], [50]. While the underlying network does not restrict the allowed deviations, the Myerson value only assigns positive payoff to those coalitions which form a connected component regarding the network. In a similar direction, recent work showed strong hardness results for computing stable states in hedonic games with coalitions that are connected components in a static network [39].</paragraph><paragraph>The concept of considerate stable matching is related to ideas of ordinal externalities that have been studied in the context of resource selection games [32]. Friendship and other-regarding preferences in stable matching games have been studied in [4]. They analyze the existence of friendship stable matchings and bound prices of anarchy and stability with equal and unequal sharing of matching benefits. A different approach to friendship-based preferences grounded in ordinal and axiomatic properties is analyzed in [49].</paragraph></section></section><section label="2"><section-title>Preliminaries</section-title><section label="2.1"><section-title>Matching and coalition formation games</section-title><paragraph>In a coalition formation game there is a set of rational agents that strive to group into coalitions. Depending on the group(s) an agent is part of, this generates a benefit for the agent. For most of the paper we assume that each agent can be part of at most one coalition. Given a set of coalitions, to establish a new coalition (and thereby potentially destroy existing ones), all agents of the new coalition have to agree to deviate. An agent is willing to deviate from (and thus destroy) an existing coalition only if the new coalition yields strictly larger benefit.</paragraph><paragraph label="Definition">Coalition formation gameA (hedonic) coalition formation game{a mathematical formula}G=(V,C,b) (with correlated preferences) consists of</paragraph><list><list-item label="•">a set V of agents or players,</list-item><list-item label="•">a set of possible coalitions or hyperedges{a mathematical formula}C⊆2V∖{∅},</list-item><list-item label="•">a benefit-function {a mathematical formula}b:V×C→R&gt;0.</list-item></list><paragraph>In this paper, we focus on the case of correlated preferences where {a mathematical formula}b(v,C)=b(C) for all {a mathematical formula}v∈C. Generalizing our results to more general domains seems an interesting and very challenging open problem.</paragraph><paragraph>A set {a mathematical formula}S⊆C with {a mathematical formula}|{C|C∈S,v∈C}|≤1 for every {a mathematical formula}v∈V is called a state or a coalition structure. Given a coalition structure {a mathematical formula}S, the benefit of agent {a mathematical formula}v∈V is given by {a mathematical formula}b(v,S)=b(C) if there is {a mathematical formula}C∈S with {a mathematical formula}v∈C, and {a mathematical formula}b(v,S)=0 otherwise.</paragraph><paragraph label="Definition">We consider improvement dynamics that replace coalitions by more worthy ones. These are termed blocking coalitions. Blocking coalition, stabilityFor a coalition structure {a mathematical formula}S, agent v is saturated if there is {a mathematical formula}Cv∈S with {a mathematical formula}v∈Cv. A coalition {a mathematical formula}C∈C∖S is a blocking coalition if for every saturated agent {a mathematical formula}v∈C it holds {a mathematical formula}b(C)&gt;b(Cv). If {a mathematical formula}S has no blocking coalition, it is called (core)-stable.{sup:1} Intuitively, a blocking coalition C is a coalition such that every involved saturated agent would prefer to be in this coalition over being in the coalition it is part of in {a mathematical formula}S. By assumption, if an agent is not saturated in {a mathematical formula}S, then it prefers to be part of a coalition.</paragraph><paragraph>An improvement step is the resolution of some blocking coalition C: We drop all existing coalitions from the state that overlap with C. Then we add C to the state. Note that the payoff for all agents in the blocking coalition C strictly increases upon resolution.</paragraph><paragraph label="Definition">Due to its many applications, we put a special focus on matching games. Matching gameA matching game is a coalition formation game with {a mathematical formula}|C|=2 for all {a mathematical formula}C∈C. We refer to a coalition as a pair, and two agents involved in a pair are matching partners. A coalition structure is termed a matching and denoted by M. We call a blocking coalition in a matching game a blocking pair. A matching without blocking pairs is called a stable matching.</paragraph><paragraph>A prominent class are two-sided or bipartite matching games, where V is composed of two disjoint sets U and W, and {a mathematical formula}C⊆U×W. This scenario is also referred to as the stable marriage problem.</paragraph><paragraph>Due to consistency with the literature, we express a matching game by a simple, undirected graph {a mathematical formula}G=(V,E) (with {a mathematical formula}E=C). Every possible coalition is an edge {a mathematical formula}e∈E with edge benefit {a mathematical formula}b(e).</paragraph></section><section label="2.2"><section-title>Constraints</section-title><paragraph>Important aspects of coalition formation such as locality or externalities are not captured by the standard model of hedonic coalition formation. We model these aspects by the addition of structural constraints. We here recapitulate several models that have been proposed in the literature for local visibility and externality constraints in matching markets, and we propose direct extensions to more general coalition formation scenarios. In addition, we present a novel model of considerate stability to study coalition formation with positive externalities.</paragraph><section label="2.2.1"><section-title>Social stability</section-title><paragraph>In large markets, agents have no chance to gather information about all other agents due to its size or diversity. Hence, it is reasonable to assume that agents know only about a certain subset of other agents and can only deviate to coalitions formed with those agents. To model matching markets where agents can only deviate to known partners, we consider socially stable matchings. The agents are embedded into a network{a mathematical formula}N=(V,L), where L is a set of links. A link {a mathematical formula}{u,v}∈L indicates that u and v know about each other. Initially, an agent u can be matched to any other agent w with {a mathematical formula}{u,w}∈E. Subsequently, however, it can only deviate to match to an agent v with {a mathematical formula}{u,v}∈E∩L.</paragraph><paragraph>More formally, the only change concerns the definition of blocking pair. A pair {a mathematical formula}e={u,v} is called a social blocking pair if e is a blocking pair and {a mathematical formula}e∈L. Consequently, a social improvement step is the resolution of a social blocking pair, and a state M is a socially stable matching if it has no social blocking pair. Socially stable matchings were introduced by Askalidis et al. [6]. For an example, see Fig. 1.</paragraph><paragraph>We can restrict attention to instances with {a mathematical formula}L⊆E, since links {a mathematical formula}ℓ∉E have no effect on social blocking pairs. Note that edges {a mathematical formula}e∈E∖L can be present in the initial state. However, none of these edges is available for subsequent deviation. Hence, as soon as an agent deviates, any incident matching edge will be from L.</paragraph><paragraph>The edges {a mathematical formula}e∈E∖L can make a significant difference in terms of size and computational complexity of socially stable matchings (see [6]). A central match-making platform might be able to bring together pairs that the agents themselves would not be able to come up with (and not be willing to deviate from) in the subset of their locally known agents. In this way, edges {a mathematical formula}e∈E∖L might enable the platform to create much larger (socially) stable matchings than when creation and deviation are based on the same set of edges. For dynamics, the impact of edges {a mathematical formula}e∈E∖L is arguably more limited.</paragraph><paragraph>We here extend the model to coalitions with more than two agents. By doing so, there is some freedom to define the relationship between social links among agents and the resulting coalitions that can form. Since the formation of a coalition often requires a significant amount of coordination and cooperation among its members, we find it natural to assume that agents of a blocking coalition know each other, i.e., a blocking coalition must form a clique in N. More generally, it might also be sufficient that the coalition has a small diameter (or is just connected in N) to enable communication and cooperation in order to deviate.</paragraph><paragraph>We capture the network requirements for coalition formation using a set of formation graphs {a mathematical formula}H. Each of the graphs {a mathematical formula}H∈H represents a minimal connectivity structure that should be present for a coalition to achieve visibility and organization of a deviation. A coalition can form if its inherent network structure contains at least one formation graph {a mathematical formula}H∈H as a subgraph. The formation graphs represent a minimum requirement in the sense that additional links cause no harm to the organization of the coalition as a deviation. Examples for formation graphs are, e.g., cliques, stars (a center agent that knows all other agents of the coalition organizes its creation), or graphs with small diameter.</paragraph><paragraph>More formally, in a social coalition formation game there is a set {a mathematical formula}H of graphs. A coalition C is a social blocking coalition if it is a blocking coalition and there is a graph {a mathematical formula}H=(VH,EH)∈H and some bijective map {a mathematical formula}φ:VH→C such that {a mathematical formula}{u,v}∈VH⇒{φ(u),φ(v)}∈L. By abuse of notation we will denote the latter condition by {a mathematical formula}H(C)∈L. The graphs in {a mathematical formula}H are termed formation graphs. A state {a mathematical formula}S is a socially stable state if it has no social blocking coalition.</paragraph></section><section label="2.2.2"><section-title>Local stability</section-title><paragraph>The concept of socially stable states is static since there is no aspect of market exploration. In contrast, locally stable matching captures the idea that the set of agents that know about each other and the coalitions available for deviation changes depending on the current state. By matching to some agent v, an agent u might get to see additional agents from the population and thereby obtain additional and possibly more preferred partners to match and deviate. Similarly, if a match is abandoned, an agent might lose information about the population and get more restricted in the way it can match.</paragraph><paragraph>There is again a network {a mathematical formula}N=(V,L), in which L is a set of links. Links are static and represent connections independent of the coalition formation problem, e.g., based on family bonds or work relations. In contrast to socially stable matching, these links do not only provide alternative partners but also allow to explore and discover other matching partners. Agents see their 2-hop neighborhood in the graph {a mathematical formula}(V,M∪L), i.e., the set of possible matching partners depends on L and the current matching M. Thus, the improvement dynamics become a joint matching and exploration process. While the links in L are permanent, note that matching edges cease to exist once they are dropped from M. This can also reduce the set of matching partners that are known to each other.</paragraph><paragraph>More formally, we say that a pair {a mathematical formula}{u,v} is accessible in state M if u and v have hop-distance at most 2 in the graph {a mathematical formula}(V,L∪M). Put differently, {a mathematical formula}dist(u,v,(V,L∪M))≤2 where {a mathematical formula}dist gives the length of a shortest path from u to v (which is ∞ if u and v lie in different connected components). A pair {a mathematical formula}e={u,v} is called a local blocking pair if e is a blocking pair and e is accessible. A local improvement step is the resolution of a local blocking pair, and a state M is a locally stable matching if it has no social blocking pair. Locally stable matchings were introduced by Arcaute and Vassilvitskii [5] and further studied in [23], [31], [37].</paragraph><paragraph>For local blocking pairs, a shortest path that makes them accessible can consist of one link, two links, or of exactly one link and one matching edge. In the latter case, let w.l.o.g. {a mathematical formula}{u,w} be a matching edge. As u has at most one incident edge in M, the local improvement step will delete {a mathematical formula}{u,w} to create {a mathematical formula}{u,v}. For simplicity, we will refer to this fact as an “edge moving from {a mathematical formula}{u,w} to {a mathematical formula}{u,v}” or “u's edge moving from w to v”. For an example, see Fig. 2.</paragraph><paragraph>To extend these ideas to games with larger coalitions, there are again several options to define a notion of accessible coalition. Similar to our approach for social coalition formation games above, we consider a set {a mathematical formula}H of formation graphs that determines the minimum graph structures that are required among a coalition to be a candidate for deviation. Intuitively, closely connected graph structures of small diameter are natural choices for formation graphs. In this case, we also consider a notion of visibility of edges – a coalition C is accessible if there is a graph {a mathematical formula}H=(VH,EH)∈H with {a mathematical formula}|VH|=|C| and a bijective map {a mathematical formula}φ:VH→C such that each edge {a mathematical formula}{u,v}∈VH is visible in the current coalition structure. Note that in the case of matching, there is no need to define a separate visibility notion for edges, since all coalitions are single edges.</paragraph><paragraph>To define visibility for an edge, we construct a visibility graph for a state by adding L and a clique of temporary links for every existing coalition. Formally, the visibility graph for coalition structure {a mathematical formula}S is {a mathematical formula}G(S)=(V,L∪{{w,w′}|w,w′∈S andS∈S}). The direct extension of local stability for matchings would be to define an edge as visible when the nodes are within a hop-distance of 2 in the visibility graph – formally {a mathematical formula}{u,v}∈VH⇒dist(φ(u),φ(v),G(S))≤2. However, this condition is arguably quite a stretch for larger coalitions, since here each connection for organizing the new coalition might only be a 2-hop path in terms of current visibility structure. As such, it might be the case that for each edge of H, the coalition C must rely on paths in {a mathematical formula}G(S) involving outside agents. We briefly consider this model in Section 4.2 and prove an exponential lower bound for very simple games of this kind.</paragraph><paragraph>For this reason, our main interest is in a more direct approach. In a local coalition formation game, an edge is termed visible if it exists in {a mathematical formula}G(S). Consequently, a coalition C is accessible in state {a mathematical formula}S if there is some {a mathematical formula}H=(VH,EH)∈H and some bijective map {a mathematical formula}φ:VH→C such that {a mathematical formula}{u,v}∈VH⇒{φ(u),φ(v)}∈G(S). Again by abuse of notation we will denote this situation by {a mathematical formula}H(C)∈L∪S. A coalition C is a local blocking coalition if it is a blocking coalition and accessible, and a locally stable state is a state {a mathematical formula}S without a locally blocking coalition.</paragraph><paragraph>Observe that if {a mathematical formula}H does not solely consist of cliques, this definition implies an exploration aspect of the resulting dynamics, similar to locally stable matching. However, with this direct approach to visibility the exploration aspect relies on the presence of larger coalitions. When we consider the special case of matching, the scenario becomes socially stable matching (and not locally stable matching).</paragraph></section><section label="2.2.3"><section-title>Considerate stability</section-title><paragraph>In considerate stable matching we model the influence of friendship relations or contract partnerships on matching dynamics. The relations are again captured via an undirected network {a mathematical formula}N=(V,L) with link set L. In this case, however, the links express friendships and positive externalities. Every edge {a mathematical formula}e∈E is available for formation throughout. However, agents deviate and form a new match only if none of their friends (neighbors) in the network N suffers from this.</paragraph><paragraph>A blocking pair {a mathematical formula}e={u,v}∈E is not accessible if at least one agent in e has a neighbor in N, for whom benefit decreases when {a mathematical formula}{u,v} is resolved. Such pairs are not available for resolution, even if they constitute blocking pairs. Formally, a pair {a mathematical formula}{u,v}∈E is not accessible in state M if there is an agent {a mathematical formula}v′ such that {a mathematical formula}{u,v′}∈M, and (a) {a mathematical formula}{u,v′}∈L or (b) {a mathematical formula}{v,v′}∈L. Otherwise, the pair is called accessible in M. A pair {a mathematical formula}{u,v} is a considerate blocking pair if it is a blocking pair and accessible. A considerate improvement step is the resolution of such a considerate blocking pair, and a state M without considerate blocking pair is a considerate stable matching (see Fig. 3 for an example).</paragraph><paragraph>For larger coalitions we generalize this definition in the following way. In considerate coalition formation there is a limit l for each agent on the number of neighbors it is willing to hurt when being part of a resolved blocking coalition. For considerate matching this number is set to {a mathematical formula}l=0. For matching games at most two drop their partners if a blocking pair is resolved. Thus, a limit of {a mathematical formula}l=1 would only have influence on constellations where one agent is friends with both his own matching partner and the current partner of the desired new matching partner. In contrast, for larger coalitions the number of agents influenced by an improvement step can grow quadratically. If we consider coalitions of size Δ, the formation of one new coalition can result in up to {a mathematical formula}Δ(Δ−1) agents being dropped from the coalition structure. In these settings, it is reasonable to consider {a mathematical formula}l&gt;0, that is, agents might be willing to hurt some small number of their friends by deviating to a new coalition.</paragraph><paragraph>Formally, for a coalition C in state {a mathematical formula}S, consider for {a mathematical formula}v∈C the penalty {a mathematical formula}pen(v,C)=|{v′:v′∈C′∈S,v′∉C,C∩C′≠∅,{v,v′}∈L}|, i.e., the number of neighbors in N that are part of some coalition in {a mathematical formula}S and become single when C is added to and all overlapping coalitions are removed from the state. Then C is accessible in {a mathematical formula}S if{a mathematical formula} A coalition C is a considerate blocking coalition if it is a blocking coalition and accessible, and a state {a mathematical formula}S without considerate blocking coalitions is a considerate stable state.</paragraph></section><section label="2.2.4"><section-title>Friendship stability</section-title><paragraph>In considerate stable matching we formulated a binary condition on externalities among friends. Friendship stable matching represents an aggregative setting where every agent {a mathematical formula}u∈V expresses for every agent {a mathematical formula}v∈V a numerical value {a mathematical formula}cu,v to which extent it cares about the benefit of agent {a mathematical formula}v∈V. We normalize the values by assuming {a mathematical formula}cu,u=1. Agent u now strives to optimize the perceived benefit{a mathematical formula} in state {a mathematical formula}S. In contrast to all other scenarios treated above, this definition inherently relies on cardinal benefit values for coalitions and cannot be applied directly to ordinal preferences.</paragraph><paragraph>We directly introduce the general approach for coalitions or arbitrary size. In a friendship coalition formation game, a state {a mathematical formula}S has a perceived blocking coalition{a mathematical formula}C∈C if for every {a mathematical formula}v∈C we have{a mathematical formula} that is, the perceived benefit needs to increase for every agent involved in C. A perceived blocking coalition is a set of agents that have an incentive to deviate and form C, since the trade-off (expressed in perceived benefit) between the improvement of their individual benefit and the deterioration of individual benefit of their friends is strictly positive for each of them. A perceived improvement step is the resolution of such a perceived blocking coalition. A state {a mathematical formula}S without perceived blocking coalition is a perceived or friendship stable state (for an example see Fig. 4). Friendship stable matching was proposed and studied by Anshelevich et al. [4].</paragraph><paragraph>Based on the values {a mathematical formula}cu,v, it is possible to capture a variety of phenomena – from altruism when {a mathematical formula}cu,v≥1 for all v to pure egoism for {a mathematical formula}cu,v=0 for all v, or spiteful behavior with {a mathematical formula}cu,v&lt;0. Moreover, in general we could imagine asymmetric relations among agents when using {a mathematical formula}cu,v≠cv,u. In this paper, however, we restrict our analysis to symmetric and non-negative values, i.e., {a mathematical formula}cu,v≥0 and {a mathematical formula}cu,v=cv,u for all {a mathematical formula}u,v∈V. If values are negative or asymmetric, we show in Appendix A.4 that there are instances in which friendship stable matchings do not exist.</paragraph></section></section></section><section label="3"><section-title>Coalition formation games with constraints</section-title><paragraph>In this section we introduce a general model of coalition formation games with constraints, where the structural constraints are captured by two simple sets of rules: one determines which coalitions can be generated as a deviation in the current state, the other determines which coalitions are dominated and therefore not possible as deviation in the current state. For a given state, a given coalition is a blocking coalition if and only if it can be generated and is not dominated.</paragraph><paragraph>Our main results show that when generation and domination rules satisfy a small number of consistency properties, then for every initial state there is a path to stability of polynomial length. Moreover, for every initial state, if a state is reachable by a sequence of improvement steps, then there is also one such sequence with a polynomial number of steps. The set of axioms to define consistency is a minimal set – removing any one of the axioms allows for instances with initial states such that there is no path to stability (of polynomial length).</paragraph><paragraph>In Appendix A we show that the coalition formation games defined above give rise to consistent generation and domination rules. This includes all matching variants, as well as, social, considerate and friendship coalition formation games, which allow coalitions of larger size.</paragraph><paragraph>The case is different for local coalition formation games, which in general do not fall within the framework of consistent generation and domination rules. They will be the subject of Section 4, where we characterize the existence of polynomial paths to stability based on the set of formation graphs.</paragraph><section label="3.1"><section-title>Coalition formation games with consistent constraints</section-title><paragraph>In coalition formation games with constraints we supplement a hedonic coalition formation game with sets {a mathematical formula}T,D⊆{(R,C)|R⊂C,C∈C}, where we term T the transition or generation rules and D the domination rules. Here {a mathematical formula}R is a set of coalitions that serves as prerequisite (termed the precondition) and C is a coalition that (due to presence of {a mathematical formula}R) is generated or dominated, respectively.</paragraph><paragraph>More formally, given a state {a mathematical formula}S, if there is a rule {a mathematical formula}(R,C)∈T such that {a mathematical formula}R⊆S and {a mathematical formula}C∉S, then C is called a candidate coalition. For convenience, we exclude generation rules of the form {a mathematical formula}(∅,C) from T and capture these rules in a set {a mathematical formula}Cg⊆C of self-generating coalitions. As no precondition has to be fulfilled to form it, a coalition {a mathematical formula}C∈Cg is a candidate coalition for every state {a mathematical formula}S with {a mathematical formula}C∉S.</paragraph><paragraph>Similarly, given a state {a mathematical formula}S, if there is a rule {a mathematical formula}(R,C)∈D such that {a mathematical formula}R⊆S, then C is dominated. To express the underlying (correlated) preferences of the agents, we assume that D always includes at least the set {a mathematical formula}Db={({C1},C2)|b(C1)≥b(C2),C1∩C2≠∅,C1≠C2} of all benefit domination rules. Benefit domination rules simply capture the usual conditions of stability and myopic improvement, where coalition {a mathematical formula}C2 is dominated by another coalition {a mathematical formula}C1 if they overlap and the benefit of {a mathematical formula}C1 is at least that of {a mathematical formula}C2. Thus, existence of {a mathematical formula}C1 prohibits emergence of {a mathematical formula}C2.</paragraph><paragraph>A feasible state does not contain any dominated coalitions. If {a mathematical formula}S is such that there is a rule {a mathematical formula}(R,C)∈D with {a mathematical formula}R⊂S and {a mathematical formula}C∈S, then the state {a mathematical formula}S is infeasible. We assume that infeasible states are excluded from the game. Note that benefit domination rules never make a state infeasible, because states cannot contain overlapping coalitions.</paragraph><paragraph>For a feasible state {a mathematical formula}S, a blocking coalition C is an undominated candidate coalition. {a mathematical formula}Db ensures that C can only become a blocking coalition if every agent {a mathematical formula}v∈C prefers resolution of C in terms of its benefit. In an improvement step, a blocking coalition is inserted and an auxiliary state {a mathematical formula}S′=S∪{C} is created. Then, every dominated coalition in {a mathematical formula}S′ is removed. Note that {a mathematical formula}Db ensures that we remove at least every coalition that overlaps with C and has strictly smaller benefit. In particular, the new set of coalitions constitutes a feasible state.</paragraph><paragraph>We now define consistent generation and domination rules.</paragraph><paragraph label="Definition">Consistent generation rulesThe generation rules of a coalition formation game with constraints are called consistent if {a mathematical formula}T⊆{({C′},C)|C,C′∈C,C∩C′≠∅}. Every generation rule involves only a single coalition in the precondition, and it shares at least one agent with the candidate coalition.</paragraph><paragraph label="Definition">Consistent domination rulesThe domination rules of a coalition formation game with constraints are called consistent if {a mathematical formula}D⊆{(R,C)|R⊂C,C∈C,C∉R,∃C′∈R:C∩C′≠∅}. At least one coalition in {a mathematical formula}R intersects with the dominated coalition.</paragraph><paragraph label="Observation 2">For generation rules the definition requires that there is only a single coalition in the precondition and that this coalition overlaps with the candidate coalition. By the benefit domination rules, such a coalition is undominated only if the precondition coalition is of strictly smaller benefit than the candidate coalition. In the subsequent improvement step, we replace the precondition coalition with the candidate coalition. Therefore, the only meaningful generation rules are those where the precondition coalition is of strictly smaller benefit than the candidate coalition.For domination rules we allow an arbitrary number of coalitions in the precondition, but at least one of them has to overlap with the dominated coalition. In consequence, when adding a blocking coalition C into {a mathematical formula}S′, several coalitions might become dominated. However, since {a mathematical formula}S was a feasible state, there exist no overlaps between coalitions in {a mathematical formula}S. Hence, all dominated coalitions in {a mathematical formula}S′ must intersect C. Moreover, since C is a blocking coalition, it is undominated in {a mathematical formula}S′. Hence, all dominated coalitions in {a mathematical formula}S′ must intersect C and be of smaller benefit. Thus, we may restrict our attention to {a mathematical formula}Db to identify the dominated coalitions in {a mathematical formula}S′.</paragraph><paragraph>These observations show that for the implementation of the improvement step, we can concentrate on generation and domination rules that execute the standard benefit improvement of agents in overlapping coalitions. While we only need {a mathematical formula}Db for this, the rules in {a mathematical formula}D∖Db can still make a significant difference in the definition of blocking coalition.</paragraph><paragraph>For example, in considerate stable matching, the intuition is that all matching edges can form, but agents only deviate if this improves their benefit and does not hurt their friends. Hence, we do not need generation rules (i.e., {a mathematical formula}T=∅) and have {a mathematical formula}Cg=E. A domination rule {a mathematical formula}(e′,e)∈D∖Db expresses that a matching edge {a mathematical formula}e={u,v} is dominated if {a mathematical formula}e′={v,w}∈M, since in such a deviation u would “steal” the partner v from his friend w. Note that in this case, the agent that gets stolen yields an overlap {a mathematical formula}v=e′∩e, which makes the domination rules consistent.</paragraph><paragraph>As another example, in locally stable matching, the main idea is that generation of matching edges depends on the current state. Here the domination rules are simply the benefit domination rules {a mathematical formula}Db. A generation rule {a mathematical formula}(e′,e)∈T expresses that a matching edge {a mathematical formula}e={u,v} can be generated when {a mathematical formula}e′={v,w}∈E and there is some {a mathematical formula}{w,u}∈L. Such a deviation would imply agent v switches from partner u to u's friend w, which yields an overlap {a mathematical formula}v=e′∩e. Since {a mathematical formula}{u,w}∈L is a static condition, only existence of the single coalition {a mathematical formula}{v,w}∈M is needed to generate {a mathematical formula}{u,v}. Hence, these generation rules are consistent. Note that in a variant where w can have two matching partners, {a mathematical formula}e′={v,w}∈Mand{a mathematical formula}e″={u,w}∈M together can lead to {a mathematical formula}{u,v} becoming a local blocking pair. As such, the generation rule {a mathematical formula}({e′,e″},e) is not consistent, and there exist exponential lower bounds on the path to stability for this variant [31].</paragraph><paragraph>More broadly, in the above examples, socially and locally stable matching rely only on benefit domination {a mathematical formula}D=Db. For socially stable matching we simply have {a mathematical formula}Cg=E and {a mathematical formula}T=∅. For locally stable matching we use consistent generation rules as specified above. In considerate and friendship stable matching, we do not make use of generation rules (i.e., {a mathematical formula}T=∅). Every coalition can always be generated {a mathematical formula}Cg=E. Here the domination rules are consistent and express the externality constraints, thereby making certain deviations unavailable. For considerate stable matching, we saw above that the domination rules are of the form {a mathematical formula}(e′,e) with a single coalition in the precondition. In contrast, friendship stable matching has an aggregative nature of externality. As such, there are cases in which agents u and v have no incentive to deviate to {a mathematical formula}{u,v}∉M only if two edges {a mathematical formula}e′={v,w} and {a mathematical formula}e″={u,z} are both present in M. Hence, we obtain consistent domination rules {a mathematical formula}({e′,e″},e) with more than one coalition in the precondition.</paragraph><paragraph>Note that the framework of consistent rules is much more powerful. For example, it allows to study instances, in which we can combine the effects outlined above into one instance of, say, “considerate locally” stable matching. There is a single agent set and two sets of links, where one set is used to express considerate stable matching and the other one locally stable matching. The rule sets T and D for this game are unions of the corresponding rules for the instances of considerate and locally stable matching. Obviously, T and D for the combined instance are again consistent.</paragraph><section label="3.1.1"><section-title>Short paths to stability</section-title><paragraph>Our existence proof for a short path to stability generalizes a previous construction for locally stable matchings [31]. To explain the construction of a short sequence, we will find it convenient to think of the dynamics in the form of moving set of tokens over a graph. More formally, we equivalently represent a coalition formation game with consistent constraints as a directed coalition movement hypergraph{a mathematical formula}Gmov=(Vmov∪Vmov,g,Tmov∪Dmov). The vertices are the possible coalitions: {a mathematical formula}Vmov,g={vC|C∈Cg} contains a vertex for every self-generating coalition, and {a mathematical formula}Vmov={vC|C∈C∖Cg} a vertex for every other possible coalition.</paragraph><paragraph>We represent a coalition structure {a mathematical formula}S as a set of tokens being placed on the vertices. We put a single token on every vertex {a mathematical formula}vC with {a mathematical formula}C∈S. Resolution steps are simulated by the creation of new tokens or the (re-)movement of existing ones. To correctly express the consequences of an improvement step in the game, we use two edges sets corresponding to generation and domination rules. The directed transition edges{a mathematical formula} capture generation rules. By Observation 1, note that {a mathematical formula}Tmov can be restricted to transition edges resulting from generation rules {a mathematical formula}({C′},C) with {a mathematical formula}b(C′)&lt;b(C). The transition edges induce a directed acyclic graph (DAG).</paragraph><paragraph>In addition, the directed domination hyperedges{a mathematical formula} capture the domination rules. They express on which vertices we cannot simultaneously put tokens. In particular,{a mathematical formula} is the set of all domination edges given by benefit domination rules. We call a vertex v in {a mathematical formula}Gmovundominated if for every hyperedge {a mathematical formula}(U,v)∈Dmov at least one vertex in U has no token. For the initial state {a mathematical formula}S0 we put a token on every vertex in {a mathematical formula}Vmov,0={vC|C∈S0}. Since {a mathematical formula}S0 is a feasible state, all vertices with tokens are undominated.</paragraph><paragraph label="Observation 3">The token adjustment in the coalition movement hypergraph correctly captures the creation and deletion of coalitions in every improvement step of the coalition formation game with constraints. To prove the existence of a short sequence of improvement steps to a stable state, we show that only a polynomial number of token adjustments is necessary to reach a stable state. To compute the sequence consider Algorithm 1.</paragraph><paragraph>Phase 1 is a greedy procedure. Phases 2 and 3 generate a new token at a vertex of {a mathematical formula}v∈Vmov,g and move it to a vertex u such that by reaching u, an existing token gets removed. Vertex u is undominated reachable from v if there is a directed path {a mathematical formula}(v=v1,e1,v2,…,eℓ−1,vℓ=u) in {a mathematical formula}Tmov such that {a mathematical formula}vi+1 is undominated if {a mathematical formula}vi has a token (along with all other vertices currently having tokens), for every {a mathematical formula}i=1,…,ℓ−1. Note that for any vertex {a mathematical formula}v∈Vmov,g the set of vertices that are undominated reachable from v can be computed efficiently by BFS.</paragraph><paragraph label="Proof">If the tokens are located at vertices that represent a feasible initial state,Algorithm 1constructs{a mathematical formula}O(nm2)token manipulations such that tokens are placed at vertices that represent a stable state. The algorithm runs in polynomial time.We consider each phase separately. In each round of Phase 1, we move an existing token to a vertex of higher value by using a transition edge. Hence, the total number of tokens does not increase. There are at most n tokens, {a mathematical formula}Tmov represents a DAG, and each token can move to at most m vertices. Hence, Phase 1 finishes after at most {a mathematical formula}n⋅(m−1) rounds, where each round corresponds to a single improvement step.Phase 2 can be seen as an extension of Phase 1. In a round of Phase 2, we create a new token and move it to a vertex u where it leads to removal of an existing token at some vertex, say, {a mathematical formula}u′. Due to Observation 2, u must correspond to a coalition with higher benefit than {a mathematical formula}u′. Thus, at the end of the round, the number of tokens is not increased, and one token has moved from {a mathematical formula}u′ to u with higher coalition benefit. Note that a round of Phase 2 corresponds to at most m improvement steps, which are required to move the token to u. Consequently, the overall number of rounds in Phases 1 and 2 is at most {a mathematical formula}n⋅(m−1), where each round corresponds to at most m improvement steps.When Phase 2 terminates, consider the set {a mathematical formula}V2,end of vertices that have tokens. The tokens at {a mathematical formula}V2,end cannot simply be moved to vertices with higher benefit by transition edges. Moreover, by introducing new tokens at {a mathematical formula}Vmov,g and moving them via undominated reachable vertices, we will never reach a vertex such that some {a mathematical formula}v∈V2,end becomes dominated (otherwise Phase 2 would not have ended). We say that the tokens in {a mathematical formula}V2,end correspond to stable coalitions: No sequence of token adjustments in the graph (improvement step in the game) can lead to any of these tokens (coalitions) being removed. While the coalitions corresponding to {a mathematical formula}V2,end are stable, they do not represent a stable state. There might be additional tokens that can be created. In particular, in Phases 1 and 2 overall the number of tokens is non-increasing.Now in Phase 3, we create and move additional tokens in {a mathematical formula}Gmov. In a round of Phase 3, we generate a token at some vertex in {a mathematical formula}Vmov,g and move it such that it reaches the undominated reachable vertex of highest benefit. For that reason, and since the set of undominated reachable vertices only shrinks in the presence of additional tokens, the created token cannot be (re)moved in subsequent rounds. Hence, each round of Phase 3 expands the set of tokens that correspond to stable coalitions by one. Consequently, in Phase 3 there are at most n rounds, where each round corresponds to at most m improvement steps. The phase finishes with a set of tokens corresponding to a stable state.For efficient computation of the sequence, the relevant tasks are constructing the graph {a mathematical formula}Gmov, checking edges in {a mathematical formula}Tmov for possible improvement of tokens, and computing the reachable subgraphs of {a mathematical formula}Vmov,g. All these tasks can be executed in time polynomial in n, m, {a mathematical formula}|T| and {a mathematical formula}|D| using standard algorithmic techniques.  □</paragraph><paragraph>Combining Observation 3 with Lemma 1 we obtain the desired result for consistent generation and domination rules:</paragraph><paragraph label="Theorem 1">In every correlated coalition formation game with constraints and consistent generation and domination rules, for every initial structure{a mathematical formula}Sthere is a sequence of{a mathematical formula}O(nm2)improvement steps which results in a stable coalition structure. The sequence can be computed in polynomial time.</paragraph></section><section label="3.1.2"><section-title>Short paths to every reachable coalition structure</section-title><paragraph>The previous theorem shows the existence and, in particular, an algorithm for efficient computation of a short path to some stable state. In this section, our first result shows that consistent rules always imply short sequences of improvement steps. More formally, we show that assuming a coalition structure is reachable from a given initial state, then it can be reached in a polynomial number of improvement steps. However, our second result shows that deciding reachability of a given stable matching from a given initial state is {a mathematical formula}NP-hard. In fact, the decision problem is also in {a mathematical formula}NP (and, hence, {a mathematical formula}NP-complete) – if the matching is reachable, our first result implies there is a polynomial path to stability, which is a polynomial-time checkable proof. This hardness result holds in all examples of two-sided matching games with constraints discussed above. Moreover, it extends to standard domains like two-sided matching with correlated preferences and ties, or two-sided matching with strict preferences.</paragraph><paragraph>To prove short sequences to all reachable states, we observe in the subsequent Theorem 2 that if there is a longer sequence of improvement steps, it contains steps which are not relevant for reaching the final state and can be omitted.</paragraph><paragraph>Note that Theorem 2 is somewhat more general and implies parts of Theorem 1. However, the latter presents a polynomial-time algorithm, and thus we decided to present it first. More precisely, in games with consistent domination rules, every sequence of improvement steps is finite due to a lexicographic improvement property (see, in particular, Proposition 3 below). Hence, an initial (possibly exponentially long) sequence to some stable state can always be constructed by arbitrarily executing improvement steps as long as possible. Then Theorem 2 can be applied to yield a short path to stability and implies the existence conditions of Theorem 1. However, this is not an efficient algorithm since the initial sequence might be too long. Instead, Theorem 1 shows how to derive a short path to stability in time polynomial in the size of the description of the game.</paragraph><paragraph label="Theorem 2">In a correlated coalition formation game with constraints and consistent generation and domination rules, for every coalition structure{a mathematical formula}Sthat is reachable from some initial state{a mathematical formula}S0through some sequence of improvement steps, there is also a sequence of polynomially many improvement steps from{a mathematical formula}S0to{a mathematical formula}S.</paragraph><paragraph label="Proof">Consider a sequence I of improvement steps that transforms {a mathematical formula}S0 into {a mathematical formula}S. The proof uses the interpretation of tokens in the coalition formation graph introduced in the last section. At any point in time, the coalition structure is represented via tokens being placed on every vertex corresponding to a coalition in the structure.Consider a single improvement step. In the first part, either a new token τ is introduced (when generating a coalition in {a mathematical formula}Cg) or an existing token τ is moved (when applying a generation rule) from the vertex of the precondition coalition to the vertex of the target coalition. In the second part, the application of domination rules removes tokens from the graph (corresponding to dominated coalitions that are removed from the coalition structure). We say token τcollects all tokens that are removed in the second part. Note that all tokens collected by τ are located at vertices with strictly smaller benefit.Now consider the sequence I of improvement steps. We classify the tokens that appear during the sequence. Each token that is initially placed for some coalition in {a mathematical formula}S0 is called initial. Each token that represents a coalition of {a mathematical formula}S in the end is final. Note that there can be tokens that are both initial and final. For a token that is neither initial nor final, we say it is justified if during the time of its existence it collects at least one other token. Finally, all remaining tokens are superfluous.Consider a superfluous token. It corresponds to a subsequence of (not necessarily consecutive) improvement steps, which create some coalition, apply a number of improvement steps, and then delete the resulting coalition due to creation of a dominating one (which was generated from a different precondition coalition). None of these steps is necessary to reach {a mathematical formula}S from {a mathematical formula}S0 – the coalitions that are created during these steps do not alter or remove any other coalitions, and they do not lead to a coalition that survives in the end. If we just omit all improvement steps that correspond to creation and movement of a superfluous token, we obtain a shorter feasible improvement sequence {a mathematical formula}I′ that starts in {a mathematical formula}S0 and ends in {a mathematical formula}S.Suppose we remove all superfluous tokens. If a justified token τ in I was collecting only superfluous tokens, it becomes superfluous. Hence, we keep iterating the removal of superfluous tokens until only initial, final, and justified tokens remain. In the resulting compact sequence, a token that is initial but not final must be collected by a justified token. When it is collected, the justified token must be located at a vertex with higher benefit. If the collecting token is not final, it must be collected by another justified or final token, again at a vertex with higher benefit, and so on, until the collecting token is final. In addition, there might be final tokens that do not collect any initial or justified tokens.There are {a mathematical formula}|S| final tokens, and each one takes at most m improvement steps to reach the final location in the graph. Initial or justified tokens take at most m steps each until they are collected. If a token is collected, the collecting token is located at a vertex with higher benefit. Hence, if we track the collection events from an initial token to the collecting justified token, to the collecting justified token, etc, to the collecting final token, then there are at most m such collection events for each initial token. Hence, for each initial token, the sequence has at most {a mathematical formula}m2 improvement steps. In conclusion, this proves that any compact sequence consists of at most {a mathematical formula}|S0|⋅m2+|S|⋅m≤nm2+nm steps.  □</paragraph><paragraph>While every reachable state can be reached fast, it is not easy to decide whether a state is reachable at all. This even holds if we only consider reachability of stable states. Our next theorem presents a generic reduction which can be adjusted to prove the {a mathematical formula}NP-completeness of this problem for socially, locally, considerate, and friendship matching, even in the two-sided case. It also applies to ordinary two-sided stable matching games that have either correlated preferences with ties, or non-correlated strict preferences. Note that the problem is trivially solvable for stable matching with strict correlated preferences (without ties), as there is a unique stable matching that can always be reached using a simple greedy sequence [1], [2]. Moreover, it trivially implies hardness also for all variants with more than two agents per coalition. It even applies to local coalition formation games studied in the subsequent Section 4, since this model includes social stable matching as a special case (as discussed in Section 2.2.2).</paragraph><paragraph label="Theorem 3">It is{a mathematical formula}NP-complete to decide if for a given matching game, initial matching{a mathematical formula}M0and stable matching M, there is a sequence of improvement steps leading from{a mathematical formula}M0to M. This holds even for two-sided games with strict correlated preferences and</paragraph><list><list-item label="1.">socially stable matching,</list-item><list-item label="2.">locally stable matching,</list-item><list-item label="3.">considerate matching, and</list-item><list-item label="4.">friendship matching for symmetric c-values in{a mathematical formula}[0,1].</list-item></list><paragraph label="Proof">Let us now formally prove correctness of the reduction.Assume that the 3Sat formula is satisfiable. Then pick a satisfying assignment, and for each variable generate the edges of {a mathematical formula}E1 which symbolize the inverses of the variable assignment. Now, for every variable the w-agent corresponding to the assigned value is unmatched. We sequentially generate the incident edges leading to the clause variables in increasing order starting from the smallest unblocked edge. For every clause, at least one literal is satisfied, and the edges are created in increasing order. Thereby, at the end of this sequence all vertices {a mathematical formula}vCj were matched at least once. It remains to generate the second edge for every variable gadget. This yields a sequence to M of the desired form.Assume that we can reach M from {a mathematical formula}M0 with a sequence, in which we match and unmatch each {a mathematical formula}vCj at least once. For each clause {a mathematical formula}Cj, pick an agent {a mathematical formula}wli,j which was matched to {a mathematical formula}vCj. We claim that for no variable {a mathematical formula}xi both vertices {a mathematical formula}wxi and {a mathematical formula}wx‾i are picked: In the beginning, both vertices are matched through an edge that is more preferred than any edge to a clause agent. Thus, to match one of these vertices to some {a mathematical formula}vCj, it first has to become single, that is, its matching partner {a mathematical formula}ux‾i respectively {a mathematical formula}uxi has to deviate to a better partner. But the only better partner for {a mathematical formula}ux‾i is {a mathematical formula}wx‾i and the only better partner for {a mathematical formula}uxi is {a mathematical formula}wxi. Furthermore, both edges then represent stable choices, since they are the top choice of both partners. Hence, to make {a mathematical formula}wxi available, we have to block {a mathematical formula}wx‾i for the rest of the sequence, and to make {a mathematical formula}wx‾i available we have to block {a mathematical formula}wxi for the rest of the sequence. Since at most one w-agent of each variable is chosen, we assign each of these variables a value according to the chosen agent. To each remaining variable, we assign an arbitrary value. This implies that for each clause at least one literal is evaluated to true, i.e., the formula is satisfied.Finally, we design appropriate clause gadgets for each case:</paragraph><list><list-item label="1.">For socially stable matching we add an agent {a mathematical formula}yCj to W and an edge {a mathematical formula}{vCj,yCj} of benefit j to E for every clause {a mathematical formula}Cj. Further we also add all the edges {a mathematical formula}{vCj,yCj} to the initial state {a mathematical formula}M0 but keep M. Note that we did not add any social links for {a mathematical formula}yCj. Thus, M is stable and can be reached if and only if we rematch every {a mathematical formula}yCj at least once (and hence delete {a mathematical formula}{vCj,yCj}).</list-item><list-item label="2.">For locally stable matching we add the same vertices and edges as for socially stable matching. We add {a mathematical formula}yCj to W and {a mathematical formula}{vCj,yCj} of benefit j to E for every clause {a mathematical formula}Cj. Then we add all the edges {a mathematical formula}{vCj,yCj} to the initial state {a mathematical formula}M0. M stays the same. Again, M is stable and can be reached if and only if we rematch every {a mathematical formula}yCj at least once (and hence delete {a mathematical formula}{vCj,yCj}).</list-item><list-item label="3.">For considerate matching we add two vertices {a mathematical formula}yCj and {a mathematical formula}yCj′ to W and edges {a mathematical formula}{vCj,yCj} of benefit {a mathematical formula}j−12 and {a mathematical formula}{vCj,yCj′} of benefit j to E for every clause {a mathematical formula}Cj. Further, we also add all the edges {a mathematical formula}{vCj,yCj} to the initial state {a mathematical formula}M0 and all the edges {a mathematical formula}{vCj,yCj′} to M. Finally we introduce a social link between {a mathematical formula}yCj and {a mathematical formula}yCj′. Now {a mathematical formula}vCj cannot switch from {a mathematical formula}yCj to {a mathematical formula}yCj′, as {a mathematical formula}yCj′ is friends with {a mathematical formula}yCj and would thus reject {a mathematical formula}vCj. But if {a mathematical formula}vCj is single, {a mathematical formula}yCj′ does not reject {a mathematical formula}vCj. Hence, again for every clause {a mathematical formula}Cj, {a mathematical formula}vCj must be matched to some agent outside the clause gadget and then become unmatched to reach M.</list-item><list-item label="4.">For friendship matching we add two vertices {a mathematical formula}yCj and {a mathematical formula}yCj′ to W and edges {a mathematical formula}{vCj,yCj} of benefit {a mathematical formula}j−12 and {a mathematical formula}{vCj,yCj′} of benefit j to E for every clause {a mathematical formula}Cj. The only friendship value ≠0 is {a mathematical formula}cvCj,yCj=12j−1. We add all the edges {a mathematical formula}{vCj,yCj} to the initial state {a mathematical formula}M0 and all the edges {a mathematical formula}{vCj,yCj′} to M. Note that by the choice of {a mathematical formula}cvCj,yCj, the perceived benefit for {a mathematical formula}vCj from {a mathematical formula}{vCj,yCj} now is {a mathematical formula}(1+cvCj,yCj)(j−12)=j−12+(j−12)12j−1=j=b({vCj,yCj′}), that is, there is a tie in {a mathematical formula}vCj's preference list regarding {a mathematical formula}yCj and {a mathematical formula}yCj′. Hence, M is stable but {a mathematical formula}vCj will not switch directly from {a mathematical formula}yCj to {a mathematical formula}yCj′. However, once {a mathematical formula}vCj becomes single, we can match it to {a mathematical formula}yCj′ as desired.</list-item><list-item label="5.">For correlated matching with ties we add two vertices {a mathematical formula}yCj and {a mathematical formula}yCj′ to W and edges {a mathematical formula}{vCj,yCj} and {a mathematical formula}{vCj,yCj′} – both of benefit j – to E for every clause {a mathematical formula}Cj. Further, we also add all the edges {a mathematical formula}{vCj,yCj} to the initial state {a mathematical formula}M0 and all the edges {a mathematical formula}{vCj,yCj′} to M. Then {a mathematical formula}vCj does not switch from {a mathematical formula}yCj to {a mathematical formula}yCj′ as it yields no improvement. However, if {a mathematical formula}vCj is single, we can match it to {a mathematical formula}yCj′.</list-item><list-item label="6.">For matching with strict preferences, we note that all edge values in the central gadget are distinct. Hence, we can derive a strict preference order over all possible matching partners for each agent. Now, for each clause {a mathematical formula}Cj, we add one agent {a mathematical formula}vCj′ to U and two vertices {a mathematical formula}yCj and {a mathematical formula}yCj′ to W and edges {a mathematical formula}{vCj,yCj}, {a mathematical formula}{vCj,yCj′}, {a mathematical formula}{vCj′,yCj} and {a mathematical formula}{vCj′,yCj′} to E. For {a mathematical formula}vCj we add {a mathematical formula}yCj&gt;vCjyCj′ to the bottom of the preference list, that is, all vertices of the central gadget are preferred. For the other preferences we have{a mathematical formula} To {a mathematical formula}M0 we add {a mathematical formula}{vCj,yCj} and {a mathematical formula}{vCj′,yCj′} and to M we add {a mathematical formula}{vCj,yCj′} and {a mathematical formula}{vCj′,yCj}. The clause gadget has two stable states: {a mathematical formula}{{vCj,yCj}, {a mathematical formula}{vCj′,yCj′}} and {a mathematical formula}{{vCj,yCj′}, {a mathematical formula}{vCj′,yCj}}. To switch, again we first have to destabilize the initial state by matching {a mathematical formula}vCj to some agent of the central gadget and then leave {a mathematical formula}vCj single. Then {a mathematical formula}yCj′ can switch to its preferred choice {a mathematical formula}vCj which frees {a mathematical formula}vCj′ for {a mathematical formula}yCj, resulting in the desired final state.  □</list-item></list><paragraph>For locally stable matching, the problem of reaching a given stable matching is known to be {a mathematical formula}NP-hard, even from the empty initial matching {a mathematical formula}M0=∅[37]. In contrast, our reduction here applies a unified framework to many different variants of the problem. In this level of generality, we need {a mathematical formula}M0≠∅, since, e.g., for ordinary two-sided stable matching reaching a given stable matching from {a mathematical formula}M0=∅ is trivial.</paragraph></section><section label="3.1.3"><section-title>Inconsistent generation and domination rules</section-title><paragraph>In the presence of the positive results for consistent generation and domination rules, it is a natural question if the consistency conditions are also necessary. In this section, we analyze each axiom individually and prove that every relaxation admits instances where stable states cannot be reached within a polynomial number of steps. For relaxed domination rules we even give an example without a stable state where improvement dynamics cycle.</paragraph><paragraph label="Proposition 1">Suppose the generation rules are allowed to contain more than one coalition in the precondition and the domination rules are consistent. Then there are instances and initial states such that every sequence to a stable state requires an exponential number of improvement steps.</paragraph><paragraph label="Proof">Given an instance of locally stable matching with graph {a mathematical formula}G=(V,E), (social) links L, correlated preferences {a mathematical formula}b(e) based on edge benefits, we define the parameters of the framework as follows. The set of agents is V, the set of possible coalitions is {a mathematical formula}C=E. The coalitions which can always be generated are the ones connected by at most 2 links, i.e., {a mathematical formula}Cg=E∩{{u,v}|distL(u,v)≤2}. The benefits remain the same. For the generation rules, we have {a mathematical formula}T=T1∪T2, where{a mathematical formula} Here {a mathematical formula}T1 captures accessible pairs with 2 hops composed of one matching edge and one link and {a mathematical formula}T2 captures accessible pairs where both hops are composed of matching edges. The latter generation rules are obviously using two coalitions as precondition. For the domination rules we have {a mathematical formula}D=Db, i.e., only the necessary preference-based domination.  □</paragraph><paragraph label="Proposition 2">Suppose the generation rules are allowed to have non-overlapping precondition- and target-coalitions and the domination rules are consistent. Then there are instances and initial states such that every sequence to a stable state requires an exponential number of improvement steps.</paragraph><paragraph label="Proof">We will build an instance with an initial state that requires a unique exponential improvement sequence to a stable state. The instance consists of k gadgets of 9 agents each and a suitable initial state. The main property in each gadget i is that to create coalition {a mathematical formula}C6,i, we need to generate {a mathematical formula}C1,i twice. Further, the gadget will not reach a stable state unless {a mathematical formula}C6,i exists.For gadget i, we define the set of agents {a mathematical formula}Ni={0i,…,8i}, and the set of possible coalitions {a mathematical formula}Ci={C1,i,…,C6,i} with {a mathematical formula}C1,i={0i,1i,2i},C2,i={1i,3i},C3,i={3i,4i,5i},C4,i={4i,6i},C5,i={2i,6i,7i},C6,i={5i,7i,8i}. The benefits are {a mathematical formula}b(C1,i){a mathematical formula}=xi+1, {a mathematical formula}b(C2,i)=xi+2, {a mathematical formula}b(C3,i)=xi+4, {a mathematical formula}b(C4,i)=xi+3, {a mathematical formula}b(C5,i)=xi+2 and {a mathematical formula}b(C6,i)=xi+5 with {a mathematical formula}xi=5(i−1). The generation rules are{a mathematical formula} For the domination rules we have {a mathematical formula}D=Db, i.e., only the necessary preference-based domination.We introduce k such gadgets. For every {a mathematical formula}i=1,…,k−1, we merge agent {a mathematical formula}8i with {a mathematical formula}0i+1 to become the same agent. Also, we add a generation rule {a mathematical formula}{{C1,i+1},C6,i}. Consider the coalition movement graph. Fig. 6 shows the graph for the first two gadgets to visualize the dynamics inside the gadgets and their interaction.As initial coalition structure we have {a mathematical formula}{C4,k}. The proof follows from the property that creation of {a mathematical formula}C6,k (without which the state is not stable), {a mathematical formula}C1,1 has to be created at least {a mathematical formula}2k times.Initially, every {a mathematical formula}C4,i for {a mathematical formula}i&gt;1 can only be used to generate {a mathematical formula}C4,i−1. Note that in this step {a mathematical formula}C4,i is not deleted. Thus, in the beginning, the unique start of the sequence is to create {a mathematical formula}C4,k−1,C4,k−2,…,C4,1, and none of these coalitions is deleted. When {a mathematical formula}C4,1 exists, the unique next step is creation of {a mathematical formula}C1,1. Next, as {a mathematical formula}C5,1 is dominated by {a mathematical formula}C4,1, the only option is to generate {a mathematical formula}C2,1 and thus remove {a mathematical formula}C1,1. Then we can only generate {a mathematical formula}C3,1 while deleting {a mathematical formula}C2,1 and {a mathematical formula}C4,1. With the remaining coalition {a mathematical formula}C3,1 we create {a mathematical formula}C1,1 a second time, which now can be used to create {a mathematical formula}C5,1 and delete {a mathematical formula}C1,1 again. Next, we can only create {a mathematical formula}C6,1, which causes the deletion of {a mathematical formula}C3,1 and {a mathematical formula}C5,1.Hence, we need the existence of {a mathematical formula}C4,1 to create {a mathematical formula}C1,1, which is needed to create {a mathematical formula}C5,1 and {a mathematical formula}C6,1. To create {a mathematical formula}C5,1 and {a mathematical formula}C6,1, however, we also need the absence of {a mathematical formula}C4,1. Hence, we first have to create {a mathematical formula}C2,1 and {a mathematical formula}C3,1 that lead to removal of {a mathematical formula}C4,1. Then, via a second creation of {a mathematical formula}C1,1 we can create {a mathematical formula}C6,1. This idea is now applied subsequently in the next gadgets.{a mathematical formula}C6,1 can now be used to create {a mathematical formula}C1,2 which leaves gadget 1 empty, i.e., no coalition {a mathematical formula}C⋅,1 exists. To create {a mathematical formula}C6,2, we have to first remove {a mathematical formula}C4,2 by creating {a mathematical formula}C2,2 and {a mathematical formula}C3,2. By a second creation of {a mathematical formula}C1,2 (and due to the absence of {a mathematical formula}C4,2) we can then create {a mathematical formula}C5,2 and {a mathematical formula}C6,2. Note, however, that the second creation of {a mathematical formula}C1,2 again needs the existence of {a mathematical formula}C6,1. However, when we created {a mathematical formula}C1,2 for the first time, gadget 1 was empty. Thus, to create {a mathematical formula}C1,2 a second time, we have to also create {a mathematical formula}C6,1 a second time. Hence, we must create {a mathematical formula}C4,1 a second time (before removing {a mathematical formula}C4,2) and run through the all of the dynamics for gadget 1 described above. Only then we can finally create {a mathematical formula}C5,2 and {a mathematical formula}C6,2. Hence, to create {a mathematical formula}C6,2 we have to create {a mathematical formula}C1,1 a total of four times.Now {a mathematical formula}C6,2 can be used to create {a mathematical formula}C1,3. At this point, both gadgets 1 and 2 are empty. To create {a mathematical formula}C6,3 we need to remove {a mathematical formula}C4,3 and, thus, create {a mathematical formula}C1,3 twice. Since, both gadgets 1 and 2 are empty, we first need to recreate {a mathematical formula}C6,2 for the second creation of {a mathematical formula}C1,3. The second creation of {a mathematical formula}C6,2 requires another four creations of {a mathematical formula}C1,1 as described above. Hence, to create {a mathematical formula}C6,3 we need to create {a mathematical formula}C1,1 a total of eight times. This reasoning can be applied to the remaining gadgets and shows the proposition.  □</paragraph><paragraph>The previous two results show that convergence can take exponential time if domination rules are not consistent. For convergence in finite time, however, we only need consistent domination rules. The following proposition shows that we encounter the standard lexicographic potential function: The vector of coalition benefits (ordered non-decreasingly) increases lexicographically in every improvement step. This is property has received interest in correlated matching and coalition formation games without structural constraints [2], [46].</paragraph><paragraph label="Proposition 3">If the domination rules are consistent, then there is a lexicographic potential function, and every sequence of improvement steps is finite.</paragraph><paragraph label="Proof">Hence, any novel coalition that gets added to the state causes only (overlapping) coalitions with strictly smaller benefit to be removed. Therefore, we have the lexicographic potential function. Hence, convergence in finite time can always be guaranteed whenever domination rules are consistent.  □</paragraph><paragraph>In the following proposition, we show that the argument from the previous proof breaks when domination rules are allowed to contain non-overlapping coalitions. Then a coalition with smaller benefit can dominate a non-overlapping coalition with larger benefit. Note that benefit domination rules {a mathematical formula}Db apply only for overlapping coalitions. In the following instance, however, benefit domination rules are ineffective, since we create three coalitions that are mutually non-overlapping.</paragraph><paragraph label="Proposition 4">If the domination rules include target coalitions that do not overlap with any coalition in the precondition, there are instances and starting states such that every sequence of improvement steps cycles.</paragraph><paragraph label="Proof">Consider the following example with {a mathematical formula}N={1,…,6}, {a mathematical formula}C={{1,2},{3,4},{5,6}}, {a mathematical formula}Cg=C, and benefits {a mathematical formula}b(C)=1 for all {a mathematical formula}C∈C. There are no generation rules {a mathematical formula}T=∅ (but {a mathematical formula}Cg=C). For the domination rules, we consider non-overlapping coalitions in precondition and target:{a mathematical formula} The initial state is {a mathematical formula}C0={{1,2}}.Since {a mathematical formula}{1,2} exists, {a mathematical formula}{3,4} is dominated and cannot be formed. The other candidate coalition {a mathematical formula}{5,6} is undominated and represents the unique improvement step. As {a mathematical formula}{5,6} dominates {a mathematical formula}{1,2} (but not vice versa), {a mathematical formula}{1,2} gets removed when {a mathematical formula}{5,6} is formed. Now {a mathematical formula}{4,3} is the unique undominated candidate coalition and is formed. Thereby, {a mathematical formula}{5,6} is removed and {a mathematical formula}{1,2} becomes undominated. Next {a mathematical formula}{1,2} is formed, {a mathematical formula}{3,4} is deleted and the cycle is complete.  □</paragraph><paragraph>We conclude that relaxing the consistency conditions will encompass settings where (fast) convergence cannot be guaranteed. Thus, in this sense the choice of axioms is minimal.</paragraph><paragraph>However, let us point out that consistency is not a complete characterization of the set of games that have short improvement sequences for every pair of reachable states (in the sense of if-and-only-if). There also exist non-consistent games that have this property (a trivial example are games with a constant number of agents). As such, there could be orthogonal characterizations of coalition formation games with constraints. We derive such an example below for local coalition formation games.</paragraph></section></section></section><section label="4"><section-title>Local coalition formation games</section-title><paragraph>Unlike local matching games, local coalition formation games are not fully described by consistent generation and domination rules. In these games, a coalition might be accessible only if several other coalitions are present, which implies inconsistent generation rules. Nevertheless, polynomial-time convergence still might be possible.</paragraph><paragraph>In Section 4.1 we analyze local coalition formation games depending on the choice of the set {a mathematical formula}H of formation graphs. If {a mathematical formula}H only consists of cliques, we encounter the problem that a coalition might be accessible only if several coalitions exist. However, since we require a clique structure to form a coalition, improvement sequences do not conduct exploration. More formally, the edge set of the visibility graph {a mathematical formula}G(S) is shrinking monotonically. This allows to show convergence in polynomial time. If {a mathematical formula}H only consists of stars, we can define consistent generation and domination rules. Thereby, all results of the previous section apply. For all other choices of {a mathematical formula}H, we provide an instance and a starting state, from which there is a unique sequence to a stable state, which takes an exponential number of improvement steps.</paragraph><paragraph>Subsequently, in Section 4.2 we provide a lower bound for the model using longer paths in the visibility graph. In this approach (recall the discussion in Section 2.2.2), a coalition is accessible if it can be mapped to a formation graph, such that each edge of the formation graph is represented by a path with hop-distance at most 2 in the visibility graph. In such games, there are instances with maximal coalition size 3 and starting states, from which the unique sequence to a stable state requires an exponential number of improvement steps, even if the set of formation graphs consists only of cliques or stars.</paragraph><section label="4.1"><section-title>Characterizing formation graphs</section-title><paragraph>In this section, we consider local coalition formation games, where we parametrize the games with the set {a mathematical formula}H of formation graphs. In this way, we analyze how different choices of formation graphs influence the convergence properties, i.e., the existence of short paths to stability. We start with instances where {a mathematical formula}H consists solely of cliques:</paragraph><paragraph label="Theorem 4">Let{a mathematical formula}H⊆{Ki|i=1…n}where{a mathematical formula}Kiis a clique of i vertices. In every local coalition formation game using{a mathematical formula}H, for every initial state{a mathematical formula}Sthere is a sequence of n local improvement steps which results in a locally stable coalition structure. If local improvement steps are chosen at random in every step, the dynamics converges in expected time{a mathematical formula}O(mn).</paragraph><paragraph label="Proof">We observe that the set of edges in the visibility graph is monotonically shrinking. A coalition C is only accessible if all pairs of agents in C are connected by permanent (through L) or temporary links (currently in the same coalition). Thus, if C is a local blocking coalition and gets added, this does not introduce any new temporary links. On the other hand, some temporary links might get deleted if coalitions overlapping with C are deleted.Now assume C is a local blocking coalition of maximal benefit among all local blocking coalitions in {a mathematical formula}S. Then, once C is formed, it will not be deleted by any other coalition created through blocking dynamics as no new coalitions of higher value can become accessible. Thus, the natural greedy approach of resolving the local blocking coalition that adds the most valuable coalition to the state results in a stable state after at most n steps.If, instead of picking the most valuable one, we pick a local blocking coalition at random, with probability at least {a mathematical formula}1m we pick one of the most valuable local blocking coalitions. Hence, every m steps in expectation we pick a most valuable local blocking coalition. Due to the monotonic shrinking visibility graph, the set of available coalitions is also monotonically decreasing. Hence, whenever we pick a most valuable blocking coalition, this coalition will not get removed subsequently. Thus, after at most m steps in expectation we enlarge the set of stable coalitions by at least one. Overall, after at most mn steps in expectation, we reach a stable state.  □</paragraph><paragraph>Let us now turn to star formation graphs. Here use the fact that in a star all edges share the same (center) vertex. As a consequence, when embedding the star into the visibility graph, it uses temporary links introduced by at most one coalition of {a mathematical formula}S – otherwise the coalitions would have to share the center vertex. Thus, for {a mathematical formula}H⊆{Hi|i=1…n}, where by {a mathematical formula}Hi we denote a star consisting of a center and {a mathematical formula}i−1 leaves, all results from the previous section apply.</paragraph><paragraph label="Proof">Let{a mathematical formula}H⊆{Hi|i=1…n}where{a mathematical formula}Hiis a star with a center and{a mathematical formula}i−1leaves. Every local coalition formation game using{a mathematical formula}His equivalent to a coalition formation game with constraints and consistent generation and domination rules.We keep the set of possible coalitions as well as their benefits the same. The main insight of the proof is to express the locality constraints using generation and domination rules. The domination rules is easy to define – the only reason an accessible coalition should not be formed is because one of the involved agents is already part of a better or equally preferred coalition. Thus, we define{a mathematical formula} For the generation rules, observe that coalitions cannot overlap and in a star all edges share the center vertex. Hence, no accessible coalition can rely on temporary links of more than one existing coalition when embedding a star formation graph. Hence, for the generation rules we set{a mathematical formula} Note that these generation and domination rules are consistent. We now verify that using these rules, the resulting coalition formation game correctly expresses the original local coalition formation game.First, assume that C is a local blocking coalition for {a mathematical formula}S. Then C is accessible, that is, {a mathematical formula}H|C| appears in the visibility graph. As discussed above, temporary links of at most one coalition are used in embedding {a mathematical formula}H|C|. Thus, either C is always accessible via L (i.e., {a mathematical formula}C∈Cg), or it relies on temporary links of some {a mathematical formula}C′∈S. Then {a mathematical formula}({C′},C)∈T which makes C a candidate coalition in {a mathematical formula}S. Further, if C is a local blocking coalition, there is no coalition {a mathematical formula}C″∈S such that {a mathematical formula}C∩C″≠∅ and {a mathematical formula}b(C″)≥b(C). Consequently, the candidate coalition C is undominated in {a mathematical formula}S. Hence, if C is a local blocking coalition in the original game, it is also a blocking coalition in {a mathematical formula}S for the coalition formation game with constraints.Conversely, let C be a blocking coalition in {a mathematical formula}S for the coalition formation game with constraints. Then C is undominated, that is, C is a blocking coalition. Further, C is a candidate coalition. Thus, C is accessible in {a mathematical formula}S. In consequence, if C is a blocking coalition for the coalition formation game with constraints, it is a local blocking coalition in the original game.Now, resolving the local blocking coalition C results in deleting all overlapping coalitions. By definition of blocking coalitions, all existing overlapping coalitions are of smaller value than C. Similarly, resolving the undominated candidate coalition C results in deleting all coalitions dominated by C. By definition, these are exactly the coalitions overlapping with C of less or equal value than C. As C was undominated, all these coalitions have to be of smaller value than C. Thus, the set of deleted coalitions coincides in both games.  □</paragraph><paragraph label="Corollary 1">As the main result, by applying Theorem 1 we obtain short paths to stability to locally stable states. Let{a mathematical formula}H⊆{Hi|i=1…n}. In every local coalition formation game using{a mathematical formula}H, for every initial state{a mathematical formula}Sthere is a sequence of{a mathematical formula}O(nm2)local improvement steps which results in a locally stable coalition structure.</paragraph><paragraph>Finally, we analyze the case where the formation graph is any connected graph. It turns out that for every such graph that is neither a star nor a clique, there is an instance and a starting state with only exponentially sequences to a locally stable state. To prove this property, we first extract a single subgraph structure which is present in every connected graph except for stars and cliques. We will then construct an instance without short paths to stability using only this subgraph structure. To adjust the instance to an arbitrary graph, one can simply add the “missing” vertices and edges using separate auxiliary agents and links for every coalition.</paragraph><paragraph>We start by observing that if some graph H is neither a star nor a clique, then there is some path of length 3 in H such that the first and the third vertex are not directly connected by some edge.</paragraph><paragraph label="Proof">Let{a mathematical formula}H=(VH,EH)be any simple, undirected, connected graph. If for every path{a mathematical formula}v1v2v3v4with{a mathematical formula}{v1,v2},{a mathematical formula}{v2,v3},{a mathematical formula}{v3,v4}∈EHthere also exists an edge{a mathematical formula}{v1,v3}∈EH, then H is either a clique or a star.If H does not have any paths of length ≥3, then H is a star. Further, if H is connected and has less than 4 vertices, H is either a star or a clique.Now assume that H holds some path {a mathematical formula}v1v2v3v4 with {a mathematical formula}{v1,v2},{v2,v3},{v3,v4}∈EH. Then, considering this path forward and backward, we know that {a mathematical formula}{v1,v3} and {a mathematical formula}{v2,v4} are in {a mathematical formula}EH as well. Thus, we also have the path {a mathematical formula}v1v2v4v3 and conclude {a mathematical formula}{v1,v4}∈EH, that is, {a mathematical formula}v1,v2,v3, and {a mathematical formula}v4 form a clique {a mathematical formula}C1 in H. Now, as H is connected, if {a mathematical formula}H≠C1, there exists some edge e connecting {a mathematical formula}C1 to the rest of H. Let {a mathematical formula}v5 be the vertex in {a mathematical formula}e∩(VH∖{v1,v2,v3,v4}). W.l.o.g. let {a mathematical formula}v5 be connected to {a mathematical formula}v1, that is, {a mathematical formula}e={v1,v5}. Using the edges in {a mathematical formula}C1, we have the paths {a mathematical formula}v5v1v2v3, {a mathematical formula}v5v1v3v2, and {a mathematical formula}v5v1v4v2 and thus also edges from {a mathematical formula}v5 to all other vertices in {a mathematical formula}C1. Hence, {a mathematical formula}v1,v2,v3,v4 and {a mathematical formula}v5 form a clique {a mathematical formula}C2 in H. Now we can apply the same arguments to the bigger clique repeatedly until each vertex of V is included. Thus, H has to be a clique.  □</paragraph><paragraph>Hence, there is a path of length 3 with a missing edge between the first and the third vertex in all formation graphs H we want to analyze. We use the substructure to establish the desired lower bound by concentrating on this structure. The rest of H can then be added separately for every potential coalition using auxiliary agents and links. We also ensure that additional edges between the vertices of the path, that is, edges between the first and the fourth vertex, and edges between the second and the fourth vertex, have no influence on the dynamics.</paragraph><paragraph label="Proof">Let{a mathematical formula}H=(VH,EH)be any simple, undirected, connected graph which is neither a clique nor a star. Then there are instances and initial states of local coalition formation games using{a mathematical formula}H={H}such that every sequence to a stable state requires an exponential number of improvement steps.By Lemma 2, we know that there are vertices {a mathematical formula}v1,v2,v3,v4∈VH such that {a mathematical formula}{v1,v2}, {a mathematical formula}{v2,v3}, {a mathematical formula}{v3,v4}∈EH but {a mathematical formula}{v1,v3}∉EH. Let {a mathematical formula}Hrest=(VH,rest=VH∖{v1,v2,v3,v4},EH,rest=EH∖{{v1,v2},{v2,v3},{v3,v4}}).We show how to construct a network of links involving only the vertices {a mathematical formula}v1,v2,v3, and {a mathematical formula}v4 as well as {a mathematical formula}{v1,v2},{v2,v3}, and {a mathematical formula}{v3,v4} for each coalition. For each coalition C, all other vertices {a mathematical formula}VH,rest are unique (denoted by {a mathematical formula}VH,C,rest) and are connected by links according to {a mathematical formula}EH,rest (denoted by {a mathematical formula}EH,C,rest) with each other as well as with {a mathematical formula}v1,v2,v3 and {a mathematical formula}v4. The network is composed of a concatenation of identical gadgets, each of which have a starting link{a mathematical formula}{u1,i,u2,i} and two final links{a mathematical formula}{u3,i,u5,i} and {a mathematical formula}{u9,i,u11,i}. These three links are temporary and not in L, that is, they are only available when their incident vertices are currently in the same coalition. The dynamics are designed such that the starting link must be created and deleted once to create the first final link and a second time to create the second final link. The coalition providing the starting link of gadget {a mathematical formula}i+1 can only be created when both final links of gadget i are available. Thus, to create the coalition which provides the final link of gadget k, the starting link of gadget 1 must be formed and removed {a mathematical formula}2k times, that is, coalition {a mathematical formula}C0 has to be formed {a mathematical formula}2k times.For gadget {a mathematical formula}Gi we have 7 coalitions {a mathematical formula}C1,i,…,C7,i. The agent set of {a mathematical formula}Gi consists of{a mathematical formula} and the link set of{a mathematical formula} Gadget 1 additionally has agents {a mathematical formula}w1 and {a mathematical formula}w2 with links {a mathematical formula}{w1,u1,1}, {a mathematical formula}{w1,u2,1}, and {a mathematical formula}{w2,u2,1} and a coalition {a mathematical formula}C0={w1,w2,u1,1,u2,1}∪VH,C0,rest of value {a mathematical formula}12. The transition from gadget i to gadget {a mathematical formula}i+1 is realized by associating {a mathematical formula}u5,i with {a mathematical formula}u1,i+1 and {a mathematical formula}u9,i with {a mathematical formula}u2,i+1.The possible coalitions in gadget i are the following ones.{a mathematical formula} The initial state is {a mathematical formula}S0=∅.We will describe the dynamics of gadget 1 as well as the transition to the next gadget. The other gadgets work similarly. If no agent of gadget 1 is involved in any coalition, the only accessible coalition is {a mathematical formula}C0. Once {a mathematical formula}C0 is formed, {a mathematical formula}C1,1 and {a mathematical formula}C4,1 become accessible because the starting link {a mathematical formula}{u1,1,u2,1} is in the visibility graph. As both coalitions are of higher benefit than {a mathematical formula}C0, they represent local blocking coalitions. W.l.o.g. assume that {a mathematical formula}C1,1 is formed first. Now {a mathematical formula}C4,1 is not a blocking coalition anymore. The temporary link {a mathematical formula}{u1,1,u3,1} is present, which makes {a mathematical formula}C2,1 a local blocking coalition. Forming {a mathematical formula}C2,1 results in {a mathematical formula}u2,1 being single again. Additionally, the first final temporary link {a mathematical formula}{u3,1,u5,1} exists, and {a mathematical formula}C3,1 becomes a local blocking coalition. Now, forming {a mathematical formula}C3,1, agent {a mathematical formula}u1,1 becomes single again. Thereby {a mathematical formula}C0 (which is always accessible) becomes a blocking coalition again. Further, the link {a mathematical formula}{u3,1,u5,1} is still present. At this point, the only local blocking coalition again is {a mathematical formula}C0. This time, after {a mathematical formula}C0 is formed, {a mathematical formula}C1,1 is not a blocking coalition because {a mathematical formula}u3,1 is involved in a better coalition. Thus, the unique improvement step is to create {a mathematical formula}C4,1. As above, after forming {a mathematical formula}C4,1, {a mathematical formula}C5,1 becomes accessible. By adding {a mathematical formula}C5,1, the second final link {a mathematical formula}{u9,1,u11,1} is created. Now we can either directly form {a mathematical formula}C7,1, or we can first add {a mathematical formula}C6,1 and then {a mathematical formula}C7,1 (and thereby remove {a mathematical formula}C6,1 again). Note that {a mathematical formula}C6,1 is necessary to make {a mathematical formula}C0 available again for the case we would have chosen {a mathematical formula}C4,1 instead of {a mathematical formula}C1,1 first. The existence of {a mathematical formula}C7,1 creates the temporal link {a mathematical formula}{u5,1,u9,1}={u1,2,u2,2} for the first time. This initiates the same dynamics in the second gadget.Observe that the dynamics cannot terminate early by resolving local blocking coalitions in a different order. Thus in the end {a mathematical formula}C7,k is necessary for the coalition structure to be stable. Due to the structure, {a mathematical formula}2k creations of {a mathematical formula}C0 are necessary to form {a mathematical formula}C7,k.Note that we heavily rely on the temporary links in the dynamics being temporary and not part of {a mathematical formula}EH,C,rest. As H holds a path of 3 edges with no connection between the first and the third vertex, we can actually arrange {a mathematical formula}EH,C,rest such that the “suitable” links are missing when forming a coalition and only being established when adding this same coalition. However, the structure of H might require an edge between the first and the fourth and/or the second and the fourth vertex of the path. These are two vertices which are part of the shared gadget and not the part which is unique for each coalition anyway. Luckily, these edges – namely{a mathematical formula} all connect vertices which only share this one coalition. Hence the (permanent) existence of such links does not make any other coalitions accessible.  □</paragraph><paragraph>As discussed above, our dichotomy results are strongest if {a mathematical formula}m∈poly(n). Note that this follows directly if the formation graphs are of constant size, since only coalitions of constant size can form. Under this assumption, our results above show there are paths of length {a mathematical formula}poly(n) for cliques and stars. In contrast, our exponential lower bound already holds when, e.g., the formation graph is a path with 4 nodes.</paragraph></section><section label="4.2"><section-title>Visibility via longer paths</section-title><paragraph>In this section, we consider the case, where for an accessible coalition in state {a mathematical formula}S, a formation graph H can be embedded into the visibility graph {a mathematical formula}G(S) such that each edge of H is represented by a path of hop-distance of 2 in {a mathematical formula}G(S). Our results here are negative, even if the formation graphs are restricted to cliques or stars.</paragraph><paragraph label="Proof">Note that we can alter the gadgets such that all coalitions have size 3 by adding an auxiliary agent to each coalition of size 2 and connecting it with one (for stars) or both (for cliques) vertices via a path of length 2 (using auxiliary vertices). Similar adjustments allow to extend the gadget to coalitions of arbitrary sizes.  □</paragraph></section></section><section label="5"><section-title>Discussion and conclusion</section-title><paragraph>In this paper, we have studied convergence properties in stable matching and hedonic games with structural constraints, which generalize a variety of recently proposed models for visibility and agent externality. Our results are a tight axiomatic characterization for the existence of a path to stability of polynomial length in games with correlated preferences. The set of consistency axioms are minimal in the sense that if an axiom is dropped or relaxed, a (polynomial) path to stability cannot be guaranteed. Moreover, we have studied a model of local visibility in hedonic games based on the notion of formation graphs, and we provided a tight characterization of the existence of polynomial paths to stability based on the formation graphs.</paragraph><paragraph>Our upper bounds on the convergence time are polynomial in the number of agents n and the number of coalitions m. Our lower bound gadgets involve coalitions of constant size and show bounds that are exponential in n. As such, the dichotomy in our results is strongest if {a mathematical formula}m∈poly(n) as is the case, e.g., in the prominent case of matching.</paragraph><paragraph>There are a variety of interesting problems that arise from our work. A natural question is whether additional constraints that arise in matching or coalition formation problems can be formulated within our framework of consistent generation and domination rules. For example, there are interesting additional variants of local coalition formation games, e.g., when each existing coalition forms an organization graph in the network (instead of a clique as in Section 4). Finally, beyond correlated preferences, efficient algorithms for the computation of stability concepts have recently been derived for several other classes of hedonic games [51], [52], [53], [54]. It would be interesting to see under which conditions one can also guarantee (polynomial) paths to stability (with and without additional structural constraints).</paragraph></section></content><appendices><section label="Appendix A"><section-title>Games with consistent local constraints</section-title><paragraph>In this appendix we will show that a variety of matching and coalition formation games can be captured by our framework of coalition formation game with constraints and consistent generation and domination rules. For each setting, we will either define an equivalent coalition formation game with constraints, or show that consistent generation rules are impossible via examples that lack short paths to stability. The arguments are very similar in most cases and solely consist of rather straightforward verification that dynamics are captured correctly. As such, we will only flesh out one formal correctness proof in the last domain we consider – friendship stable matching in Section A.4. This is arguably the most complicated setting, since we must construct a coalition formation game in which {a mathematical formula}Db expresses domination according to perceived benefits. As such, we need to define different match benefits than in the original game. Moreover, to keep the domination rules in accordance with our definition of consistency, all coalition formation games with constraints will allow an agent to participate in at most one coalition at a time.</paragraph><section label="A.1"><section-title>Socially stable states</section-title><paragraph>Given an instance of socially stable matching consisting of a graph {a mathematical formula}GM=(VM,EM) of potential matching edges, social link set {a mathematical formula}L⊆EM, and edge benefits b, we construct an equivalent coalition formation game with consistent constraints as follows. We keep the agent set, the coalition set, and the benefits. The set of self-generating coalitions {a mathematical formula}Cg is set to L, and {a mathematical formula}T=∅. Further, the only constraints for generation of an available coalition are based on the agents' desire to improve their benefits, that is, {a mathematical formula}D=Db. These generation and domination rules are obviously consistent.</paragraph><paragraph>For social coalition formation games, instead of using L directly we have to check whether we can find suiting organization structures in L. Thus, to construct a game with consistent rules, we keep V, {a mathematical formula}C, and the benefits. We choose {a mathematical formula}T=∅ and {a mathematical formula}D=Db as before. For the self-generating coalitions we have{a mathematical formula}</paragraph><paragraph label="Proposition 5">Social coalition formation games give rise to consistent generation and domination rules.</paragraph></section><section label="A.2"><section-title>Locally stable states</section-title><paragraph>Given an instance of locally stable matching consisting of a graph {a mathematical formula}GM=(VM,EM) of potential matching edges, social link set L, and edge benefits b, we construct an equivalent coalition formation game with consistent constraints as follows. We again keep the agent set, the coalition set, and the benefits. The set of self-generating coalitions and the generation rules become{a mathematical formula} and{a mathematical formula} The domination rules are {a mathematical formula}D=Db.</paragraph><paragraph>Using this embedding, the coalition movement graph becomes the edge movement graph defined in [31] to prove the existence of short paths to stability for locally stable matching.</paragraph><paragraph>If we extend the hop-distance used for visibility to be larger than 2, then there can be edges that are accessible only if 2 or more matching edges exist. This condition cannot be captured by a consistent generation rule, since we would need 2 or more edges in the precondition. In fact, it is known [31, Theorem 3] that in this case there are instances and initial states such that every sequence of local improvement steps to a locally stable matching is exponentially long. For coalitions of larger size, the case depends on the formation graphs, see our discussion in Section 4.</paragraph><paragraph label="Proposition 6">Locally stable matching gives rise to consistent generation and domination rules if visibility is limited to a hop-distance of 2 in{a mathematical formula}(V,M∪L). Otherwise, there are instances that imply non-consistent generation rules.</paragraph></section><section label="A.3"><section-title>Considerate stable states</section-title><paragraph>Given an instance of considerate stable matching consisting of a graph {a mathematical formula}GM=(VM,EM) of potential matching edges, social link set L, and edge benefits b, we construct an equivalent coalition formation game with consistent constraints as follows. We again keep the agent set, the coalition set, and the benefits. Since there are no visibility constraints, we set {a mathematical formula}Cg=E, {a mathematical formula}T=∅. The main restriction is externality, which we capture using the domination rules {a mathematical formula}D=Db∪D1 with{a mathematical formula} Note that the precondition and the target coalitions of every rule in {a mathematical formula}D1 overlap, which implies they are consistent.</paragraph><paragraph>The generalization for larger coalitions is straightforward. Let V be the agent set, {a mathematical formula}C the set of potential coalitions, L the social links, b the benefits, and l the limit of friends an agent is willing to hurt. To improve readability, we set {a mathematical formula}f(v,C)=|{v′|v′∈C,{v,v′}∈L}| to be the number of friends v has in coalition C. We define {a mathematical formula}Cg=C and {a mathematical formula}T=∅. For the domination rules we need to consider all combinations of coalitions which overlap with the target coalition and exceed the limit of friends for some participating agent. Formally, {a mathematical formula}D=Db∪D1 with{a mathematical formula}</paragraph><paragraph label="Proposition 7">Considerate coalition formation gives rise to consistent generation and domination rules.</paragraph></section><section label="A.4"><section-title>Friendship stable states</section-title><paragraph>When representing friendship coalition formation by a coalition formation game with consistent constraints, we must pay special attention to the benefit structure. Based on the perceived benefits, agents are willing to switch to coalitions of lower (direct, non-perceived) benefit. Thus, the domination rules must capture the perceived value of each coalition. Additionally, we have to take into account all perceived gains and losses caused by the formation of a new coalition.</paragraph><paragraph>Our proofs above rely on correlated preferences, that is, all participating agents obtain the same benefit from forming a coalition. In friendship coalition formation, it is not enough to require correlated preferences to obtain this property for perceived benefits. We also need to assume that the function c of friendship values is non-negative and symmetric among coalitions. For matching, this simply implies that (1) agents feel positive about the benefit of others, and (2) for each pair both incident agents feel equally strongly about their relation.</paragraph><paragraph>The following two examples show that without conditions (1) and (2), there are instances in which convergence does not occur. More fundamentally, under these conditions no stable state exists.</paragraph><paragraph label="Example">The game is depicted in Fig. 7. There are 3 agents. Each pair of agents generates a direct benefit of 1 for both incident agents. Based on the friendship values, agent 1 values coalition {a mathematical formula}{1,2} more than coalition {a mathematical formula}{1,3}, agent 2 values coalition {a mathematical formula}{2,3} more than coalition {a mathematical formula}{1,2}, and agent 3 values coalition {a mathematical formula}{1,3} more than coalition {a mathematical formula}{2,3}. This implies a preference cycle and no stable state exists. ■</paragraph><paragraph label="Example">The game is depicted in Fig. 8. There are four agents. Friendship values are symmetric and agent 1 and agent 4 feel negatively towards each other. Both agents can potentially match with agent 2 or agent 3 and are indifferent between these options. Agents 2 and 3 prefer 4 over 1. Now, 4 cannot match both 2 and 3 at the same time. If 1 is single, there is a perceived blocking pair. W.l.o.g. let us assume 2 is not matched. Once {a mathematical formula}{1,2} is formed, agent 4 is negatively effected, as he receives −1 of perceived benefit from agent 1. Thus, even if he is currently matched to 3, it is profitable for 4 to switch to 2, because this way 1 is free again and the negative perceived benefit vanishes. Now 1 is free and the same sequence repeats with the roles of 2 and 3 exchanged. ■</paragraph><paragraph>In the remainder, we assume friendship values are nonnegative and symmetric regarding all potential coalitions. Given an instance of friendship stable matching consisting of a graph {a mathematical formula}G=(VM,EM), edge benefits b and symmetric friendship values c, we construct an equivalent coalition formation game with consistent constraints as follows. We keep the agent set and the coalition set. Since the constraints are in terms of externalities, we set {a mathematical formula}Cg=EM and {a mathematical formula}T=∅. To express the perceived benefits, we alter the benefits to{a mathematical formula} For the domination rules, we have {a mathematical formula}D=D1∪D2∪Db, where{a mathematical formula} Every rule in {a mathematical formula}D1 captures a situation, where some agent {a mathematical formula}v′ gains so much perceived benefit through a coalition {a mathematical formula}{u,v} he is not involved in that it is not profitable for him to break this coalition and form {a mathematical formula}{u,v′}. In {a mathematical formula}D2 we additionally express all situations where two edges would have to be destroyed to form {a mathematical formula}{u,v′}, but their combination more profitable. Observe that every rule of {a mathematical formula}D1 also appears in {a mathematical formula}D2 in combination with any other coalition. However, when a state consists of only one coalition, we could not apply those rules of {a mathematical formula}D2. Thus, we cannot forgo {a mathematical formula}D1. The situation that an agent does not want to switch from a coalition to a more worthy one because of perceived benefit is captured neither in {a mathematical formula}D1 nor in {a mathematical formula}D2 – this is already expressed by the altered benefits.</paragraph><paragraph>For this construction we give a formal correctness proof. All other constructions above can be proven similarly.</paragraph><paragraph label="Proposition 8">The described coalition formation game with consistent generation and domination rules is equivalent to friendship matching.</paragraph><paragraph label="Proof">We have to show both directions: Every resolution of a perceived blocking pair in the original game is correctly mirrored by a resolution of an equivalent blocking coalition in the associated coalition formation game with constraints {a mathematical formula}G=(V,C,w,Cg,T,D). Conversely, every resolution of a blocking coalition in the coalition formation game is captured by a resolution of the corresponding perceived blocking pair in the original game. We start with the first direction.Let M be a matching in G. Assume there is a perceived blocking pair {a mathematical formula}e′={u,v′} for M, which we intend to resolve. Note that domination can only occur through edges involving u or {a mathematical formula}v′.Firstly, if u and {a mathematical formula}v′ are both unmatched, then {a mathematical formula}{u,v′} is undominated, as no overlapping coalitions are present in the current state. Then, because we can generate all matching edges as candidate coalitions via {a mathematical formula}Cg=C, {a mathematical formula}{u,v′} is a blocking coalition. After adding {a mathematical formula}e′, no edge is removed. In the same manner generating {a mathematical formula}{u,v′} does not result in the deletion of any existing coalitions. Hence, the set of coalitions resulting from the rules above exactly represents the matching after resolving the perceived blocking pair {a mathematical formula}e′.Secondly, assume that agent u is matched. He wants to replace the incident edge {a mathematical formula}e={u,v} with {a mathematical formula}e′ while {a mathematical formula}v′ is unmatched. Then {a mathematical formula}{u,v} is part of the current state, and {a mathematical formula}v′ is not part of any existing coalition. As {a mathematical formula}e′ is a perceived blocking pair, we know that u improves by switching from v to {a mathematical formula}v′, that is,{a mathematical formula} which cancels out to {a mathematical formula}b(e)+αu,vb(e)&lt;b(e′)+αu,v′b(e′). Thus, {a mathematical formula}{u,v′} is not dominated by {a mathematical formula}{u,v} through {a mathematical formula}Db. Now, {a mathematical formula}{u,v} might still dominate {a mathematical formula}{u,v′} through {a mathematical formula}D1. But then {a mathematical formula}αv,v′b(e)+αu,v′b(e)≥b(e′)+αu,v′b(e′), that is, the gain {a mathematical formula}v′ receives through its friendships with v and u from e is at least as large as the gain it would receive by matching with u (directly and through friendship). This contradicts the assumption that {a mathematical formula}e′ is a perceived blocking pair. Other coalitions involving u, {a mathematical formula}v′ are not present. Hence, {a mathematical formula}{u,v′} is an undominated candidate coalition. After adding {a mathematical formula}{u,v′}, {a mathematical formula}{u,v} is dominated through benefit and hence gets dropped. Again, the set of coalitions resulting from our rules exactly corresponds to the matching after resolving the perceived blocking pair {a mathematical formula}e′.Thirdly, assume both u and {a mathematical formula}v′ are already matched. Agent u wants to drop {a mathematical formula}e={u,v} and v wants to drop {a mathematical formula}e″={u′,v′} to form the new edge {a mathematical formula}e′. Then {a mathematical formula}{u,v} and {a mathematical formula}{u′,v′} are part of the current state. The previous arguments for edges that dominate {a mathematical formula}{u,v′} through {a mathematical formula}D1 or {a mathematical formula}Db can again be applied. It remains to check whether domination via {a mathematical formula}D2 is possible. But the domination rules in {a mathematical formula}D2 imply that the loss caused by giving up eand{a mathematical formula}e″ for {a mathematical formula}v′ is at least as large as the gain generated from {a mathematical formula}e′. Thus, as {a mathematical formula}e′ is a perceived blocking pair, there is no rule in {a mathematical formula}D2 relating {a mathematical formula}{{u,v},{u′,v′}} to {a mathematical formula}{u,v′}. Again, no other coalitions involving u, {a mathematical formula}v′ are present, and we can generate {a mathematical formula}{u,v′}. Now {a mathematical formula}{u,v} and {a mathematical formula}{u′,v′} are dominated via {a mathematical formula}Db and thus dropped. The same happens with M which becomes {a mathematical formula}M∖{e,e″}∪{e′}. Again, the set of coalitions resulting from our rules exactly correspond to the matching after resolving the perceived blocking pair {a mathematical formula}{u,v′}. This proves the first direction.Conversely, let {a mathematical formula}S be a feasible coalition structure in our coalition formation game with constraints. Observe that feasibility regarding the rules defined above implies that {a mathematical formula}S must correspond to a feasible matching M. Further, let {a mathematical formula}{u,v′}∉S be an undominated coalition. Assume for contradiction that {a mathematical formula}e′={u,v′} is not a perceived blocking pair.Firstly, let {a mathematical formula}v′ and u both be unmatched. Then the edge can be formed without removing any edges. As the benefit caused by {a mathematical formula}e′ is strictly positive, {a mathematical formula}e′ hence is a perceived blocking pair.Secondly, let {a mathematical formula}v′ be unmatched but u be matched. Then there is some edge {a mathematical formula}e={u,v}∈S. Obviously, {a mathematical formula}{u,v} dominates {a mathematical formula}{u,v′} neither through {a mathematical formula}Db nor through {a mathematical formula}D1. Thus, {a mathematical formula}b(e)+αu,vb(e)&lt;b(e′)+αu,v′b(e′) and {a mathematical formula}αv,v′b(e)+αu,v′b(e)&lt;b(e′)+αu,v′b(e′). But then {a mathematical formula}e′ is a perceived blocking pair.Thirdly, assume that both {a mathematical formula}v′ and u are both matched in M. Then there are edges {a mathematical formula}e={u,v} and {a mathematical formula}e″={u′,v′} in {a mathematical formula}S. As {a mathematical formula}{u,v} is a blocking coalition, neither one nor both of those two coalitions combined form the precondition of a domination rule with target coalition {a mathematical formula}{u,v}. As a consequence, {a mathematical formula}(1+cv′,u′b({u′,v′}))+(cv′,v+cv′,u)b({u,v})&lt;(1+cv′,u)b({u,v′}) and {a mathematical formula}(1+cu,vb({u,v}))+(cu,v′+cu,u′)b({u′,v′})&lt;(1+cu,v′)b({u,v′}), that is, it is profitable for both u and {a mathematical formula}v′ to drop v and {a mathematical formula}u′ and form {a mathematical formula}e′. Again, {a mathematical formula}e′ is a perceived blocking pair in M.  □</paragraph><paragraph>When we consider larger coalitions, the symmetry condition for every coalition C implies {a mathematical formula}cu,v=cv,u=cu,w for all {a mathematical formula}u,v,w∈C. In consequence, there must be one value {a mathematical formula}cC that defines the mutual perceived value of all pairs in C. Moreover, {a mathematical formula}cC=cC′ whenever {a mathematical formula}|C∩C′|≥2. Arguably, this seems quite a strong condition to assume. Nevertheless, for the sake of completeness, we briefly show that this general domain also implies consistent rules.</paragraph><paragraph>As for considerate coalition formation, we now have to consider for every coalition all collections of overlapping coalitions that form a coalition structure. For the same reasons as in the matching case it is not sufficient to consider inclusion maximal sets of coalitions. We keep the set of agents and the set of potential coalitions, and define {a mathematical formula}Cg=G and {a mathematical formula}T=∅. Further, we set {a mathematical formula}b′(C)=b(C)+(|C|−1)cu,vb(C) for some {a mathematical formula}u,v∈C. Note that this definition is only consistent since we assume equal c-values for all pairs of agents within a coalition. We define a function {a mathematical formula}p(v,C)=∑v′∈Ccv,v′b(C) for all {a mathematical formula}C∈C to capture the amount of perceived benefit agent v receives from some coalition C. Note that if {a mathematical formula}v∈C, we have {a mathematical formula}p(v,C)=b(C)+(|C|−1)cu,vb(C)=b′(C). Then{a mathematical formula} This set encompasses {a mathematical formula}Db by including all rules where {a mathematical formula}S={C′} with {a mathematical formula}C∩C′≠∅ and {a mathematical formula}b′(C′)≥b′(C).</paragraph><paragraph label="Proposition 9">Friendship coalition formation gives rise to consistent generation and domination rules for non-negative, symmetric friendship values.</paragraph></section></section></appendices><references><reference label="[1]"><authors>David Abraham,Ariel Levavi,David Manlove,Gregg O'Malley</authors><title>The stable roommates problem with globally ranked pairs</title><host>Internet Math.5 (4)(2008) pp.493-515</host></reference><reference label="[2]"><authors>Heiner Ackermann,Paul Goldberg,Vahab Mirrokni,Heiko Röglin,Berthold Vöcking</authors><title>Uncoordinated two-sided matching markets</title><host>SIAM J. Comput.40 (1)(2011) pp.92-106</host></reference><reference label="[3]"><authors>Kemal Akkaya,Ismail Guneydas,Ali Bicak</authors><title>Autonomous actor positioning in wireless sensor and actor networks using stable matching</title><host>Int. J. Parallel Emerg. Distrib. Syst.25 (6)(2010) pp.439-464</host></reference><reference label="[4]"><authors>Elliot Anshelevich,Onkar Bhardwaj,Martin Hoefer</authors><title>Stable matching with network externalities</title><host>Algorithmica78 (3)(2017) pp.1067-1106</host></reference><reference label="[5]"><authors>Esteban Arcaute,Sergei Vassilvitskii</authors><title>Social networks and stable matchings in the job market</title><host>Proc. 5th Workshop Internet &amp; Network Economics (WINE)(2009) pp.220-231</host></reference><reference label="[6]"><authors>Georgios Askalidis,Nicole Immorlica,Augustine Kwanashie,David Manlove,Emmanouil Pountourakis</authors><title>Socially stable matchings in the hospitals/residents problem</title><host>Proc. 13th Workshop Algorithms and Data Structures (WADS)(2013) pp.85-96</host></reference><reference label="[7]"><authors>Haris Aziz,Florian Brandl</authors><title>Existence of stability in hedonic coalition formation games</title><host>Proc. 11th Conf. Auton. Agents and Multi-Agent Systems (AAMAS)(2012) pp.763-770</host></reference><reference label="[8]"><authors>Haris Aziz,Felix Brandt,Paul Harrenstein</authors><title>Fractional hedonic games</title><host>Proc. 13th Conf. Auton. Agents and Multi-Agent Systems (AAMAS)(2014) pp.5-12</host></reference><reference label="[9]"><authors>Haris Aziz,Felix Brandt,Hans Georg Seedig</authors><title>Computing desirable partitions in additively separable hedonic games</title><host>Artif. Intell.195 (2013) pp.316-334</host></reference><reference label="[10]"><authors>Haris Aziz,Rahul Savani</authors><title>Hedonic games</title><host>Felix BrandtVincent ConitzerUlle EndrissJérôme LangAriel ProcacciaHandbook of Computational Social Choice(2016)Cambridge University Press pp.356-376</host></reference><reference label="[11]"><authors>Suryapratim Banerjee,Hideo Konishi,Tayfun Sönmez</authors><title>Core in a simple coalition formation game</title><host>Soc. Choice Welf.18 (1)(2001) pp.135-153</host></reference><reference label="[12]"><authors>Davide Bilò,Luciano Gualà,Stefano Leucci,Guido Proietti</authors><title>Locality-based network creation games</title><host>ACM Trans. Parallel Comput.3 (1)(2016) pp.6-</host></reference><reference label="[13]"><authors>Péter Biró,Matthijs Bomhoff,Petr A. Golovach,Walter Kern,Daniël Paulusma</authors><title>Solutions for the stable roommates problem with payments</title><host>Theor. Comput. Sci.540 (2014) pp.53-61</host></reference><reference label="[14]"><authors>Péter Biró,Katarína Cechlárová,Tamás Fleiner</authors><title>The dynamics of stable matchings and half-matchings for the stable marriage and roommates problems</title><host>Int. J. Game Theory36 (3–4)(2008) pp.333-352</host></reference><reference label="[15]"><authors>Péter Biró,Gethin Norman</authors><title>Analysis of stochastic matching markets</title><host>Int. J. Game Theory42 (4)(2013) pp.1021-1040</host></reference><reference label="[16]"><authors>Yosef Blum,Alvin Roth,Uriel Rothblum</authors><title>Vacancy chains and equilibration in senior-level labor markets</title><host>J. Econ. Theory76 (1997) pp.362-411</host></reference><reference label="[17]"><authors>Yosef Blum,Uriel Rothblum</authors><title>“Timing is everything” and marital bliss</title><host>J. Econ. Theory103 (2002) pp.429-442</host></reference><reference label="[18]"><authors>Anna Bogomolnaia,Matthew Jackson</authors><title>The stability of hedonic coalition structures</title><host>Games Econ. Behav.38 (2002) pp.201-230</host></reference><reference label="[19]"><authors>Philipp Brandes,Roger Wattenhofer</authors><title>On finding better friends in social networks</title><host>Proc. 14th Symp. Stabilization, Safety, Security of Distrib. Syst. (SSS)(2012) pp.266-278</host></reference><reference label="[20]"><authors>Katarina Cechlárova</authors><title>Stable partition problem</title><host>Encyclopedia of Algorithms(2008)</host></reference><reference label="[21]"><authors>Po-An Chen,Bart De Keijzer,David Kempe,Guido Schäfer</authors><title>Altruism and its impact on the price of anarchy</title><host>ACM Trans. Econ. Comput.2 (4)(2014) pp.17-</host></reference><reference label="[22]"><authors>Christine Cheng</authors><title>On the stable matchings that can be reached when the agents go marching in one by one</title><host>SIAM J. Discrete Math.30 (4)(2016) pp.2047-2063</host></reference><reference label="[23]"><authors>Christine Cheng,Eric McDermid</authors><title>Maximum locally stable matchings</title><host>Algorithms6 (3)(2013) pp.383-395</host></reference><reference label="[24]"><authors>Effrosyni Diamantoudi,Eiichi Miyagawa,Licun Xue</authors><title>Random paths to stability in the roommates problem</title><host>Games Econ. Behav.48 (1)(2004) pp.18-28</host></reference><reference label="[25]"><authors>Jacques Dreze,Joseph Greenberg</authors><title>Hedonic coalitions: optimality and stability</title><host>Econometrica48 (4)(1980) pp.987-1003</host></reference><reference label="[26]"><authors>Martin Gairing,Rahul Savani</authors><title>Computing stable outcomes in hedonic games</title><host>Proc. 3rd Symp. Algorithmic Game Theory (SAGT)(2010) pp.174-185</host></reference><reference label="[27]"><authors>David Gale,Lloyd Shapley</authors><title>College admissions and the stability of marriage</title><host>Am. Math. Mon.69 (1)(1962) pp.9-15</host></reference><reference label="[28]"><authors>Michel Goemans,Li Li,Vahab Mirrokni,Marina Thottan</authors><title>Market sharing games applied to content distribution in ad-hoc networks</title><host>IEEE J. Sel. Areas Commun.24 (5)(2006) pp.1020-1033</host></reference><reference label="[29]"><authors>Dan Gusfield,Robert Irving</authors><title>The Stable Marriage Problem: Structure and Algorithms</title><host>(1989)MIT Press</host></reference><reference label="[30]"><authors>Jana Hajduková</authors><title>Coalition formation games: a survey</title><host>Int. Game Theory Rev.8 (4)(2006) pp.613-641</host></reference><reference label="[31]"><authors>Martin Hoefer</authors><title>Local matching dynamics in social networks</title><host>Inf. Comput.222 (2013) pp.20-35</host></reference><reference label="[32]"><authors>Martin Hoefer,Michal Penn,Maria Polukarov,Alexander Skopalik,Berthold Vöcking</authors><title>Considerate equilibrium</title><host>Proc. 22nd Int. Joint Conf. Artif. Intell. (IJCAI)(2011) pp.234-239</host></reference><reference label="[33]"><authors>Martin Hoefer,Alexander Skopalik</authors><title>Social context in potential games</title><host>Proc. 8th Workshop Internet &amp; Network Economics (WINE)(2012) pp.365-378</host></reference><reference label="[34]"><authors>Martin Hoefer,Alexander Skopalik</authors><title>Altruism in atomic congestion games</title><host>ACM Trans. Econ. Comput.1 (4)(2013) pp.21-</host></reference><reference label="[35]"><authors>Martin Hoefer,Daniel Vaz,Lisa Wagner</authors><title>Hedonic coalition formation in networks</title><host>Proc. 29th Conf. Artif. Intell. (AAAI)(2015) pp.929-935</host></reference><reference label="[36]"><authors>Martin Hoefer,Lisa Wagner</authors><title>Matching dynamics with constraints</title><host>Proc. 10th Conf. Web and Internet Economics (WINE)(2014) pp.161-174</host></reference><reference label="[37]"><authors>Martin Hoefer,Lisa Wagner</authors><title>Locally stable marriage with strict preferences</title><host>SIAM J. Discrete Math.31 (1)(2017) pp.283-316</host></reference><reference label="[38]"><authors>Moshe Hoffman,Daniel Moeller,Ramamohan Paturi</authors><title>Jealousy graphs: structure and complexity of decentralized stable matching</title><host>Proc. 9th Conf. Web and Internet Economics (WINE)(2013) pp.263-276</host></reference><reference label="[39]"><authors>Ayumi Igarashi,Edith Elkind</authors><title>Hedonic games with graph-restricted communication</title><host>Proc. 15th Conf. Auton. Agents and Multi-Agent Systems (AAMAS)(2016) pp.242-250</host></reference><reference label="[40]"><authors>Robert Irving</authors><title>An efficient algorithm for the “stable roommates” problem</title><host>J. Algorithms6 (4)(1985) pp.577-595</host></reference><reference label="[41]"><authors>Alexander Kelso,Vincent Crawford</authors><title>Job matchings, coalition formation and gross substitute</title><host>Econometrica50 (1982) pp.1483-1504</host></reference><reference label="[42]"><authors>Donald Knuth</authors><title>Marriages stables et leurs relations avec d'autres problemes combinatoires</title><host>(1976)Les Presses de l'Université de Montréal</host></reference><reference label="[43]"><authors>John Ledyard</authors><title>Public goods: a survey of experimental research</title><host>John KagelAlvin RothHandbook of Experimental Economics(1997)Princeton University Press pp.111-194</host></reference><reference label="[44]"><authors>David Levine</authors><title>Modeling altruism and spitefulness in experiments</title><host>Rev. Econ. Dyn.1 (1998) pp.593-622</host></reference><reference label="[45]"><authors>David Manlove</authors><title>Algorithmics of Matching Under Preferences</title><host>(2013)World Scientific</host></reference><reference label="[46]"><authors>Fabien Mathieu</authors><title>Self-stabilization in preference-based systems</title><host>Peer-to-Peer Netw. Appl.1 (2)(2008) pp.104-121</host></reference><reference label="[47]"><authors>Fabien Mathieu</authors><title>Acyclic preference-based systems</title><host>Xuemin ShenHeather YuJohn BufordMursalin AkonHandbook of Peer-to-Peer Networking(2010)Springer Verlag</host></reference><reference label="[48]"><authors>Roger Myerson</authors><title>Graphs and cooperation in games</title><host>Math. Oper. Res.2 (1977) pp.225-229</host></reference><reference label="[49]"><authors>Nhan-Tam Nguyen,Anja Rey,Lisa Rey,Jörg Rothe,Lena Schend</authors><title>Altruistic hedonic games</title><host>Proc. 15th Conf. Auton. Agents and Multi-Agent Systems (AAMAS)(2016) pp.251-259</host></reference><reference label="[50]"><authors>Guillermo Owen</authors><title>Values of graph-restricted games</title><host>SIAM J. Algebraic Discrete Methods7 (2)(1986) pp.210-220</host></reference><reference label="[51]"><authors>Dominik Peters</authors><title>Complexity of hedonic games with dichotomous preferences</title><host>Proc. 30th Conf. Artif. Intell. (AAAI)(2016) pp.579-585</host></reference><reference label="[52]"><authors>Dominik Peters</authors><title>Graphical hedonic games of bounded treewidth</title><host>Proc. 30th Conf. Artif. Intell. (AAAI)(2016) pp.586-593</host></reference><reference label="[53]"><authors>Dominik Peters</authors><title>Towards structural tractability in hedonic games</title><host>Proc. 30th Conf. Artif. Intell. (AAAI)(2016) pp.4252-4253</host></reference><reference label="[54]"><authors>Dominik Peters,Edith Elkind</authors><title>Simple causes of complexity in hedonic games</title><host>Proc. 24th Int. Joint Conf. Artif. Intell. (IJCAI)(2015) pp.617-623</host></reference><reference label="[55]"><authors>Alvin Roth,Tayfun Sönmezc,Utku Ünver</authors><title>Pairwise kidney exchange</title><host>J. Econ. Theory125 (2)(2005) pp.151-188</host></reference><reference label="[56]"><authors>Alvin Roth,Marilda Oliveira Sotomayor</authors><title>Two-Sided Matching: A Study in Game-Theoretic Modeling and Analysis</title><host>(1990)Cambridge University Press</host></reference><reference label="[57]"><authors>Alvin Roth,John Vande Vate</authors><title>Random paths to stability in two-sided matching</title><host>Econometrica58 (6)(1990) pp.1475-1480</host></reference><reference label="[58]"><authors>Shao-Chin Sung,Dinko Dimitrov</authors><title>Computational complexity in additive hedonic games</title><host>Eur. J. Oper. Res.203 (3)(2010) pp.635-639</host></reference><reference label="[59]"><authors>Gerhard Woeginger</authors><title>Core stability in hedonic coalition formation</title><host>Proc. 39th Conf. Current Trends in Theory &amp; Practice of Comput. Sci. (SOFSEM)(2013) pp.33-50</host></reference></references><footnote><note-para label="1">Our definition of stability represents the classic notion of core-stability if every {a mathematical formula}C∈2V is available to the agents. We can easily extend our setting to fulfill this property by assuming {a mathematical formula}b(C)=0 for all {a mathematical formula}C∈2V∖C.</note-para></footnote></root>