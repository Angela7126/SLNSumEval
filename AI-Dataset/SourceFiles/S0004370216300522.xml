<?xml version="1.0" encoding="UTF-8"?><root><url>https://www.sciencedirect.com/science/article/pii//S0004370216300522</url><title>Knowledge base exchange: The case of OWL 2 QL</title><authors>Marcelo Arenas,Elena Botoeva,Diego Calvanese,Vladislav Ryzhikov</authors><abstract>In this article, we define and study the problem of exchanging knowledge between a source and a target knowledge base (KB), connected through mappings. Differently from the traditional database exchange setting, which considers only the exchange of data, we are interested in exchanging implicit knowledge. As representation formalism we use Description Logics (DLs), thus assuming that the source and target KBs are given as a DL TBox+ABox, while the mappings have the form of DL TBox assertions. We define a general framework of KB exchange, and study the problem of translating the knowledge in the source KB according to the mappings expressed in OWL 2 QL, the profile of the standard Web Ontology Language OWL 2 based on the description logic DL-LiteR. We develop novel game- and automata-theoretic techniques, and we provide complexity results that range from NLogSpace to ExpTime.</abstract><keywords>Description logic;Knowledge exchange;DL-Lite;Data exchange;Query inseparability</keywords><content><section label="1"><section-title>Introduction</section-title><paragraph>Ontologies are at the heart of various Computer Science disciplines, among which the most prominent ones are Semantic Web, Biomedical informatics, and of course, Artificial Intelligence and Knowledge Representation. Here, for simplicity, by ontology we mean a formal representation of the knowledge about a domain in terms of concepts (unary predicates) and roles (binary predicates). In the biomedical domain, e.g., Pneumonia and Lung could be concepts, and finding_site could be a role, and the knowledge about the domain could be asserted in an axiom of the form “The finding site of pneumonia is lungs”[1], [2]. The advantages of using ontologies are that, on the one hand, they provide a framework for organizing and structuring information, and on the other hand, they are equipped with capabilities to reason about concepts and roles.</paragraph><paragraph>When representing the knowledge about a domain of interest in terms of an ontology, on the one hand the designer is free to choose the formalism in which to express the ontology, among a variety of different alternatives (e.g., a relational database possibly with constraints, Datalog, or Description Logics). On the other hand, she can select the specific terminology she considers more appropriate to convey the domain semantics. For instance, when creating a biomedical ontology about deseases, the lungs can be modeled as Pair_of_lungs or Both_lungs. This leads to having complex forms of information, maintained in different formats and organized according to different structures. Often, this information needs to be shared between agents: to reuse the existing ontologies, to integrate knowledge from different agents, and so on. Therefore in recent years, both in the data management and in the knowledge representation communities, several settings have been investigated that address this problem from various perspectives: (i) in information integration, uniform access is provided to a collection of data sources by means of an ontology (or global schema) to which the sources are mapped [3]; (ii) in peer-to-peer systems, a set of peers declaratively linked to each other collectively provide access to the information assets they maintain [4], [5], [6]; (iii) in ontology matching, the aim is to understand and derive the correspondences between elements in two ontologies [7], [8], [9]; (iv) in ontology modularity, the aim is to extract independent, possibly small, subsets of an ontology, so-called modules [10], [11], [12]; (v) in knowledge translation, axioms are being translated from one representation (i.e., logical language and vocabulary) into another [13], [14], [15]; and, finally, (vi) in data exchange, the information stored according to a source schema needs to be restructured and translated so as to conform to a target schema [16], [17]. The work we present in this article is inspired by this latter setting investigated in databases.</paragraph><paragraph>Data exchange is a field of database theory, motivated by several applications from industry [18], [19], that deals with transferring data between differently structured databases. In the seminal article [16], the data exchange problem was defined as the problem of transforming data structured under a source schema into data structured under a target schema, given a mapping specifying how to translate data from the source to the target schema. This problem is depicted in Fig. 1, where the obtained target data instance is referred to as a solution. The data exchange problem has been studied for different combinations of languages used to specify the source schema, the target schema and the mapping [17], [20], [21]. Most of the results in the literature consider source-to-target tuple generating dependencies (tgds) as the language to specify mappings. The dependencies in this class allow one to express containment of conjunctive queries: if a conjunction of several predicates holds, then a conjunction of some other predicates must hold as well. For example, the tgd{a mathematical formula} says that if a is the author of a book b, then there exist y and g such that b is a book with author a that was published in year y, and b has genre g. Many database integrity constraints can be expressed by tgds, so these dependencies have been widely used in databases. Source-to-target tgds (st-tgds) are tgds of a special shape: the conjunction on the left-hand side uses only symbols from a source schema, while the conjunction on the right-hand side uses only symbols from a target schema.</paragraph><paragraph label="Example 1.1">A fundamental assumption in the (traditional) data exchange framework is that the source is a complete database: every fact is either true or false. On the other hand, a target instance can be incomplete and a source instance can have many different solutions, as incomplete information can be introduced by the mapping layer (see also [22]). If we consider the mapping consisting of the constraint (1), and a source instance consisting of one entry {a mathematical formula}AuthorOf(tolkien,lotr), encoding that Tolkien is the author of ‘The Lord of the Rings’, then the following two target instances, {a mathematical formula}I2 and {a mathematical formula}I2′, are solutions:{a mathematical formula} Note that here incompleteness is caused by the existential restriction {a mathematical formula}∃y,g…, which can be satisfied by introducing new objects: either named individuals (or constants), like {a mathematical formula}fantasy, or anonymous objects, like {a mathematical formula}null1. Note also that {a mathematical formula}null1 and {a mathematical formula}null2 are labeled nulls, which are widely used in databases to represent anonymous objects.  □</paragraph><paragraph>To characterize good transformations, several criteria have been considered [23]. We emphasize two types of good translations, universal solutions and query solutions. Universal solutions are the most general solutions: any other solution is more specific ({a mathematical formula}I2′ in Example 1.1 is a universal solution), while query solutions are good solutions from the point of view of answering target queries, i.e., queries formulated over the target schema.</paragraph><paragraph>Data exchange with incomplete information. As mentioned before, in the (traditional) data exchange framework, source instances are assumed to contain complete information. However, there are natural scenarios where source instances may contain incomplete information [24], [25], [21]. In particular, the problem of data exchange with incomplete source data was studied in [25], where an incomplete specification is understood as an object with (possibly infinitely) many interpretations. A simple example of such an object is a database with nulls: assume that we have a table storing information about book genres, and that ‘The Lord of The Rings’ is a book whose genre is unknown. In this case, the table would consist of an entry of the form {a mathematical formula}BookGenre(lotr,null), which represents all different instances containing a concrete value for the genre of ‘The Lord of The Rings’: {a mathematical formula}BookGenre(lotr,fantasy), {a mathematical formula}BookGenre(lotr,history), {a mathematical formula}BookGenre(lotr,scifi), etc.</paragraph><paragraph>A knowledge base is another example of an object with multiple interpretations. A knowledge base (KB) is a description of a domain of interest that includes two kinds of information: (i) ground facts, i.e., extensional information of the form “John is a student”, “Databases is a course”, “John attends the Databases course”, etc., which assert properties of individual objects that are part of the domain; and (ii) logical axioms, i.e., intensional information of the form “Every course must be taught by somebody”, “A student cannot be a professor”, etc., which structure the knowledge about the domain. We also call the second type of information an ontology. It is implicit in the standard semantics of a KB that the knowledge it describes is only a partial description of a domain of interest, which means that the KB represents many actual states of the world. For instance, if we consider the KB consisting of the five axioms mentioned above, then it could represent one possible state of the world, where John also attends the Statistics course, David teaches Databases and Peter teaches Statistics. The general knowledge exchange framework proposed in [25] considers the case where the source is a KB as opposed to a relational database. Moreover, it is shown in that work that some natural problems (such as query answering over the target schema) become undecidable if KBs are specified by tgds and mappings are specified by source-to-target tgds. Thus, some decidability results are obtained by considering some restricted fragments of the class of tgds when specifying KBs.</paragraph><paragraph>An alternative to the approach proposed in [25] to achieve decidability is to consider less expressive ontological languages when specifying both KBs and mappings. A good candidate for that role is the formalism of Description Logics, which come in variants that provide fair expressive power, and at the same time possess good computational properties.</paragraph><paragraph>Description Logics as ontology language. Description Logics (DLs) [26] are a family of formal languages, more precisely, fragments of first-order logic, that are specifically designed to serve as ontology languages. They exhibit a reasonable tradeoff between their expressive power and the computational complexity of logical inference tasks. Nice computational properties in DLs are achieved by restricting attention to unary and binary predicates, called concepts and roles, respectively, and to restricted forms of axioms. Ground facts in DLs are encoded in the form of an ABox, which is a set of membership assertions, and logical axioms are encoded in the form of a TBox, which is a set of concept and role inclusions. For instance, the DL KB containing the five axioms describing the university domain mentioned before looks as follows:{a mathematical formula} Notice that both inclusions above are between concepts.</paragraph><paragraph>Thus, the starting point for our work is the knowledge exchange framework defined in [25], and the main motivation is to find ontology and mapping specification languages where the fundamental problem of knowledge base exchange can be solved, and which are both natural and useful in practice. For this purpose, we focus on the Description Logic underlying OWL 2 QL, which is the profile [27] of the standard Web Ontology Language OWL 2 [28] that has been specifically designed for efficient query answering. Next we describe our contributions in this respect.</paragraph><paragraph>Our contributions. First, we propose and develop a framework for KB exchange based on DLs; both source and target are KBs constituted by a DL TBox, representing intensional information, and an ABox, representing extensional information, and mappings are sets of DL concept and role inclusions. We then specialize this framework to the case of lightweight DLs of the DL-Lite family [29]. In particular, we consider DL-Lite{a mathematical formula}R, which is the logic underlying the OWL 2 QL profile of OWL 2. In this framework, we are interested in three types of solutions: universal solutions, universal {a mathematical formula}UCQ-solutions, and {a mathematical formula}UCQ-representations. Universal solutions are the most precise solutions: a target KB {a mathematical formula}Kt is a universal solution for a source KB {a mathematical formula}Ks under a mapping {a mathematical formula}M if it preserves all the interpretations of {a mathematical formula}Ks with respect to {a mathematical formula}M. Universal{a mathematical formula}UCQ-solutions is a relaxation of the notion of universal solutions: a target KB {a mathematical formula}Kt is a universal {a mathematical formula}UCQ-solution for a source KB {a mathematical formula}Ks under a mapping {a mathematical formula}M if it preserves all answers to unions of conjunctive queries ({a mathematical formula}UCQs) formulated over the target signature. {a mathematical formula}UCQ-representations are similar to universal {a mathematical formula}UCQ-solutions, but they do not depend on the source ABox, only on the source TBox and the mapping: a target TBox {a mathematical formula}T is a {a mathematical formula}UCQ-representation of a source TBox {a mathematical formula}S under a mapping {a mathematical formula}M if for each possible source ABox {a mathematical formula}As, it holds that {a mathematical formula}T, {a mathematical formula}M, and {a mathematical formula}As give the same answers to {a mathematical formula}UCQs as {a mathematical formula}S, {a mathematical formula}M, and {a mathematical formula}As. The rationale behind the notion of {a mathematical formula}UCQ-representation is to maximize the implicit knowledge translated to the target. Thus, a {a mathematical formula}UCQ-representation of a source TBox captures at best the intensional information that can be extracted from this source TBox according to a mapping and using {a mathematical formula}UCQs.</paragraph><paragraph>Second, we study each one of the three notions of solution just described, and their relationship to each other for the case of KBs and mappings defined using DL-Lite{a mathematical formula}R. We provide examples that justify the need for target ABoxes with labeled nulls in order for universal solutions and universal {a mathematical formula}UCQ-solutions to exist, as the language of DL-Lite{a mathematical formula}R is capable of implying the existence of new objects. Such ABoxes mentioning anonymous objects are called extended ABoxes, as opposed to simple ABoxes, which mention only named individuals (or constants).</paragraph><paragraph>Finally, in order to obtain a good understanding of the knowledge base exchange problem, we study the computational complexity of the membership and non-emptiness problems for universal solutions, universal {a mathematical formula}UCQ-solutions and {a mathematical formula}UCQ-representations. For universal solutions (resp., universal {a mathematical formula}UCQ-solutions), the membership problem verifies, given a source KB {a mathematical formula}Ks, a mapping {a mathematical formula}M, and a target KB {a mathematical formula}Kt, whether {a mathematical formula}Kt is a universal solution (resp., universal {a mathematical formula}UCQ-solution) for {a mathematical formula}Ks under {a mathematical formula}M; instead, the non-emptiness problem addresses the question whether there exists a universal solution (resp., universal {a mathematical formula}UCQ-solution) for a given source KB {a mathematical formula}Ks and a given mapping {a mathematical formula}M. For {a mathematical formula}UCQ-representations, the membership problem verifies, given a source TBox {a mathematical formula}S, a mapping {a mathematical formula}M, and a target TBox {a mathematical formula}T, whether {a mathematical formula}T is a {a mathematical formula}UCQ-representation for {a mathematical formula}S under {a mathematical formula}M; instead, the non-emptiness problem addresses the question whether there exists a {a mathematical formula}UCQ-representation for a given source TBox {a mathematical formula}S and a given mapping {a mathematical formula}M, that is, whether {a mathematical formula}S is {a mathematical formula}UCQ-representable under {a mathematical formula}M. Notice that the non-emptiness problem is directly related to the task of materializing a translation; moreover, determining {a mathematical formula}UCQ-representability is a crucial task, since it allows one to use the obtained target TBox to infer new knowledge in the target, thus reducing the amount of extensional information to be transferred from the source.</paragraph><paragraph>The complexity results obtained in this article (for DL-Lite{a mathematical formula}R) are summarized in Table 1, where we also mentioned the theorems and lemmas where the results are proved. For universal solutions with simple ABoxes, we show that both the membership and the non-emptiness problems are PTime-complete, where the upper bound is obtained by considering infinite games on graphs with the reachability acceptance condition, for which it is known that the problem of finding a winning strategy is in PTime. Then, for universal solutions with extended ABoxes, we prove that the membership problem is NP-complete, while the non-emptiness problem is PSpace-hard, and provide for the latter an ExpTime upper bound based on a novel approach exploiting two-way alternating tree automata. For {a mathematical formula}UCQ-representations, we show that both the membership and non-emptiness problems are NLogSpace-complete, the key condition for this low complexity being the fact that UCQ-representations do not depend on the shape of ABoxes. As for universal {a mathematical formula}UCQ-solutions, the main results have been established in [30], where it has been shown that the membership problem (both for simple and for extended ABoxes) is ExpTime-complete. The upper bound immediately provides also an ExpTime algorithm for solving the non-emptiness problem with simple ABoxes [30]. For extended ABoxes, we prove instead a PSpace lower bound, which does not carry over to simple ABoxes.</paragraph><paragraph>It should be noticed that in the non-emptiness problem mentioned before, the target signature is assumed to be part of the input. Thus, the constructed solutions (i.e., universal solutions, universal {a mathematical formula}UCQ-solutions and {a mathematical formula}UCQ-representations) are not allowed to use any new concept or role symbols not included in the given target signature. The problem of allowing additional symbols in these constructions is certainly interesting and worth investigating in the future. However it is a different problem from the one we are studying here. In fact, the problem we are investigating is a natural one, fully in line with the work done in data exchange [16], [17], [20], [25], [21]. Moreover, there are several reasons why it may be undesirable or even impossible to allow for additional concepts or roles in the target. First, the target signature might be given and not under control of the user, therefore it might not be extensible. Second, there might be privacy issues that prevent the use of all the information in a source KB, so only the information about some concepts and roles have to be displayed. This problem can be viewed as a knowledge exchange problem where the target signature stores the symbols to be displayed, and which cannot include some new concepts or roles. Third, a source signature might be very large, hence the user would like to switch to a smaller target signature. In this case, it is not desirable to add new symbols that can make the target signature to grow. Finally, an instance of data exchange could be part of the more general problem of schema evolution [31], [32], where one needs to consider a sequence of several instances of data exchange. In this context, allowing for keeping existing symbols or adding new symbols at each step, might result in an unacceptable (and undesired) growth of the signature.</paragraph><paragraph>Organization of the article. The rest of the article is structured as follows. We start with related work in Section 2, and then we provide in Section 3 the preliminary notions and terminology needed in the rest of the article. In Section 4, we introduce our knowledge base exchange framework: we formally define the three notions of solution, and we set up the space of computational complexity-related problems that we consider. Section 5 gives some intuition and basic results about each kind of solution, and provides several examples about these notions. Then, the complexity results and the technical development are presented in Section 6 for universal solutions, and in Section 7 for {a mathematical formula}UCQ-representations. Finally, we provide in Section 8 some concluding remarks. Detailed proofs of many of the results are provided in an appendix, so as to ease the presentation in the main body of the article.</paragraph></section><section label="2"><section-title>Related work</section-title><paragraph>Data exchange, including the case with incomplete information, which is the most important area related to our work, has already been discussed in the introduction. Below we discuss other related areas.</paragraph><paragraph>Knowledge translation. The problem of knowledge translation was addressed in [13] with the goal of formalizing the task of reusing/sharing existing encoded knowledge in the process of the development of new intelligent systems. This problem had emerged already in the early nineties, and in [33] an interlingua-based methodology for this problem was proposed, where logical theories encoded in one representation (source) are translated to another representation (target). Interlingua is a mediating first-order logic based language designed for communicating knowledge between the source and the target representations, where a representation is formed using a declarative language, a vocabulary, and a base theory (associated with the language). In [34], [35], [36], the authors devised a formalism for producing translations based on a theory of contexts; a translation is specified as a set of first-order logic sentences, each of which describes a rule for deriving a formula in a target output context that is a translation of a formula in a source input context. Such an approach, first, provides a formal semantics for translation, and second, enables translations to be computed by standard theorem provers.</paragraph><paragraph>A decade later there has been a revival of interest in knowledge translation in the context of the Semantic Web, where the problem of communicating knowledge between heterogeneous agents is especially relevant [14], [37], [15]. The focus of these works is to translate axioms represented in a rule-based formalism, where the mapping axioms, that is, the axioms defining how the source and target vocabularies are related, are represented in a simple fragment of first-order logic. In this context, algorithms for translating axioms have been developed and implemented.</paragraph><paragraph>While the first work [13] gives a rather abstract and high-level view on the problem of knowledge translation, the more recent contributions [14], [37], [15] are more on the practical side and lack solid theoretical foundations. Thus, none of these results provides a precise understanding of the complexity of the problems related to translating knowledge.</paragraph><paragraph>Data and information integration. A problem closely related to data exchange is that of data integration, which is concerned with the task of combining data coming from a variety of heterogeneous sources [3], [38], [39], [40], [41]. The main aim is to provide a uniform view of these data so that users can query and access them in an integrated way. This problem is relevant in many real-world applications, both in commercial and scientific domains [42]. The problem of data integration is addressed by defining a global schema (i.e., a schema available to the user) and mappings between the schemas of the data sources and the global schema. While the combination of the schemas of the sources to be integrated naturally corresponds to the source schema in data exchange, the global schema plays the role of the target schema.</paragraph><paragraph>Information integration has also been studied under the assumption that the global schema is expressed by means of an ontology, which provides a layer that captures the semantics of the domain of interest and that helps to overcome the semantic heterogeneity of the data sources [43], [44]. In fact, the problem of integration has also been considered when applied to ontologies themselves, i.e., when the sources to be integrated are incompletely specified, in terms of logical constraints encoded in an ontology [45].</paragraph><paragraph>Although the data and ontology integration settings bear similarity to the one we are studying here, the techniques developed there are not applicable towards our goals, due to the difference in focus between information integration and exchange: while in information integration the aim is to query the source through the target via the mappings, possibly without materializing any data at the target, the aim of exchange is precisely to understand which data to materialize and how to do this efficiently.</paragraph><paragraph>Ontology and knowledge base maintenance. There are various scenarios where one ontology or KB needs to be compared against another or against its own part. On one hand, this occurs when an ontology was updated and the update needs to be verified. On the other hand, modularization (or module extraction) aims at splitting a given ontology into smaller sub-ontologies, each of which can be used autonomously, when only a subset of the ontology signature is of interest [10], [12], [46], [47]. Such sub-ontologies are called modules, and since they are typically of a small size (compared to the entire ontology, which can be very large), it is easier to understand them and perform reasoning with them. Another mechanism to extract information relevant to a subset of the ontology signature, is uniform interpolation, also known as forgetting[48], [49], [50]. As opposed to modules, uniform interpolates are not restricted to subsets of the original ontology, but can be arbitrary sets of axioms over the restricted signature that at best capture the semantics. It is important to observe that, in general, the restriction to a smaller signature can lead to a much larger ontology [49].</paragraph><paragraph>In the Description Logics domain, ontology modularity and uniform interpolation rely on the notion of inseparability for a signature Σ, or Σ-inseparability, as a main technical tool. This notion has been studied for expressive DLs [51], [47], [52] and for Horn variants of DLs [53], [54], [55], [30]. Two major forms of inseparability have been considered in the literature. First, two KBs are said to be Σ-model inseparable, if every model of one of these KBs can be extended to a model of the other one in such a way that they agree on the symbols from Σ, and vice-versa. In other words, these KBs cannot be logically distinguished in the signature Σ. The second notion is query-based: two KBs are Σ-query inseparable if they give the same answers to all queries formulated over Σ. So intuitively, such KBs cannot be distinguished as far as answering queries formulated over Σ is concerned. This work is relevant for our investigation, as the notions of Σ-model and Σ-query inseparability are tightly related to some of the concepts studied in this paper. We formally define these notions in Section 3, and make these connections precise in Section 4.</paragraph></section><section label="3"><section-title>Preliminaries</section-title><section label="3.1">The description logic DL-Lite{a mathematical formula}R<paragraph>In this work we are concerned with OWL 2 QL, which is grounded on the lightweight DLs of the DL-Lite family [29]. Such DLs are characterized by the fact that conjunctive query answering is first-order rewritable and that standard reasoning can be done in polynomial time. Specifically, the formal counterpart of OWL 2 QL is DL-Lite{a mathematical formula}R, for which we present now syntax and semantics.</paragraph><paragraph>Let {a mathematical formula}NC, {a mathematical formula}NR, {a mathematical formula}Na, {a mathematical formula}Nℓ be pairwise disjoint countably infinite sets of concept names, role names, constants, and labeled nulls, respectively. Assume in the following that {a mathematical formula}A∈NC and {a mathematical formula}P∈NR; in DL-Lite{a mathematical formula}R, B and C are used to denote basic and arbitrary (or complex) concepts, respectively, and R and Q are used to denote basic and arbitrary (or complex) roles, respectively, which are defined as follows:{a mathematical formula} From now on, for a basic role R, we use {a mathematical formula}R− to denote {a mathematical formula}P− when {a mathematical formula}R=P, and P when {a mathematical formula}R=P−.</paragraph><paragraph>A TBox, usually denoted {a mathematical formula}O, is a finite set of concept inclusions{a mathematical formula}B⊑C and role inclusions{a mathematical formula}R⊑Q encoding relevant domain knowledge. We call an inclusion of the form {a mathematical formula}B1⊑¬B2 or {a mathematical formula}R1⊑¬R2 a disjointness axiom. An ABox {a mathematical formula}A is a finite set of membership assertions{a mathematical formula}B(a), {a mathematical formula}R(a,b), where {a mathematical formula}a,b∈Na, indicating which individuals belong to the concepts and how they are related by the roles in the ontology. We use {a mathematical formula}ind(A) to denote the set of constants appearing in {a mathematical formula}A.</paragraph><paragraph label="Example 3.1">We define now an ontology {a mathematical formula}PhotoCamera about digital photo cameras, underlying the structure of an electronics selling website. Specifically, we want to capture the fact that DSLR (digital single lens reflex) cameras have exchangeable lenses, and that there are different types of connectors between the camera and the lens, which are called mounts. For instance, some camera manufacturers have proprietary mounts, which allow one to connect to a camera only lenses of that manufacturer. Instead other manufacturers adopt standard mounts, e.g., the Micro Four Thirds system, that work across camera and lens models of different manufacturers. We define first a TBox {a mathematical formula}Ocam introducing some concepts and roles that are relevant for this domain. For clarity, we use strings beginning with capital letters to denote concepts, and strings beginning with lowercase letters to denote roles. The concept DigitalCamera denotes digital cameras, while DSLRCamera denotes digital reflex cameras. ExchangeLens denotes exchange lenses that can be mounted onto DSLR cameras through lens mounts, which in turn are grouped together in the concept Mount. The role cameraMounts relates DSLR cameras to their mounts, and hence has Mount as its range. The role lensMounts relates exchange lenses to their mounts, and its domain is ExchangeLens. Moreover, we require that every Mount is the mount of some ExchangeLens to which it is connected via the inverse of the role lensMounts. This knowledge is captured by the following DL-Lite{a mathematical formula}R TBox {a mathematical formula}Ocam of the ontology {a mathematical formula}PhotoCamera:{a mathematical formula} The ABox {a mathematical formula}Acam={DSLRCamera(canon5d)} of {a mathematical formula}PhotoCamera simply introduces an instance of a DSLR camera.  □</paragraph><paragraph>In this paper, we also consider extended ABoxes, which are obtained by allowing labeled nulls in membership assertions. Formally, an extended ABox is a finite set of membership assertions {a mathematical formula}B(u) and {a mathematical formula}R(u,v), where {a mathematical formula}u,v∈(Na∪Nℓ). Moreover, a(n extended) KB{a mathematical formula}K is a pair {a mathematical formula}〈O,A〉, where {a mathematical formula}O is a TBox and {a mathematical formula}A is an (extended) ABox. When we need to emphasize the distinction between ABoxes and extended ABoxes, we might also use the term simple ABox to refer to an ABox that is not extended; likewise for simple KBs. Note that labeled nulls are quite natural in the Semantic Web, since RDF (and hence OWL) in fact supports “extended ABoxes” by allowing blank nodes to occur in membership assertions. Similarly to labeled nulls, blank nodes are used to refer to unnamed objects.</paragraph><paragraph>A signature Σ is a finite set of concept and role names. A KB {a mathematical formula}K is said to be defined over (or simply, over) Σ if all the concept and role names occurring in {a mathematical formula}K belong to Σ (and likewise for TBoxes, ABoxes, concept inclusions, role inclusions and membership assertions). Moreover, an interpretation{a mathematical formula}Iof Σ is a pair {a mathematical formula}〈ΔI,⋅I〉, where {a mathematical formula}ΔI is a non-empty domain and {a mathematical formula}⋅I is a partial interpretation function over {a mathematical formula}NC∪NR∪Na, such that: (1) {a mathematical formula}AI is defined and {a mathematical formula}AI⊆ΔI, for every concept name {a mathematical formula}A∈Σ; (2) {a mathematical formula}PI is defined and {a mathematical formula}PI⊆ΔI×ΔI, for every role name {a mathematical formula}P∈Σ; and (3) {a mathematical formula}aI∈ΔI, for every constant {a mathematical formula}a∈Na, such that {a mathematical formula}aI is defined (such constants are called interpreted). Function {a mathematical formula}⋅I is also extended to interpret concept and role constructs:{a mathematical formula} Note that, consistently with the semantics of OWL 2 QL, we do not make the unique name assumption (UNA), i.e., we allow distinct constants {a mathematical formula}a,b∈Na to be interpreted as the same object, that is, {a mathematical formula}aI=bI. Observe also that labeled nulls are not interpreted by {a mathematical formula}I. Finally, note that interpretations do not have to interpret all constants in {a mathematical formula}Na. This is required first of all to avoid that both the canonical model and the generating structure (as defined in Section 3.2) are forced to be infinite. Moreover, this allows for finite interpretation domains without the need for interpreting an infinite number of constants as the same object.</paragraph><paragraph>Let {a mathematical formula}I=〈ΔI,⋅I〉 be an interpretation of a signature Σ. Then {a mathematical formula}I is said to satisfy a concept inclusion {a mathematical formula}B⊑C over Σ, denoted by {a mathematical formula}I⊨B⊑C, if {a mathematical formula}BI⊆CI; {a mathematical formula}I is said to satisfy a role inclusion {a mathematical formula}R⊑Q over Σ, denoted by {a mathematical formula}I⊨R⊑Q, if {a mathematical formula}RI⊆QI; and {a mathematical formula}I is said to satisfy a TBox {a mathematical formula}O over Σ, denoted by {a mathematical formula}I⊨O, if {a mathematical formula}I⊨α for every {a mathematical formula}α∈O. Moreover, satisfaction of membership assertions over Σ is defined as follows. A substitution over {a mathematical formula}I is a partial function {a mathematical formula}hI:(Na∪Nℓ)→ΔI such that for every {a mathematical formula}a∈Na, (1) {a mathematical formula}hI(a) is defined if and only if {a mathematical formula}aI is defined; and (2) if {a mathematical formula}hI(a) is defined, then {a mathematical formula}hI(a)=aI. Then, {a mathematical formula}I is said to satisfy an (extended) ABox {a mathematical formula}A, denoted by {a mathematical formula}I⊨A, if there exists a substitution {a mathematical formula}hI over {a mathematical formula}I such that:</paragraph><list><list-item label="–">for every {a mathematical formula}B(u)∈A, it holds that {a mathematical formula}hI(u) is defined and {a mathematical formula}hI(u)∈BI; and</list-item><list-item label="–">for every {a mathematical formula}R(u,v)∈A, it holds that {a mathematical formula}hI(u) and {a mathematical formula}hI(v) are defined and {a mathematical formula}(hI(u),hI(v))∈RI.</list-item></list><paragraph> Finally, {a mathematical formula}I is said to satisfy a(n extended) KB {a mathematical formula}K=〈O,A〉, denoted by {a mathematical formula}I⊨K, if {a mathematical formula}I⊨O and {a mathematical formula}I⊨A. Such {a mathematical formula}I is called a model of {a mathematical formula}K, and we use {a mathematical formula}Mod(K) to denote the set of all models of {a mathematical formula}K. We say that {a mathematical formula}K is consistent if {a mathematical formula}Mod(K)≠∅.</paragraph><paragraph>As is customary, given a(n extended) KB {a mathematical formula}K over a signature Σ and a membership assertion or an inclusion α over Σ, we use notation {a mathematical formula}K⊨α to indicate that for every interpretation {a mathematical formula}I of Σ, if {a mathematical formula}I⊨K, then {a mathematical formula}I⊨α. Similarly, we use {a mathematical formula}O⊨α for a TBox {a mathematical formula}O, and {a mathematical formula}A⊨α, for an ABox {a mathematical formula}A.</paragraph></section><section label="3.2"><section-title>The canonical and generating models</section-title><paragraph>Throughout this section we consider only simple KBs. Horn logics in general, and DL-Lite{a mathematical formula}R in particular, enjoy the canonical model property. It means that, given a KB {a mathematical formula}K, if {a mathematical formula}K is consistent, then it is possible to construct a model of {a mathematical formula}K that is more general than any of the other models of this KB. We now introduce this notion formally, and show how the canonical model can be constructed for a DL-Lite{a mathematical formula}R KB.</paragraph><paragraph>The canonical model. Let {a mathematical formula}K=〈O,A〉 be a consistent simple DL-Lite{a mathematical formula}R KB. To define the canonical model of {a mathematical formula}K, we need to introduce some terminology. For every basic role R in {a mathematical formula}K, we define the equivalence class {a mathematical formula}[R] as{a mathematical formula} We introduce a witness {a mathematical formula}w[R] for each {a mathematical formula}[R], and write {a mathematical formula}[R]⊑O[S] if {a mathematical formula}O⊨R⊑S. Then the generating relation{a mathematical formula}↝K between the set {a mathematical formula}Na∪{w[R]|R is a basic role} and the set {a mathematical formula}{w[R]|R is a basic role} is defined as follows:</paragraph><list><list-item label="–">{a mathematical formula}a↝Kw[R], if (1) {a mathematical formula}K⊨∃R(a); (2) {a mathematical formula}K⊭R(a,b), for every {a mathematical formula}b∈Na; and (3) {a mathematical formula}[R′]=[R], for every {a mathematical formula}[R′] such that {a mathematical formula}[R′]⊑O[R] and {a mathematical formula}K⊨∃R′(a).</list-item><list-item label="–">{a mathematical formula}w[S]↝Kw[R], if (1) {a mathematical formula}O⊨∃S−⊑∃R; (2) {a mathematical formula}[S−]≠[R]; and (3) {a mathematical formula}[R′]=[R] for every {a mathematical formula}[R′] such that {a mathematical formula}[R′]⊑O[R] and {a mathematical formula}O⊨∃S−⊑∃R′.</list-item></list><paragraph> Intuitively, the generating relation defines when an existing object can be reused to satisfy an axiom of the form {a mathematical formula}B⊑∃R, or a new object has to be generated.</paragraph><paragraph>A sequence {a mathematical formula}aw[R1]…w[Rn], where {a mathematical formula}a∈ind(A), {a mathematical formula}n≥0, {a mathematical formula}a↝Kw[R1] and {a mathematical formula}w[Ri]↝Kw[Ri+1] for {a mathematical formula}i∈{1,…,n−1}, is called a {a mathematical formula}K-path. We denote by {a mathematical formula}path(K) the set of all {a mathematical formula}K-paths, and by {a mathematical formula}wit(K) the set of all {a mathematical formula}w[R] such that {a mathematical formula}aw[R1]…w[Rn] is a {a mathematical formula}K-path, {a mathematical formula}n≥1 and {a mathematical formula}w[R]=w[Rn]. A {a mathematical formula}K-path {a mathematical formula}aw[R1]…w[Rn] with {a mathematical formula}n≥1 encodes an object that has to be generated to satisfy all axioms in {a mathematical formula}K, and which is called an anonymous individual as it is distinct from any named individual (i.e., constant). Finally, for every {a mathematical formula}σ∈path(K), denote by {a mathematical formula}tail(σ) the last element in σ. With this we have the necessary ingredients to define the canonical (or, universal) model of {a mathematical formula}K, which is denoted by {a mathematical formula}uni(K). Formally, {a mathematical formula}uni(K) is defined as an interpretation such that:{a mathematical formula} where {a mathematical formula}a∈ind(A), A is a concept name, and P is a role name occurring in {a mathematical formula}K.</paragraph><paragraph>Notice that the part of {a mathematical formula}uni(K) formed by the anonymous individuals is tree shaped. On the other hand, individuals in {a mathematical formula}ind(A) can be connected in an arbitrary way in {a mathematical formula}uni(K), and they are the only individuals that are interpreted by {a mathematical formula}uni(K).</paragraph><paragraph label="Example 3.2">Let {a mathematical formula}K=〈O,A〉, where {a mathematical formula}O={A⊑∃R,∃R−⊑∃R} and {a mathematical formula}A={A(a)}. Then the canonical model {a mathematical formula}uni(K) can be seen as an infinite R-path starting in a, which can depicted as follows:{a mathematical formula} In this figure, dots represent domain elements, a label A on a node x represents the fact {a mathematical formula}x∈Auni(K), and a label R on an arrow between x and y represents the fact {a mathematical formula}(x,y)∈Runi(K).  □</paragraph><paragraph label="Example 3.3">Assume that {a mathematical formula}Kcam=〈Ocam,Acam〉, where {a mathematical formula}Ocam and {a mathematical formula}Acam are as in Example 3.1. Then the canonical model {a mathematical formula}uni(K) can be depicted as follows:{a mathematical formula} □</paragraph><paragraph>The interpretation {a mathematical formula}uni(K) is called the canonical model because every other model of {a mathematical formula}K is less general than {a mathematical formula}uni(K). We formalize generality in terms of homomorphisms. For an interpretation {a mathematical formula}I and a signature Σ, the Σ-types{a mathematical formula}tΣI(o) and {a mathematical formula}rΣI(o,o′) for {a mathematical formula}o,o′∈ΔI are given by the set of concepts B (respectively, roles R) over Σ, such that {a mathematical formula}o∈BI (respectively, {a mathematical formula}(o,o′)∈RI). We also use {a mathematical formula}tI(o) and {a mathematical formula}rI(o,o′) to refer to the types over the signature of all concepts and roles names. Then, a Σ-homomorphism from an interpretation {a mathematical formula}I to {a mathematical formula}J is a function {a mathematical formula}h:ΔI↦ΔJ such that: (1) for every {a mathematical formula}a∈Na such that {a mathematical formula}aI is defined, it holds that {a mathematical formula}aJ is defined and {a mathematical formula}h(aI)=aJ; (2) {a mathematical formula}tΣI(o)⊆tΣJ(h(o)) and {a mathematical formula}rΣI(o,o′)⊆rΣJ(h(o),h(o′)) for all {a mathematical formula}o,o′∈ΔI. We say that {a mathematical formula}I is Σ-homomorphically embeddable into {a mathematical formula}J if there exists a Σ-homomorphism from {a mathematical formula}I to {a mathematical formula}J, and {a mathematical formula}I is Σ-homomorphically equivalent to {a mathematical formula}J, if they are Σ-homomorphically embeddable into each other. If Σ is the set of all concepts and roles names, we call a Σ-homomorphism simply homomorphism.</paragraph><paragraph label="Theorem 3.4">The theorem below establishes the relationship between the canonical model {a mathematical formula}uni(K) and an arbitrary model of {a mathematical formula}K. [55]If{a mathematical formula}Kis consistent, then{a mathematical formula}uni(K)is a model of{a mathematical formula}K. Moreover, for every model{a mathematical formula}Iof{a mathematical formula}K, there exists a homomorphism from{a mathematical formula}uni(K)to{a mathematical formula}I.</paragraph><paragraph>The generating structure. In general, the canonical model of a DL-Lite{a mathematical formula}R KB {a mathematical formula}K can be infinite, which makes it impossible to deal with it in practice. Thus, we define here an alternative notion that is called the generating structure of {a mathematical formula}K. This structure is always finite and can be used for deciding various reasoning tasks efficiently. Formally, given a simple KB {a mathematical formula}K=〈O,A〉, the generating structure{a mathematical formula}gen(K)=〈Δgen(K),⋅gen(K)〉 of {a mathematical formula}K, is defined as:{a mathematical formula} where {a mathematical formula}a∈ind(A), A is a concept name, and P is a role name occurring in {a mathematical formula}K. It is easy to see that {a mathematical formula}gen(K) is of polynomial size in the size of {a mathematical formula}K. Note that the canonical model {a mathematical formula}uni(K) can be obtained by unraveling [56, Ch. 2] the generating structure {a mathematical formula}gen(K), i.e., by introducing a new domain element for every path starting from (the interpretation of) a constant.</paragraph></section><section label="3.3"><section-title>Queries and certain answers</section-title><paragraph>In this paper, we deal with conjunctive queries and their unions. A conjunctive query{a mathematical formula}(CQ) (of arity{a mathematical formula}k≥0) over a signature Σ is a formula of the form {a mathematical formula}q(x→)=∃y→.φ(x→,y→), where {a mathematical formula}x→, {a mathematical formula}y→ are tuples of variables, {a mathematical formula}x→=(x1,…,xk) is the tuple of free variables of {a mathematical formula}q(x→), and {a mathematical formula}φ(x→,y→) is a conjunction of atoms of the form {a mathematical formula}A(z) and {a mathematical formula}P(z,z′), where A is a concept name in Σ, P is a role name in Σ, and each of {a mathematical formula}z,z′ is a variable from {a mathematical formula}x→∪y→. Given an interpretation {a mathematical formula}I=〈ΔI,⋅I〉 of Σ and a k-tuple {a mathematical formula}o→ of elements of {a mathematical formula}ΔI, we write {a mathematical formula}I⊨q[o→], if there exist a tuple {a mathematical formula}o→1 of elements of {a mathematical formula}ΔI such that {a mathematical formula}I,ξ⊨φ(x→,y→), where ξ is the substitution that assigns {a mathematical formula}x→ to {a mathematical formula}o→ and {a mathematical formula}y→ to {a mathematical formula}o→1, and we write {a mathematical formula}I⊭q[o→] otherwise. A union of conjunctive queries ({a mathematical formula}UCQ) over a signature Σ is a first-order formula of the form {a mathematical formula}q(x→)=⋁i=1nqi(x→), where each {a mathematical formula}qi, for {a mathematical formula}i∈{1,…,n}, is a {a mathematical formula}CQ over Σ. Then, {a mathematical formula}I⊨q[o→] if {a mathematical formula}I⊨qi[o→] for some {a mathematical formula}i∈{1,…,n}, and {a mathematical formula}I⊭q[o→] otherwise. If {a mathematical formula}k=0, then q is said to be a Boolean query, and we simply write {a mathematical formula}I⊨q if {a mathematical formula}I⊨q[()], and {a mathematical formula}I⊭q otherwise.</paragraph><paragraph>Given a query q of arity k and a KB {a mathematical formula}K defined over a signature Σ, the certain answers to q over {a mathematical formula}K are defined as:{a mathematical formula} Each tuple {a mathematical formula}a→=(a1,…,ak) in {a mathematical formula}cert(q,K) is called a certain answer for q over {a mathematical formula}K, and we write {a mathematical formula}K⊨q[a→]. Notice that, by definition, the certain answers to a query do not contain labeled nulls. If q is a Boolean query, then {a mathematical formula}cert(q,K)={()} (representing the value true) if {a mathematical formula}I⊨q for every {a mathematical formula}I∈Mod(K), and {a mathematical formula}cert(q,K)=∅ (representing the value false) otherwise. Observe also that, if {a mathematical formula}K is unsatisfiable, then {a mathematical formula}cert(q,K) is trivially the set of all possible tuples {a mathematical formula}(a1,…,ak) of constants in {a mathematical formula}Na, which we denote by {a mathematical formula}AllTup(q).</paragraph><paragraph label="Lemma 3.5">It is important to notice that the notion of certain answers can be characterized through the notion of canonical model. The following lemma establishes that the canonical model can be used for checking certain answers to {a mathematical formula}UCQs. Let{a mathematical formula}Kbe a consistent KB,{a mathematical formula}q(x→)a{a mathematical formula}UCQ, and{a mathematical formula}a→a tuple of constants. Then{a mathematical formula}K⊨q[a→]iff{a mathematical formula}uni(K)⊨q[a→].</paragraph><paragraph label="Proof">Let {a mathematical formula}a→=(a1,…,ak) for {a mathematical formula}ai∈Na, and {a mathematical formula}q(x→)=∃y1⋯∃ym.φ(x1,…,xk,y1,…,ym).(⇒) Assume {a mathematical formula}K⊨q[a→]. Then for each model {a mathematical formula}I of {a mathematical formula}K, we have that {a mathematical formula}I⊨q[a1I,…,akI]. Since {a mathematical formula}uni(K) is a model of {a mathematical formula}K, and {a mathematical formula}aiuni(K)=ai, for each constant {a mathematical formula}ai, it follows that {a mathematical formula}uni(K)⊨q[a→].(⇐) Assume {a mathematical formula}uni(K)⊨q[a→]. Then there exist {a mathematical formula}σ1,…,σm∈Δuni(K) such that {a mathematical formula}uni(K)⊨φ[a1,…,ak,σ1,…,σm]. Let {a mathematical formula}I be a model of {a mathematical formula}K. By Theorem 3.4, there exists a homomorphism h from {a mathematical formula}uni(K) to {a mathematical formula}I. Then it is easy to see that {a mathematical formula}I⊨φ[a1I,…,akI,h(σ1),…,h(σm)], hence {a mathematical formula}I⊨q[a1I,…,akI]. Thus, as {a mathematical formula}I is an arbitrary model of {a mathematical formula}K, we conclude that {a mathematical formula}K⊨q[a→].  □</paragraph></section><section label="3.4"><section-title>Σ-query entailment</section-title><paragraph>We refine the notion of Σ-query entailment studied in [55]. Let {a mathematical formula}K1 and {a mathematical formula}K2 be KBs, and Σ a signature. Then, {a mathematical formula}K1 Σ-query entails{a mathematical formula}K2 if for each {a mathematical formula}UCQq over Σ, {a mathematical formula}cert(q,K2)⊆cert(q,K1). Moreover, {a mathematical formula}K1 and {a mathematical formula}K2 are Σ-query inseparable, if they Σ-query entail each other. Note that we define Σ-query entailment and inseparability with respect to {a mathematical formula}UCQs, whereas in [55] these notions are defined with respect to {a mathematical formula}CQs. Since DL-Lite{a mathematical formula}R enjoys the canonical model property, it is easy to see that our definitions and the previous ones coincide.</paragraph><paragraph label="Example 3.6">It is well known that homomorphisms preserve answers to {a mathematical formula}UCQs [57], in particular, if {a mathematical formula}uni(K2) is Σ-homomorphically embeddable into {a mathematical formula}uni(K1), then {a mathematical formula}K1 Σ-entails {a mathematical formula}K2. However, for a characterization of Σ-query entailment one has to consider finite Σ-homomorphisms, as illustrated in the following example. [55]Let {a mathematical formula}K1=〈O1,A〉 and {a mathematical formula}K2=〈O2,A〉, where {a mathematical formula}A={A(a)}, {a mathematical formula}O1={A⊑∃R,∃R−⊑∃R} and {a mathematical formula}O2={A⊑∃S,∃S−⊑∃R−,∃R⊑∃R−}, and {a mathematical formula}Σ={A,R}. The canonical models of {a mathematical formula}K1 and {a mathematical formula}K2 are as follows:{a mathematical formula} In this case there is no Σ-homomorphism from {a mathematical formula}uni(K2) to {a mathematical formula}uni(K1), although {a mathematical formula}K1 Σ-query entails {a mathematical formula}K2.  □</paragraph><paragraph>Given an interpretation {a mathematical formula}I over a signature Σ, we say that {a mathematical formula}I′ is a finite sub-interpretation of{a mathematical formula}I (induced by a finite set D) if: (1){a mathematical formula}ΔI′=ΔI∩D; (2){a mathematical formula}AI′=AI∩D for every concept name {a mathematical formula}A∈Σ; (3){a mathematical formula}PI′=PI∩(D×D) for every role name {a mathematical formula}P∈Σ; and (4){a mathematical formula}aI′=aI for every {a mathematical formula}a∈Na such that {a mathematical formula}aI is defined and {a mathematical formula}aI∈ΔI′. We say that {a mathematical formula}I is finitely Σ-homomorphically embeddable into an interpretation {a mathematical formula}J if there exists a Σ-homomorphism from every finite sub-interpretation {a mathematical formula}I′ of {a mathematical formula}I to {a mathematical formula}J.</paragraph><paragraph label="Lemma 3.7">[55]Let{a mathematical formula}K1and{a mathematical formula}K2be consistent KBs, and Σ a signature. Then{a mathematical formula}K1 Σ-query entails{a mathematical formula}K2iff{a mathematical formula}uni(K2)is finitely Σ-homomorphically embeddable into{a mathematical formula}uni(K1).</paragraph><paragraph>By using this lemma, we can confirm that KB {a mathematical formula}K1 Σ-query entails KB {a mathematical formula}K2 in Example 3.6, as {a mathematical formula}uni(K2) is finitely Σ-homomorphically embeddable into {a mathematical formula}uni(K1).</paragraph></section></section><section label="4"><section-title>Knowledge base exchange</section-title><paragraph>The goal of this section is to generalize the setting proposed in [25] to consider DL-Lite{a mathematical formula}R, and to formalize the problems studied in this paper. The former is done in Section 4.1, while the latter is done in Section 4.2.</paragraph><section label="4.1"><section-title>A knowledge base exchange framework</section-title><paragraph>We start by defining the fundamental notion of mapping, which plays a key role in both data and knowledge exchange. Assume that Σ, Γ are signatures with no concepts or roles in common. An inclusion {a mathematical formula}Es⊑Et is said to be from Σ to Γ, if {a mathematical formula}Es is a concept or a role over Σ and {a mathematical formula}Et is a concept or a role over Γ. Then we have that</paragraph><paragraph label="Definition 4.1">[16], [58]A mapping is a tuple {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}B is a TBox consisting of inclusions from Σ to Γ.</paragraph><paragraph label="Example 4.2">Consider the ontology {a mathematical formula}PhotoCamera defined in Example 3.1, and a second ontology DigitalPhoto talking about digital photo camera. This new ontology uses the following vocabulary {a mathematical formula}Γcam:{a mathematical formula} Then we can specify the relation between the terms in the different ontologies by means of a mapping. Formally, let {a mathematical formula}Mcam=(Σcam,Γcam,Bcam), where {a mathematical formula}Σcam is the vocabulary from Example 3.1, and {a mathematical formula}Bcam consists of the following inclusions:{a mathematical formula} Thus, {a mathematical formula}Mcam relates the concepts and roles of the PhotoCamera ontology with the concepts and roles of the DigitalPhoto ontology.  □</paragraph><paragraph>The semantics of such a mapping was initially defined in [58]. Here we adapt it to the setting without the unique name assumption (and, more generally, without the standard name assumption). More specifically, given interpretations {a mathematical formula}I, {a mathematical formula}J of Σ and Γ, respectively, the pair {a mathematical formula}(I,J)satisfies TBox {a mathematical formula}B, denoted by {a mathematical formula}(I,J)⊨B, if</paragraph><list><list-item label="–">for every {a mathematical formula}a∈Na such that {a mathematical formula}aI or {a mathematical formula}aJ is defined, it holds that both {a mathematical formula}aI and {a mathematical formula}aJ are defined and {a mathematical formula}aI=aJ,</list-item><list-item label="–">for every concept inclusion {a mathematical formula}B⊑C∈B, it holds that {a mathematical formula}BI⊆CJ, and</list-item><list-item label="–">for every role inclusion {a mathematical formula}R⊑Q∈B, it holds that {a mathematical formula}RI⊆QJ.</list-item></list><paragraph> Notice that the connection between the information in {a mathematical formula}I and {a mathematical formula}J is established through the constants that move from source to target according to the mapping. For this reason, we require constants to be interpreted in the same way in {a mathematical formula}I and {a mathematical formula}J, i.e., they preserve their meaning when they are transferred. Besides, notice that this is the only restriction imposed on the domains of {a mathematical formula}I and {a mathematical formula}J (in particular, we require neither that {a mathematical formula}ΔI=ΔJ nor that {a mathematical formula}ΔI⊆ΔJ). Finally, {a mathematical formula}SatM(I) is defined as the set of interpretations {a mathematical formula}J of Γ such that {a mathematical formula}(I,J)⊨B, and given a set {a mathematical formula}X of interpretations of Σ, {a mathematical formula}SatM(X) is defined as {a mathematical formula}⋃I∈XSatM(I).</paragraph><paragraph label="Definition 4.3">The main problem studied in the knowledge exchange framework is the problem of translating a KB according to a mapping. We formalize this problem through three different notions of translation introduced below (see Section 5 for a comparison of these different notions of solution). We start by introducing the concepts of solution and universal solution. More precisely, Given a mapping {a mathematical formula}M=(Σ,Γ,B) and KBs {a mathematical formula}Ks, {a mathematical formula}Kt over Σ and Γ, respectively, {a mathematical formula}Kt is a solution (resp., universal solution) for {a mathematical formula}Ks under {a mathematical formula}M if {a mathematical formula}Mod(Kt)⊆SatM(Mod(Ks)) (resp., {a mathematical formula}Mod(Kt)=SatM(Mod(Ks))).</paragraph><paragraph label="Example 4.4">Thus, {a mathematical formula}Kt is a solution for {a mathematical formula}Ks under {a mathematical formula}M if every interpretation of {a mathematical formula}Kt is a valid translation of an interpretation of {a mathematical formula}Ks according to {a mathematical formula}M. Although natural, this is a mild restriction, which gives rise to the stronger notion of universal solution. More precisely, if {a mathematical formula}Kt is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M, then {a mathematical formula}Kt is designed to exactly represent the space of interpretations obtained by translating the interpretations of {a mathematical formula}Ks under {a mathematical formula}M. It should be noticed that this definition of universal solution can be restated in terms of the notion of model inseparability presented in Section 2. More precisely, we have that {a mathematical formula}Kt is a universal solution for {a mathematical formula}Ks=〈S,As〉 under {a mathematical formula}M=(Σ,Γ,B) if and only if {a mathematical formula}Kt is Γ-model inseparable with {a mathematical formula}〈S∪B,As〉. Let {a mathematical formula}Kcam=〈Ocam,Acam〉 where {a mathematical formula}Ocam and {a mathematical formula}Acam are respectively the TBox and the ABox of the {a mathematical formula}PhotoCamera KB from Example 3.1, and {a mathematical formula}Mcam the mapping from Example 4.2. Then {a mathematical formula}Kcam′=〈Ocam′,Acam′〉 is a universal solution for {a mathematical formula}Kcam under {a mathematical formula}Mcam, where {a mathematical formula}Ocam′=∅ and {a mathematical formula}Acam′ contains the following assertions:{a mathematical formula} Here m and l are distinct labeled nulls. For more examples of universal solutions see Section 5.1.  □</paragraph><paragraph label="Example 4.6">A second class of translations is obtained by observing that solutions and universal solutions are too restrictive for some applications, in particular when one only needs a translation storing enough information to properly answer some queries. For the particular case of {a mathematical formula}UCQ, this gives rise to the notions of {a mathematical formula}UCQ-solution and universal {a mathematical formula}UCQ-solution. Given a mapping {a mathematical formula}M=(Σ,Γ,B), a KB {a mathematical formula}Ks=〈S,As〉 over Σ and a KB {a mathematical formula}Kt over Γ, {a mathematical formula}Kt is a {a mathematical formula}UCQ-solution for {a mathematical formula}Ks under {a mathematical formula}M if {a mathematical formula}Kt Γ-query entails {a mathematical formula}〈S∪B,As〉. Moreover, {a mathematical formula}Kt is a universal{a mathematical formula}UCQ-solution for {a mathematical formula}Ks under {a mathematical formula}M if {a mathematical formula}Kt and {a mathematical formula}〈S∪B,As〉 are Γ-query inseparable.Consider {a mathematical formula}Kcam and {a mathematical formula}Mcam from Example 4.4. Then {a mathematical formula}Kcam″=〈Ocam″,Acam″〉 is a universal {a mathematical formula}UCQ-solution for {a mathematical formula}Kcam under {a mathematical formula}Mcam, where {a mathematical formula}Acam″={ReflexCamera(canon5d)} and {a mathematical formula}Ocam″ is the following TBox:{a mathematical formula} This can be straightforwardly verified using Lemma 3.7 and the fact that the canonical models of {a mathematical formula}〈Ocam∪Bcam,Acam〉 and {a mathematical formula}Kcam″ are finite. Note that, the universal solution {a mathematical formula}Kcam′ of Example 4.4 is also a universal {a mathematical formula}UCQ-solution. This holds in general, as shown in Section 5.2.  □</paragraph><paragraph label="Definition 4.7">Finally, a last class of solutions is obtained by considering that users want to translate as much of the knowledge in a TBox as possible, as a lot of effort is put in practice when constructing a TBox. This observation gives rise to the notion of {a mathematical formula}UCQ-representation, which formalizes the idea of translating a source TBox according to a mapping. We present an alternative to the formalization of this notion given in [58], which is appropriate for our setting where disjointness axioms are considered.{sup:1}Assume that {a mathematical formula}M=(Σ,Γ,B) and {a mathematical formula}S, {a mathematical formula}T are TBoxes over Σ and Γ, respectively. Then {a mathematical formula}T is a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M if for every ABox {a mathematical formula}As over Σ that is consistent with {a mathematical formula}S, it holds that {a mathematical formula}〈S∪B,As〉 and {a mathematical formula}〈T∪B,As〉 are Γ-query inseparable.</paragraph><paragraph label="Example 4.8">Notice that {a mathematical formula}As is required to be consistent with {a mathematical formula}S in this definition, which avoids the trivialization of the notion of certain answers because of the use of an inconsistent knowledge base (if {a mathematical formula}〈S,As〉 is inconsistent, {a mathematical formula}cert(q,〈S∪B,As〉) contains every possible tuple of constants). Below we provide a simple example of a {a mathematical formula}UCQ-representation in the digital camera scenario. Consider {a mathematical formula}Mcam=(Σcam,Γcam,Bcam) from Example 4.2 and {a mathematical formula}Scam={DSLRCamera⊑DigitalCamera}. Then {a mathematical formula}Tcam={ReflexCamera⊑DigitalPhotoCamera} is a {a mathematical formula}UCQ-representation of {a mathematical formula}Scam under {a mathematical formula}Mcam.  □</paragraph><paragraph>We would like to emphasize why we are interested in {a mathematical formula}UCQ-representations. First of all, {a mathematical formula}UCQ-representations are designed to preserve in the target the implicit information from the source, which conforms to the idea of knowledge base exchange as opposed to plain data exchange. Second, {a mathematical formula}UCQ-representations allow to minimize the amount of extensional information that has to be transferred from the source (which can be very large in size). Third, if there exists a {a mathematical formula}UCQ-representation {a mathematical formula}T of a source TBox {a mathematical formula}S under a mapping {a mathematical formula}M, then we obtain a straightforward algorithm to construct a universal {a mathematical formula}UCQ-solution for a given source KB {a mathematical formula}〈S,As〉: take a target ABox obtained by “translating” the source ABox {a mathematical formula}As with respect to {a mathematical formula}M and denote it by {a mathematical formula}M(As),{sup:2} then {a mathematical formula}〈T,M(As)〉 is a universal {a mathematical formula}UCQ-solution for {a mathematical formula}〈S,As〉 under {a mathematical formula}M (see Fig. 2). Finally, notice that {a mathematical formula}UCQ-representations do not depend on the actual data, so if in the previous case ABox {a mathematical formula}As is updated, then it is sufficient to update {a mathematical formula}M(As) in order to obtain a universal {a mathematical formula}UCQ-solution for {a mathematical formula}〈S,As〉 under {a mathematical formula}M.</paragraph><paragraph>A natural question at this point is why in knowledge base exchange the source KB is not mapped as it is, thus simplifying the problem of computing solutions (under any of the notions given before). Notice that this can be easily done by including some additional concept and role symbols in the target signature, which represent the corresponding concepts and roles in the source signature. We would like to conclude this section by providing evidence why this is not desirable, or it could even be impossible, in some scenarios. First, the target signature might be given and not under control of the user, therefore it might not be extensible. Second, there might be privacy issues that prevent the use of all the information in a source KB, so only the information about some concepts and roles have to be displayed. This problem can be viewed as a knowledge exchange problem where the target signature stores the symbols to be displayed, and which cannot include some new concepts or roles. Third, a source signature might be very large, hence the user would like to switch to a smaller target signature. In this case, it is not desirable to add new symbols that can make the target signature to grow. Finally, an instance of data exchange could be part of the more general problem of schema evolution [31], [32], where one needs to consider a sequence of several instances of data exchange. In this context, allowing for keeping existing symbols might result in an unacceptable (and undesired) growth of the signature.</paragraph></section><section label="4.2"><section-title>On the problem of computing solutions</section-title><paragraph>In this section, we present the space of reasoning problems that naturally arise in the framework introduced in this paper. The problem space has three dimensions and can be depicted as in Fig. 3. First, one is interested in the task of computing a translation of a KB or a TBox according to a mapping, which is arguably the most important problem in knowledge exchange [25], [58], as well as in data exchange [16], [59]. Thus, the first dimension in Fig. 3 defines the type of translation, which as mentioned in the previous section can be either: (1) a universal solution, or (2) a universal {a mathematical formula}UCQ-solution, or (3) a {a mathematical formula}UCQ-representation. Second, as it will become clear in Section 5, in order to be able to compute a translation, in some cases it is necessary to use extended ABoxes. Therefore, the second dimension is along the type of ABoxes allowed to be used in translations: (1) simple ABoxes, or (2) extended ABoxes. Finally, to study the computational complexity of knowledge exchange, we consider two classical decision problems: the membership problem and the non-emptiness problem, which constitute the third dimension.</paragraph><paragraph>As usual, the membership problem is concerned with deciding whether a particular instance (a target KB or target TBox, in our case) belongs to a class of instances (all solutions for a given source KB or TBox under a given mapping, in our case). Since we consider three classes of translations, we need to deal with three membership problems. The membership problem for universal solutions (resp. universal {a mathematical formula}UCQ-solutions) has as input a mapping {a mathematical formula}M=(Σ,Γ,B) and KBs {a mathematical formula}Ks, {a mathematical formula}Kt over Σ and Γ, respectively. Then the question to answer is whether {a mathematical formula}Kt is a universal solution (resp. universal {a mathematical formula}UCQ-solution) for {a mathematical formula}Ks under {a mathematical formula}M. Moreover, the membership problem for {a mathematical formula}UCQ-representations has as input a mapping {a mathematical formula}M=(Σ,Γ,B) and TBoxes {a mathematical formula}S, {a mathematical formula}T over Σ and Γ, respectively, and the question to answer is whether {a mathematical formula}T is a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M.</paragraph><paragraph>The non-emptiness problem corresponds to the existential version of the membership problem, and it is concerned with deciding whether a class has at least one instance (is there some solution for a given source KB or TBox under a given mapping?). Again, we consider three non-emptiness problems, one for each class of translation. Formally, the non-emptiness problem for universal solutions (resp. universal {a mathematical formula}UCQ-solutions) has as input a mapping {a mathematical formula}M=(Σ,Γ,B) and a KB {a mathematical formula}Ks over Σ. Then the question to answer is whether there exists a universal solution (resp. universal {a mathematical formula}UCQ-solution) for {a mathematical formula}Ks under {a mathematical formula}M. Moreover, the non-emptiness problem for {a mathematical formula}UCQ-representations has as input a mapping {a mathematical formula}M=(Σ,Γ,B) and a TBox {a mathematical formula}S over Σ, and the question to answer is whether there exists a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M. In the case it exists, we say that {a mathematical formula}S is {a mathematical formula}UCQ-representable under {a mathematical formula}M, otherwise, {a mathematical formula}S is not {a mathematical formula}UCQ-representable under this mapping.</paragraph><paragraph>Observe that {a mathematical formula}UCQ-representations do not depend on target ABoxes, therefore, in total we have defined 10 different reasoning problems: 4 for universal solutions, 4 for universal {a mathematical formula}UCQ-solutions, and 2 for {a mathematical formula}UCQ-representations. We investigate in Sections 6 and 7 the computational complexity of the reasoning problems for universal solutions and {a mathematical formula}UCQ-representations, respectively. As for universal {a mathematical formula}UCQ-solutions, the main results, summarized in Table 1, have been established in [30]. We prove here only, in Section 6.4, that the non-emptiness problem for universal {a mathematical formula}UCQ-solutions for extended ABoxes is PSpace-hard. A lower bound for simple ABoxes has yet not been established.</paragraph></section></section><section label="5"><section-title>The shape of different notions of solutions</section-title><paragraph>The goal of this section is to provide examples and some facts about universal solutions, universal {a mathematical formula}UCQ-solutions and {a mathematical formula}UCQ-representations, which can help the reader to understand their advantages and limitations.</paragraph><section label="5.1"><section-title>Universal solutions</section-title><paragraph label="Example 5.1">We start by giving some simple examples of universal solutions. Let {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,B}, {a mathematical formula}Γ={A′,B′}, and {a mathematical formula}B={A⊑A′, {a mathematical formula}B⊑B′}. If {a mathematical formula}S={} and {a mathematical formula}As={A(a),B(a)}, then the KB {a mathematical formula}Kt=〈T,At〉, where {a mathematical formula}T=∅ and {a mathematical formula}At={A′(a),B′(a)} is a universal solution for {a mathematical formula}Ks=〈S,As〉 under {a mathematical formula}M. Moreover, if {a mathematical formula}S={A⊑B} and {a mathematical formula}As={A(a)}, then {a mathematical formula}Kt is again a universal solution for {a mathematical formula}Ks=〈S,As〉 under {a mathematical formula}M.  □</paragraph><paragraph>Universal solutions are the preferred solutions to materialize when exchanging relational databases [16], [60], [23], [17], even in the case of incomplete information [25]. However, universal solutions were not thought to take into account source data including implicit knowledge (in the form of TBoxes), which is demonstrated in the following example.</paragraph><paragraph label="Example 5.2">Let {a mathematical formula}M=(Σ,Γ,B) be as in Example 5.1, and assume that {a mathematical formula}Ks=〈S,As〉, where {a mathematical formula}S={A⊑B} and {a mathematical formula}As={A(a)}. Furthermore, suppose that {a mathematical formula}Kt=〈T,At〉, where {a mathematical formula}T={A′⊑B′} and {a mathematical formula}At={A′(a)}. Then we have that {a mathematical formula}Kt is a solution for {a mathematical formula}Ks under {a mathematical formula}M. However, {a mathematical formula}Kt is not a universal solution for {a mathematical formula}Ks under {a mathematical formula}M. To see why this is the case, consider an interpretation {a mathematical formula}I of Σ such that {a mathematical formula}aI=1, {a mathematical formula}AI={1} and {a mathematical formula}BI={1}, and an interpretation {a mathematical formula}J of Γ such that {a mathematical formula}aJ=1, {a mathematical formula}B′J={1} and {a mathematical formula}A′J={1,2}. Then we have that {a mathematical formula}I is a model of {a mathematical formula}Ks and {a mathematical formula}(I,J)⊨B, and thus {a mathematical formula}J∈SatM(Mod(Ks)). Thus, given that {a mathematical formula}J is not a model of {a mathematical formula}Kt (since it does not satisfy inclusion {a mathematical formula}A′⊑B′), we conclude that {a mathematical formula}Kt is not a universal solution for {a mathematical formula}Ks under {a mathematical formula}M as {a mathematical formula}SatM(Mod(Ks))≠Mod(Kt).  □</paragraph><paragraph label="Proposition 5.3">All the universal solutions shown in the previous examples have empty TBoxes. In the following proposition, we prove that this is the case in general, which shows that universal solutions are not appropriate to represent implicit knowledge. We say that a TBox {a mathematical formula}O over a signature Σ is trivial if for every interpretation {a mathematical formula}I of Σ, it holds that {a mathematical formula}I⊨O (or, in other words, if {a mathematical formula}O is equivalent to the empty set of formulas). Let{a mathematical formula}M=(Σ,Γ,B)be a mapping,{a mathematical formula}Ks=〈S,As〉a KB over Σ, and{a mathematical formula}Kt=〈T,At〉a KB over Γ. If{a mathematical formula}〈S∪B,As〉is consistent and{a mathematical formula}Ktis a universal solution for{a mathematical formula}Ksunder{a mathematical formula}M, then{a mathematical formula}Tis a trivial TBox.</paragraph><paragraph>The proof of Proposition 5.3 can be found in the appendix. Notice that this proposition shows that universal solutions can be viewed as target ABoxes with empty TBoxes. We denote by {a mathematical formula}A a KB of the form {a mathematical formula}〈∅,A〉.</paragraph><paragraph label="Example 5.4">We continue our investigation by showing that extended ABoxes are necessary to guarantee the existence of universal solutions in certain cases. Let {a mathematical formula}M=({A,R},{B},{∃R−⊑B}) and {a mathematical formula}Ks=〈S,As〉, where {a mathematical formula}S={A⊑∃R} and {a mathematical formula}As={A(a)}. A natural way to construct a universal solution for {a mathematical formula}Ks under {a mathematical formula}M is to “populate” the target with all the facts implied by {a mathematical formula}uni(S∪B,As) (as it is usually done in data exchange [16], [17], [20]). In this case, we have that {a mathematical formula}Auni(S∪B,As)={a}, {a mathematical formula}Runi(S∪B,As)={(a,aw[R])} and {a mathematical formula}Buni(S∪B,As)={aw[R]}, where {a mathematical formula}aw[R] is an object different from any of the constants in {a mathematical formula}Na, which is used to represent a null value. Thus, the ABox {a mathematical formula}At={B(n)}, where n is a labeled null, is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M if nulls are allowed, which can be readily checked using the definition of universal solution. Nevertheless, a universal solution with simple ABoxes does not exist in this case, as substituting n by any constant is too restrictive, ruining universality.  □</paragraph><paragraph label="Example 5.5">A natural question at this point is whether the use of null values guarantees the existence of universal solutions. Unfortunately, the following example shows that this is not the case. In fact, this example shows two different situations in which universal solutions do not exist; in the first case this is due to the impossibility of representing an infinite number of facts in a finite ABox, while in the second case this is due to the use of disjointness axioms and the absence of the UNA (which has to be given up to comply with the OWL 2 QL standard). Let {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,R}, {a mathematical formula}Γ={Q}, and {a mathematical formula}B={R⊑Q}. Furthermore, assume that {a mathematical formula}Ks=〈S,As〉, where {a mathematical formula}As={A(a)} and {a mathematical formula}S={A⊑∃R,∃R−⊑∃R}. In this case, {a mathematical formula}uni(S∪B,As) is infinite:{a mathematical formula} so in principle one would need an infinite number of labeled nulls to construct a universal solution. It can be easily proved that if {a mathematical formula}At is an (extended) ABox over Γ, then {a mathematical formula}At cannot be a universal solution for {a mathematical formula}Ks under {a mathematical formula}M.  □</paragraph><paragraph label="Example 5.6">Now let {a mathematical formula}M=(Σ,Γ,B) be defined as in Example 5.1. Moreover, assume that {a mathematical formula}Ks=〈S,As〉, where {a mathematical formula}S={A⊑¬B} and {a mathematical formula}As={A(a),B(b)}, and assume that {a mathematical formula}At={A′(a),B′(b)}. As in Example 5.1, it is possible to show that {a mathematical formula}At is a universal solution for KB {a mathematical formula}〈∅,As〉 under {a mathematical formula}M. However, with the addition of the disjointness axiom {a mathematical formula}A⊑¬B, KB {a mathematical formula}At is no longer a universal solution (not even a solution) for {a mathematical formula}Ks under {a mathematical formula}M. The reason for this is the lack of the UNA on the one hand, and the presence of the disjointness axiom that forces a and b to be interpreted differently in the source, on the other hand. More precisely, for a model {a mathematical formula}J of {a mathematical formula}At such that {a mathematical formula}aJ=bJ, {a mathematical formula}A′J=B′J={aJ}, there is no model {a mathematical formula}I of {a mathematical formula}Ks such that {a mathematical formula}(I,J)⊨B, as this forces {a mathematical formula}aI=aJ and {a mathematical formula}bI=bJ, which is not possible since {a mathematical formula}aI≠bI. It can be straightforwardly proved that in this case there is no universal solution for {a mathematical formula}Ks under {a mathematical formula}M. □</paragraph><paragraph label="Proposition 5.7">From the previous examples, we conclude that: There exists a mapping{a mathematical formula}M=(Σ,Γ,B)and a KB{a mathematical formula}Ks=〈S,As〉over Σ such that there is no universal solution for{a mathematical formula}Ksunder{a mathematical formula}M(even if extended ABoxes are allowed).</paragraph><paragraph label="Example 5.8">Let {a mathematical formula}M=(Σ,Γ,B) be a mapping and {a mathematical formula}Ks=〈S,As〉 be a KB over Σ. As pointed out in the previous examples, a natural way to construct a universal solution for {a mathematical formula}Ks under {a mathematical formula}M is to populate the target with all the facts implied by {a mathematical formula}uni(S∪B,As). In Example 5.5, this procedure generates an infinite chain that cannot be represented in a finite ABox, which lead us to conclude that {a mathematical formula}Ks does not have a universal solution under {a mathematical formula}M in this case. Thus, the reader may wonder whether the finiteness of {a mathematical formula}uni(S∪B,As) is a necessary condition for the existence of universal solutions. The following example shows that this is not the case, and also gives evidence that checking whether a universal solution exists can be a computationally hard task (the complexity of this problem is studied in Section 6). Let {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,R,S}, {a mathematical formula}Γ={Q} and {a mathematical formula}B={S⊑Q,R⊑Q}. Moreover, let {a mathematical formula}Ks=〈S,As〉, where {a mathematical formula}S={A⊑∃R,∃R−⊑∃R} and {a mathematical formula}As={A(a),S(a,a)}. Notice that {a mathematical formula}uni(S∪B,As) as well as its projection over Γ are infinite. However, we can conclude that {a mathematical formula}At={Q(a,a)} is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M, as if the projection of {a mathematical formula}uni(S∪B,As) over Γ is transformed into an infinite ABox, then the resulting ABox has the same interpretations as {a mathematical formula}At. Or, in other words, it is possible to conclude that {a mathematical formula}At is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M as {a mathematical formula}uni(At) is contained in the projection of {a mathematical formula}uni(S∪B,As) over Γ, and there exists a homomorphism h from the projection of {a mathematical formula}uni(S∪B,As) over Γ to {a mathematical formula}uni(At):{a mathematical formula}  □</paragraph><paragraph label="Example 5.9">We conclude this section by demonstrating that universal solutions can be of exponential size, thus indicating that it can be difficult to deal with them in practice. We use {a mathematical formula}|M| and {a mathematical formula}|K| to denote the sizes (number of symbols) of a mapping {a mathematical formula}M and a KB {a mathematical formula}K, respectively. We show that there exists a family of mappings {a mathematical formula}{Mn=(Σn,Γn,Bn)}n≥1 and a family of KBs {a mathematical formula}{Ksn}n≥1 such that every {a mathematical formula}Ksn is defined over {a mathematical formula}Σn ({a mathematical formula}n≥1), and the smallest universal solution for {a mathematical formula}Ksn under {a mathematical formula}Mn is of size {a mathematical formula}2c(|Mn|+|Ksn|), for some constant {a mathematical formula}c&gt;0.Indeed, let {a mathematical formula}n≥1 be a natural number. Then mapping {a mathematical formula}Mn=(Σn,Γn,Bn) is defined as follows:{a mathematical formula} Moreover, knowledge base {a mathematical formula}Ksn is defined as {a mathematical formula}〈Sn,Asn〉, where {a mathematical formula}Sn is defined as:{a mathematical formula} and {a mathematical formula}Asn is defined as {a mathematical formula}{A(a)}.For every {a mathematical formula}n≥1, a universal solution {a mathematical formula}Atn for {a mathematical formula}Ksn under {a mathematical formula}Mn exists. This universal solution {a mathematical formula}Atn is an edge-labeled full binary tree of depth n (containing {a mathematical formula}2n leaves). Below we depict {a mathematical formula}At3, where {a mathematical formula}n1, …, {a mathematical formula}n14 are null values:{a mathematical formula} It can be proved that {a mathematical formula}|Atn|≥2c(|Mn|+|Ksn|) (for every {a mathematical formula}n≥1) for some {a mathematical formula}c&gt;0. Moreover, it is straightforward to prove that {a mathematical formula}Atn is the smallest universal solution for {a mathematical formula}Ksn under {a mathematical formula}Mn.  □</paragraph></section><section label="5.2">Universal {a mathematical formula}UCQ-solutions<paragraph label="Proposition 5.10">Our first observation is that the notion of universal {a mathematical formula}UCQ-solution is a relaxation of the notion of universal solution, as shown in the following proposition. Let{a mathematical formula}M=(Σ,Γ,B)be a mapping,{a mathematical formula}Ksa KB over Σ, and{a mathematical formula}Kta KB over Γ. If{a mathematical formula}Ktis a universal solution for{a mathematical formula}Ksunder{a mathematical formula}M, then{a mathematical formula}Ktis a universal{a mathematical formula}UCQ-solution for{a mathematical formula}Ksunder{a mathematical formula}M.</paragraph><paragraph label="Proof">Let {a mathematical formula}Kt be a universal solution for {a mathematical formula}Ks=〈S,As〉 under {a mathematical formula}M and q a {a mathematical formula}UCQ over Γ.First, we show {a mathematical formula}cert(q,〈S∪B,As〉)⊆cert(q,Kt). Assume {a mathematical formula}J is a model of {a mathematical formula}Kt. Since {a mathematical formula}Kt is a solution for {a mathematical formula}Ks under {a mathematical formula}M, there exists a model {a mathematical formula}I of {a mathematical formula}Ks such that {a mathematical formula}(I,J)⊨B. Let {a mathematical formula}H be the interpretation of {a mathematical formula}Σ∪Γ defined as the union of {a mathematical formula}I and {a mathematical formula}J, that is, {a mathematical formula}H=〈ΔH,⋅H〉, {a mathematical formula}ΔH=ΔI∪ΔJ, {a mathematical formula}aH=aI for each {a mathematical formula}a∈Na such that {a mathematical formula}aI is defined, {a mathematical formula}AH=AI for each concept name {a mathematical formula}A∈Σ, {a mathematical formula}AH=AJ for each concept name {a mathematical formula}A∈Γ, {a mathematical formula}PH=PI for each role name {a mathematical formula}P∈Σ, and {a mathematical formula}PH=PJ for each role name {a mathematical formula}P∈Γ. Then {a mathematical formula}H is a model of {a mathematical formula}〈S∪B,As〉. Suppose {a mathematical formula}a→∈cert(q,〈S∪B,As〉), it implies {a mathematical formula}H⊨q(a→). Next, as q is a target query, we have that {a mathematical formula}J⊨q(a→). Given that {a mathematical formula}J is an arbitrary model of {a mathematical formula}Kt, we conclude that {a mathematical formula}a→∈cert(q,Kt).Now, we show {a mathematical formula}cert(q,Kt)⊆cert(q,〈S∪B,As〉). Let {a mathematical formula}H be a model of {a mathematical formula}〈S∪B,As〉. From {a mathematical formula}H we can construct interpretations {a mathematical formula}I and {a mathematical formula}J of Σ and Γ, respectively, such that {a mathematical formula}H is the union of {a mathematical formula}I and {a mathematical formula}J. Then {a mathematical formula}I is a model of {a mathematical formula}Ks and {a mathematical formula}(I,J)⊨B. Since {a mathematical formula}Kt is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M, it follows that {a mathematical formula}J is a model of {a mathematical formula}Kt. Suppose {a mathematical formula}a→∈cert(q,Kt), it implies that {a mathematical formula}J⊨q(a→), and since q is a target query, and {a mathematical formula}J and {a mathematical formula}H agree on the constants and target symbols, it follows that {a mathematical formula}H⊨q(a→). Given that {a mathematical formula}H is an arbitrary model of {a mathematical formula}〈S∪B,As〉, we have that {a mathematical formula}a→∈cert(q,〈S∪B,As〉).  □</paragraph><paragraph label="Example 5.11">However, the converse direction of Proposition 5.10 does not hold, as shown in the following example. Let {a mathematical formula}Ks, {a mathematical formula}M and {a mathematical formula}Kt be as in Example 5.2. As pointed out in that example, {a mathematical formula}Kt is not a universal solution for {a mathematical formula}Ks under {a mathematical formula}M. However, it is easy to see that {a mathematical formula}Kt is a universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ks under {a mathematical formula}M.  □</paragraph><paragraph>Notably, the previous example also shows that, as opposed to universal solutions, universal {a mathematical formula}UCQ-solutions can have non-trivial TBoxes. As a consequence of this, we obtain that universal {a mathematical formula}UCQ-solutions can be smaller than universal solutions, as there is no need to materialize all facts (since they can be derived using the target TBoxes).</paragraph><paragraph>In the following example, we show that there are cases where universal solutions do not exist but universal {a mathematical formula}UCQ-solutions do. More precisely, we focus on the two cases provided in Example 5.5, and show that certain infinite chains that cannot be encoded in a universal solution can be finitely represented if the more relaxed notion of universal {a mathematical formula}UCQ-solution is considered, and also show that disjointness axioms in the source or the mapping do not have any impact on universal {a mathematical formula}UCQ-solutions.</paragraph><paragraph label="Example 5.12">Let {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,R}, {a mathematical formula}Γ={Q}, and {a mathematical formula}B={R⊑Q}. Furthermore, assume that {a mathematical formula}Ks=〈S,As〉, where {a mathematical formula}As={A(a)} and {a mathematical formula}S={A⊑∃R,∃R−⊑∃R}. It can be verified that KB {a mathematical formula}Kt=〈T,At〉, where {a mathematical formula}T={∃Q−⊑∃Q} and {a mathematical formula}At={∃Q(a)}, is a universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ks under {a mathematical formula}M, as the aforementioned infinite chain (cf. Example 5.5) can be finitely represented by combining {a mathematical formula}∃Q(a) with {a mathematical formula}∃Q−⊑∃Q.  □</paragraph><paragraph label="Example 5.13">Now let {a mathematical formula}M=(Σ,Γ,B) be defined as in Example 5.1. Moreover, assume that {a mathematical formula}Ks=〈S,As〉, where {a mathematical formula}S={A⊑¬B} and {a mathematical formula}As={A(a),B(b)}, and assume that {a mathematical formula}At={A′(a),B′(b)}. In Example 5.6, we show that {a mathematical formula}At is not a universal solution for KB {a mathematical formula}Ks under {a mathematical formula}M. On the other hand, it can be shown that {a mathematical formula}At is a universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ks under {a mathematical formula}M. In fact, this holds independently of whether the unique name assumption is employed.  □</paragraph><paragraph label="Proposition 5.14">From the previous examples, we conclude that: There exists a mapping{a mathematical formula}M=(Σ,Γ,B)and a KB{a mathematical formula}Ks=〈S,As〉over Σ such that, there is no universal solution for{a mathematical formula}Ksunder{a mathematical formula}M, but there exists a universal{a mathematical formula}UCQ-solution for{a mathematical formula}Ksunder{a mathematical formula}M.</paragraph><paragraph label="Example 5.15">Unfortunately, we show in the following example that there are cases where universal {a mathematical formula}UCQ-solutions do not exist. Let {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,R,S}, {a mathematical formula}Γ={Q} and {a mathematical formula}B={R⊑Q,S⊑Q}. Moreover, let {a mathematical formula}Ks=〈S,As〉, where {a mathematical formula}S={A⊑∃R,∃R−⊑∃R} and {a mathematical formula}As={A(a),S(a,b)}. Then the projection over Γ of the canonical model of {a mathematical formula}〈S∪B,As〉 can be depicted as follows:{a mathematical formula} In this case, the basic requirement for a KB {a mathematical formula}Kt=〈T,At〉 to be a universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ks under {a mathematical formula}M is that {a mathematical formula}At contain {a mathematical formula}{∃Q(a),Q(a,b)}. Thus, the approach in Example 5.12 to obtain a universal {a mathematical formula}UCQ-solution cannot work, as having the axiom {a mathematical formula}∃Q−⊑∃Q in {a mathematical formula}T would also make the query {a mathematical formula}∃x.Q(b,x) evaluate to true over {a mathematical formula}Kt, while it evaluates to false over {a mathematical formula}〈S∪B,As〉. In general, a universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ks under {a mathematical formula}M does not exists, as every KB {a mathematical formula}Kt=〈T,At〉 over Γ with {a mathematical formula}{∃Q(a),Q(a,b)}⊆At is not a universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ks under {a mathematical formula}M.  □</paragraph><paragraph label="Example 5.16">We conclude this section by showing that, as in the case of universal solutions, there are some cases where only universal {a mathematical formula}UCQ-solutions of exponential size exists. There exists a family of mappings {a mathematical formula}{Mn=(Σn,Γn,Bn)}n≥1 and a family of KBs {a mathematical formula}{Ksn}n≥1 such that every {a mathematical formula}Ksn is defined over {a mathematical formula}Σn ({a mathematical formula}n≥1), and the smallest universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ksn under {a mathematical formula}Mn is of size {a mathematical formula}2Ω(|Mn|+|Ksn|).Indeed, let {a mathematical formula}n≥1 be a natural number. Then mapping {a mathematical formula}Mn=(Σn,Γn,Bn) is defined as follows:{a mathematical formula} Moreover, knowledge base {a mathematical formula}Ksn is defined as {a mathematical formula}〈Sn,Asn〉, where {a mathematical formula}Sn is defined as:{a mathematical formula} and {a mathematical formula}Asn is defined as {a mathematical formula}{A(a),S0(b,c),S1(d,e)}, where {a mathematical formula}a,b,c,d,e are pairwise distinct constants.For every {a mathematical formula}n≥1, a universal solution {a mathematical formula}Atn for {a mathematical formula}Ksn under {a mathematical formula}Mn exists. This universal solution {a mathematical formula}Atn consists of membership assertions {a mathematical formula}Q0(b,c),Q1(d,e) together with an edge-labeled full binary tree of depth n (that contains {a mathematical formula}2n leaves). As in the case of Example 5.9, the root of this tree is a, the label of each edge is one of the role names {a mathematical formula}Qk ({a mathematical formula}k∈{0,1}), and the tree contains labeled nulls in every node except for the root.In this case, there exist no universal {a mathematical formula}UCQ-solution distinct from the universal solutions for {a mathematical formula}Ksn under {a mathematical formula}Mn, as each of the non-trivial axioms over {a mathematical formula}Γn={Q0,Q1} combined with {a mathematical formula}Atn would produce more certain answers to some queries than {a mathematical formula}Sn∪Bn combined with {a mathematical formula}Asn. Hence, as in the case of Example 5.9, we can conclude that {a mathematical formula}Atn is the smallest universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ksn under {a mathematical formula}Mn, from which our initial claim follows.  □</paragraph></section><section label="5.3">{a mathematical formula}UCQ-representations<paragraph>In this section, we discuss several simple examples explaining various cases when a {a mathematical formula}UCQ-representation exists and when it does not. We start by showing how the existence of UCQ-representations depends on the shape of the mappings. In the following example, we consider signatures consisting of concept names only, and TBoxes and mappings containing only positive axioms (i.e., no disjointness axioms).</paragraph><paragraph label="Example 5.17">Assume that {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,B,C} and {a mathematical formula}Γ={A′,B′,C′}. Moreover, let {a mathematical formula}S={A⊑B}. Consider the following cases for TBox {a mathematical formula}B.</paragraph><list><list-item label="(1)">If {a mathematical formula}B={B⊑B′}, then there exists no {a mathematical formula}UCQ-representation: take ABox {a mathematical formula}As={A(a)}, then query {a mathematical formula}q=B′(a) evaluates to true over {a mathematical formula}〈S∪B,As〉. However, for every target TBox {a mathematical formula}T, q evaluates to false over {a mathematical formula}〈T∪B,As〉.</list-item><list-item label="(2)">If {a mathematical formula}B={A⊑A′,B⊑B′}, then, as expected, {a mathematical formula}T={A′⊑B′} is a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M.</list-item><list-item label="(3)">If {a mathematical formula}B={A⊑A′,B⊑B′,A⊑C′}, then there exist several {a mathematical formula}UCQ-representations: {a mathematical formula}T={A′⊑B′}, {a mathematical formula}T′={C′⊑B′} and their combination.</list-item><list-item label="(4)">If {a mathematical formula}B={A⊑A′,B⊑B′,C⊑A′}, then there exists no {a mathematical formula}UCQ-representation: on one hand, if a target TBox contains {a mathematical formula}A′⊑B′, then for {a mathematical formula}As={C(c)}, {a mathematical formula}q=B′(c) evaluates to true over {a mathematical formula}〈T∪B,As〉 and to false over {a mathematical formula}〈S∪B,As〉. On the other hand, if a target TBox does not imply {a mathematical formula}A′⊑B′, then for {a mathematical formula}As={A(a)}, {a mathematical formula}q=B′(a) evaluates to true over {a mathematical formula}〈S∪B,As〉 and to false over {a mathematical formula}〈T∪B,As〉.</list-item><list-item label="(5)">If {a mathematical formula}B={A⊑A′,B⊑B′,A⊑C′,C⊑A′}, then {a mathematical formula}T′={C′⊑B′} is a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M. Note that {a mathematical formula}T={A′⊑B′} is not a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M for the same reason as explained in item (4) above. □</list-item></list><paragraph>Roughly speaking, the previous example illustrates that there exists no {a mathematical formula}UCQ-representation when the mapping is underspecified for the source concepts, as in (1) where A is not mapped to anything, or the mapping is overspecified for the target concepts, as in (4) where {a mathematical formula}A′ is the image of two source concepts. A “good” mapping is a mapping that is overspecified for the source concepts, as in (3) where A is mapped to two distinct target concepts and it is possible to construct two incomparable {a mathematical formula}UCQ-representations.</paragraph><paragraph label="Example 5.18">In the next example, we also consider roles in the signatures. This example shows that in some cases to ensure the existence of a {a mathematical formula}UCQ-representation, it is necessary to map a complete role, that is, it must appear in a role inclusion in the mapping. Assume that {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,R} and {a mathematical formula}Γ={A′,R′,B′}. Moreover, let {a mathematical formula}S={A⊑∃R}. Consider the following cases for TBox {a mathematical formula}B.</paragraph><list><list-item label="(1)">If {a mathematical formula}B={A⊑A′,∃R−⊑B′}, then there exists no UCQ-representation of {a mathematical formula}S under {a mathematical formula}M: take {a mathematical formula}As={A(a)} and a Boolean target query {a mathematical formula}q=∃x.(A′(a)∧B′(x)). Then q evaluates to true over {a mathematical formula}〈S∪B,As〉. Let us consider two target TBoxes {a mathematical formula}T such that q also evaluates to true over {a mathematical formula}〈T∪B,As〉:</list-item><list-item label="(2)">If {a mathematical formula}B={A⊑A′,∃R−⊑B′,R⊑R′}, then, as opposed to the previous case, {a mathematical formula}T={A′⊑∃R′,∃R′−⊑B′} is a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M. □</list-item></list><paragraph>Finally, we provide an example involving disjointness axioms in the mapping. Now we will, however, fix the mapping, and see how the shape of {a mathematical formula}UCQ-representations depends on the shape of the source TBox.</paragraph><paragraph label="Example 5.19">Assume {a mathematical formula}M=({A,B,C},{A′,B′},B), where {a mathematical formula}B={A⊑A′,B⊑B′,C⊑¬A′}. In the following, to better illustrate the structure of TBoxes and mappings, we use a graphical notation in which basic concepts are represented as nodes in a graph, and we use different types of directed edges: {an inline-figure} unlabeled edges to represent inclusion assertions between basic concepts, {an inline-figure} unlabeled “wavy” edges to represent assertions in the mapping. The barred arrows represent disjointness axioms.</paragraph><list><list-item label="(1)">{a mathematical formula}</list-item><list-item label="(2)">{a mathematical formula}</list-item><list-item label="(3)">{a mathematical formula}</list-item><list-item label="(4)">{a mathematical formula}  □</list-item></list><paragraph>Notice that in the previous example, the source TBox always contains exactly one inclusion of concept names, and depending on the concepts involved in it, this inclusion needs to be represented either by another inclusion of concept names, or by a disjointness axiom.</paragraph><paragraph>It is worth mentioning that in Section 7.1, Example 7.4 illustrates a case with disjointness axioms in the mapping where a {a mathematical formula}UCQ-representation does not exist.</paragraph></section><section label="5.4"><section-title>Comparison of solutions</section-title><paragraph>Out of the three notions of solution discussed in the previous sections, none of them could be considered as the preferred one in all possible scenarios. Each one of them has its strengths and its weaknesses, which can be summarized as follows.</paragraph><paragraph>Universal solutions are the preferred translations if one is interested in preserving logical correctness of the knowledge stored in the target KB, as these solutions are the most precise model-theoretical translations. However, they present several limitations from the practical point of view: (i) if one considers extended ABoxes, then universal solutions can be of exponential size; (ii) universal solutions are sensitive to presence of disjointness axioms: in some cases one disjointness axiom is enough to ruin existence of a universal solution (see Example 5.6); and (iii) universal solutions are sensitive to whether the UNA is employed or not: there are examples when a universal solution exists under the UNA, but it does not exist without the UNA. This is illustrated, e.g., in Example 5.13.{sup:3}</paragraph><paragraph>Universal {a mathematical formula}UCQ-solutions are the preferred translations if one considers a scenario where the main reasoning task is query answering over the target KB. In this scenario, universal {a mathematical formula}UCQ-solutions behave better than universal solutions, in particular they overcome the last two limitations of universal solutions mentioned in the previous paragraph. Besides, universal {a mathematical formula}UCQ-solutions are, in general, more succinct than universal solutions (although in the worst case can be of the same size).</paragraph><paragraph>Finally, in a scenario where data is changing, or it is not known, and where the main reasoning task is query answering, {a mathematical formula}UCQ-representations immediately stand out with their nice computational properties: it is shown in Section 7 that their existence is decidable in polynomial time, and their size is bound by a polynomial as they are TBoxes. Moreover, when a {a mathematical formula}UCQ-representation exists, one has a straightforward polynomial-time algorithm for computing universal {a mathematical formula}UCQ-solutions of polynomial size.</paragraph></section></section><section label="6"><section-title>Complexity results on existence and membership of universal solutions</section-title><paragraph>In this section, we study the membership and non-emptiness problems for universal solutions, in the cases where such solutions are required to be (simple) KBs, see Section 6.2, and where they are allowed to be extended KBs (i.e., nulls are allowed in the ABoxes), see Sections 6.3 and 6.4. We start by presenting in Section 6.1 a characterization of universal solutions in DL-Lite{a mathematical formula}R.</paragraph><section label="6.1"><section-title>Characterization of universal solutions</section-title><paragraph>We define the notion of Γ-safeness required to deal with disjointness axioms in the source KB and mapping. Assume that {a mathematical formula}M=(Σ,Γ,B) is a mapping and {a mathematical formula}Ks=〈S,As〉 is a KB over Σ. Let {a mathematical formula}K=〈S∪B,As〉 and let {a mathematical formula}uni(K) be the canonical model of {a mathematical formula}K. We say that an element {a mathematical formula}o∈Δuni(K) is Γ-invisible if{a mathematical formula} Then a basic concept B over Σ is said to be safe in{a mathematical formula}uni(K) if for every {a mathematical formula}o∈Buni(K), o is Γ-invisible. Intuitively, safeness for B means no constant “associated” with B and no target concept “associated” with B via {a mathematical formula}S and {a mathematical formula}B can be mentioned in the target; in Example 5.6 neither A nor B is safe in {a mathematical formula}uni(S∪B,As). Furthermore, a pair of basic concepts {a mathematical formula}(B,C) is said to be safe if B or C is safe. Intuitively, if a pair {a mathematical formula}(B,C) is not safe and {a mathematical formula}(B⊑¬C)∈S, then universal solutions cannot exist, as explained in Example 5.6. Similarly, we say that a basic role R over Σ is safe in{a mathematical formula}uni(K) if for every {a mathematical formula}(o,o′)∈Runi(K), either o or {a mathematical formula}o′ is Γ-invisible. Then, a pair of basic roles {a mathematical formula}(R,Q) is safe in{a mathematical formula}uni(K) if (1) R or Q is safe in {a mathematical formula}uni(K), and (2) for every {a mathematical formula}(o,o′)∈Runi(K) and {a mathematical formula}(o,o″)∈Quni(K), either {a mathematical formula}o′ or {a mathematical formula}o″ is Γ-invisible.</paragraph><paragraph label="Definition 6.1">{a mathematical formula}Ks=〈S,As〉 is Γ-safe with respect to{a mathematical formula}M=(Σ,Γ,B) if (cs)each pair of concepts {a mathematical formula}(B,C) is safe in {a mathematical formula}uni(S∪B,As), whenever {a mathematical formula}(B⊑¬C)∈S,(rs)each pair of roles {a mathematical formula}(R,Q) is safe in {a mathematical formula}uni(S∪B,As), whenever {a mathematical formula}(R⊑¬Q)∈S,(ce){a mathematical formula}Buni(S∪B,As)=∅, for each basic concept B such that {a mathematical formula}(B⊑¬B′)∈B,(re){a mathematical formula}Runi(S∪B,As)=∅, for each basic role R such that {a mathematical formula}(R⊑¬R′)∈B.</paragraph><paragraph>Note that if {a mathematical formula}Ks and {a mathematical formula}B do not contain disjointness axioms, {a mathematical formula}Ks is trivially Γ-safe with respect to {a mathematical formula}M.</paragraph><paragraph>We also define the canonical model of an extended ABox {a mathematical formula}A. Without loss of generality we may assume that {a mathematical formula}A contains only membership assertions with atomic concepts and roles. Denote by {a mathematical formula}null(A) the set of labeled nulls occurring in {a mathematical formula}A. Then the canonical model {a mathematical formula}uni(A) is defined as follows:{a mathematical formula}</paragraph><paragraph label="Lemma 6.2">Now, we are ready to provide a characterization of universal solutions, where we already take into account Proposition 5.3, and therefore consider only target ABoxes as universal solutions. The proof can be found in the appendix. An (extended) ABox{a mathematical formula}Atover Γ is a universal solution for a KB{a mathematical formula}Ks=〈S,As〉under a mapping{a mathematical formula}M=(Σ,Γ,B)iff the following conditions hold:(safe){a mathematical formula}Ksis Γ-safe with respect to{a mathematical formula}M;(hom){a mathematical formula}uni(At)is Γ-homomorphically equivalent to{a mathematical formula}uni(Ksb), for{a mathematical formula}Ksb=〈S∪B,As〉.</paragraph><paragraph label="Proof">Below we show how checking whether a concept is safe can be done in NLogSpace by using TBox reasoning in DL-Lite{a mathematical formula}R[61]. The proof can be extended to show that condition (safe) can also be checked in NLogSpace. Given a KB{a mathematical formula}K, it can be decided inNLogSpacewhether a basic concept B is safe in{a mathematical formula}uni(K).Checking whether B is safe in {a mathematical formula}uni(K), for {a mathematical formula}K=〈O,A〉, amounts to verifying whether (i){a mathematical formula}K⊭B(a) for each {a mathematical formula}a∈ind(A), and (ii) for each role R such that {a mathematical formula}w[R]∈Δgen(K) and {a mathematical formula}O⊨∃R−⊑B, it holds that {a mathematical formula}O⊭∃R−⊑B′ for each basic concept {a mathematical formula}B′ over Γ. Then, given a role R, we can verify whether {a mathematical formula}w[R]∈Δgen(K) in NLogSpace as follows. We use an algorithm for directed graph reachability, in a graph where the nodes are taken from the union of {a mathematical formula}ind(K) and {a mathematical formula}{w[S]|S is a role in K}, and the edges correspond to the generating relation {a mathematical formula}↝K (cf. Section 3.2, the definition of the canonical model). Starting from some {a mathematical formula}a∈ind(K), we “follow” a sequence of roles {a mathematical formula}R1,…,Rn=R (with {a mathematical formula}n≥1) in such a way that, when we “guess” {a mathematical formula}R1 we check whether {a mathematical formula}a↝Kw[R1], and when, while “remembering” {a mathematical formula}Ri, {a mathematical formula}i&gt;0, we “guess” {a mathematical formula}Ri+1, we check whether {a mathematical formula}w[Ri]↝Kw[Ri+1], and “forget” {a mathematical formula}Ri.  □</paragraph><paragraph label="Proof">As for condition (hom), we show how to check it in Section 6.2 for simple universal solutions, i.e., when we consider only simple target ABoxes, and in Section 6.3 for extended universal solutions, i.e., when we consider extended target ABoxes. Next, we provide a characterization of the cases when a universal solution exists. Let{a mathematical formula}M=(Σ,Γ,B)be a mapping, and{a mathematical formula}Ks=〈S,As〉a KB over Σ. Then, a universal solution with extended ABoxes for{a mathematical formula}Ksunder{a mathematical formula}Mexists iff the following conditions hold: (safe) and(core){a mathematical formula}uni(Ksb)is Γ-homomorphically embeddable into a finite subset of itself, for{a mathematical formula}Ksb=〈S∪B,As〉.(⇐) Let {a mathematical formula}At be an ABox over Γ such that {a mathematical formula}uni(At) is a finite subset of {a mathematical formula}uni(Ksb) and there exists a Γ-homomorphism h from {a mathematical formula}uni(Ksb) to {a mathematical formula}uni(At). Then, {a mathematical formula}uni(At) is trivially homomorphically embeddable into {a mathematical formula}uni(Ksb). Since, {a mathematical formula}Ks is Γ-safe with respect to {a mathematical formula}M, by Lemma 6.2, we obtain that {a mathematical formula}At is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M.(⇒) Let {a mathematical formula}At be a universal solution for {a mathematical formula}Ks under {a mathematical formula}M. By Lemma 6.2, it follows that {a mathematical formula}Ks is Γ-safe with respect to {a mathematical formula}M and that {a mathematical formula}uni(At) is Γ-homomorphically equivalent to {a mathematical formula}uni(Ksb). Let h be a homomorphism from {a mathematical formula}uni(At) to {a mathematical formula}uni(Ksb), and {a mathematical formula}h(uni(At)) the image of h. Then, {a mathematical formula}h(uni(At)) is a finite subset of {a mathematical formula}uni(Ksb), moreover it is homomorphically equivalent to {a mathematical formula}uni(At) and to {a mathematical formula}uni(Ksb). Therefore, {a mathematical formula}uni(Ksb) is Γ-homomorphically embeddable to a finite subset of itself.  □</paragraph><paragraph>It follows from the proof of Lemma 6.4 that the ABox {a mathematical formula}At corresponding to the finite subset {a mathematical formula}uni(At) of {a mathematical formula}uni(Ksb) in condition (core) is a universal solution. Hence, if we additionally require in condition (core) that the finite subset {a mathematical formula}uni(At) does not contain anonymous individuals, we obtain a characterization for universal solutions with simple ABoxes.</paragraph><paragraph>We introduce some additional notation needed in this section. For a KB {a mathematical formula}K and {a mathematical formula}a∈ind(K) define {a mathematical formula}gena(K) to be an interpretation obtained from {a mathematical formula}gen(K) by restricting it to the domain {a mathematical formula}{a}∪wit(K) and removing {a mathematical formula}(a,a) from the interpretation {a mathematical formula}Pgen(K) of every role name P. We denote by {a mathematical formula}unia(K) the unraveling of {a mathematical formula}gena(K). Observe that {a mathematical formula}Δunia(K)={aσ|aσ∈Δuni(K)} and that {a mathematical formula}unia(K) is a tree structure.</paragraph></section><section label="6.2"><section-title>Universal solutions with simple ABoxes</section-title><paragraph>In this section, we show that both the membership and the non-emptiness problems for universal solutions without null values are PTime-complete.</paragraph><paragraph>We start with tackling the membership problem: we are given a mapping {a mathematical formula}M=(Σ,Γ,B), a source KB {a mathematical formula}Ks=〈S,As〉, and a simple target ABox {a mathematical formula}At, and the question to decide is whether {a mathematical formula}At is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M. By Lemma 6.2, it is sufficient to check conditions (safe) and (hom). The former condition does not depend on {a mathematical formula}At and can be checked in polynomial time. As for the latter condition, denote by {a mathematical formula}Ksb the KB {a mathematical formula}〈S∪B,As〉. First, checking the existence of a Γ-homomorphism from {a mathematical formula}uni(At) to {a mathematical formula}uni(Ksb) for a simple ABox {a mathematical formula}At amounts to checking,{a mathematical formula} Second, a necessary condition for the existence of a Γ-homomorphism in the opposite direction, is that{a mathematical formula} Clearly, these two conditions can be checked in PTime. In addition, we need to check for each {a mathematical formula}a∈ind(As), whether the tree {a mathematical formula}unia(Ksb) can be Γ-homomorphically mapped to {a mathematical formula}uni(At). To do so, we make use of infinite reachability games on graphs [62]. Specifically, we show how this problem can be reduced to the problem of existence of a winning strategy for Duplicator in a reachability game, known to be solvable in polynomial time. For a short introduction to (reachability) games, we refer to Section B.6. Below we show how to construct the game {a mathematical formula}Gc for a KB {a mathematical formula}K, an ABox {a mathematical formula}A, a signature Σ, and {a mathematical formula}c∈ind(K).</paragraph><paragraph>The reachability game{a mathematical formula}Gc=(Ac,Fc) is formally defined as follows: {a mathematical formula}Ac=(S,D,T) is the game arena, where {a mathematical formula}S and {a mathematical formula}D are respectively the sets of Spoiler and Duplicator states defined next, and {a mathematical formula}T is the transition relation defined below; {a mathematical formula}Fc is the winning condition, i.e., the set of states that Spoiler wants to reach. Each state in {a mathematical formula}S has the form {a mathematical formula}(u↦a) with {a mathematical formula}tΣgen(K)(u)⊆tΣuni(A)(a), while each state in {a mathematical formula}D has the form {a mathematical formula}(a,u↝u′) with {a mathematical formula}u↝Ku′, where {a mathematical formula}u,u′∈Δgenc(K) and {a mathematical formula}a∈ind(A). Intuitively, the game proceeds as follows. Duplicator tries to construct a Σ-homomorphism from the tree {a mathematical formula}unic(K) to {a mathematical formula}uni(A), and Spoiler attempts to fail him by finding a path in {a mathematical formula}unic(K) that does not have a homomorphic image in {a mathematical formula}uni(A), given the partial homomorphism constructed so far. Spoiler starts in {a mathematical formula}(u0↦a0) for {a mathematical formula}u0=a0=c if {a mathematical formula}(c↦c)∈S, which corresponds to mapping c to c, and at each of his turns chooses a successor {a mathematical formula}ui+1 of {a mathematical formula}ui in {a mathematical formula}gena(K): the “challenge” represented by the state {a mathematical formula}(ai,ui↝ui+1). Then Duplicator tries to find a constant {a mathematical formula}ai+1∈ind(A) that could be the image of the “challenged” element {a mathematical formula}u0⋯ui+1 of {a mathematical formula}unic(K), i.e., he chooses a state {a mathematical formula}(ui+1↦ai+1) such that {a mathematical formula}rΣgenc(K)(ui,ui+1)⊆rΣuni(A)(ai,ai+1). Note that, if {a mathematical formula}rΣgenc(K)(ui,ui+1) is empty, then Duplicator can respond with any {a mathematical formula}ai+1 such that {a mathematical formula}(ui+1↦ai+1) is a Spoiler state, even if {a mathematical formula}ai+1 is not connected to {a mathematical formula}ai in {a mathematical formula}uni(A). Duplicator loses if he cannot find where to map the challenged element, i.e., for all {a mathematical formula}ai+1∈uni(A) we have that either {a mathematical formula}rΣgenc(K)(ui,ui+1)⊈rΣuni(A)(ai,ai+1) or {a mathematical formula}(ui+1↦ai+1) is not a state in {a mathematical formula}S. In other words, the game reaches a “dead-end” of Duplicator, i.e., {a mathematical formula}(ai,ui↝ui+1)∈Fc. Otherwise, the game can reach a dead-end of Spoiler, or continue forever avoiding the dead-ends of Duplicator, hence Duplicator wins. Note that, if {a mathematical formula}(c↦c)∉S, then we assume that Spoiler “wins” the game immediately.</paragraph><paragraph>Formally, we define {a mathematical formula}T and {a mathematical formula}Fc as follows:{a mathematical formula} Notice that the size of {a mathematical formula}Ac is {a mathematical formula}O(|genc(K)|×|A|), and that {a mathematical formula}Ac and {a mathematical formula}Fc can be directly computed according to their definition in time that is linear in their size.</paragraph><paragraph label="Example 6.5">We illustrate such games in the following example. Assume {a mathematical formula}Σ={R′, {a mathematical formula}S′,Q′}, {a mathematical formula}K=〈O,{∃R(a),∃S(a)}〉, where {a mathematical formula}O={∃R−⊑∃R,∃S−⊑∃Q,∃Q−⊑∃S,R⊑R′,S⊑S′,Q⊑Q′}, and {a mathematical formula}A={R′(a,a),S′(a,b),Q′(b,b)}. Then {a mathematical formula}Fa={(b,w[Q]↝w[S])]}, and the game arena {a mathematical formula}Aa can be depicted as in Fig. 4(a), where the Duplicator states are shown as ovals and the Spoiler states are shown as boxes (we ignore the states that are not reachable from {a mathematical formula}(a↦a)). In Fig. 4(b) and (c), we show the projection over Σ of {a mathematical formula}uni(K) and {a mathematical formula}uni(A), respectively.The game starts in state {a mathematical formula}(a↦a), which corresponds to setting the homomorphic image of {a mathematical formula}a∈Δunia(K) to {a mathematical formula}a∈Δuni(A). Then Spoiler can choose one of the two successors of a in {a mathematical formula}gena(K): either {a mathematical formula}w[R] or {a mathematical formula}w[S]. If he chooses {a mathematical formula}w[R], it means he moves to the state {a mathematical formula}(a,a↝w[R])]. Now, Duplicator has to respond by finding where in {a mathematical formula}uni(A) to map {a mathematical formula}aw[R]: he can map it only to a (note the role labels), so he moves to {a mathematical formula}(w[R]↦a). In this manner, the two players have to continue forever moving between the states {a mathematical formula}(a,w[R]↝w[R])] and {a mathematical formula}(w[R]↦a), which corresponds to mapping all elements of the form {a mathematical formula}aw[R]⋯w[R]∈Δunia(K) to {a mathematical formula}a∈Δuni(A). Thus, this play is infinite: {a mathematical formula}(a↦a)⋅(a,a↝w[R])]⋅(w[R]↦a)⋅(a,w[R]↝w[R])]⋅(w[R]↦a)⋯ and it is a win for Duplicator.Instead, if Spoiler at his first move chooses the successor {a mathematical formula}w[S] of a, hence moves to the state {a mathematical formula}(a,a↝w[S])], the game finishes soon in a dead-end of Duplicator. Hence, the second play is finite: {a mathematical formula}(a↦a)⋅(a,a↝w[S])]⋅(w[S]↦b)⋅(b,w[S]↝w[Q])]⋅(w[Q]↦b)⋅(b,w[Q]↝w[S])], and it is a win for Spoiler, since the game reaches a state in {a mathematical formula}Fa.  □</paragraph><paragraph>Having constructed the game {a mathematical formula}Gc=(Ac,Fc), we prove that verifying whether {a mathematical formula}unic(K) can be Σ-homomorphically mapped to {a mathematical formula}uni(A) reduces to checking whether both {a mathematical formula}(c↦c) is a state in the game arena {a mathematical formula}Ac (i.e., {a mathematical formula}tΣgen(K)(c)⊆tΣuni(A)(c)) and Duplicator has a winning strategy in {a mathematical formula}Gc from {a mathematical formula}(c↦c).</paragraph><paragraph label="Proof">Let{a mathematical formula}Kbe a KB,{a mathematical formula}Aan ABox, and Σ a signature. There exists a Σ-homomorphism from{a mathematical formula}uni(K)to{a mathematical formula}uni(A)iff(abox1){a mathematical formula}rΣuni(K)(a,b)⊆rΣuni(A)(a,b), for all{a mathematical formula}a,b∈ind(K);(win){a mathematical formula}(c↦c)is a state in{a mathematical formula}Acand Duplicator has a winning strategy in{a mathematical formula}Gc=(Ac,Fc)from{a mathematical formula}(c↦c), for each{a mathematical formula}c∈ind(K).(⇒) Suppose h is a Σ-homomorphism from {a mathematical formula}uni(K) to {a mathematical formula}uni(A): clearly, (abox1), and {a mathematical formula}tΣgen(K)(a)⊆tΣuni(A)(a) for each {a mathematical formula}a∈ind(K) hold. Let {a mathematical formula}c∈ind(K), then {a mathematical formula}(c↦c) is a state of {a mathematical formula}Ac. We describe a winning strategy f for Duplicator in {a mathematical formula}Gc from {a mathematical formula}(c↦c). Let {a mathematical formula}π=(u0↦a0)⋅(a0,u0↝u1)⋯(uk↦ak)⋅(ak,uk↝uk+1) be a finite sequence of states in {a mathematical formula}Ac, where {a mathematical formula}k≥0, {a mathematical formula}u0=a0=c, and {a mathematical formula}ai∈ind(A), {a mathematical formula}ui∈Δgenc(K) for {a mathematical formula}i≥1. Then we set {a mathematical formula}f(π)=(uk+1↦h(cu1⋯uk+1)). Note that by construction of {a mathematical formula}T, {a mathematical formula}cu1⋯uk+1 is an element of {a mathematical formula}Δunic(K), and since h is defined for {a mathematical formula}Δuni(K), it follows that f is defined for each possible sequence π. Moreover, {a mathematical formula}f(π) is never a dead-end of Duplicator. Hence each play, either ends in a dead-end of Spoiler (i.e., Spoiler is in a leaf of the tree in {a mathematical formula}uni(K)), or continues infinitely long avoiding visits to the dead-ends of Duplicator. In any case Duplicator wins.(⇐) Assume that both (abox1) and (win) hold (in particular, {a mathematical formula}tΣgen(K)(a)⊆tΣuni(A)(a), for each {a mathematical formula}a∈ind(K)). Given {a mathematical formula}c∈ind(K), we construct a Σ-homomorphism {a mathematical formula}hc from the tree {a mathematical formula}unic(K) to {a mathematical formula}uni(A). Let f be a winning strategy of Duplicator from {a mathematical formula}(c↦c). Let {a mathematical formula}π=(u0↦a0)⋅(a0,u0↝u1)⋯(uk↦ak)⋅(ak,uk↝uk+1)⋯ be a play conforming with f, where {a mathematical formula}u0=a0=c, {a mathematical formula}ui∈Δgenc(K), and {a mathematical formula}ai∈ind(A). Then Duplicator wins π, and either</paragraph><list><list-item label="–">{a mathematical formula}π=(u0↦a0)⋅(a0,u0↝u1)⋯(uk↦ak) is a finite play, {a mathematical formula}k≥0, and {a mathematical formula}(uk↦ak) is a dead-end of Spoiler. In this case, we set {a mathematical formula}hc(cu1⋯ui)=ai, for {a mathematical formula}0≤i≤k.</list-item><list-item label="–">π is an infinite play such that no state from {a mathematical formula}Fc occur in it. In this case, we set {a mathematical formula}hc(cu1⋯ui)=ai, for {a mathematical formula}i≥0.</list-item></list><paragraph label="Example 6.7">The example below illustrates the presented reduction. Assume {a mathematical formula}Σ={R′, {a mathematical formula}Q′}, {a mathematical formula}K=〈O,{∃R(a),∃S(a)}〉, where {a mathematical formula}O={∃S−⊑∃R, {a mathematical formula}∃R−⊑∃Q, {a mathematical formula}∃Q−⊑∃Q, {a mathematical formula}R⊑R′, {a mathematical formula}S⊑R′, {a mathematical formula}Q⊑Q′} and {a mathematical formula}A={R′(a,a),R′(a,b),Q′(b,b)}. Then {a mathematical formula}Fa={(b,w[S]↝w[R])],(a,w[R]↝w[Q])]}. In Fig. 5 we depict the game arena {a mathematical formula}Aa and a Σ-homomorphism h from {a mathematical formula}uni(K) to {a mathematical formula}uni(A). Observe that in the game {a mathematical formula}Ga Spoiler does not have a winning strategy from {a mathematical formula}(a↦a), because there is a way for Duplicator to play (infinitely) so that the game never reaches {a mathematical formula}Fa. It is not difficult to see that such strategy of Duplicator can be used to define the homomorphism h, and vice versa.  □</paragraph><paragraph label="Lemma 6.8">Finally, combining Lemma 6.2 and Lemma 6.6, and considering that (win) in Lemma 6.6 can be checked in polynomial time (see Section B.6), we obtain that the membership problem for universal solutions with simple ABoxes is in PTime. Below we show the matching lower bound. Given a KB{a mathematical formula}Ks=〈S,As〉, a mapping{a mathematical formula}M, and a simple target ABox{a mathematical formula}At, checking whether{a mathematical formula}Atis a universal solution for{a mathematical formula}Ksunder{a mathematical formula}MisPTime-hard.</paragraph><paragraph label="Proof">The proof is inspired by one in [30], but makes use of a reduction from the Circuit Value problem, known to be PTime-complete [63, Theorem 8.1], instead of a reduction from the Horn Satisfiability problem. Given a monotone Boolean circuit C consisting of a finite set of assignments to Boolean variables {a mathematical formula}P1,…,Pn of the form {a mathematical formula}Pi=0, {a mathematical formula}Pi=1, {a mathematical formula}Pi=Pj∧Pk, {a mathematical formula}j,k&lt;i, or {a mathematical formula}Pi=Pj∨Pk, {a mathematical formula}j,k&lt;i, where each {a mathematical formula}Pi appears on the left-hand side of exactly one assignment, check whether the value {a mathematical formula}Pn is 1 in C.We fix signatures {a mathematical formula}Σ={P(⋅),L(⋅,⋅),R(⋅,⋅)} and {a mathematical formula}Γ={L′(⋅,⋅),R′(⋅,⋅)}. Let {a mathematical formula}a1,…,an∈Na, and consider{a mathematical formula} Note that Σ, Γ, {a mathematical formula}S, and {a mathematical formula}B do not depend on C, which is encoded by {a mathematical formula}At only. Hence, the reduction provides a lower bound for data complexity [64]. In the appendix we show that the value of {a mathematical formula}Pn in C is 1 if and only if {a mathematical formula}At is a universal solution for {a mathematical formula}Ks=〈S,As〉 under {a mathematical formula}M=(Σ,Γ,B).  □</paragraph><paragraph label="Example 6.9">For a circuit C containing assignments {a mathematical formula}P1=1,P2=1,P3=0,P4=P1∧P2, and P5=P3∨P4, we depict the projections over Γ of {a mathematical formula}unia5(S∪B,As) and {a mathematical formula}uni(At):{a mathematical formula} We explain why the value of {a mathematical formula}P5 in C is 1 if and only if there is a Γ-homomorphism h from an infinite binary tree {a mathematical formula}unia5(S∪B,As) to a finite tree with loops on the leaves {a mathematical formula}uni(At). First, {a mathematical formula}h(a5)=a5. Then, {a mathematical formula}a5 has two successors in {a mathematical formula}unia5(S∪B,As), {a mathematical formula}a5w[L] and {a mathematical formula}a5w[R], that could be mapped either to {a mathematical formula}a3 or to {a mathematical formula}a4. Intuitively, this corresponds to the fact that {a mathematical formula}P5=P3∨P4, therefore in order for the value of {a mathematical formula}P5 to be 1, at least one of {a mathematical formula}P3,P4 should evaluate to 1. The former option is not good because the value of {a mathematical formula}P3 is 0 and {a mathematical formula}a3 has no successors. Therefore we map both {a mathematical formula}a5w[L] and {a mathematical formula}a5w[R] to {a mathematical formula}a4: {a mathematical formula}h(a5w[L])=h(a5w[R])=a4. Intuitively, this corresponds to the fact that the value of {a mathematical formula}P4 is 1. Let σ be {a mathematical formula}a5w[L] or {a mathematical formula}a5w[R]. Then {a mathematical formula}σw[L] has to be mapped to {a mathematical formula}a1 and {a mathematical formula}σw[R] has to be mapped to {a mathematical formula}a2. This corresponds to the fact that {a mathematical formula}P4=P1∧P2, therefore in order for the value of {a mathematical formula}P4 to be 1, the values of both {a mathematical formula}P1 and {a mathematical formula}P1 should be 1. Finally, since the values of {a mathematical formula}P1 and {a mathematical formula}P2 are, in fact, 1, there are loops on {a mathematical formula}a1 and {a mathematical formula}a2 labeled with {a mathematical formula}L′ and {a mathematical formula}R′. So, all successors of {a mathematical formula}σw[L] and {a mathematical formula}σw[R] can be mapped to {a mathematical formula}a1 and {a mathematical formula}a2, respectively.  □</paragraph><paragraph label="Theorem 6.10">The membership problem for universal solutions with simple ABoxes isPTime-complete.</paragraph><paragraph label="Theorem 6.11">We conclude this section by addressing the non-emptiness problem. It follows from what is observed after Lemma 6.4 that there exists a universal solution for {a mathematical formula}Ks under {a mathematical formula}M that is a simple ABox iff the (simple) ABox {a mathematical formula}At over Γ is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M, where {a mathematical formula}At satisfies equations (2) and (3). Obviously, we can construct the required {a mathematical formula}At in PTime, then it remains to check if it is a universal solution. Moreover, we can adapt the reduction in Lemma 6.8 above to show that the PTime bound is tight. We obtain the following result. The non-emptiness problem for universal solutions with simple ABoxes isPTime-complete. Moreover, there is an effective algorithm to compute a universal solution in polynomial time.</paragraph></section><section label="6.3"><section-title>The membership problem for universal solutions with extended ABoxes</section-title><paragraph>In this section, we study the membership problem for universal solutions when extended ABoxes are allowed in the target, and show that it is NP-complete.</paragraph><paragraph>Assume given a mapping {a mathematical formula}M=(Σ,Γ,B), a KB {a mathematical formula}Ks=〈S,As〉 over Σ, and an extended ABox {a mathematical formula}At over Γ, and let {a mathematical formula}K=〈S∪B,As〉. In this setting, existence of Γ-homomorphism from {a mathematical formula}uni(K) to {a mathematical formula}uni(At) can be still checked in PTime using the technique of reachability games presented in Section 6.2 (note that for homomorphisms in this direction, there is no distinction made between the constants and the labeled nulls in {a mathematical formula}At). Instead, existence of a Γ-homomorphism in the opposite direction cannot be checked efficiently due to the nulls in {a mathematical formula}At. In fact, we show now that the membership problem for universal solutions with extended ABoxes is NP-hard in data complexity.</paragraph><paragraph label="Proof sketch">Given a KB{a mathematical formula}Ks=〈S,As〉, a mapping{a mathematical formula}M, and an extended target ABox{a mathematical formula}At, checking whether{a mathematical formula}Atis a universal solution for{a mathematical formula}Ksunder{a mathematical formula}MisNP-hard.The proof is by reduction from 3-colorability of undirected graphs, known to be NP-hard. Consider an undirected graph {a mathematical formula}G=(V,E), which we view as a symmetric directed graph, and fix signatures {a mathematical formula}Σ={E(⋅,⋅)} and {a mathematical formula}Γ={E′(⋅,⋅)}. Further, let {a mathematical formula}r,g,b∈Na, {a mathematical formula}V⊆Nl and{a mathematical formula} Note that the vertices in {a mathematical formula}G become labeled nulls in {a mathematical formula}At. In the appendix we show that {a mathematical formula}G is 3-colorable if and only if {a mathematical formula}At is a universal solution for {a mathematical formula}Ks=〈S,As〉 under {a mathematical formula}M=(Σ,Γ,B).  □</paragraph><paragraph>We provide now a matching upper bound.</paragraph><paragraph label="Proof">The membership problem for universal solutions with extended ABoxes is inNP.Given a KB {a mathematical formula}Ks=〈S,As〉, a mapping {a mathematical formula}M=(Σ,Γ,B), and an extended target ABox {a mathematical formula}At, it suffices to show that the existence of a homomorphism from {a mathematical formula}uni(At) to {a mathematical formula}uni(K), for {a mathematical formula}K=〈S∪B,As〉, can be checked in NP in the size of {a mathematical formula}Ks, {a mathematical formula}M, and {a mathematical formula}At (checking the existence of a Γ-homomorphism in the other direction is in PTime, as discussed above). For this, we use the fact that the image {a mathematical formula}W⊆Δuni(K) of the function h on {a mathematical formula}Δuni(At) is bounded by the size of {a mathematical formula}At. Therefore, for each constant and null in {a mathematical formula}At, one needs to guess its homomorphic image in {a mathematical formula}Δuni(K), and then check whether the resulting function is a homomorphism.First, if there exists a homomorphism h from {a mathematical formula}uni(At) to {a mathematical formula}uni(K), then there exists witness W with a number of elements bounded by the size of {a mathematical formula}At, such that {a mathematical formula}W⊆Δuni(K) and h is a function from {a mathematical formula}Δuni(At) to W: take {a mathematical formula}W=h(Δuni(At)).Second, we show that there exists a witness W such that {a mathematical formula}W⊆Δuni(K) and every {a mathematical formula}x∈W is a path of length smaller or equal 2m, where for {a mathematical formula}x=aw[S1]⋯w[Sk] the length of x is {a mathematical formula}k+1, and m is the size of {a mathematical formula}S∪B∪At. To this end, let h be a homomorphism from {a mathematical formula}uni(At) to {a mathematical formula}uni(K) and {a mathematical formula}W=h(Δuni(At)). Let {a mathematical formula}IW be the sub-interpretation of {a mathematical formula}uni(K) induced by W. For {a mathematical formula}x,y∈W, we say that x is connected to y in {a mathematical formula}IW, if there exists {a mathematical formula}n≥0 and a path {a mathematical formula}x1,x2,…,xn,xn+1 such that {a mathematical formula}xi∈W, {a mathematical formula}x1=x, {a mathematical formula}xn+1=y, and {a mathematical formula}(xi,xi+1)∈RiIW for some role {a mathematical formula}Ri, {a mathematical formula}i∈{1,…,n}. Assume that {a mathematical formula}x∈W and the length of x is more than 2m. Then, since {a mathematical formula}W=h(Δuni(At)), we have that x is not connected to any element of {a mathematical formula}ind(As) in {a mathematical formula}IW. Let C be the maximal connected subset of W with {a mathematical formula}x∈C, i.e., for each {a mathematical formula}y∈C, (i) y is connected to {a mathematical formula}y′ in {a mathematical formula}IW, for each {a mathematical formula}y′∈C, and (ii) y is not connected to any {a mathematical formula}z∈W∖C. Note that {a mathematical formula}C∩ind(As)=∅. Let y be the path in {a mathematical formula}path(K) of minimal length in C, it exists and is unique since {a mathematical formula}C⊆ΔIW and there are no constants in C. Then for each {a mathematical formula}y′∈C, we have that {a mathematical formula}y′=y⋅w[R1]⋯w[Rk] for some roles {a mathematical formula}R1,…,Rk. Further assume {a mathematical formula}tail(y)=w[R], and let z be a path of minimal length in {a mathematical formula}Δuni(K) with {a mathematical formula}tail(z)=w[R]. Then the length of z is bounded by the size of {a mathematical formula}S∪B and the length of each {a mathematical formula}z⋅w[R1]⋯w[Rk] for some {a mathematical formula}y⋅w[R1]⋯w[Rk]∈C, is bounded by the size of {a mathematical formula}S∪B∪At. Now, define a new function {a mathematical formula}h′:Δuni(At)→Δuni(K) such that {a mathematical formula}h′(x)=h(x) if {a mathematical formula}h(x)∉C, and {a mathematical formula}h′(x)=z⋅w[R1]⋯w[Rk] if {a mathematical formula}h(x)=y⋅w[R1]⋯w[Rk]. It is easy to see that {a mathematical formula}h′ is a Γ-homomorphism from {a mathematical formula}uni(At) to {a mathematical formula}uni(K). Now we can take {a mathematical formula}W=h′(Δuni(At)), and repeat the above construction until the claim is satisfied.Finally, to verify in NP whether a homomorphism h from {a mathematical formula}uni(At) to {a mathematical formula}uni(K) exists, it is sufficient to guess W of polynomial size and check if {a mathematical formula}uni(At) can be homomorphically mapped to {a mathematical formula}IW.  □</paragraph><paragraph label="Theorem 6.14">Thus, we obtain the exact complexity of the membership problem with extended ABoxes. The membership problem for universal solutions with extended ABoxes isNP-complete.</paragraph></section><section label="6.4"><section-title>The non-emptiness problem for universal solutions with extended ABoxes</section-title><paragraph>We now turn to the non-emptiness problem for universal solutions with null values. This problem turns out to be harder than the membership problem as now candidate solutions, which can be of exponential size, are not part of the input. In fact, we show by reduction from the validity problem for quantified Boolean formulas that checking the existence of a universal solution is PSpace-hard. We also show an ExpTime upper bound by relying on techniques based on two-way alternating automata on infinite trees (2ATA). 2ATAs are a generalization of non-deterministic automata on infinite trees whose non-emptiness problem is in ExpTime[65]. They are at the basis of a variety of reasoning techniques for description and modal logics. In particular, due to their ability of traversing trees both downwards and upwards, they are well suited for handling inverse roles in DL-Lite{a mathematical formula}R. We briefly introduce in Section B.7 the basic notions about infinite trees and 2ATAs and the notation that we use for them.</paragraph><paragraph label="Lemma 6.15">The lower bound can be shown (see the appendix) similarly to Theorem 11 in [55] by reduction from the validity problem for quantified Boolean formulas, known to be PSpace-complete: The non-emptiness problem for universal solutions with extended ABoxes in DL-Lite{a mathematical formula}RisPSpace-hard.</paragraph><paragraph label="Lemma 6.16">As a corollary, we obtain a PSpace lower bound for the non-emptiness problem for universal {a mathematical formula}UCQ-solutions with extended ABoxes by a straightforward reduction from the non-emptiness problem for universal solutions with extended ABoxes. The non-emptiness problem for universal{a mathematical formula}UCQ-solutions with extended ABoxes isPSpace-hard.</paragraph><paragraph label="Proof">Let {a mathematical formula}M=(Σ,Γ,B) be a mapping, and {a mathematical formula}Ks=〈S,As〉 a KB over Σ. We construct {a mathematical formula}Ks′ and {a mathematical formula}M′ such that there exists a universal solution for {a mathematical formula}Ks under {a mathematical formula}M iff there exists a universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ks′ under {a mathematical formula}M′.Define {a mathematical formula}M′ to be {a mathematical formula}(Σ′,Γ′,B′), where {a mathematical formula}Σ′ extends Σ with fresh concept and roles names {a mathematical formula}{X1|X∈Γ} and fresh role names {a mathematical formula}Q1,Q2, {a mathematical formula}Γ′ extends Γ with a fresh role name Q, and {a mathematical formula}B′=B∪{X1⊑X|X∈Γ}∪{Q1⊑Q,Q2⊑Q}. Let {a mathematical formula}Ks′=〈S′,As′〉, where {a mathematical formula}As′ is the union of {a mathematical formula}As, assertions{a mathematical formula} for fresh constants {a mathematical formula}aX,bX for each symbol X, and assertions {a mathematical formula}{∃Q1(aQ),Q2(aQ,bQ)}, for fresh constants {a mathematical formula}aQ,bQ. If {a mathematical formula}Ks is not Γ-safe with respect to {a mathematical formula}M, then {a mathematical formula}S′=S∪{∃Q1−⊑∃Q1}, otherwise {a mathematical formula}S′=S. In the appendix, we prove that {a mathematical formula}Ks′ and {a mathematical formula}M′ are as required.  □</paragraph><paragraph>As for the upper bound, we show how to check condition (core) of Lemma 6.4, i.e., whether there exists a finite subset D of {a mathematical formula}Δuni(Ksb) and a Γ-homomorphism from {a mathematical formula}uni(Ksb) to its finite sub-interpretation induced by D. In the following, for an interpretation {a mathematical formula}U and a finite subset D of {a mathematical formula}ΔU, we denote with {a mathematical formula}UD the sub-interpretation of {a mathematical formula}U induced by D. We also write {a mathematical formula}Ud if {a mathematical formula}D={d}. To simplify the presentation, in the rest of this section we tackle a more general problem: given two (simple) KBs {a mathematical formula}K1 and {a mathematical formula}K2 with canonical models {a mathematical formula}U1 and {a mathematical formula}U2, and a signature Σ, decide whether there exists a Σ-homomorphism from {a mathematical formula}U1 to {a mathematical formula}U2D, for some finite subset D of {a mathematical formula}ΔU2.</paragraph><paragraph>As in the case of the membership problem for simple universal solutions in Section 6.2, for such a homomorphism to exist, (i) an analog of condition (abox1) must hold (cf. Lemma 6.17), and (ii) for each {a mathematical formula}c∈ind(K1), the tree {a mathematical formula}U1c must be Σ-homomorphically embeddable into {a mathematical formula}U2Dc, for some finite subset {a mathematical formula}Dc of {a mathematical formula}ΔU2. To check condition (ii) we adopt 2ATAs; more precisely, we show how to construct for each constant {a mathematical formula}c∈ind(K1), an automaton {a mathematical formula}Ac (with Büchi acceptance condition) accepting (infinite) trees that correspond to (the finite) {a mathematical formula}U2Dc. Hence, to verify the existence of the required Σ-homomorphism, we solve the non-emptiness problem of {a mathematical formula}Ac, for each constant c. It follows that, if the language accepted by {a mathematical formula}Ac for some {a mathematical formula}c∈ind(K1) is empty, then there is no such homomorphism, otherwise we can obtain {a mathematical formula}U2D from the trees accepted by {a mathematical formula}Ac. Below we show how to construct the automaton {a mathematical formula}Ac for two KBs {a mathematical formula}K1, {a mathematical formula}K2, a signature Σ, and some constant {a mathematical formula}c∈ind(K1).</paragraph><paragraph>In the following, we assume that {a mathematical formula}ind(K2)={a1,…,ana}, {a mathematical formula}wit(K2)={w1,…,wnw}, and {a mathematical formula}n=max⁡(na,nw). Denote by {a mathematical formula}U1 and {a mathematical formula}U2 the canonical models, and by {a mathematical formula}G1 and {a mathematical formula}G2 the generating structures of {a mathematical formula}K1 and {a mathematical formula}K2. We define the automaton{a mathematical formula}Ac as the tuple {a mathematical formula}〈Γ,Q,δ,q0,F〉, where the alphabet Γ is the set{a mathematical formula} Hence, {a mathematical formula}Ac accepts n-ary trees where each node either corresponds to a constant of {a mathematical formula}K2, labeled with the symbol {a mathematical formula}aˆi, or corresponds to a witness of {a mathematical formula}K2, labeled with the symbol {a mathematical formula}wˆi, or is the root of the tree, labeled with root, or is a node outside the finite part, labeled with stop. The set Q of states is partitioned into three sets:{a mathematical formula} where {a mathematical formula}Qf is the set of states responsible for labeling an input tree T as an appropriate finite substructure of {a mathematical formula}U2, and {a mathematical formula}Qh is the set of states responsible for checking the existence of a homomorphism from {a mathematical formula}U1c into a finite substructure of {a mathematical formula}U2. We define{a mathematical formula} where the states {a mathematical formula}αi are responsible for labeling T with the constants of {a mathematical formula}K2, and the states {a mathematical formula}ωi are responsible for labeling T with the witnesses of {a mathematical formula}K2. We define the transition function δ for these states and for the initial state{a mathematical formula}q0 as follows:{a mathematical formula}{a mathematical formula}{a mathematical formula} where {a mathematical formula}qh is a state from {a mathematical formula}Qh, which we are going to define below. For now observe that due to the transitions above, a tree T accepted by {a mathematical formula}Ac will have the symbol root in the root and the symbol {a mathematical formula}aˆi in the i-th successor of the root. Then, each of the i-th successors above will have its j-th successor marked with {a mathematical formula}wˆj whenever {a mathematical formula}ai↝K2wj. Further, each of the j-th successors above will have its i-th successor marked with {a mathematical formula}wˆi whenever {a mathematical formula}wj↝K2wi, and so on. Note that at some step, when {a mathematical formula}wj↝K2wi, a node in T marked with {a mathematical formula}wˆj can have its i-th successor marked with stop (instead of {a mathematical formula}wˆi). This should mean that this i-th successor is not inside the finite substructure of {a mathematical formula}U2 to which the homomorphism will map {a mathematical formula}U1c, and {a mathematical formula}Ac will stop going down T. Note that it is not yet guaranteed that each path in T from the root contains at some point a node labeled with stop instead of {a mathematical formula}wˆi. However, if this is not the case, we would have an infinite path in T over which the automaton passes infinitely often through states {a mathematical formula}ωi. We rule this out by means of an appropriate acceptance condition of the automaton, which we present below.</paragraph><paragraph>Let {a mathematical formula}wit(K1)={u1,…,um}, and assume that {a mathematical formula}u0=c. Now, the set of states {a mathematical formula}Qh is defined as:{a mathematical formula} and the transitions for theses states are defined as follows, where {a mathematical formula}1≤ℓ≤m and {a mathematical formula}1≤i≤na:{a mathematical formula}{a mathematical formula}{a mathematical formula}{a mathematical formula}{a mathematical formula} Next, for {a mathematical formula}0≤ℓ≤m and {a mathematical formula}b∈{a1,…,ana},{a mathematical formula} and for {a mathematical formula}1≤ℓ≤m and {a mathematical formula}v∈{w1,…,wnw},{a mathematical formula} where the relations {a mathematical formula}→Σ and {a mathematical formula}⇢Σ defined between elements {a mathematical formula}s,s′∈{u0,…,um} indicate whether the edge between s and {a mathematical formula}s′ has a nonempty or empty Σ-role label, respectively:{a mathematical formula} the functions {a mathematical formula}τts and {a mathematical formula}ρt,t′s,s′, encoding local homomorphism conditions, return true iff s can be mapped to t, and the edge {a mathematical formula}(s,s′) can be mapped to the edge {a mathematical formula}(t,t′), respectively:{a mathematical formula} and the function {a mathematical formula}ηwu,u′ returns true iff the edge {a mathematical formula}(u,u′) can be “inversely” mapped to the edge {a mathematical formula}(w,s), for the predecessor s of w:{a mathematical formula} for {a mathematical formula}s,s′ as above, {a mathematical formula}t,t′∈{a1,…,ana,w1,…,wnw}, {a mathematical formula}u,u′∈{u1,…,um} and {a mathematical formula}w∈{w1,…,wnw}. This concludes the definition of the transition function.</paragraph><paragraph>Observe that for each witness {a mathematical formula}uℓ∈wit(K1) there are two states in {a mathematical formula}Qh: {a mathematical formula}γℓ is responsible for checking the existence of a homomorphic image for the sub-tree generated by {a mathematical formula}uℓ, and {a mathematical formula}χℓ is the “expecting state”, which is responsible for non-deterministically finding a homomorphic image of {a mathematical formula}uℓ; moreover for each witness {a mathematical formula}uℓ∈wit(K1) and constant {a mathematical formula}ai∈ind(K2), there is a state {a mathematical formula}κℓi used to move from the current constant in {a mathematical formula}K2 via the root to {a mathematical formula}ai, to which {a mathematical formula}uℓ is mapped. Intuitively, suppose an element {a mathematical formula}cuℓ1⋯uℓk of {a mathematical formula}ΔU1 is homomorphically mapped to the element {a mathematical formula}ai1wi2⋯wir of {a mathematical formula}ΔU2 and {a mathematical formula}uℓk↝K1uℓk+1. If {a mathematical formula}uℓk→Σuℓk+1 then the element {a mathematical formula}cuℓ1⋯uℓkuℓk+1 of {a mathematical formula}ΔU1 has to be mapped to an immediate successor or predecessor of the image of {a mathematical formula}cuℓ1⋯uℓk in {a mathematical formula}U2. For {a mathematical formula}wir↝K2wir+1, whenever {a mathematical formula}τwir+1uℓk+1=⊤ and {a mathematical formula}ρwir,wir+1uℓk,uℓk+1=⊤, it is guaranteed that the edge {a mathematical formula}(cuℓ1⋯uℓk,cuℓ1⋯uℓkuℓk+1) of {a mathematical formula}U1 can be mapped to the edge {a mathematical formula}(ai1wi2⋯wir,ai1wi2⋯wirwir+1) of {a mathematical formula}U2. Alternatively, if {a mathematical formula}ηwiruℓk,uℓk+1=⊤ then the edge {a mathematical formula}(cuℓ1⋯uℓk,cuℓ1⋯uℓkuℓk+1) can be “inversely” mapped to the edge {a mathematical formula}(ai1wi2⋯wir,ai1wi2⋯wir−1). If, however, {a mathematical formula}uℓk⇢Σuℓk+1 then {a mathematical formula}cuℓ1…uℓkuℓk+1 can be mapped to any element of {a mathematical formula}U2, which is reflected by switching to the state {a mathematical formula}χℓ.</paragraph><paragraph>For the (Büchi) acceptance condition we take {a mathematical formula}F={γi|1≤i≤m}. Observe that neither the states {a mathematical formula}ωi of {a mathematical formula}Qf nor {a mathematical formula}χl of {a mathematical formula}Qh are in F. This implies that a tree is rejected if it has an infinite branch all of whose nodes are labeled with {a mathematical formula}wˆi, or if all runs on it are such that the mapping of a “disconnected successor” (such as {a mathematical formula}uℓk+1 with {a mathematical formula}uℓk⇢Σuℓk+1 in the example above) is “infinitely postponed”. On the other hand, each accepted tree represents a finite substructure of {a mathematical formula}U2 to which {a mathematical formula}U1c can be Σ-homomorphically mapped. The number of states of the automaton {a mathematical formula}Ac is quadratic and the overall size of the automaton {a mathematical formula}Ac is polynomial in the combined size of the two generating structures {a mathematical formula}G1 and {a mathematical formula}G2.</paragraph><paragraph label="Lemma 6.17">We prove that verifying whether {a mathematical formula}U1 can be Σ-homomorphically mapped to {a mathematical formula}U2D for some finite {a mathematical formula}D⊆ΔU2 reduces to checking the non-emptiness problem of {a mathematical formula}Ac. Let{a mathematical formula}K1,K2be KBs and Σ a signature. There exists a finite subset D of{a mathematical formula}ΔU2and a Σ-homomorphism from{a mathematical formula}U1to{a mathematical formula}U2Dif and only if(abox2){a mathematical formula}rΣU1(a,b)⊆rΣU2(a,b), for all{a mathematical formula}a,b∈ind(K1), and(aut)the language of the automaton{a mathematical formula}Acis non-empty, for each{a mathematical formula}c∈ind(K1).</paragraph><paragraph label="Proof sketch">(⇒) Let {a mathematical formula}D⊆ΔU2 be finite, and h a Σ-homomorphism from {a mathematical formula}U1 to {a mathematical formula}U2D. We construct a labeled tree {a mathematical formula}T=({1,…,n}⁎,V) where {a mathematical formula}n=max⁡(na,nw) and show that {a mathematical formula}T∈L(Ac), for each {a mathematical formula}c∈ind(K1). The labeling function V is defined as follows:{a mathematical formula}To show that {a mathematical formula}T∈L(Ac), we construct a run tree {a mathematical formula}(Tr,r) of {a mathematical formula}Ac on T. The idea behind this construction is the following. Assume that {a mathematical formula}y∈Tr with {a mathematical formula}r(y)=(x,q), {a mathematical formula}x∈{1,…,n}⁎, and {a mathematical formula}V(x)=L. Observe that the transition function can be viewed as a conjunction {a mathematical formula}δ(q,L)=⋀iΦi, where each {a mathematical formula}Φi=⋁jψji. To satisfy {a mathematical formula}δ(q,L), we construct exactly one child for each {a mathematical formula}Φi, and we satisfy {a mathematical formula}Φi by choosing exactly one {a mathematical formula}ψji from {a mathematical formula}Φi, making use of the given homomorphism h. Thus, for instance, if {a mathematical formula}r(y)=(1⋅2,γ1), {a mathematical formula}V(1⋅2)=wˆ2, the current path in {a mathematical formula}U1 is {a mathematical formula}cu1 (this path can be obtained from the path from the root of {a mathematical formula}Tr to y), {a mathematical formula}h(cu1)=a1w2, and {a mathematical formula}u1→Σu3 and {a mathematical formula}h(cu1u3)=a1w2w4, then we satisfy {a mathematical formula}ψji=(4,γ3), so y would have a child {a mathematical formula}y′ with {a mathematical formula}r(y′)=(1⋅2⋅4,γ3).{a mathematical formula} If, instead, {a mathematical formula}u1⇢Σu3 and {a mathematical formula}h(cu1u3)=a2, we switch to the “expecting” state {a mathematical formula}χ3 and remain in this state while traversing the tree {a mathematical formula}{1,…,n}⁎ from the node {a mathematical formula}1⋅2 via the root to the node 2. Once node 2 is reached, we switch to the state {a mathematical formula}γ3. The choices for satisfying the transition function follow from that. Thus, the run from y continues as: {a mathematical formula}(1⋅2,γ1), {a mathematical formula}(1⋅2,χ3),(1,χ3),(ϵ,χ3),(2,χ3),(2,γ3).{a mathematical formula} For the formal definition of {a mathematical formula}(Tr,r), we refer to the appendix.(⇐) If the language of {a mathematical formula}Ac is non-empty, then there is a tree {a mathematical formula}T=({1,…,n}⁎,V)∈L(Ac) and an accepting run {a mathematical formula}(Tr,r) of {a mathematical formula}Ac over T. We can construct a finite set {a mathematical formula}Dc⊆ΔU2 by proving that T encodes a finite subset of {a mathematical formula}ΔU2, extracting {a mathematical formula}Dc from it, and defining a Σ-homomorphism {a mathematical formula}hc from {a mathematical formula}U1c to {a mathematical formula}U2D by induction, based on the choices in {a mathematical formula}Tr to satisfy the transition function. A Σ-homomorphism from {a mathematical formula}U1 to {a mathematical formula}U2D for {a mathematical formula}D=⋃cDc is defined as the union of {a mathematical formula}hc for each {a mathematical formula}c∈ind(K1).  □</paragraph><paragraph label="Example 6.18">Consider {a mathematical formula}M and {a mathematical formula}Ks from Example 5.8, i.e., {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,R,S}, {a mathematical formula}Γ={Q}, and {a mathematical formula}B={R⊑Q,S⊑Q}, and {a mathematical formula}Ks=〈S,As〉, where {a mathematical formula}As={A(a),S(a,a)} and {a mathematical formula}S={A⊑∃R,∃R−⊑∃R}.We construct the automaton {a mathematical formula}Aa for {a mathematical formula}K1, {a mathematical formula}K2 and Σ, where {a mathematical formula}K1=〈S∪B,As〉, {a mathematical formula}K2=K1 and {a mathematical formula}Σ=Γ. Moreover, {a mathematical formula}ind(K2)={a1}, {a mathematical formula}wit(K2)={w1} and {a mathematical formula}wit(K1)={u1}, where {a mathematical formula}a1=a, {a mathematical formula}w1=w[R], and {a mathematical formula}u1=w[R]. Thus {a mathematical formula}n=1, so {a mathematical formula}Aa accepts trees of the form {a mathematical formula}({1}⁎,V), where {a mathematical formula}V(x)∈{root,stop,a1,w1}, and the set of accepting states is {a mathematical formula}F={γ1}. Below we depict a tree {a mathematical formula}T∈L(Aa) with an accepting run over T that starts in {a mathematical formula}ϵr with {a mathematical formula}r(ϵr)=(ϵ,q0).{a mathematical formula} From T we can extract the ABox {a mathematical formula}At={Q(a,a),Q(a,n)}, which is also a universal solution for {a mathematical formula}Ks under {a mathematical formula}M.  □</paragraph><paragraph label="Theorem 6.19">Summing up, we get: If extended ABoxes are allowed in universal solutions, then the non-emptiness problem for universal solutions isPSpace-hard and inExpTime.</paragraph></section></section><section label="7">Complexity results on {a mathematical formula}UCQ-representability<paragraph>In this section, we develop techniques and complexity results for the problem of {a mathematical formula}UCQ-representability. More precisely, we show in Section 7.1 that the membership problem for {a mathematical formula}UCQ-representations is NLogSpace-complete, and then we prove in Section 7.2 that the same complexity bound holds also for the non-emptiness problem for {a mathematical formula}UCQ-representations.</paragraph><section label="7.1"><section-title>The membership problem</section-title><paragraph>One can immediately notice some similarities between the membership problem for {a mathematical formula}UCQ-representations and the membership problem for universal {a mathematical formula}UCQ-solutions, which was shown to be ExpTime-complete in [30]. However, the universal quantification over ABoxes in the definition of {a mathematical formula}UCQ-representations makes the former problem computationally simpler; in fact, we prove in this section that this problem is NLogSpace-complete, which coincides with the complexity of TBox reasoning in DL-Lite{a mathematical formula}R[61]. We now list several observations that help to understand this drop in complexity, and also provide an intuition for the characterization of {a mathematical formula}UCQ-representations that is stated in Lemma 7.1, and which is used to pinpoint the complexity of the membership problem for {a mathematical formula}UCQ-representations. In the following, assume fixed a mapping {a mathematical formula}M=(Σ,Γ,B), a source TBox {a mathematical formula}S, and a target TBox {a mathematical formula}T.</paragraph><paragraph>1) For simplicity, we assume first that {a mathematical formula}S, {a mathematical formula}B, and {a mathematical formula}T do not contain disjointness axioms. Let {a mathematical formula}As={A(a)} be a source ABox, for an atomic concept A, and assume that {a mathematical formula}S∪B⊨A⊑B′ for some basic concept {a mathematical formula}B′ over Γ. Then {a mathematical formula}〈S∪B,As〉⊨B′(a) and, thus, {a mathematical formula}q=B′(a) evaluates to true over {a mathematical formula}〈S∪B,As〉. Hence, for {a mathematical formula}T to be a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M, it should be the case that {a mathematical formula}〈T∪B,As〉⊨q. From Lemma 3.5 it then follows that {a mathematical formula}uni(T∪B,As)⊨B′(a), thus, {a mathematical formula}T∪B⊨A⊑B′. The converse can be shown in the same way but starting with the assumption that {a mathematical formula}T∪B⊨A⊑B′. It is easy to extend the above reasoning to the case {a mathematical formula}As={B(a)} for a basic concept B over Σ, or {a mathematical formula}As={R(a,b)} for a basic role R over Σ. As we quantify over all possible source ABoxes, we are free to choose any such concept B or role R. Hence, if {a mathematical formula}T is a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M, then for each basic concept or role X over Σ and each basic concept or role {a mathematical formula}X′ over Γ, it holds that {a mathematical formula}S∪B⊨X⊑X′ if and only if {a mathematical formula}T∪B⊨X⊑X′. This is the main intuition behind condition (ii) in Lemma 7.1.</paragraph><paragraph>2) For the sake of readability, below we denote by {a mathematical formula}Usb and {a mathematical formula}Utb the canonical models of {a mathematical formula}〈S∪B,As〉 and {a mathematical formula}〈T∪B,As〉, respectively. Moreover, for a TBox {a mathematical formula}O, we say that a concept B generates a role R in {a mathematical formula}O, and we write{a mathematical formula} if for every constant {a mathematical formula}a∈Na, it holds that {a mathematical formula}a↝〈O,{B(a)}〉w[R].</paragraph><paragraph>Let {a mathematical formula}As={A(a)} for an atomic concept {a mathematical formula}A∈Σ, and assume that {a mathematical formula}A↝SR, {a mathematical formula}S∪B⊨∃R−⊑B′ and {a mathematical formula}S∪B⊨R⊑R′, for a role R over Σ, a concept {a mathematical formula}B′ over Γ, and a role {a mathematical formula}R′ over Γ. Then{a mathematical formula} Next, for {a mathematical formula}T to be a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M, by Lemma 3.7, it follows that {a mathematical formula}Usb has to be finitely Γ-homomorphically equivalent to {a mathematical formula}Utb. Let Δ be the set containing a and all paths of the form {a mathematical formula}aw[Q] in {a mathematical formula}ΔUsb, {a mathematical formula}I the sub-interpretation of {a mathematical formula}Usb induced by Δ, and h a Γ-homomorphism from {a mathematical formula}I to {a mathematical formula}Utb. Then {a mathematical formula}h(a)=a and there exists {a mathematical formula}aw[S]∈ΔUtb, for a basic role S over Γ, such that{a mathematical formula} since the image of {a mathematical formula}aw[R] cannot be a constant as {a mathematical formula}ind(As)={a} and there are no loops on a in {a mathematical formula}As. By construction of the canonical model and by the fact that {a mathematical formula}B is a set of inclusions from Σ to Γ, it follows that {a mathematical formula}T∪B⊨A⊑∃S, {a mathematical formula}T⊨∃S−⊑B′, and {a mathematical formula}T⊨S⊑R′. Clearly, given {a mathematical formula}T and {a mathematical formula}B, one can check the existence of such S effectively. On the other hand, if we assume that {a mathematical formula}A↝SR, {a mathematical formula}S∪B⊨∃R−⊑B′, and {a mathematical formula}S∪B⊭R⊑R′ for any role {a mathematical formula}R′ over Γ (i.e., {a mathematical formula}rΓUsb(a,aw[R])=∅), then the homomorphic image of {a mathematical formula}aw[R] could be any element y in {a mathematical formula}ΔUtb with {a mathematical formula}tΓUsb(aw[R])⊆tΓUtb(y). This example provides the intuition behind condition (iii) in Lemma 7.1.</paragraph><paragraph>Observe that it is sufficient to consider only chains of roles of length 1. Thus, for example, if {a mathematical formula}A↝S∪BR and {a mathematical formula}∃R−↝S∪BQ, for some roles R,Q, then the fact that {a mathematical formula}T is a {a mathematical formula}UCQ-representation for {a mathematical formula}S under {a mathematical formula}M depends on whether {a mathematical formula}T satisfies the condition (iii) for two separate cases:</paragraph><list><list-item label="–">{a mathematical formula}As={A(a)} and {a mathematical formula}A↝S∪BR,</list-item><list-item label="–">{a mathematical formula}As={∃R−(a)} and {a mathematical formula}∃R−↝S∪BQ.</list-item></list><paragraph>Condition (iv) is symmetric to condition (iii) if we start with the assumption {a mathematical formula}A↝T∪BR′ and {a mathematical formula}T⊨∃R′−⊑B′ for a role {a mathematical formula}R′ over Γ and a concept {a mathematical formula}B′ over Γ.</paragraph><paragraph>3) To conclude, we analyze the cases when {a mathematical formula}S, {a mathematical formula}B, and {a mathematical formula}T contain disjointness axioms. First, notice that without loss of generality we can assume that there are no disjointness axioms in {a mathematical formula}S as in the definition of {a mathematical formula}UCQ-representations, we consider only ABoxes {a mathematical formula}As that are consistent with {a mathematical formula}S. So we will take into account only disjointness axioms in {a mathematical formula}B and {a mathematical formula}T. Then for a source ABox {a mathematical formula}As consistent with {a mathematical formula}S, it is possible that {a mathematical formula}〈S∪B,As〉 is inconsistent due to the disjointness axioms in the mapping, which will make all possible tuples to be in the answer to every query.</paragraph><paragraph>Consider an ABox {a mathematical formula}As={A(a),C(a)} for atomic concepts A, C over Σ, and assume that {a mathematical formula}As is consistent with {a mathematical formula}S. Furthermore, assume that the KB {a mathematical formula}〈S∪B,{A(b),C(b)}〉, for an arbitrary constant b, is inconsistent. Then {a mathematical formula}〈S∪B,As〉 is inconsistent, and by definition of certain answers over an inconsistent KB, {a mathematical formula}cert(q,〈S∪B,As〉)=AllTup(q) for each target {a mathematical formula}UCQq. Therefore, in order for {a mathematical formula}T to be a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M, {a mathematical formula}〈T∪B,As〉 has to be inconsistent as well. To ensure that this is the case, we need to check that {a mathematical formula}(A,C) is also {a mathematical formula}(T∪B)-inconsistent. Similarly but in the opposite direction, if we start with the assumption that {a mathematical formula}〈T∪B,{A(b),C(b)}〉 is inconsistent, it should be verified that also {a mathematical formula}{S∪B,{A(b),C(b)}} is inconsistent, for some arbitrary constant b. This is the intuition behind condition (i) in Lemma 7.1.</paragraph><paragraph>Finally, we are ready to characterize {a mathematical formula}UCQ-representations. To capture the above intuitions, in the following, for a TBox {a mathematical formula}O, we say that a pair {a mathematical formula}(B,B′) of basic concepts is {a mathematical formula}O-consistent, if the KB {a mathematical formula}〈O,{B(a),B′(a)}〉 is consistent, where a is an arbitrary constant, and {a mathematical formula}(B,B′) is {a mathematical formula}O-inconsistent otherwise. Similarly, a pair {a mathematical formula}(R,R′) of basic roles is {a mathematical formula}O-consistent, if the KB {a mathematical formula}〈O,{R(a,b),R′(a,b)}〉 is consistent, where a, b are arbitrary distinct constants, and {a mathematical formula}(R,R′) is {a mathematical formula}O-inconsistent otherwise. Moreover, a concept or role X is {a mathematical formula}O-consistent if {a mathematical formula}(X,X) is {a mathematical formula}O-consistent, and {a mathematical formula}O-inconsistent otherwise. Below, we abuse notation and write {a mathematical formula}gen(O,B(o)) instead of {a mathematical formula}gen(〈O,{B(o)}〉), and {a mathematical formula}uni(O,B(o)) instead of {a mathematical formula}uni(〈O,{B(o)}〉), for a TBox {a mathematical formula}O, a concept B and {a mathematical formula}o∈Na.</paragraph><paragraph label="Lemma 7.1">Given a mapping{a mathematical formula}M=(Σ,Γ,B), a TBox{a mathematical formula}Tover Γ is a{a mathematical formula}UCQ-representation of a TBox{a mathematical formula}Sover Σ under{a mathematical formula}Mif and only if the following conditions hold:</paragraph><list><list-item>for each pair of{a mathematical formula}S-consistent concepts or roles{a mathematical formula}X,X′over Σ,{a mathematical formula}(X,X′)is{a mathematical formula}(S∪B)-consistent iff{a mathematical formula}(X,X′)is{a mathematical formula}(T∪B)-consistent;</list-item><list-item>for each{a mathematical formula}(S∪B)-consistent concept or role X over Σ and each{a mathematical formula}X′over Γ,{a mathematical formula}S∪B⊨X⊑X′iff{a mathematical formula}T∪B⊨X⊑X′;</list-item><list-item>for each{a mathematical formula}(S∪B)-consistent concept B over Σ and each role R such that{a mathematical formula}B↝S∪BR, there exists{a mathematical formula}y∈Δgen(T∪B,B(o)), where o is an arbitrary constant, such that{a mathematical formula}</list-item><list-item>for each{a mathematical formula}(S∪B)-consistent concept B over Σ and each role R such that{a mathematical formula}B↝T∪BR, there exists{a mathematical formula}y∈Δgen(S∪B,B(o)), where o is an arbitrary constant, such that{a mathematical formula}</list-item></list><paragraph label="Proof">(⇐) Let the conditions above hold for {a mathematical formula}S, {a mathematical formula}T and {a mathematical formula}B, and let {a mathematical formula}As be an ABox over Σ such that {a mathematical formula}〈S,As〉 is consistent. Moreover, denote by {a mathematical formula}Ksb the KB {a mathematical formula}〈S∪B,As〉, and by {a mathematical formula}Ktb the KB {a mathematical formula}〈T∪B,As〉, and let {a mathematical formula}Usb and {a mathematical formula}Utb be the canonical models of {a mathematical formula}Ksb and {a mathematical formula}Ktb, respectively. Next we show that {a mathematical formula}Ksb and {a mathematical formula}Ktb are Γ-query inseparable.Observe that condition (i) ensures that for every ABox {a mathematical formula}As over Σ that is consistent with {a mathematical formula}S, {a mathematical formula}Ksb is consistent iff {a mathematical formula}Ktb is consistent. Indeed, if {a mathematical formula}Ksb is consistent, then for each pair of basic concepts {a mathematical formula}B,B′ over Σ such that {a mathematical formula}As⊨B(a) and {a mathematical formula}As⊨B′(a) for some {a mathematical formula}a∈ind(As), the KB {a mathematical formula}Ksb′=〈S∪B,As∪{B(a),B′(a)}〉 is consistent, and by monotonicity of first-order logic we obtain that the KB {a mathematical formula}〈S∪B,{B(a),B′(a)}〉 is also consistent, and thus {a mathematical formula}(B,B′) is {a mathematical formula}S∪B-consistent. And similarly, for each pair of basic roles {a mathematical formula}R,R′ over Σ such that {a mathematical formula}As⊨R(b,c) and {a mathematical formula}As⊨R′(b,c) for some {a mathematical formula}b,c∈ind(As), we can derive that {a mathematical formula}(R,R′) is {a mathematical formula}S∪B-consistent. Then, by (i) for each pair B, {a mathematical formula}B′ as above, {a mathematical formula}(B,B′) is {a mathematical formula}T∪B-consistent, and likewise for each pair R, {a mathematical formula}R′ as above. To see that {a mathematical formula}Ktb is consistent, it suffices to observe that the interpretation {a mathematical formula}I defined as the union of the canonical models {a mathematical formula}uni(T∪B,{B(a),B′(a)}) and {a mathematical formula}uni(T∪B,{R(b,c),R′(b,c)}) for B, {a mathematical formula}B′, R, {a mathematical formula}R′, and a, b, c as above, is a model {a mathematical formula}Ktb. Note that in this paragraph, B and {a mathematical formula}B′ can denote the same concept, and R and {a mathematical formula}R′ can denote the same role. The proof can be inverted to show that consistency of {a mathematical formula}Ktb implies consistency of {a mathematical formula}Ksb.First, assume {a mathematical formula}Ksb is inconsistent, it follows that {a mathematical formula}cert(q,Ksb)=AllTup(q) for each {a mathematical formula}UCQq over Γ. By the argument above, {a mathematical formula}Ktb is inconsistent, so {a mathematical formula}cert(q,Ktb)=AllTup(q) for each {a mathematical formula}UCQq over Γ as well, hence {a mathematical formula}Ksb and {a mathematical formula}Ktb are Γ-query inseparable.Now assume {a mathematical formula}Ksb is consistent. One can show that from (ii) and (iii) it follows that {a mathematical formula}Usb is Γ-homomorphically embeddable into {a mathematical formula}Utb (see Proposition C.1). Since {a mathematical formula}Ktb is consistent, we can apply Lemma 3.7 to obtain that {a mathematical formula}Ktb Γ-query entails {a mathematical formula}Ksb. On the other hand, one can show that (ii) and (iv) imply that {a mathematical formula}Utb is Γ-homomorphically embeddable into {a mathematical formula}Usb (see Proposition C.2), hence {a mathematical formula}Ksb Γ-query entails {a mathematical formula}Ktb by Lemma 3.7. We obtain again that {a mathematical formula}Ksb and {a mathematical formula}Ktb are Γ-query inseparable.(⇒) Assume, by contradiction, that one of the conditions (i)–(iv) is not satisfied. We produce an {a mathematical formula}S-consistent ABox {a mathematical formula}As over Σ and a Boolean {a mathematical formula}CQq over Γ such that it is not the case that {a mathematical formula}Ksb⊨q iff {a mathematical formula}Ktb⊨q.Assume, first, that condition (i) is violated. Then we take {a mathematical formula}As={B1(o),B2(o)} for concepts {a mathematical formula}B1 and {a mathematical formula}B2 violating it and {a mathematical formula}q=B1(a) for some constant a distinct from o. If {a mathematical formula}(B1,B2) are {a mathematical formula}S∪B-consistent, but {a mathematical formula}T∪B-inconsistent, it follows that {a mathematical formula}Ksb⊭q and {a mathematical formula}Ktb⊨q, and the opposite holds if {a mathematical formula}(B1,B2) are {a mathematical formula}T∪B-consistent, but {a mathematical formula}S∪B-inconsistent. If (ii) is violated for roles, the proof is analogous.Let now condition (ii) be violated for some {a mathematical formula}S∪B-consistent concept B over Σ. Assume there is {a mathematical formula}B′ such that {a mathematical formula}S∪B⊨B⊑B′ and {a mathematical formula}T∪B⊭B⊑B′, and consider {a mathematical formula}As={B(o)} and {a mathematical formula}q=B′(o). Then {a mathematical formula}B′∈tΓUsb(o) and {a mathematical formula}B′∉tΓUtb(o), so it follows that {a mathematical formula}Usb⊨q and {a mathematical formula}Utb⊭q; finally by Lemma 3.5 it follows {a mathematical formula}Ksb⊨q and {a mathematical formula}Ktb⊭q. The opposite follows if we assume that {a mathematical formula}S∪B⊭B⊑B′ and {a mathematical formula}T∪B⊨B⊑B′, which completes the proof for this case. If condition (ii) is violated for some role, the proof is analogous.Next, assume condition (iii) is violated, so there exists an {a mathematical formula}S∪B-consistent concept B over Σ and a role R such that {a mathematical formula}B↝S∪BR, and for {a mathematical formula}As={B(o)} there is no {a mathematical formula}y∈Δgen(Ktb) such that both {a mathematical formula}tΓgen(Ksb)(w[R])⊆tΓgen(Ktb)(y) and {a mathematical formula}rΓgen(Ksb)(o,w[R])⊆rΓgen(Ktb)(o,y). Let {a mathematical formula}B=tΓgen(Ksb)(w[R]), {a mathematical formula}R=rΓgen(Ksb)(o,w[R]), and consider{a mathematical formula} where {a mathematical formula}B′(x) denotes atom {a mathematical formula}A(x) if {a mathematical formula}B′=A for an atomic concept A, and {a mathematical formula}B′(x) denotes formula {a mathematical formula}∃x′.S(x,x′) if {a mathematical formula}B′=∃S for a role S. Then {a mathematical formula}Usb⊨q by mapping the existentially quantified variable x to {a mathematical formula}ow[R]. On the other hand, {a mathematical formula}Utb⊭q as there is no element of {a mathematical formula}ΔUtb to which x could be mapped. Using Lemma 3.5 we obtain that {a mathematical formula}Ksb⊨q and {a mathematical formula}Ktb⊭q.The case when condition (iv) is violated is analogous to the case above. This completes the proof.  □</paragraph><paragraph label="Example 7.2">Having devised a characterization of {a mathematical formula}UCQ-representations, we discuss several examples of (non-){a mathematical formula}UCQ-representations. Assume that {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,R}, {a mathematical formula}Γ={A′,R′,B′}, and {a mathematical formula}B={A⊑A′,∃R−⊑B′}. Moreover, let {a mathematical formula}S={A⊑∃R}.</paragraph><list><list-item>In Example 5.18 we showed that {a mathematical formula}T={A′⊑B′} is not a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M. In fact, in this case, condition (ii) is not satisfied, as {a mathematical formula}T∪B⊨A⊑B′ while {a mathematical formula}S∪B⊭A⊑B′.</list-item><list-item>In the same example we showed that also {a mathematical formula}T={A′⊑∃R′,∃R′−⊑B′} is not a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M. In this case, condition (iv) is not satisfied, as {a mathematical formula}A↝T∪BR′, but there exists no {a mathematical formula}y∈Δgen(S∪B,A(o)) such that{a mathematical formula} since neither {a mathematical formula}y=o, nor {a mathematical formula}y=w[R] in {a mathematical formula}Δgen(S∪B,A(o)) satisfy {a mathematical formula}R′∈rΓgen(S∪B,A(o))(o,y).  □</list-item></list><paragraph label="Example 7.3">Assume that {a mathematical formula}M=(Σ,Γ,B), where{a mathematical formula} Then {a mathematical formula}T is a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M. We verify that conditions (iii) and (iv) are satisfied. First, {a mathematical formula}A↝S∪BR: we take {a mathematical formula}w[Q′]∈Δgen(T∪B,A(o)) and it is easy to see that the following is satisfied:{a mathematical formula} as {a mathematical formula}rΓgen(S∪B,A(o))(o,w[R])=∅. Next, {a mathematical formula}A↝S∪BS and {a mathematical formula}∃S−↝S∪BQ. It should be clear that we take {a mathematical formula}w[S′] and {a mathematical formula}w[Q′] in {a mathematical formula}Δgen(T∪B,A(o)) and {a mathematical formula}Δgen(T∪B,∃S−(o)) respectively to satisfy condition (iii). As for the opposite direction, now differently from Example 7.2, for both {a mathematical formula}w[S′] and {a mathematical formula}w[Q′] in {a mathematical formula}Δgen(T∪B,A(o)) and {a mathematical formula}Δgen(T∪B,∃S−(o)) respectively, there exist {a mathematical formula}w[S] and {a mathematical formula}w[Q] in {a mathematical formula}Δgen(S∪B,A(o)) and {a mathematical formula}Δgen(S∪B,∃S−(o)) that satisfy condition (iv). Below we provide the graphical representation of {a mathematical formula}S, {a mathematical formula}B and {a mathematical formula}T, and we illustrate the projections of {a mathematical formula}gen(Ksb) and {a mathematical formula}gen(Ktb) on Γ, for {a mathematical formula}Ksb=〈S∪B,A(o)〉 and {a mathematical formula}Ktb=〈T∪B,A(o)〉 (concept labels of the form {a mathematical formula}∃P,∃P− for a role P are not shown). Notice that the dashed edge {a mathematical formula}(o,w[R]) represents the fact that the role type {a mathematical formula}rΓgen(Ksb)(o,w[R]) is empty.{a mathematical formula}  □</paragraph><paragraph label="Example 7.4">Assume that {a mathematical formula}M=({A,B,C,D},{A′,B′},B), where {a mathematical formula}B={A⊑A′,B⊑B′,C⊑¬A′,D⊑B′}, and let {a mathematical formula}S={D⊑C}. Then {a mathematical formula}T={A′⊑¬B′} is not a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M. To see that, consider source ABox {a mathematical formula}As={A(a),B(a)}: it is consistent with {a mathematical formula}S∪B, but inconsistent with {a mathematical formula}T∪B. So for {a mathematical formula}q=A′(b) where b is a constant distinct from a, {a mathematical formula}〈S∪B,As〉⊭q, and {a mathematical formula}〈T∪B,As〉⊨q. Let us verify that using the characterization. In fact, although, {a mathematical formula}T satisfies condition (i) for the pair of concepts {a mathematical formula}(A,D), which is both {a mathematical formula}S∪B-inconsistent and {a mathematical formula}T∪B-inconsistent, {a mathematical formula}T violates this condition for the pair {a mathematical formula}(A,B), which is clearly {a mathematical formula}S∪B-consistent, however {a mathematical formula}T∪B-inconsistent as {a mathematical formula}T∪B entails both {a mathematical formula}A⊑¬B′ and {a mathematical formula}B⊑B′. We note that in general, {a mathematical formula}S is not {a mathematical formula}UCQ-representable under {a mathematical formula}M.  □</paragraph><paragraph label="Lemma 7.5">Note that the proof of Lemma 7.1 implies an alternative characterization of {a mathematical formula}UCQ-representations in terms of homomorphisms. A TBox{a mathematical formula}Tover Γ is a{a mathematical formula}UCQ-representation of a TBox{a mathematical formula}Sover Σ under a mapping{a mathematical formula}M=(Σ,Γ,B) if and only if the following conditions hold:</paragraph><list><list-item label="–">for each ABox{a mathematical formula}Asconsistent with{a mathematical formula}S,{a mathematical formula}〈S∪B,As〉is consistent iff{a mathematical formula}〈T∪B,As〉is consistent;</list-item><list-item label="–">for each ABox{a mathematical formula}Asconsistent with{a mathematical formula}S∪B,{a mathematical formula}uni(S∪B,As)is Γ-homomorphically equivalent to{a mathematical formula}uni(T∪B,As).</list-item></list><paragraph label="Theorem 7.6">We can devise an efficient algorithm for checking the membership problem for {a mathematical formula}UCQ-representations from the conditions in Lemma 7.1. Combining it with the complexity of reasoning in DL-Lite{a mathematical formula}R, we obtain the following complexity bound, which provides the main result of this section. The membership problem for{a mathematical formula}UCQ-representations isNLogSpace-complete.</paragraph><paragraph label="Proof">The lower bound can be obtained by the following reduction from the directed graph reachability problem, which is known to be NLogSpace-hard: given a graph {a mathematical formula}G=(V,E) and a pair of vertices {a mathematical formula}vk,vm∈V, decide if there is a directed path from {a mathematical formula}vk to {a mathematical formula}vm. To encode the problem, we need a source signature Σ of concept names {a mathematical formula}{Vi|vi∈V} and a target signature Γ of concept names {a mathematical formula}{Vi′|vi∈V}. Consider {a mathematical formula}S={Vk⊑Vm}∪{Vi⊑Vj|(vi,vj)∈E}, {a mathematical formula}B={Vi⊑Vi′|vi∈V}, and {a mathematical formula}T={Vi′⊑Vj′|(vi,vj)∈E}. One can easily verify that the condition (ii) of Lemma 7.1 is satisfied iff there is a directed path from {a mathematical formula}vk to {a mathematical formula}vm in {a mathematical formula}G, whereas the other conditions of Lemma 7.1 are satisfied trivially. Therefore, there is a directed path from {a mathematical formula}vk to {a mathematical formula}vm in {a mathematical formula}G iff {a mathematical formula}T is a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M=(Σ,Γ,B). This concludes the proof of the lower bound.For the upper bound, we show that conditions (i)–(iv) of Lemma 7.1 can be verified in NLogSpace. It is well known (see, e.g., [61]), that given a pair B, {a mathematical formula}B′ of DL-Lite{a mathematical formula}R concepts, and a TBox {a mathematical formula}O, it can be verified in NLogSpace, if {a mathematical formula}(B,B′) is {a mathematical formula}O-consistent (using an algorithm for directed graph reachability); the same holds for a pair R, {a mathematical formula}R′ of DL-Lite{a mathematical formula}R roles. The same algorithm can be straightforwardly adopted to check, if {a mathematical formula}O⊨B⊑B′ or {a mathematical formula}O⊨R⊑R′. Therefore, clearly, conditions (i) and (ii) can be verified in NLogSpace. Conditions (iii) and (iv) can be checked similarly to the proof of Proposition 6.3.  □</paragraph></section><section label="7.2"><section-title>The non-emptiness problem</section-title><paragraph label="Example 7.7">We start with examples that provide some intuition on how the non-emptiness problem is solved. Consider {a mathematical formula}M and the {a mathematical formula}UCQ-representable TBox {a mathematical formula}S from Example 5.17-(3): {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,B,C}, {a mathematical formula}Γ={A′,B′,C′}, and {a mathematical formula}B={A⊑A′,B⊑B′,A⊑C′}, and {a mathematical formula}S={A⊑B}. It follows that {a mathematical formula}S∪B⊨A⊑B′. A first and obvious requirement for a {a mathematical formula}UCQ-representation {a mathematical formula}T is that {a mathematical formula}T should entail an axiom of the form {a mathematical formula}D′⊑B′ so that {a mathematical formula}T∪B⊨A⊑B′ (hence, {a mathematical formula}B⊨A⊑D′). On the other hand, it could be that {a mathematical formula}B⊨D⊑D′ for some D distinct from A, in which case it follows also {a mathematical formula}T∪B⊨D⊑B′. Since we want {a mathematical formula}T to be a {a mathematical formula}UCQ-representation, it should be the case that {a mathematical formula}S∪B⊨D⊑B′. In our case, we can take {a mathematical formula}D′ equal to {a mathematical formula}A′ or {a mathematical formula}C′, and there exists no such concept D (distinct from A). Hence, there are two {a mathematical formula}UCQ-representations of {a mathematical formula}S under {a mathematical formula}M, namely {a mathematical formula}{A′⊑B′} and {a mathematical formula}{C′⊑B′}.Consider now the slightly different {a mathematical formula}B={A⊑A′,B⊑B′,C⊑A′} from Example 5.17-(4), where we showed that {a mathematical formula}S is not {a mathematical formula}UCQ-representable. As before, {a mathematical formula}S∪B⊨A⊑B′. However now, the only candidate for {a mathematical formula}D′ is {a mathematical formula}A′, and there exists a concept D distinct from A, namely C, such that {a mathematical formula}B⊨D⊑A′. So on the one hand, the only way to have a {a mathematical formula}UCQ-representation {a mathematical formula}T is to include axiom {a mathematical formula}A′⊑B′ in {a mathematical formula}T, but on the other hand since {a mathematical formula}S∪B⊭C⊑B′, this axiom cannot be in {a mathematical formula}T. In general, there is no way to “represent” the inclusion {a mathematical formula}A⊑B′ in the target, so in this case {a mathematical formula}S is not {a mathematical formula}UCQ-representable under {a mathematical formula}M.  □</paragraph><paragraph label="Example 7.8">Consider {a mathematical formula}M, {a mathematical formula}S and {a mathematical formula}B from Example 7.4 such that {a mathematical formula}S is not {a mathematical formula}UCQ-representable under {a mathematical formula}M. It follows that the pair of concepts {a mathematical formula}(A,D) is {a mathematical formula}S∪B-inconsistent as {a mathematical formula}S∪B⊨A⊑A′ and {a mathematical formula}S∪B⊨D⊑¬A′. So a candidate {a mathematical formula}UCQ-representation {a mathematical formula}T should be such that {a mathematical formula}(A,D) is {a mathematical formula}T∪B-inconsistent. One possible way to achieve that is by having {a mathematical formula}T∪B⊨D⊑¬A′, and since D is transferred only to {a mathematical formula}B′ through the mapping, it means that {a mathematical formula}T should entail {a mathematical formula}B′⊑¬A′, or {a mathematical formula}B′⊑¬B′, or {a mathematical formula}A′⊑¬A′. In the first case, however, the pair {a mathematical formula}(A,B) would be {a mathematical formula}T∪B-inconsistent as well, since {a mathematical formula}A⊑A′ and {a mathematical formula}B⊑B′ are in {a mathematical formula}B. Then, for {a mathematical formula}T to be a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M, {a mathematical formula}(A,B) should be {a mathematical formula}S∪B-inconsistent, which is not the case. In the second case, the pair {a mathematical formula}(B,B) would be {a mathematical formula}T∪B-inconsistent, while it is {a mathematical formula}S∪B-consistent. Similarly, we obtain that it cannot be the case that {a mathematical formula}T⊨A′⊑¬A′. In general, it is impossible to have a target TBox {a mathematical formula}T such that {a mathematical formula}(A,D) is {a mathematical formula}T∪B-inconsistent and {a mathematical formula}T is a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M, i.e., it is impossible to enforce that concepts A and D “contradict” each other in the target.  □</paragraph><paragraph label="Definition 7.10">We illustrated in the examples above that in order to check whether {a mathematical formula}S is {a mathematical formula}UCQ-representable under {a mathematical formula}M one needs to verify whether the axioms implied by {a mathematical formula}S∪B are “representable”, and whether {a mathematical formula}S∪B-inconsistent pairs are “target contradictable”. To formally define these notions, which are required for the characterization in Lemma 7.13, we first introduce the following notion. We say that a target TBox {a mathematical formula}T is a parsimonious{a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M, if for every ABox {a mathematical formula}As over Σ that is consistent with {a mathematical formula}S, {a mathematical formula}〈S∪B,As〉 Γ-query entails {a mathematical formula}〈T∪B,As〉. Observe that the empty TBox is a parsimonious {a mathematical formula}UCQ-representation. In the definitions below, X and Y denote basic concepts or roles over Σ, and {a mathematical formula}X′ denotes a basic concept or role over Γ. Inclusion {a mathematical formula}X⊑X′ is representable in {a mathematical formula}S and {a mathematical formula}M, if there exists a (possibly trivial) target axiom α such that, whenever {a mathematical formula}T is a parsimonious {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M, it holds that {a mathematical formula}T′=T∪{α} is also a parsimonious {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M, and moreover {a mathematical formula}T′∪B⊨X⊑X′.In this case, we say that {a mathematical formula}X⊑X′ is representable via α.Pair {a mathematical formula}(X,Y) is target contradictable in {a mathematical formula}S and {a mathematical formula}M, if there exists a (possibly trivial) target axiom α such that, whenever {a mathematical formula}T is a parsimonious {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M, it holds that {a mathematical formula}T′=T∪{α} is also a parsimonious {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M, and moreover {a mathematical formula}(X,Y) is {a mathematical formula}T′∪B-inconsistent.In this case, we say that {a mathematical formula}(X,Y) is target contradictable via α.</paragraph><paragraph label="Definition 7.11">Our last definition before we present a characterization of the cases when {a mathematical formula}S is {a mathematical formula}UCQ-representable under {a mathematical formula}M is the notion of a generating path. In the case a concept B generates a role R in {a mathematical formula}S∪B, {a mathematical formula}B↝S∪BR, existence of a generating path for {a mathematical formula}(B,R) ensures that there exists a parsimonious {a mathematical formula}UCQ-representation {a mathematical formula}T satisfying condition (iii) of Lemma 7.1 for B and R. For a TBox {a mathematical formula}O and a concept B (resp., role R), denote by {a mathematical formula}supΣO(B) (resp., {a mathematical formula}supΣO(R)) the set of all concepts {a mathematical formula}B′ (resp., roles {a mathematical formula}R′) over Σ such that {a mathematical formula}O⊨B⊑B′ (resp., {a mathematical formula}O⊨R⊑R′). Let B be a concept over Σ and R a role. A generating path for{a mathematical formula}(B,R) in {a mathematical formula}S and {a mathematical formula}M is a sequence {a mathematical formula}〈C0,C1,…Cn〉 of concepts, with {a mathematical formula}n≥0, such that {a mathematical formula}C0=B, and such that for {a mathematical formula}1≤i≤n and {a mathematical formula}0≤j≤n the following holds:</paragraph><list><list-item>{a mathematical formula}Ci=∃Qi− for some role {a mathematical formula}Qi such that {a mathematical formula}S∪B⊨Ci−1⊑∃Qi and {a mathematical formula}supΓS∪B(Qi)≠∅;</list-item><list-item>for each {a mathematical formula}Dj∈supΓS∪B(Cj), inclusion {a mathematical formula}Cj⊑Dj is representable in {a mathematical formula}S and {a mathematical formula}M;</list-item><list-item>for each {a mathematical formula}Si∈supΓS∪B(Qi), inclusion {a mathematical formula}Qi⊑Si is representable in {a mathematical formula}S and {a mathematical formula}M;</list-item><list-item>{a mathematical formula}supΓS∪B(∃R−)⊆supΓS∪B(Cn), and if {a mathematical formula}supΓS∪B(R)≠∅, then {a mathematical formula}n=1 and {a mathematical formula}supΓS∪B(R)⊆supΓS∪B(Q1).</list-item></list><paragraph label="Example 7.12">Consider {a mathematical formula}M and {a mathematical formula}S from Example 7.3. Then {a mathematical formula}〈A,∃S−,∃Q−〉 is a generating path for {a mathematical formula}(A,R) in {a mathematical formula}S and {a mathematical formula}M. Below we represent it graphically, where the {a mathematical formula}supΓS∪B labels are shown to the right.{a mathematical formula} To the contrary, for {a mathematical formula}M and {a mathematical formula}S from Example 7.2, there exists no generating path for {a mathematical formula}(A,R) in {a mathematical formula}S and {a mathematical formula}M.  □</paragraph><paragraph label="Lemma 7.13">Having defined all notions above, we provide a characterization of the cases when {a mathematical formula}S is {a mathematical formula}UCQ-representable under {a mathematical formula}M, which has a similar structure to the characterization of {a mathematical formula}UCQ-representations in Lemma 7.1. Given a mapping{a mathematical formula}M=(Σ,Γ,B)and a TBox{a mathematical formula}Sover Σ,{a mathematical formula}Sis{a mathematical formula}UCQ-representable under{a mathematical formula}M, if and only if the following conditions are satisfied:</paragraph><list><list-item>For each{a mathematical formula}S-consistent pair of concepts or roles{a mathematical formula}X,Yover Σ, such that{a mathematical formula}(X,Y)is{a mathematical formula}S∪B-inconsistent,{a mathematical formula}(X,Y)is target contradictable in{a mathematical formula}Sand{a mathematical formula}M.</list-item><list-item>For each{a mathematical formula}S∪B-consistent concept or role X over Σ and each{a mathematical formula}X′over Γ such that{a mathematical formula}S∪B⊨X⊑X′, inclusion{a mathematical formula}X⊑X′is representable in{a mathematical formula}Sand{a mathematical formula}M.</list-item><list-item>For each{a mathematical formula}S∪B-consistent concept B over Σ and each role R such that{a mathematical formula}B↝S∪BR, there exists a generating path for{a mathematical formula}(B,R)in{a mathematical formula}Sand{a mathematical formula}M.</list-item></list><paragraph label="Proof">(⇐) Assume that conditions (I)–(III) are satisfied, we construct a TBox {a mathematical formula}T over Γ and prove that it is a {a mathematical formula}UCQ-representation for {a mathematical formula}S under {a mathematical formula}M. The required {a mathematical formula}T will be given as the union of the three sets of axioms presented below. First, let {a mathematical formula}(B,C) be an {a mathematical formula}S-consistent and {a mathematical formula}S∪B-inconsistent pair of concepts over Σ, then {a mathematical formula}(B,C) is target contradictable by condition (I): assume that {a mathematical formula}(B,C) is target contradictable via α, then define set {a mathematical formula}axi(B,C) to be equal to {a mathematical formula}{α}. Similarly, we define {a mathematical formula}axi(R,Q)={α} for an {a mathematical formula}S-consistent and {a mathematical formula}S∪B-inconsistent pair of roles {a mathematical formula}R,Q over Σ. Next, take an {a mathematical formula}S∪B-consistent concept B over Σ, and assume that {a mathematical formula}S∪B⊨B⊑C′ for {a mathematical formula}C′ over Γ, then by condition (II), {a mathematical formula}B⊑C′ is representable in {a mathematical formula}S and {a mathematical formula}M: let {a mathematical formula}axii(B,C′)={α} such that {a mathematical formula}B⊑C′ is representable via α. Similarly, for an {a mathematical formula}S∪B-consistent role R over Σ and {a mathematical formula}Q′ over Γ, such that {a mathematical formula}S∪B⊨R⊑Q′. Finally, for each {a mathematical formula}S∪B-consistent concept B over Σ and each role R such that {a mathematical formula}B↝S∪BR, define the set {a mathematical formula}axiii(B,R) from the generating path {a mathematical formula}〈C0,…,Cn〉 for {a mathematical formula}(B,R) in {a mathematical formula}S and {a mathematical formula}M given by condition (III). Take {a mathematical formula}axiii(B,R) equal to the set of all axioms α, where {a mathematical formula}Ci⊑Di is representable via α in (B), or {a mathematical formula}Qi⊑Si is representable via α in (C). Finally we have:{a mathematical formula}Then it immediately follows that {a mathematical formula}T is a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M: On the one hand, by construction, {a mathematical formula}T is a parsimonious {a mathematical formula}UCQ-representation. On the other hand, the ⇒ directions of conditions (i) and (ii), and condition (iii) of Lemma 7.1 are satisfied by construction of {a mathematical formula}T and by definition of {a mathematical formula}axi,axii,axiii. From this it follows that for each ABox {a mathematical formula}As consistent with {a mathematical formula}S, {a mathematical formula}〈T∪B,As〉 Γ-query entails {a mathematical formula}〈S∪B,As〉. Hence, indeed, {a mathematical formula}T is a {a mathematical formula}UCQ-representation of {a mathematical formula}S under {a mathematical formula}M.(⇒) Let {a mathematical formula}T be a {a mathematical formula}UCQ-representation for {a mathematical formula}S under {a mathematical formula}M. It is easy to see that conditions (I) and (II) are satisfied.We show that condition (III) is satisfied; assume that B is an {a mathematical formula}S∪B-consistent concept over Σ and {a mathematical formula}B↝S∪BR for some role R. By condition (iii) of Lemma 7.1 it follows that there exists {a mathematical formula}y∈Δgen(T∪B,B(o)) such that {a mathematical formula}tΓgen(S∪B,B(o))(w[R])⊆tΓgen(T∪B,B(o))(y), and {a mathematical formula}rΓgen(S∪B,B(o))(o,w[R])⊆rΓgen(T∪B,B(o))(o,y). Assume that {a mathematical formula}y=w[Qn] for {a mathematical formula}n≥0, where {a mathematical formula}o↝〈T∪B,B(o)〉w[Q1]↝⋯↝w[Qn]. Then {a mathematical formula}T∪B⊨{B⊑∃Q1}∪⋃i=1n−1{∃Qi−⊑∃Qi+1}∪{∃Qn−⊑B′}, for all {a mathematical formula}B′∈tΓgen(S∪B,B(o))(w[R]), and {a mathematical formula}rΓgen(S∪B,B(o))(o,w[R])≠∅ implies {a mathematical formula}n=1 and {a mathematical formula}T∪B⊨Q1⊑R′ for all {a mathematical formula}R′∈rΓgen(S∪B,B(o))(o,w[R]). One can show by induction on n that for each i, {a mathematical formula}1≤i≤n, there exist {a mathematical formula}Si over Σ such that {a mathematical formula}S∪B⊨Si⊑Qi and {a mathematical formula}S∪B⊨{B⊑∃S1}∪⋃i=1n−1{∃Si−⊑∃Si+1}∪{∃Sn−⊑B′}, for all {a mathematical formula}B′∈tΓgen(S∪B,B(o))(w[R]). We define the sequence {a mathematical formula}〈C0,…,Cn〉 as {a mathematical formula}C0=B, and {a mathematical formula}Ci=∃Si−, for {a mathematical formula}1≤i≤n: it can be straightforwardly verified that {a mathematical formula}〈C0,…,Cn〉 is a generating path for {a mathematical formula}(B,R) in {a mathematical formula}S and {a mathematical formula}M.  □</paragraph><paragraph label="Example 7.14">We now use the above characterization to verify {a mathematical formula}UCQ-representability in the following examples. Consider {a mathematical formula}M and {a mathematical formula}S from Example 7.3, that is, {a mathematical formula}M=(Σ,Γ,B), where{a mathematical formula} Then one can see that conditions (II)–(III) are satisfied. Thus, for instance, {a mathematical formula}S∪B⊨A⊑∃S′ and {a mathematical formula}S∪B⊨∃S−⊑∃Q′: clearly both inclusions are representable in {a mathematical formula}S and {a mathematical formula}M. Then, {a mathematical formula}A↝S∪BR and {a mathematical formula}A↝S∪BS, and in both cases there exist generating paths: {a mathematical formula}〈A,∃S−,∃Q−〉 from Example 7.12 and {a mathematical formula}〈A,∃S−〉, respectively. This confirms that {a mathematical formula}S is {a mathematical formula}UCQ-representable under {a mathematical formula}M.  □</paragraph><paragraph label="Example 7.15">Consider {a mathematical formula}M and {a mathematical formula}S from Example 7.2, that is, {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,R}, {a mathematical formula}Γ={A′,R′,B′}, {a mathematical formula}B={A⊑A′,∃R−⊑B′}, and {a mathematical formula}S={A⊑∃R}.In contrast with the previous example, condition (III) is not satisfied. In fact, {a mathematical formula}A↝S∪BR, however there exists no generating path for {a mathematical formula}(A,R) in {a mathematical formula}S and {a mathematical formula}M as we mentioned in Example 7.12. So indeed, {a mathematical formula}S is not {a mathematical formula}UCQ-representable under {a mathematical formula}M.  □</paragraph><paragraph label="Example 7.16">Consider {a mathematical formula}M and {a mathematical formula}S from Example 5.19–(3), that is, {a mathematical formula}M=(Σ,Γ,B), where {a mathematical formula}Σ={A,B,C}, {a mathematical formula}Γ={A′,B′}, {a mathematical formula}B={A⊑A′,B⊑B′,C⊑¬A′}, and {a mathematical formula}S={B⊑C}. We show that condition (I) is satisfied: the pairs {a mathematical formula}(A,C) and {a mathematical formula}(A,B) are {a mathematical formula}S∪B-inconsistent. As the former pair is already {a mathematical formula}B-inconsistent, this case is not interesting. For the latter pair, one can easily verify that {a mathematical formula}(A,B) is target contradictable in {a mathematical formula}S and {a mathematical formula}M via {a mathematical formula}B′⊑¬A′: in particular, {a mathematical formula}T={B′⊑¬A′} is a parsimonious {a mathematical formula}UCQ-representation, and {a mathematical formula}(A,B) is {a mathematical formula}T∪B-inconsistent.  □</paragraph><paragraph label="Proof">Finally, we obtain the complexity bound of the non-emptiness problem for {a mathematical formula}UCQ-representations. The non-emptiness problem for{a mathematical formula}UCQ-representations isNLogSpace-complete.As in the case of Theorem 7.6, the lower bound is shown by a reduction from the directed graph reachability problem, however, we need a slightly more involved encoding. To encode the graph {a mathematical formula}G=(V,E), we use a set {a mathematical formula}{Vi|vi∈V}∪{S1,F1,S2,F2} of Σ-concept names and a set {a mathematical formula}{Vi′|vi∈V}∪{S′,F′} of Γ-concept names. Consider the TBox{a mathematical formula} where {a mathematical formula}vk and {a mathematical formula}vm are, respectively, the initial and final vertices. Then, let{a mathematical formula} we show:<list>there is a directed path from {a mathematical formula}vk to {a mathematical formula}vm in {a mathematical formula}G iff there exists a {a mathematical formula}UCQ-representation for {a mathematical formula}S under {a mathematical formula}M=(Σ,Γ,B).To show the upper bound, we prove that conditions </list><paragraph>(I)–(III) of Lemma 7.13 can be checked in NLogSpace. First, one can derive syntactic conditions that allow one to check whether an inclusion is representable in {a mathematical formula}S and {a mathematical formula}M, and whether a pair is target contradictable in {a mathematical formula}S and {a mathematical formula}M (see Proposition D.1, Proposition D.2, Proposition D.3, Proposition D.4). In fact, these conditions can be checked using a directed graph reachability algorithm, similar to what is done in the proof of Theorem 7.6. The new case is condition (III); to verify for an {a mathematical formula}S∪B-consistent concept B over Σ and a role R such that {a mathematical formula}B↝S∪BR, that there exists a generating path {a mathematical formula}π=〈C0,…Cn〉 for {a mathematical formula}(B,R) in {a mathematical formula}S and {a mathematical formula}M, we can use the following procedure, which runs in NLogSpace. First, we take {a mathematical formula}C0=B and guess whether the path should end here (i.e., {a mathematical formula}n=0). If we guessed so, it only remains to verify condition (D). This verification can be performed in NLogSpace, similarly to the method described in the proof of Theorem 7.6. If, on the other hand, we guessed that the path should continue, we guess {a mathematical formula}C1=∃Q− for some role Q, and verify that conditions (A), (B) and (C) are satisfied. Now, if we guess that the path should stop, it remains to verify condition (D). If, on the contrary, we guess that the path should continue, we can forget {a mathematical formula}C0, guess {a mathematical formula}C2, and proceed with it in the same way as we did with {a mathematical formula}C1. Finally, when we reach the concept {a mathematical formula}Cn, such that the algorithm guesses to stop, it remains to verify condition (D). It should be clear that whenever a generating path {a mathematical formula}π=〈C0,…Cn〉 for {a mathematical formula}(B,R) in {a mathematical formula}S and {a mathematical formula}M exists, we can find it by the above non-deterministic procedure. Note that n is bounded by the number of roles in {a mathematical formula}S∪B, since every generating path in which a role appears more than once can be shortened to one in which the subpath between the first and last occurrence of the role is removed (in fact, if {a mathematical formula}〈C0,…,Ci,…,Cj,…,Cn〉 is a generating path for {a mathematical formula}(B,R) in {a mathematical formula}S and {a mathematical formula}M, for {a mathematical formula}0≤i&lt;j and {a mathematical formula}Ci=Cj, then it is easy to see that {a mathematical formula}〈C0,…,Ci−1,Cj,…,Cn〉 is also a generating path for {a mathematical formula}(B,R) in {a mathematical formula}S and {a mathematical formula}M).  □</paragraph></paragraph><paragraph>We conclude this section by observing that the proof of Lemma 7.13 contained an algorithm for computing a {a mathematical formula}UCQ-representation in the case {a mathematical formula}S is {a mathematical formula}UCQ-representable under {a mathematical formula}M.</paragraph></section></section><section label="8"><section-title>Concluding remarks and future work</section-title><paragraph>In this article, we have defined the problem of exchanging knowledge between a source and a target KB connected through a mapping. In particular, we have considered source KBs, target KBs, and mappings specified in the Description Logic DL-Lite{a mathematical formula}R, which is the logic underlying OWL 2 QL (one of the three profiles of the standard Web Ontology Language OWL 2), and we have studied some fundamental problems related to the exchange of knowledge in this context. We have developed novel game- and automata-theoretic techniques, and have provided complexity results for these problems that range from NLogSpace to ExpTime.</paragraph><paragraph>As future work, we first note that the complexity of the non-emptiness problem has not been pinpointed in all cases (see Table 1). In particular, it would be interesting to close the gap between the lower and upper bounds for the complexity of this problem for universal solutions and extended ABoxes, as we currently know it to be PSpace-hard and included in ExpTime. Moreover, it would also be interesting to establish a lower bound for this problem for the case of universal {a mathematical formula}UCQ-solutions and simple ABoxes, and to prove it to be decidable for the case of universal {a mathematical formula}UCQ-solutions and extended ABoxes. Second, the target signature in the non-emptiness problem is allowed to include new concepts or roles neither in universal solutions nor in universal {a mathematical formula}UCQ-solutions nor in {a mathematical formula}UCQ-representations. The problem of allowing such additional symbols in these constructions is certainly interesting and worth investigating in the future. Third, it is interesting to study the problem of knowledge exchange for richer ontology formalisms, such as the DLs of the {a mathematical formula}ALC-family, DLs with number restrictions or functionality, or existential rule languages/Datalog{sup:±}[66], [67], [68]. The aim would be to understand for which variants of such formalisms the existing techniques can be extended, and which variants instead would require a novel approach. For example, the techniques based on reachability games and two-way alternating tree automata, both of which heavily rely on the canonical model property, can be extended to other Horn DLs, such as DL-Lite{a mathematical formula}hornH, {a mathematical formula}ELH, and Horn-{a mathematical formula}ALCHI, similarly to the approach in [30]. Finally, in this work we have not dealt with other standard data exchange reasoning tasks, such as composition and inversion of mappings [69], [70], [31], [20], [21]. These problems are certainly of interest in the KB exchange framework, and will be the subject of further investigation.</paragraph><section-title>Acknowledgements</section-title></section></content><acknowledgements><paragraph>This research has been partially supported by the EU large-scale Integrating Project Optique (Scalable End-user Access to Big Data), grant FP7-318338. M. Arenas was supported by the Millennium Nucleus Center for Semantic Web Research under grant NC120004 and Fondecyt grant 1131049. The authors are also grateful to Evgeny Sherkhonov for help with the preliminary results, and to Roman Kontchakov for helpful comments and discussions.</paragraph></acknowledgements><appendices><section label="Appendix A">Proofs in Section 5<section label="A.1">Proof of Proposition 5.3<paragraph label="Proof">For the sake of contradiction, assume that {a mathematical formula}T is not trivial, that is, there exists an interpretation {a mathematical formula}J⋆=〈ΔJ⋆,⋅J⋆〉 of Γ such that {a mathematical formula}J⋆⊭T.Given that {a mathematical formula}〈S∪B,As〉 is consistent, there exists an interpretation {a mathematical formula}I⋆=〈ΔI⋆,⋅I⋆〉 of {a mathematical formula}(Σ∪Γ) such that {a mathematical formula}I⋆⊨〈S∪B,As〉. Then define interpretations {a mathematical formula}I=〈ΔI,⋅I〉 of Σ and {a mathematical formula}J=〈ΔJ,⋅J〉 of Γ as follows: (1) {a mathematical formula}ΔI=ΔJ=ΔI⋆; (2) {a mathematical formula}aI=aJ=aI⋆, for every constant {a mathematical formula}a∈Na; (3) {a mathematical formula}A1I=A1I⋆ and {a mathematical formula}A2J=A2I⋆, for every pair of concept names {a mathematical formula}A1∈Σ and {a mathematical formula}A2∈Γ; and (4) {a mathematical formula}P1I=P1I⋆ and {a mathematical formula}P2J=P2I⋆, for every pair of role names {a mathematical formula}P1∈Σ and {a mathematical formula}P2∈Γ. By definition of {a mathematical formula}I, {a mathematical formula}J and given that {a mathematical formula}I⋆⊨〈S∪B,As〉, we conclude that {a mathematical formula}I∈Mod(Ks) and {a mathematical formula}(I,J)⊨B.Without loss of generality, we assume that {a mathematical formula}ΔI⋆∩ΔJ⋆=∅. Then define an interpretation {a mathematical formula}J′ of Γ as follows: (1) {a mathematical formula}ΔJ′=ΔI⋆∪ΔJ⋆; (2) {a mathematical formula}aJ′=aI⋆, for every constant {a mathematical formula}a∈Na; (3) {a mathematical formula}AJ′=AI⋆∪AJ⋆, for every concept name {a mathematical formula}A∈Γ; and (4) {a mathematical formula}PJ′=PI⋆∪PJ⋆, for every role name {a mathematical formula}P∈Γ. Given that {a mathematical formula}(I,J)⊨B, we conclude that {a mathematical formula}(I,J′)⊨B. In fact, for every concept inclusion {a mathematical formula}B1⊑B2∈B, where {a mathematical formula}B1, {a mathematical formula}B2 are basic concepts, we have that {a mathematical formula}B1I⊆B2J′ given that {a mathematical formula}B1I⊆B2J, {a mathematical formula}B2J=B2I⋆ and {a mathematical formula}B2J′=B2I⋆∪B2J⋆. Moreover, for every concept inclusion {a mathematical formula}B1⊑¬B2∈B, where {a mathematical formula}B1, {a mathematical formula}B2 are basic concepts, we have that {a mathematical formula}B1I⊆(¬B2)J′ given that {a mathematical formula}B1I⊆(¬B2)J, {a mathematical formula}(¬B2)J=(¬B2)I⋆ and {a mathematical formula}(¬B2)J′=(¬B2)I⋆∪(¬B2)J⋆ (since {a mathematical formula}B2J′=B2I⋆∪B2J⋆ and {a mathematical formula}ΔI⋆∩ΔJ⋆=∅). Finally, for role inclusions {a mathematical formula}R1⊑R2 and {a mathematical formula}R1⊑¬R2 in {a mathematical formula}B, where {a mathematical formula}R1, {a mathematical formula}R2 are basic roles, we conclude that {a mathematical formula}R1I⊆R2J′ and {a mathematical formula}R1I⊆(¬R2)J′ as in the previous two cases.From the results in the previous paragraph, we conclude that {a mathematical formula}J′∈SatM(Mod(Ks)) (since {a mathematical formula}J′∈SatM(I) and {a mathematical formula}I∈Mod(Ks)). On the other hand, we have that {a mathematical formula}J′⊭T, by definition of {a mathematical formula}J′ and given that {a mathematical formula}J⋆⊭T. Thus, we have that {a mathematical formula}J′⊭Kt and, thus, {a mathematical formula}J′∉Mod(Kt). Therefore, we conclude that {a mathematical formula}SatM(Mod(Ks))≠Mod(Kt), which contradicts the fact that {a mathematical formula}Kt is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M. This concludes the proof of the proposition.  □</paragraph></section></section><section label="Appendix B">Proofs in Section 6<section label="B.1">Proof of Lemma 6.2<paragraph label="Proof">In this proof we assume that {a mathematical formula}Ks=〈S,As〉 and we denote by {a mathematical formula}Ksb the KB {a mathematical formula}〈S∪B,As〉.(⇒) Let {a mathematical formula}At be a universal solution for {a mathematical formula}Ks under {a mathematical formula}M. Then {a mathematical formula}uni(At) is Γ-homomorphically equivalent to {a mathematical formula}uni(Ksb): since {a mathematical formula}At is a solution, there exists {a mathematical formula}I, a model of {a mathematical formula}Ks, such that {a mathematical formula}(I,uni(At))⊨B. Then {a mathematical formula}I∪uni(At) is a model of {a mathematical formula}Ksb, therefore there is a homomorphism h from {a mathematical formula}uni(Ksb) to {a mathematical formula}I∪uni(At). As Σ and Γ are disjoint signatures it follows that h is a Γ-homomorphism from {a mathematical formula}uni(Ksb) to {a mathematical formula}uni(At). On the other hand, as {a mathematical formula}At is a universal solution, {a mathematical formula}J, the interpretation of Γ obtained from {a mathematical formula}uni(Ksb) is a model of {a mathematical formula}At with a substitution {a mathematical formula}h′. This {a mathematical formula}h′ is exactly a homomorphism from {a mathematical formula}uni(At) to {a mathematical formula}uni(Ksb). Thus, we showed (hom).For the sake of contradiction, assume that (safe) does not hold, i.e., {a mathematical formula}Ks is not Γ-safe with respect to {a mathematical formula}M, and e.g., (cs) does not hold, i.e., there is a disjointness axiom in {a mathematical formula}S of the form {a mathematical formula}B⊑¬C, such that {a mathematical formula}(B,C) is not safe. Then both B and C are not safe in {a mathematical formula}uni(Ksb): for some {a mathematical formula}b∈Buni(Ksb) and {a mathematical formula}c∈Cuni(Ksb),{a mathematical formula} Let h be a Γ-homomorphism from {a mathematical formula}uni(Ksb) to {a mathematical formula}uni(At) (it exists by (hom)), and {a mathematical formula}h(b)=t and {a mathematical formula}h(c)=s. Then it follows that{a mathematical formula} Take a model {a mathematical formula}J of {a mathematical formula}At with a substitution {a mathematical formula}hJ such that {a mathematical formula}ΔJ={d} (hence, {a mathematical formula}tJ=sJ). Such a model exists because {a mathematical formula}At does not assert any negative information and the UNA does not hold. First, assume that both b and c are constants (i.e., {a mathematical formula}bJ=cJ). Then, obviously there exists no model {a mathematical formula}I of Σ such that {a mathematical formula}I⊨Ks and {a mathematical formula}(I,J)⊨B: in every such {a mathematical formula}I, {a mathematical formula}bI must be equal to {a mathematical formula}cI which contradicts {a mathematical formula}B⊑¬C, and {a mathematical formula}bI∈BI and {a mathematical formula}cI∈CI. Now, assume that at least b is not a constant and {a mathematical formula}tail(b)=w[R] for some role R over Σ (hence, {a mathematical formula}b∈(∃R−)uni(Ksb) and {a mathematical formula}S⊨∃R−⊑B). Let {a mathematical formula}B′∈tΓuni(Ksb)(b), then by construction of the canonical model, {a mathematical formula}S∪B⊨∃R−⊑B′, by homomorphism, {a mathematical formula}B′(t)∈At, and by construction of {a mathematical formula}J, {a mathematical formula}B′J={d}. As {a mathematical formula}At is a universal solution, let {a mathematical formula}I be a model of {a mathematical formula}Ks such that {a mathematical formula}(I,J)⊨B. Then {a mathematical formula}(∃R−)I is non-empty and {a mathematical formula}(∃R−)I⊆B′J. It immediately follows that {a mathematical formula}d∈(∃R−)I, hence {a mathematical formula}d∈BI. By a similar argument, it can be shown that d must be in {a mathematical formula}CI, which contradicts that {a mathematical formula}I is a model of {a mathematical formula}B⊑¬C. Contradiction with {a mathematical formula}At being a universal solution.Similar to (cs) we can derive a contradiction if assume that (rs) does not hold.Now, assume (re) does not hold, i.e., {a mathematical formula}B⊑¬B′∈B and {a mathematical formula}Buni(Ksb)≠∅. Note that {a mathematical formula}At is an extended ABox, i.e., it contains only assertions of the form {a mathematical formula}A(u), {a mathematical formula}P(u,v) for {a mathematical formula}u,v∈Na∪Nl. Take a model {a mathematical formula}J of {a mathematical formula}At such that {a mathematical formula}B′J=ΔJ. Such {a mathematical formula}J exists as {a mathematical formula}At contains only positive facts. Since {a mathematical formula}At is a universal solution, there exist a model {a mathematical formula}I of {a mathematical formula}Ks such that {a mathematical formula}(I,J)⊨B. Then, {a mathematical formula}BI≠∅, and it is easy to see that {a mathematical formula}(I,J)⊭B⊑¬B′ because {a mathematical formula}ΔJ∖B′J=∅ and {a mathematical formula}BI⊈ΔJ∖B′J.Similar to (ce) we can derive a contradiction if assume that (re) does not hold.In every case we derive a contradiction, hence {a mathematical formula}Ks is Γ-safe with respect to {a mathematical formula}M.(⇐) Assume (hom) and (safe) hold. We show that {a mathematical formula}At is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M.First, {a mathematical formula}At is a solution for {a mathematical formula}Ks under {a mathematical formula}M. Let {a mathematical formula}J be a model of {a mathematical formula}At, and {a mathematical formula}h1 a homomorphism from {a mathematical formula}uni(At) to {a mathematical formula}J. Furthermore, let h be a Γ-homomorphism from {a mathematical formula}uni(Ksb) to {a mathematical formula}uni(At). Then {a mathematical formula}h2(x)=h1(h(x)) is a Γ-homomorphism from {a mathematical formula}uni(Ksb) to {a mathematical formula}J. Let {a mathematical formula}I be the interpretation of Σ defined as the image of {a mathematical formula}h2 applied to {a mathematical formula}uni(Ks), i.e., {a mathematical formula}I=h2(uni(Ks)). Next, define a new function {a mathematical formula}h′:Δuni(Ks)→Δ∪ΔI, where Δ is an infinite set of domain elements disjoint from {a mathematical formula}ΔI, as follows:<list>{a mathematical formula}h′(x)=h2(x) if {a mathematical formula}tΓuni(Ksb)(x)≠∅ or {a mathematical formula}x∈Na.{a mathematical formula}h′(x)=dx, a fresh domain element from Δ, otherwise.Let </list><paragraph>{a mathematical formula}S⊨B⊑¬C for basic concepts {a mathematical formula}B,C. By contradiction, assume {a mathematical formula}I′⊭B⊑¬C, i.e., for some {a mathematical formula}d∈ΔI′, {a mathematical formula}d∈BI′∩CI′. We defined {a mathematical formula}I′ as the image of {a mathematical formula}h′ on {a mathematical formula}uni(Ks), hence there must exist {a mathematical formula}b,c∈Δuni(Ks) such that {a mathematical formula}b∈Buni(Ks), {a mathematical formula}c∈Cuni(Ks), and {a mathematical formula}h′(b)=h′(c)=d. Then, since {a mathematical formula}Ks is Γ-safe with respect to {a mathematical formula}M, it follows that {a mathematical formula}(B,C) is safe and it cannot be the case that{a mathematical formula} Assume b is a null and {a mathematical formula}tΓuni(Ksb)(b)=∅. Then by definition of {a mathematical formula}h′, {a mathematical formula}h′(b)=db∈Δ (hence {a mathematical formula}d=db). In either case c is a constant, or {a mathematical formula}tΓuni(Ksb)(c)≠∅, or {a mathematical formula}tΓuni(Ksb)(c)=∅, we obtain contradiction with {a mathematical formula}h′(b)=db=h′(c) (recall, Δ and {a mathematical formula}ΔI are disjoint). Contradiction rises from the assumption {a mathematical formula}I⊭B⊑¬C.Next, assume {a mathematical formula}S⊨R⊑¬Q for roles {a mathematical formula}R,Q, and {a mathematical formula}I′⊭R⊑¬Q, i.e., for some {a mathematical formula}d1,d2∈ΔI′, {a mathematical formula}(d1,d2)∈RI′∩QI′. We defined {a mathematical formula}I′ as the image of {a mathematical formula}h′ on {a mathematical formula}uni(Ks), hence there must exist {a mathematical formula}b1,b2,c1,c2∈Δuni(Ks) such that {a mathematical formula}(b1,b2)∈Runi(Ks), {a mathematical formula}(c1,c2)∈Quni(Ks), and {a mathematical formula}h′(bi)=h′(ci)=di for {a mathematical formula}i=1,2. Then, since {a mathematical formula}Ks is Γ-safe with respect to {a mathematical formula}M, it follows that {a mathematical formula}(R,Q) is safe and it cannot be the case that 1) R and Q are not safe, i.e.,{a mathematical formula} or 2) {a mathematical formula}tΓuni(Ksb)(b2)≠∅ and {a mathematical formula}tΓuni(Ksb)(c2)≠∅ if {a mathematical formula}b1=c1. Consider the following possible cases:</paragraph><list><list-item label="–">{a mathematical formula}b1 is a null and {a mathematical formula}tΓuni(Ksb)(b1)=∅. Then by definition of {a mathematical formula}h′, {a mathematical formula}h′(b1)=db1∈Δ (and {a mathematical formula}d1=db1).</list-item></list><paragraph> The cases {a mathematical formula}b2 or {a mathematical formula}ci are nulls with the empty Γ-type are covered by swapping R and Q or by taking their inverses.Finally, assume {a mathematical formula}B⊑¬B′∈B and {a mathematical formula}(I′,J)⊭B⊑¬B′, i.e., for some {a mathematical formula}d∈BI′, {a mathematical formula}d∉ΔJ∖CJ. Then there must exist {a mathematical formula}b∈Buni(Ks) such that {a mathematical formula}h′(b)=d. Contradiction with (ce). Similarly, we derive a contradiction with (re) if assume that {a mathematical formula}R⊑¬R′∈B and {a mathematical formula}(I′,J)⊭R⊑¬R′.Therefore, indeed, {a mathematical formula}I is a model of {a mathematical formula}Ks and {a mathematical formula}(I,J)⊨B. This concludes the proof {a mathematical formula}At is a solution for {a mathematical formula}Ks under {a mathematical formula}M.Second, {a mathematical formula}At is a universal solution. Let {a mathematical formula}I be a model of {a mathematical formula}Ks and {a mathematical formula}J an interpretation of Γ such that {a mathematical formula}(I,J)⊨M. Then, since {a mathematical formula}uni(Ksb) is the canonical model of {a mathematical formula}Ksb, there exists a homomorphism h from {a mathematical formula}uni(Ksb) to {a mathematical formula}I∪J ({a mathematical formula}I∪J is a model of {a mathematical formula}Ksb). In turn, there is a homomorphism {a mathematical formula}h1 from {a mathematical formula}uni(At) to {a mathematical formula}uni(Ksb), therefore {a mathematical formula}h′=h∘h1 is a homomorphism from {a mathematical formula}uni(At) to {a mathematical formula}I∪J, and a Γ-homomorphism from {a mathematical formula}uni(At) to {a mathematical formula}J. Hence, {a mathematical formula}J is a model of {a mathematical formula}At: take {a mathematical formula}h′ as the substitution for the labeled nulls. By definition of universal solution, {a mathematical formula}At is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M.  □</paragraph></paragraph></section><section label="B.2">Proof of Lemma 6.8<paragraph label="Proof">The proof is inspired by one in [30], but makes use of a reduction from the Circuit Value problem, known to be PTime-complete [63, Theorem 8.1], instead of a reduction from the Horn Satisfiability problem. Given a monotone Boolean circuit C consisting of a finite set of assignments to Boolean variables {a mathematical formula}P1,…,Pn of the form {a mathematical formula}Pi=0, {a mathematical formula}Pi=1, {a mathematical formula}Pi=Pj∧Pk, {a mathematical formula}j,k&lt;i, or {a mathematical formula}Pi=Pj∨Pk, {a mathematical formula}j,k&lt;i, where each {a mathematical formula}Pi appears on the left-hand side of exactly one assignment, check whether the value {a mathematical formula}Pn is 1 in C.We fix signatures {a mathematical formula}Σ={P,L,R} and {a mathematical formula}Γ={L′,R′}. Let {a mathematical formula}a1,…,an∈Na, and consider{a mathematical formula} Note that Σ, Γ, {a mathematical formula}S, and {a mathematical formula}B do not depend on C, hence the reduction provides a lower bound for data complexity. We show that the value of {a mathematical formula}Pn in C is 1 if and only if {a mathematical formula}At is a universal solution for {a mathematical formula}Ks=〈S,As〉 under {a mathematical formula}M=(Σ,Γ,B). Denote by {a mathematical formula}Ksb the KB {a mathematical formula}〈S∪B,As〉. Clearly, {a mathematical formula}uni(At)⊆uni(Ksb) (independently of the value of {a mathematical formula}Pn in C). So, it suffices to show that the value of {a mathematical formula}Pn in C is 1 if and only if {a mathematical formula}uni(Ksb) is Γ-homomorphically embeddable into {a mathematical formula}uni(At).(⇒) Suppose {a mathematical formula}Pn evaluates to 1 in C. Observe that the projection of {a mathematical formula}uni(Ksb) over Γ contains an infinite binary tree whose root is {a mathematical formula}an, and in which each left edge is labeled with {a mathematical formula}L′ and each right edge is labeled with {a mathematical formula}R′. We define a Γ-homomorphism h from {a mathematical formula}uni(Ksb)an to {a mathematical formula}uni(At) by induction on the length of {a mathematical formula}σ∈Δuni(Ksb)an. Note that, since Γ contains only role names, the local homomorphism condition is trivially satisfied.For the base case, we set {a mathematical formula}h(an)=an. For the inductive step, assume the value of {a mathematical formula}Pi is 1 and we already defined {a mathematical formula}h(σ)=ai for {a mathematical formula}σ∈Δuni(Ksb)an. Consider the following three cases. First, if {a mathematical formula}Pi=Pj∧Pk in C, then {a mathematical formula}At contains assertions {a mathematical formula}L′(ai,aj) and {a mathematical formula}R′(ai,ak), moreover, {a mathematical formula}Pj and {a mathematical formula}Pk both evaluate to 1: we set {a mathematical formula}h(σw[L])=aj and {a mathematical formula}h(σw[R])=ak. Second, if {a mathematical formula}Pi=Pj∨Pk in C, then {a mathematical formula}At contains assertions {a mathematical formula}L′(ai,aj),R′(ai,aj) and {a mathematical formula}L′(ai,ak),R′(ai,ak), and at least one of {a mathematical formula}Pj and {a mathematical formula}Pk evaluates to 1, assume it is {a mathematical formula}Pj: we set {a mathematical formula}h(σw[L])=aj and {a mathematical formula}h(σw[R])=aj. Finally, if {a mathematical formula}Pi=1 in C, then {a mathematical formula}At contains assertions {a mathematical formula}L′(ai,ai) and {a mathematical formula}R′(ai,ai): we set {a mathematical formula}h(σw[L])=ai and {a mathematical formula}h(σw[R])=ai. Hence, by construction, h is a Γ-homomorphism.(⇐) Suppose {a mathematical formula}At is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M. Then {a mathematical formula}uni(S∪B,As) is Γ-homomorphically embeddable in {a mathematical formula}uni(At). We prove that the value of {a mathematical formula}Pn is 1 in C.Let h be a Γ-homomorphism from {a mathematical formula}uni(Ksb) to {a mathematical formula}uni(At). Since {a mathematical formula}uni(Ksb)an is an infinite tree, and the only role cycles that {a mathematical formula}At contains are loops of the form {a mathematical formula}L′(ai,ai) and {a mathematical formula}R′(ai,ai), there exists a bound m such that for each {a mathematical formula}σ=anw[S1]⋯w[Sm]∈Δuni(Ksb)an with {a mathematical formula}Sj∈{L,R}, it holds {a mathematical formula}h(σ)=ai for some i such that {a mathematical formula}Pi=1 in C.Assume {a mathematical formula}1≤ℓ≤m and for each {a mathematical formula}σ=anw[S1]⋯w[Sℓ] with {a mathematical formula}Sj∈{L,R} and each {a mathematical formula}1≤i≤n, the value of {a mathematical formula}Pi is 1 in C whenever {a mathematical formula}h(σ)=ai. We verify by induction on ℓ that for each {a mathematical formula}δ=anw[S1]⋯w[Sℓ−1] and each {a mathematical formula}1≤i≤n, the value of {a mathematical formula}Pi is 1 in C whenever {a mathematical formula}h(δ)=ai. Assume that {a mathematical formula}h(δw[L])=aj, {a mathematical formula}h(δw[R])=ak and the values of {a mathematical formula}Pj and {a mathematical formula}Pk are 1 in C, moreover {a mathematical formula}h(δ)=ai. If {a mathematical formula}i=j=k, then obviously the value of {a mathematical formula}Pi is 1 in C. Otherwise {a mathematical formula}i≠j and {a mathematical formula}i≠k. If {a mathematical formula}j=k, then given that h is a Γ-homomorphism, {a mathematical formula}At contains assertions {a mathematical formula}L′(ai,aj) and {a mathematical formula}R′(ai,aj) (hence, {a mathematical formula}As contains assertions {a mathematical formula}L(ai,aj) and {a mathematical formula}R(ai,aj)). By construction of {a mathematical formula}As, it follows that there is an assignment {a mathematical formula}Pi=Pj∨Pj′ in C for some {a mathematical formula}j′. As {a mathematical formula}Pj is 1, we obtain that also {a mathematical formula}Pi evaluates to 1. If {a mathematical formula}j≠k, then {a mathematical formula}At contains assertions {a mathematical formula}L′(ai,aj) and {a mathematical formula}R′(ai,ak), so by construction of {a mathematical formula}As there is an assignment {a mathematical formula}Pi=Pj∧Pk or {a mathematical formula}Pi=Pj∨Pk in C. Again it follows that {a mathematical formula}Pi evaluates to 1 in C. By induction, {a mathematical formula}Pn evaluates to 1 in C.  □</paragraph></section><section label="B.3">Proof of Lemma 6.12<paragraph label="Proof">The proof is by reduction from 3-colorability of undirected graphs known to be NP-hard. Consider an undirected graph {a mathematical formula}G=(V,E), which we view as a symmetric directed graph, and fix signatures {a mathematical formula}Σ={E(⋅,⋅)} and {a mathematical formula}Γ={E′(⋅,⋅)}. Further, let {a mathematical formula}r,g,b∈Na, {a mathematical formula}V⊆Nl and{a mathematical formula} Note that the nodes in {a mathematical formula}G become labeled nulls in {a mathematical formula}At. We show that {a mathematical formula}G is 3-colorable if and only if {a mathematical formula}At is a universal solution for {a mathematical formula}Ks=〈S,As〉 under {a mathematical formula}M=(Σ,Γ,B).(⇒) Suppose {a mathematical formula}G is 3-colorable. Then it follows that there exists a function h that assigns to each vertex from {a mathematical formula}V one of the colors {a mathematical formula}{r,g,b} such that if {a mathematical formula}(x,y)∈E, then {a mathematical formula}h(x)≠h(y). Hence h is a homomorphism from {a mathematical formula}G to the undirected graph {a mathematical formula}({r,g,b},{(r,g),(g,b),(b,r)}).We prove that {a mathematical formula}At is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M by employing Lemma 6.2. Obviously, {a mathematical formula}Ks is Γ-safe with respect to {a mathematical formula}M. Thus, it remains to verify that {a mathematical formula}uni(At) is Γ-homomorphically equivalent to {a mathematical formula}uni(S∪B,As). First, it is easy to see that {a mathematical formula}uni(S∪B,As) is Γ-homomorphically embeddable into {a mathematical formula}uni(At). Second, h is also a homomorphism from {a mathematical formula}uni(At) to {a mathematical formula}uni(S∪B,As). Thus {a mathematical formula}At is indeed a universal solution for {a mathematical formula}Ks under {a mathematical formula}M.(⇐) Suppose now {a mathematical formula}At is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M. Then by Lemma 6.2 it follows that {a mathematical formula}uni(At) is Γ-homomorphically equivalent to {a mathematical formula}uni(S∪B,As). Let h be a homomorphism from {a mathematical formula}uni(At) to {a mathematical formula}uni(S∪B,As). Notice that {a mathematical formula}Δuni(S∪B,As)=ind(As), hence h assigns to each labeled null {a mathematical formula}x∈Δuni(At) some constant {a mathematical formula}a∈ind(As), and it is easy to see that h is an assignment for the vertices in {a mathematical formula}V that is a 3-coloring of {a mathematical formula}G.  □</paragraph></section><section label="B.4">Proof of Lemma 6.15<paragraph label="Proof">The proof is by reduction from the validity problem for Quantified Boolean Formulas (QBF), known to be PSpace-complete. Consider a QBF{a mathematical formula} where {a mathematical formula}Qi∈{∀,∃} and {a mathematical formula}Cj, {a mathematical formula}1≤j≤m, are clauses over the variables {a mathematical formula}Xi, {a mathematical formula}1≤i≤n.Let {a mathematical formula}Σ={A,Q0,Qi,Qik,Rj,P0,Pi,Pik,Rj0,Rji|j∈{1,…,m},i∈{1,…,n},k∈{0,1}} where A is a concept name and the rest are role names. Let {a mathematical formula}S be the following TBox over Σ for {a mathematical formula}j∈{1,…,m}, {a mathematical formula}i∈{1,…,n} and {a mathematical formula}k∈{0,1}:{a mathematical formula}{a mathematical formula} and {a mathematical formula}As={A(a)}.Further, let {a mathematical formula}Γ={Xi0,Xi1,T,Sj} where {a mathematical formula}Xi0,Xi1 are concept names and {a mathematical formula}T,Sj are role names, {a mathematical formula}M=(Σ,Γ,B), and {a mathematical formula}B the following set of inclusions:{a mathematical formula} Then, ⊨φ if and only if {a mathematical formula}uni(S∪B,As) is Γ-homomorphically embeddable into a finite subset of itself, i.e., if and only if a universal solution for {a mathematical formula}Ks=〈S,As〉 under {a mathematical formula}M exists. We show this following the line of the proof of Theorem 11 in the full version of [55].(⇒) Suppose ⊨φ. We show that the canonical model {a mathematical formula}uni(S∪B,As) is Γ-homomorphically embeddable into a finite subset of itself. More precisely, let us denote with {a mathematical formula}Sinf the subset of {a mathematical formula}S consisting of the first 6 axioms (B.1), and {a mathematical formula}Sfin the subset of {a mathematical formula}S consisting of the last 6 axioms (B.2). Then {a mathematical formula}uni(S∪B,As)=uni(Sinf∪B,As)∪uni(Sfin∪B,As). In the following we use {a mathematical formula}Uinf to denote {a mathematical formula}uni(Sinf∪B,As), and {a mathematical formula}Ufin to denote {a mathematical formula}uni(Sfin∪B,As), and show how to construct a Γ-homomorphism {a mathematical formula}h:Uinf→Ufin.We begin by setting {a mathematical formula}h(a)=a. Then we define h in such a way that, for each path π in {a mathematical formula}Uinf of length {a mathematical formula}i+1≤n, {a mathematical formula}h(π) is a path of the form {a mathematical formula}aw[P1k1]⋯w[Piki] in {a mathematical formula}Ufin and it defines an assignment {a mathematical formula}αh(π) to the variables {a mathematical formula}X1,…,Xi by taking {a mathematical formula}αh(π)(Xi′)=⊤ if {a mathematical formula}ki′=1 and {a mathematical formula}αh(π)(Xi′)=⊥ if {a mathematical formula}ki′=0, for all {a mathematical formula}1≤i′≤i. Such assignments {a mathematical formula}αh(π) will satisfy the following:{a mathematical formula} For the paths of length 1 the Γ-homomorphism h has been defined and (α) trivially holds. Suppose that we have defined h for all paths in {a mathematical formula}Uinf of length {a mathematical formula}i+1≤n. We extend h to all paths of length {a mathematical formula}i+2 in {a mathematical formula}Uinf such that (α) holds. Let π be a path of length {a mathematical formula}i+1. Observe that {a mathematical formula}h(π) has two successors in {a mathematical formula}Ufin: {a mathematical formula}h(π)⋅w[Pi+10] and {a mathematical formula}h(π)⋅w[Pi+11]. Now,<list>if {a mathematical formula}Qi=∀ then π has two successors in {a mathematical formula}Uinf: {a mathematical formula}π⋅w[Qi+10] and {a mathematical formula}π⋅w[Qi+11]. Thus, we set {a mathematical formula}h(π⋅w[Qi+1k])=h(π)⋅w[Pi+1k], for {a mathematical formula}k=0,1. Clearly, (α) holds.if {a mathematical formula}Qi=∃ then π has one successor in {a mathematical formula}Uinf: {a mathematical formula}π⋅w[Qi+1]. Since φ is valid, by (α) the QBF obtained from φ by removing {a mathematical formula}Q1X1…QiXi is true under either {a mathematical formula}αh(π)∪{Xi↦⊤} or {a mathematical formula}αh(π)∪{Xi↦⊥}. We set {a mathematical formula}h(π⋅w[Qi+1])=h(π)⋅w[Pi+1k] where {a mathematical formula}k=1 in the former case, and {a mathematical formula}k=0 in the latter case. Either way, (α) holds.(⇐) Let </list><paragraph>h be a Γ-homomorphism from {a mathematical formula}Uinf to {a mathematical formula}Ufin. We show that ⊨φ.Let {a mathematical formula}π=a⋅w1⋯wn be a path of length {a mathematical formula}n+1 in {a mathematical formula}Uinf. Then its homomorphic image {a mathematical formula}h(π) must be of the form {a mathematical formula}a⋅w[P1k1]⋯w[Pnkn]. This implies a variable assignment {a mathematical formula}απ: {a mathematical formula}απ(Xi)=⊤ if {a mathematical formula}ki=1 and {a mathematical formula}απ(Xi)=⊥ if {a mathematical formula}ki=0, for {a mathematical formula}1≤i≤n. It is sufficient to show that {a mathematical formula}απ⊨Cj for every {a mathematical formula}1≤j≤m, i.e, the clause {a mathematical formula}Cj contains at least one of the literals {a mathematical formula}Xi with {a mathematical formula}απ(Xi)=⊤, or {a mathematical formula}¬Xi with {a mathematical formula}απ(Xi)=⊥.Consider a path {a mathematical formula}π⋅w[Rj]⋅…⋅w[Rj] of length {a mathematical formula}2n+2 in {a mathematical formula}Uinf (i.e., {a mathematical formula}w[Rj] is repeated {a mathematical formula}n+1 times). Then its h-image in {a mathematical formula}Ufin must be of the form {a mathematical formula}a⋅w[P1k1]⋅…⋅w[Piki]⋅w[Rji]⋅w[Rji−1]⋅…⋅w[Rj0] for some {a mathematical formula}1≤i≤n. Now, by construction of {a mathematical formula}S, if {a mathematical formula}ki=0 (hence, {a mathematical formula}απ(Xi)=⊥), then {a mathematical formula}Cj must contain {a mathematical formula}¬Xi, otherwise {a mathematical formula}Cj must contain {a mathematical formula}Xi.  □</paragraph></paragraph><paragraph>We illustrate the above reduction with the following example.</paragraph><paragraph label="Example B.1">Let us consider the QBF {a mathematical formula}ϕ=∃X1∀X2∃X3(X1∧(X2∨¬X3)), which is valid. A finite portion of the projection of {a mathematical formula}uni(S∪B,As) over Γ is depicted in Fig. 6, where each edge {an inline-figure} is labeled with T, each edge {an inline-figure} is labeled with T, {a mathematical formula}S1−, {a mathematical formula}S2−, and the labels of edges {an inline-figure} are shown to the left of each infinite and finite path. The concept labels of the individuals (if any) are shown next to them.Let {a mathematical formula}Uinf be the projection over Γ of the part of {a mathematical formula}uni(S∪B,As) generated using the axiom templates (B.1) of {a mathematical formula}S; similarly, for {a mathematical formula}Ufin and the axiom templates (B.2). Note that {a mathematical formula}Uinf is infinite, while {a mathematical formula}Ufin is finite. Intuitively, in {a mathematical formula}Ufin, the dashed part is a full binary tree representing all possible assignments to the variables {a mathematical formula}X1, {a mathematical formula}X2, {a mathematical formula}X3, where edges whose target node is labeled with {a mathematical formula}Xi0 (resp., {a mathematical formula}Xi1) represent the assignment of 0 (resp., 1) to variable {a mathematical formula}Xi. Moreover, each solid part (ending in a loop) starting at a node labeled {a mathematical formula}Xi0 (resp., {a mathematical formula}Xi1) and labeled with {a mathematical formula}S1 represents the fact that literal {a mathematical formula}¬Xi (resp., {a mathematical formula}Xi) appears in clause {a mathematical formula}C1; analogously for {a mathematical formula}S2 and {a mathematical formula}C2. As for {a mathematical formula}Uinf, the dash-dotted part represents the quantifier prefix of ϕ: if quantifier {a mathematical formula}Qi is ∃, then there is a single edge at level i (counting from individual a); instead, if quantifier {a mathematical formula}Qi is ∀, then there are two distinct edges at level i, one whose target node is labeled with {a mathematical formula}Xi0 and one whose target node is labeled with {a mathematical formula}Xi1. For each clause {a mathematical formula}Cj, each node at level 3 is the origin of an infinite chain, all of whose edges are labeled with {a mathematical formula}Sj.The QBF ϕ is valid, and we show that there is indeed a Γ-homomorphism h from {a mathematical formula}Uinf to {a mathematical formula}Ufin (hence, {a mathematical formula}uni(S∪B,As) is Γ-homomorphically embeddable into {a mathematical formula}Ufin). Therefore, the ABox obtained from {a mathematical formula}Ufin is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M. First, by considering the assignment of 1 to {a mathematical formula}X1, we obtain the formula {a mathematical formula}∀X2∃X3(1∧(X2∨¬X3)), which is valid. Hence h maps {a mathematical formula}x=aw[Q1] to the node in {a mathematical formula}Ufin labeled with {a mathematical formula}X11. Then, for assignment of 0 to {a mathematical formula}X2 we obtain {a mathematical formula}∃X3(0∨¬X3), and for assignment of 1 to {a mathematical formula}X2 we obtain {a mathematical formula}∃X3(1∨¬X3), which are both valid. Hence h maps {a mathematical formula}y=xw[Q20] to the successor of {a mathematical formula}h(x) labeled with {a mathematical formula}X20 and {a mathematical formula}z=xw[Q21] to the successor of {a mathematical formula}h(x) labeled with {a mathematical formula}X21. Finally, in the case where {a mathematical formula}X2=0, for the assignment of 0 to {a mathematical formula}X3, we obtain {a mathematical formula}0∨¬0, which is valid; instead, in the case where {a mathematical formula}X2=1, any assignment to {a mathematical formula}X3, e.g., 1 can be used. Hence h maps {a mathematical formula}u=yw[Q3] to the successor of {a mathematical formula}h(y) labeled with {a mathematical formula}X30 and {a mathematical formula}v=zw[Q3] to the successor of {a mathematical formula}h(z) labeled with {a mathematical formula}X31. Since for all considered assignments the clauses of ϕ are satisfied, h can indeed map each infinite chain starting from u and v, to a chain in {a mathematical formula}Ufin ending in a loop. For example, the infinite chain starting from v and labeled with {a mathematical formula}S1 is mapped to the path in {a mathematical formula}Ufin that starts with the dashed edges connecting {a mathematical formula}h(v) to {a mathematical formula}h(z) and {a mathematical formula}h(x), and continues with the edge and loop labeled with {a mathematical formula}S1.  □</paragraph></section><section label="B.5">Proof of Lemma 6.16<paragraph label="Proof">Let {a mathematical formula}M=(Σ,Γ,B) be a mapping, and {a mathematical formula}Ks=〈S,As〉 a KB over Σ. We construct {a mathematical formula}Ks′ and {a mathematical formula}M′ such that there exists a universal solution for {a mathematical formula}Ks under {a mathematical formula}M iff there exists a universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ks′ under {a mathematical formula}M′.Define {a mathematical formula}M′ to be equal to {a mathematical formula}(Σ′,Γ′,B′), where {a mathematical formula}Σ′ extends Σ with fresh concept and roles names {a mathematical formula}{X1|X∈Γ} and fresh role names {a mathematical formula}Q1,Q2, {a mathematical formula}Γ′ extends Γ with a fresh role name Q, and {a mathematical formula}B′=B∪{X1⊑X|X∈Γ}∪{Q1⊑Q,Q2⊑Q}. Let {a mathematical formula}Ks′=〈S′,As′〉, where {a mathematical formula}As′ is the union of {a mathematical formula}As, assertions{a mathematical formula} for fresh constants {a mathematical formula}aX,bX for each symbol X, and assertions {a mathematical formula}{∃Q1(aQ),Q2(aQ,bQ)}, for fresh constants {a mathematical formula}aQ,bQ. If {a mathematical formula}Ks is not Γ-safe with respect to {a mathematical formula}M, then {a mathematical formula}S′=S∪{∃Q1−⊑∃Q1}, otherwise {a mathematical formula}S′=S. We prove {a mathematical formula}Ks′ and {a mathematical formula}M′ are as required.Assume {a mathematical formula}Ks and {a mathematical formula}M are inconsistent, that is, the KB {a mathematical formula}〈S∪B,As〉 is inconsistent. Then each inconsistent target KB is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M. On the other hand, {a mathematical formula}Ks′ and {a mathematical formula}M′ are inconsistent, and, again, each inconsistent target KB is a universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ks′ under {a mathematical formula}M′. In what follows, we assume {a mathematical formula}Ks and {a mathematical formula}M are consistent, and {a mathematical formula}Ks′ and {a mathematical formula}M′ are consistent.Assume there exists a universal solution {a mathematical formula}At for {a mathematical formula}Ks under {a mathematical formula}M. Then {a mathematical formula}Ks is Γ-safe with respect to {a mathematical formula}M, and it is easy to see that {a mathematical formula}At∪{X(aX)|X∈Γ is a concept name}∪{X(aX,bX)|X∈Γ is a role name}∪{Q(aQ,bQ)} is a universal {a mathematical formula}UCQ-solution for {a mathematical formula}Ks′ under {a mathematical formula}M′.Now, assume there exists a universal {a mathematical formula}UCQ-solution {a mathematical formula}Kt=〈T,At〉 for {a mathematical formula}Ks′ under {a mathematical formula}M′. First, it follows that {a mathematical formula}uni(S′∪B′,As′) does not contain an infinite Q-chain starting from {a mathematical formula}aQ, hence {a mathematical formula}S′ does not contain the axiom {a mathematical formula}∃Q1−⊑∃Q1 and {a mathematical formula}Ks is Γ-safe with respect to {a mathematical formula}M. Second, without loss of generality, we may assume that {a mathematical formula}T does not contain disjointness axioms and {a mathematical formula}At is closed with respect to {a mathematical formula}T. Finally, {a mathematical formula}uni(Kt) is finitely Γ-homomorphically equivalent to {a mathematical formula}uni(S′∪B′,As′), so for each concept name {a mathematical formula}A∈Γ, {a mathematical formula}A(aA)∈At and for each role name {a mathematical formula}P∈Γ, {a mathematical formula}P(aP,bP)∈At. We show that {a mathematical formula}T is a trivial TBox. By contradiction, assume {a mathematical formula}α∈T is a non-trivial axiom. Consider various cases of α: {a mathematical formula}α=A⊑B,for concept name B distinct from concept name A. Then {a mathematical formula}Kt⊨B(aA), however {a mathematical formula}〈S′∪B′,As′〉⊭B(aA), hence it is not the case {a mathematical formula}uni(Kt) is finitely Γ-homomorphically equivalent to {a mathematical formula}uni(S∪B′,As′). Contradiction.{a mathematical formula}α=∃P⊑A,for role name P. Then {a mathematical formula}Kt⊨A(aP), however {a mathematical formula}〈S′∪B′,As′〉⊭A(aP), hence it is not the case {a mathematical formula}uni(Kt) is finitely Γ-homomorphically equivalent to {a mathematical formula}uni(S′∪B′,As′). Contradiction.{a mathematical formula}α=∃P−⊑A,for role name P. As above, but in this case {a mathematical formula}Kt⊨A(bP) and {a mathematical formula}〈S′∪B′,As′〉⊭A(bP).{a mathematical formula}α=P⊑R,for role R distinct from role name P. Then {a mathematical formula}Kt⊨R(aP,bP), however {a mathematical formula}〈S′∪B′,As′〉⊭R(aP,bP), hence it is not the case {a mathematical formula}uni(Kt) is finitely Γ-homomorphically equivalent to {a mathematical formula}uni(S′∪B′,As′). Contradiction.{a mathematical formula}α=A⊑∃R,for role R. Then there exists {a mathematical formula}σ∈Δuni(Kt) distinct from {a mathematical formula}aA such that {a mathematical formula}R∈runi(Kt)(aA,σ). Since in {a mathematical formula}uni(S′∪B′,As′), {a mathematical formula}aA is not connected to anything, {a mathematical formula}uni(Kt) is not finitely Γ-homomorphically embeddable into {a mathematical formula}uni(S′∪B′,As′). Contradiction.{a mathematical formula}α=∃P⊑∃R,for role R distinct from role name P. Then there exists {a mathematical formula}σ∈Δuni(Kt) distinct from {a mathematical formula}aP such that {a mathematical formula}R∈runi(Kt)(aP,σ). If {a mathematical formula}σ=bP then we get a contradiction similar to the case {a mathematical formula}α=P⊑R. If {a mathematical formula}σ≠bP then we get a contradiction as above.{a mathematical formula}α=∃P−⊑∃R,for role R distinct from {a mathematical formula}P−. As above.{a mathematical formula}α=∃P−⊑∃P,for role name P. Then in {a mathematical formula}uni(Kt) there exists an infinite P-chain starting from {a mathematical formula}bP, and obviously, it is not finitely Γ-homomorphically embeddable into {a mathematical formula}uni(S′∪B′,As′). Contradiction. Therefore, {a mathematical formula}T is a trivial TBox, so we obtain that {a mathematical formula}uni(At) is finitely Γ-homomorphically equivalent to {a mathematical formula}uni(S′∪B′,As′). Since {a mathematical formula}uni(At) is finite, it follows {a mathematical formula}uni(At) is Γ-homomorphically equivalent to {a mathematical formula}uni(S′∪B′,As′). Let {a mathematical formula}At− be the subset of {a mathematical formula}At such that {a mathematical formula}ind(At′)=ind(As). It is easy to see that {a mathematical formula}uni(At−) is Γ-homomorphically equivalent to {a mathematical formula}uni(S∪B,As), and as {a mathematical formula}Ks is Γ-safe with respect to {a mathematical formula}M, we conclude that {a mathematical formula}At− is a universal solution for {a mathematical formula}Ks under {a mathematical formula}M.  □</paragraph></section><section label="B.6"><section-title>Reachability games on graphs</section-title><paragraph>Reachability games are two-person infinite games. Here we employ the “Spoiler vs. Duplicator” terminology instead of the standard “Player 0 vs. Player 1” terminology used for instance in [62], as we find it more intuitive.</paragraph><paragraph>A game is played by two players: Spoiler and Duplicator, and defined by a game arena (or playground) and a winning condition. A (game) arena is a triple {a mathematical formula}A=(S,D,T), where {a mathematical formula}P=S∪D is a finite set of states, {a mathematical formula}S∩D=∅, and {a mathematical formula}T⊆P×P is a transition relation. The game starts in some state {a mathematical formula}s0∈P, and it is played in turns. In each turn, if the current state s is in {a mathematical formula}S, then Spoiler chooses some state {a mathematical formula}s′∈P such that {a mathematical formula}(s,s′)∈T, and if the current state s is in {a mathematical formula}D, then Duplicator chooses some state {a mathematical formula}s′∈P such that {a mathematical formula}(s,s′)∈T. Thus, each play in the game is viewed as a path π, which can be infinite (i.e., {a mathematical formula}π=s0⋅s1⋅s2⋯, where {a mathematical formula}si∈P and {a mathematical formula}(si,si+1)∈T for every {a mathematical formula}i≥0) or finite (i.e., {a mathematical formula}π=s0⋅s1⋅s2⋯sk∈Pk+1, where {a mathematical formula}(si,si+1)∈T for every {a mathematical formula}i∈{0,…,k−1} and {a mathematical formula}{s|(sk,s)∈T}=∅).</paragraph><paragraph>The winning condition characterizes the plays won by Spoiler. We consider a reachability condition specified as a set {a mathematical formula}F⊆P of accepting states. Given a winning condition F, a play π is a win for Spoiler iff some state from F occurs in π. Finally, a reachability game is a pair {a mathematical formula}G=(G,F) where {a mathematical formula}G is a game arena and F is a reachability condition.</paragraph><paragraph>A strategy for Spoiler from state s is a (partial) function {a mathematical formula}fS:P⁎S→P that assigns to each finite sequence of states {a mathematical formula}s0⋅s1⋯sk with {a mathematical formula}s0=s and {a mathematical formula}sk∈S, a successor state {a mathematical formula}sk+1 such that {a mathematical formula}(sk,sk+1)∈T. A play {a mathematical formula}π=s0⋅s1⋯ is said to conform with strategy {a mathematical formula}fS if {a mathematical formula}si+1=f0(s0s1…si) for every {a mathematical formula}i≥0 such that {a mathematical formula}si∈S. Then, a strategy {a mathematical formula}fS is a winning strategy for Spoiler from{a mathematical formula}s∈P, if every play that conforms with {a mathematical formula}fS and starts in s is a win for Spoiler. The corresponding notions for Duplicator are defined analogously.</paragraph><paragraph label="Proposition B.2">[62], [71]Given a reachability game{a mathematical formula}G=(A,F)and a state s in{a mathematical formula}A, it can be checked inPTimewhether Spoiler (or Duplicator) has a winning strategy from s.</paragraph></section><section label="B.7"><section-title>Two-way alternating automata</section-title><paragraph>Infinite trees are represented as prefix closed (infinite) sets of words over {a mathematical formula}N (the set of positive natural numbers). Formally, an infinite tree is a set of words {a mathematical formula}T⊆N⁎, such that if {a mathematical formula}x⋅c∈T, where {a mathematical formula}x∈N⁎ and {a mathematical formula}c∈N, then also {a mathematical formula}x∈T. The elements of T are called nodes, the empty word ϵ is the root of T, and for every {a mathematical formula}x∈T, the nodes {a mathematical formula}x⋅c, with {a mathematical formula}c∈N, are the successors of x. By convention we take {a mathematical formula}x⋅0=x, and {a mathematical formula}x⋅i⋅−1=x. The branching degree {a mathematical formula}d(x) of a node x denotes the number of successors of x. If the branching degree of all nodes of a tree is bounded by k, we say that the tree has branching degree k. An infinite path P of T is a prefix closed set {a mathematical formula}P⊆T such that for every {a mathematical formula}i≥0 there exists a unique node {a mathematical formula}x∈P with {a mathematical formula}|x|=i. A labeled tree over an alphabet Σ is a pair {a mathematical formula}(T,V), where T is a tree and {a mathematical formula}V:T→Σ maps each node of T to an element of Σ.</paragraph><paragraph>Alternating automata on infinite trees are a generalization of nondeterministic automata on infinite trees, introduced in [72]. They allow for an elegant reduction of decision problems for temporal and program logics [73], [74]. Let {a mathematical formula}B(I) be the set of positive boolean formulae over I, built inductively by applying ∧ and ∨ starting from ⊤ (denoting true), ⊥ (denoting false), and elements of I. For a set {a mathematical formula}J⊆I and a formula {a mathematical formula}ϕ∈B(I), we say that J satisfies ϕ if and only if, assigning true to the elements in J and false to those in {a mathematical formula}I∖J, makes ϕ true. For a positive integer k, let {a mathematical formula}[k]={−1,0,1,…,k}. A two-way alternating tree automaton (2ATA) running over infinite trees with branching degree k, is a tuple {a mathematical formula}A=〈Σ,Q,δ,q0,F〉, where Σ is the input alphabet, Q is a finite set of states, {a mathematical formula}δ:Q×Σ→B([k]×Q) is the transition function, {a mathematical formula}q0∈Q is the initial state, and F specifies the acceptance condition.</paragraph><paragraph>The transition function maps a state {a mathematical formula}q∈Q and an input letter {a mathematical formula}σ∈Σ to a positive boolean formula over {a mathematical formula}[k]×Q. Intuitively, if {a mathematical formula}δ(q,σ)=ϕ, then each pair {a mathematical formula}(c,q′) appearing in ϕ corresponds to a new copy of the automaton going to the direction suggested by c and starting in state {a mathematical formula}q′. For example, if {a mathematical formula}k=2 and {a mathematical formula}δ(q1,σ)=((1,q2)∧(1,q3))∨((−1,q1)∧(0,q3)), when the automaton is in the state {a mathematical formula}q1 and is reading the node x labeled by the letter σ, it proceeds either by sending off two copies, in the states {a mathematical formula}q2 and {a mathematical formula}q3 respectively, to the first successor of x (i.e., {a mathematical formula}x⋅1), or by sending off one copy in the state {a mathematical formula}q1 to the predecessor of x (i.e., {a mathematical formula}x⋅−1) and one copy in the state {a mathematical formula}q3 to x itself (i.e., {a mathematical formula}x⋅0).</paragraph><paragraph>A run of a 2ATA {a mathematical formula}A over a labeled tree {a mathematical formula}(T,V) is a labeled tree {a mathematical formula}(Tr,r) in which every node is labeled by an element of {a mathematical formula}T×Q. A node in {a mathematical formula}Tr labeled by {a mathematical formula}(x,q) describes a copy of A that is in the state q and reads the node x of T. The labels of adjacent nodes have to satisfy the transition function of {a mathematical formula}A. Formally, a run {a mathematical formula}(Tr,r) is a {a mathematical formula}T×Q-labeled tree satisfying:</paragraph><list><list-item label="–">{a mathematical formula}ϵ∈Tr and {a mathematical formula}r(ϵ)=(ϵ,q0).</list-item><list-item label="–">Let {a mathematical formula}y∈Tr, with {a mathematical formula}r(y)=(x,q) and {a mathematical formula}δ(q,V(x))=ϕ. Then there is a (possibly empty) set {a mathematical formula}S={(c1,q1),…,(cn,qn)}⊆[k]×Q such that:</list-item></list><paragraph> A run {a mathematical formula}(Tr,r) is accepting if all its infinite paths satisfy the acceptance condition. Given an infinite path {a mathematical formula}P∈Tr, let {a mathematical formula}inf(P)⊆Q be the set of states that appear infinitely often in P (as second components of node labels). We consider here Büchi acceptance conditions. A Büchi condition over a state set Q is a subset F of Q, and an infinite path P satisfies F if {a mathematical formula}inf(P)∩F≠∅.</paragraph><paragraph>The non-emptiness problem for 2ATAs consists in determining, for a given 2ATA, whether the set of trees it accepts is nonempty. It is known that this problem can be solved in exponential time in the number of states of the input automaton {a mathematical formula}A, but in linear time in the size of the alphabet as well as in the size of the transition function of {a mathematical formula}A.</paragraph></section><section label="B.8">Proof of Lemma 6.17<paragraph label="Proof">(⇒) Let {a mathematical formula}D⊆ΔU2 be a finite set, and h a Σ-homomorphism from {a mathematical formula}U1b to {a mathematical formula}U2D. We construct a labeled tree {a mathematical formula}T=({1,…,n}⁎,V) where {a mathematical formula}n=max⁡(na,nw) and show that {a mathematical formula}T∈L(Ab). The labeling function V is defined as follows: {a mathematical formula}V(ϵ)=R and{a mathematical formula}To show that {a mathematical formula}T∈L(Ab), we construct a run tree {a mathematical formula}(Tr,r) of {a mathematical formula}A on T. The tree structure {a mathematical formula}Tr and the labeling function r are defined inductively as follows, where for {a mathematical formula}(x,q)∈{1,…,n}⁎×Q, {a mathematical formula}f((x,q)) denotes x, and {a mathematical formula}(z)q denotes {a mathematical formula}z⋯z, where z is repeated q times:<list>{a mathematical formula}ϵ∈Tr is the root of {a mathematical formula}Tr and {a mathematical formula}r(ϵ)=(ϵ,q0),ϵ has two children {a mathematical formula}0f and {a mathematical formula}0h such that {a mathematical formula}r(0f)=(ϵ,qf) and {a mathematical formula}r(0h)=(ϵ,qh),{a mathematical formula}0f has children {a mathematical formula}c1,…,cna such that {a mathematical formula}r(ci)=(i,αi),for {a mathematical formula}i∈{1,…,na} and each {a mathematical formula}wj such that {a mathematical formula}ai↝K2wj, {a mathematical formula}ci has a child {a mathematical formula}ci⋅wj with {a mathematical formula}r(ci⋅wj)=(i⋅j,ωj),for each node in {a mathematical formula}Tr of the form {a mathematical formula}x=ci1wi2⋯wir, such that {a mathematical formula}r≥2 and {a mathematical formula}ai1wi2⋯wir∈D, and each {a mathematical formula}wj such that {a mathematical formula}wir↝K2wj, x has a child {a mathematical formula}x⋅wj with {a mathematical formula}r(x⋅wj)=(i1i2⋯irj,ωj),{a mathematical formula}0h has one child {a mathematical formula}y0 with {a mathematical formula}r(y0)=(i,γ0) where {a mathematical formula}i∈{1,…,na} is such that {a mathematical formula}b=ai,for each node of the form {a mathematical formula}x=y0⋅(zl1)q1⋅yl1⋅(zl2)q2⋅yl2⋯(zlk)qk⋅ylk, where {a mathematical formula}k≥0, {a mathematical formula}qi≥0, {a mathematical formula}zli denotes {a mathematical formula}xli or {a mathematical formula}klij, and {a mathematical formula}f(r(x))=j1⋯js with {a mathematical formula}s≥1, and for each {a mathematical formula}vl such that {a mathematical formula}vlk⇢Σvl and {a mathematical formula}h(bvl1⋯vlkvl)=ai1wi2⋯wir,for each node of the form {a mathematical formula}x=y0⋅(zl1)q1⋅yl1⋅(zl2)q2⋅yl2⋯(zlk)qk⋅ylk, where {a mathematical formula}k≥0, {a mathematical formula}qi≥0, {a mathematical formula}zli denotes {a mathematical formula}xli or {a mathematical formula}klij, and {a mathematical formula}f(r(x))=i, and for each {a mathematical formula}vl such that {a mathematical formula}vlk→Σvl, x has a childfor each node of the form {a mathematical formula}x=y0⋅(zl1)q1⋅yl1⋅(zl2)q2⋅yl2⋯(zlk)qk⋅ylk, where {a mathematical formula}k≥0, {a mathematical formula}qi≥0, {a mathematical formula}zli denotes {a mathematical formula}xli or {a mathematical formula}klij, and {a mathematical formula}f(r(x))=i1⋯ir′ for {a mathematical formula}r′≥2, and for each {a mathematical formula}vl such that {a mathematical formula}vlk→Σvl and {a mathematical formula}h(bvl1⋯vlkvl)=ai1wi2⋯wir, x has a child {a mathematical formula}x⋅yl with {a mathematical formula}r(x⋅yl)=(i1⋯ir,γl).for each node of the form {a mathematical formula}x=y0⋅z1⋯zq⋅klj, {a mathematical formula}q≥0 and {a mathematical formula}zi∈{yi,xi,kii′}, x has one child {a mathematical formula}x⋅yl with {a mathematical formula}r(x⋅yl)=(j,γk).(⇐) Assume that the language of </list><paragraph>{a mathematical formula}Ab is non-empty and {a mathematical formula}T=({1,…,n}⁎,V)∈L(Ab). Let {a mathematical formula}(Tr,r) be an accepting run of {a mathematical formula}Ab over T. Denote by {a mathematical formula}U1 and {a mathematical formula}U2, and by {a mathematical formula}G1 and {a mathematical formula}G2 the canonical and the generating models of {a mathematical formula}K1 and {a mathematical formula}K2, respectively. We construct a finite set {a mathematical formula}D⊆ΔU2 and a homomorphism h from {a mathematical formula}U1b to {a mathematical formula}U2D using T and {a mathematical formula}(Tr,r).Firstly, we prove that T encodes a finite subset of {a mathematical formula}ΔU2. We show</paragraph><list><list-item>for each {a mathematical formula}i∈{1,…,na}, {a mathematical formula}V(i)=aˆi;</list-item><list-item>for each {a mathematical formula}k≥2, such that {a mathematical formula}ai1wi2⋯wik∈ΔU2, and for each {a mathematical formula}2≤j&lt;k, {a mathematical formula}V(i1⋯ij)=wˆij, then {a mathematical formula}V(i1⋯ik)=wˆik or {a mathematical formula}V(i1⋯ik)=S;</list-item><list-item>for each infinite path {a mathematical formula}ai1⋯wij⋯∈ΔU2, there exists {a mathematical formula}j≥2, such that {a mathematical formula}V(i1⋯ij)=S.</list-item></list><paragraph> Proof of (a): by definition of {a mathematical formula}δ(αi,L).Proof of (b): for the sake of contradiction, assume for some {a mathematical formula}ai1wi2⋯wik∈ΔU2, {a mathematical formula}k≥2, for each {a mathematical formula}2≤j&lt;k, {a mathematical formula}V(i1⋯ij)=wˆij, but {a mathematical formula}V(i1⋯ik)=R or {a mathematical formula}V(i1⋯ik)=aˆi. Since {a mathematical formula}(Tr,r) is a run over T there exists a path in {a mathematical formula}Tr of the form{a mathematical formula} Then by definition of the transition function, both {a mathematical formula}δ(ωik,R)=⊥ and {a mathematical formula}δ(ωik,aˆi)=⊥, which contradicts the assumption {a mathematical formula}(Tr,r) is a run.Proof of (c): By contradiction, assume that there exists an infinite path {a mathematical formula}ai1⋯wij⋯ in {a mathematical formula}ΔU2, such that for each {a mathematical formula}j≥2, {a mathematical formula}V(i1⋯ij)≠S. Now, since {a mathematical formula}(Tr,r) is a run of {a mathematical formula}Ab over T, there must exist an infinite path π in {a mathematical formula}Tr of the form{a mathematical formula} Since {a mathematical formula}inf(π)∩{γ1,…,γnw}=∅ we obtain a contradiction with the assumption that {a mathematical formula}(Tr,r) is an accepting run. Therefore, let {a mathematical formula}d≥2 be the depth of S, i.e., for each {a mathematical formula}ai1⋯wij⋯∈ΔU2, for some {a mathematical formula}j≤d, {a mathematical formula}V(i1⋯ij)=S. The finite set D is given by {a mathematical formula}{ai1wi2⋯wid−1∈ΔU2}.Next, we show there exists a Γ-homomorphism from {a mathematical formula}U1b to {a mathematical formula}U2D by constructing that h. By induction of k, we build {a mathematical formula}h(bvl1⋯vlk) for each {a mathematical formula}bvl1⋯vlk∈ΔU1b.Base of induction. First, in {a mathematical formula}Tr there must exist a path {a mathematical formula}(ϵ,q0),(ϵ,qh), and as {a mathematical formula}Tr is a run, for some i, {a mathematical formula}b=ai, hence this path continues with {a mathematical formula}(i,γ0) (and the current path is {a mathematical formula}(ϵ,q0),(ϵ,qh),(i,γ0)). Then, {a mathematical formula}δ(γ0,aˆi) is satisfied, which means that {a mathematical formula}τaib=⊤ and, in turn, {a mathematical formula}tΣU1(b)⊆tΣU2(ai), so we can set {a mathematical formula}h(b)=ai.Inductive step. Assume h is defined for each path of length {a mathematical formula}k+1 in {a mathematical formula}ΔU1, {a mathematical formula}k≥0, let {a mathematical formula}bvl1⋯vlk∈ΔU1b ({a mathematical formula}vl0 denotes b), and {a mathematical formula}h(bvl1⋯vlk)=ai0wi1⋯wir, and assume the current path π in {a mathematical formula}Tr is of the form{a mathematical formula} where {a mathematical formula}(x,q)⁎ denotes a finite (possibly empty) sequence of tuples {a mathematical formula}(x,q) with {a mathematical formula}x∈{1,…,n}⁎ and {a mathematical formula}q∈{γl,χl,κli|1≤l≤m,1≤i≤na}. Then {a mathematical formula}δ(γk,wˆir) (recall, that {a mathematical formula}i0⋯ir∈T is labeled with {a mathematical formula}wˆir) is satisfied. Now, let {a mathematical formula}vlk↝K1vlk+1. If {a mathematical formula}vlk→Σvlk+1, then at least one of the formulas{a mathematical formula} is satisfied. Assume {a mathematical formula}ψj is satisfied for some {a mathematical formula}j∈{1,…,nw}: then {a mathematical formula}ρwir,wjvlk,vlk+1=⊤, hence {a mathematical formula}rΣG1(vlk,vlk+1)⊆rΣG2(wir,wj), and the run is continued with {a mathematical formula}(i0⋯irj,γlk+1). Moreover, {a mathematical formula}δ(γlk+1,wˆj) is satisfied, so {a mathematical formula}τwjvlk+1=⊤, i.e., {a mathematical formula}tΣG1(vlk+1)⊆tΣG2(wj). Therefore, we can set {a mathematical formula}h(bvl1⋯vlk+1) to be equal to {a mathematical formula}ai0wi1⋯wirwj.In the case {a mathematical formula}r=0 and {a mathematical formula}ψi is satisfied for some {a mathematical formula}i∈{1,…,na}, we have that {a mathematical formula}ρai0,aivlk,vlk+1=⊤, hence {a mathematical formula}rΣG1(vlk,vlk+1)⊆rΣG2(ai0,ai), and the run is continued with {a mathematical formula}(ϵ,κlk+1i),(i,γlk+1). Moreover, {a mathematical formula}δ(γlk+1,aˆi) is satisfied, so {a mathematical formula}τaivlk+1=⊤, i.e., {a mathematical formula}tΣG1(vlk+1)⊆tΣG2(ai). Therefore, we set {a mathematical formula}h(bvl1⋯vlk+1) to be equal {a mathematical formula}ai.Alternatively, if for {a mathematical formula}r&gt;0, {a mathematical formula}ψ−1 is satisfied, it follows that {a mathematical formula}ηwirvlk,vlk+1=⊤, hence {a mathematical formula}{R−|R∈rΣG1(vlk,vlk+1)}⊆rΣG2(wir−1,wir), and the run is continued with {a mathematical formula}(i0⋯ir−1,γlk+1). Moreover, {a mathematical formula}δ(γlk+1,wˆir−1) is satisfied, so {a mathematical formula}τwir−1vlk+1=⊤, i.e., {a mathematical formula}tΣG1(vlk+1)⊆tΣG2(wir−1). Therefore, we can set {a mathematical formula}h(bvl1⋯vlk+1) to be equal to {a mathematical formula}ai0wi1⋯wir−1. It concludes the inductive step for the case {a mathematical formula}vlk→Σvlk+1.Consider now, {a mathematical formula}vlk⇢Σvlk+1. Then the run continues with {a mathematical formula}(i1⋯ir,χlk+1). Let{a mathematical formula} be a continuation of the current path {a mathematical formula}π⋅(i1⋯ir,χlk+1) in {a mathematical formula}Tr, and {a mathematical formula}xj=j0⋯js. Then {a mathematical formula}δ(γlk+1,wˆjs) is satisfied, so {a mathematical formula}τwjsvlk+1=⊤, and {a mathematical formula}tΣG1(vlk+1)⊆tΣG2(wjs). Since {a mathematical formula}rΣU1(bvl1⋯vlk,bvl1⋯vlk+1)=∅, we can set {a mathematical formula}h(bvl1⋯vlk+1) to be equal to {a mathematical formula}aj0wj1⋯wjs.Note that the runs considered in the induction never visit a node labeled with S, otherwise it contradicts the definition of a run. Therefore, in such a manner, we can define h, a Σ-homomorphism from {a mathematical formula}U1b to {a mathematical formula}U2D.  □</paragraph></paragraph></section></section><section label="Appendix C">Membership problem for {a mathematical formula}UCQ-representability<paragraph>Let {a mathematical formula}K=〈O,A〉 be a consistent KB, {a mathematical formula}a,b∈Na, {a mathematical formula}σ∈Δuni(K), and {a mathematical formula}tail(σ)↝Kw[R]. We make use of the following properties:</paragraph><list><list-item>{a mathematical formula}B′∈tuni(K)(a) iff {a mathematical formula}A⊨B(a) and {a mathematical formula}O⊨B⊑B′, and{a mathematical formula}R′∈runi(K)(a,b) iff {a mathematical formula}A⊨R(a,b) and {a mathematical formula}O⊨R⊑R′;Proof: first, by definition of the canonical model, {a mathematical formula}B′∈tuni(K)(a) if and only if {a mathematical formula}K⊨B′(a). Next, assume {a mathematical formula}A⊭B′(a), i.e., neither {a mathematical formula}B′(a)∈A, nor {a mathematical formula}S(a,b)∉A for {a mathematical formula}B′=∃S and some {a mathematical formula}b∈Na. Obviously, {a mathematical formula}a∈ind(A), so for some concept A, {a mathematical formula}A(a)∈A, or for some role S, {a mathematical formula}S(a,b)∈A. By contradiction, assume that {a mathematical formula}O⊭A⊑B′ for each {a mathematical formula}A(a)∈A, and {a mathematical formula}O⊭∃S⊑B′ for each {a mathematical formula}S(a,b)∈A. Then there exists a model {a mathematical formula}I of {a mathematical formula}K such that {a mathematical formula}aI∉B′I, which contradicts {a mathematical formula}K⊨B′(a). Hence, {a mathematical formula}O⊨A⊑B′ for some {a mathematical formula}A(a)∈A or {a mathematical formula}O⊨∃S⊑B′ for some {a mathematical formula}S(a,b)∈A. The opposite direction is obvious. The proof for {a mathematical formula}R∈runi(K)(a,b) is analogous.</list-item><list-item>Proof: Follows from the definition of the canonical model and the types.</list-item><list-item>Let {a mathematical formula}a↝Kw[R] for some basic role R. Then there exists a basic concept B, such that {a mathematical formula}A⊨B(a) and {a mathematical formula}B↝OR.Proof: by definition of {a mathematical formula}a↝Kw[R] it follows that {a mathematical formula}K⊨∃R(a) and R is a minimal with respect to {a mathematical formula}≤O role among all {a mathematical formula}{R′|K⊨∃R′(a)}. By (A) we have that {a mathematical formula}A⊨B(a) for some concept B, and {a mathematical formula}O⊨B⊑∃R. Now, consider KB {a mathematical formula}B=〈O,{B(o)}〉 for some {a mathematical formula}o∈Na. Obviously, {a mathematical formula}B⊨∃R(o), {a mathematical formula}B⊭R(o,o), and R is a minimal with respect to {a mathematical formula}≤O role among all {a mathematical formula}{R′|B⊨∃R′(o)}. Therefore, {a mathematical formula}o↝Bw[R], and {a mathematical formula}B↝OR.</list-item><list-item>Let {a mathematical formula}wS↝Kw[R] for basic roles S and R. Then {a mathematical formula}∃S−↝OR.Proof: by definition of {a mathematical formula}w[S]↝Kw[R] it follows that {a mathematical formula}O⊨∃S−⊑∃R, {a mathematical formula}[S−]≠[R], and R is a minimal with respect to {a mathematical formula}≤O role among all {a mathematical formula}{R′|O⊨∃S−⊑∃R′}. Consider KB {a mathematical formula}B=〈O,{∃S−(o)}〉 for some {a mathematical formula}o∈Na. The rest of the proof is similar to the proof of (C).</list-item><list-item>Let {a mathematical formula}{B1,…,Bn} be a set of basic concepts and {a mathematical formula}O′ a TBox such that {a mathematical formula}KB=〈O,{B1(o),…,Bn(o)}〉 and {a mathematical formula}〈O∪O′,A〉 are consistent. Assume {a mathematical formula}y∈Δuni(KB). If for some {a mathematical formula}δo∈Δuni(O∪O′,A), {a mathematical formula}{B1,…,Bn}⊆tuni(O∪O′,A)(δo), then there exists {a mathematical formula}δy∈Δuni(O∪O′,A) such that{a mathematical formula} Proof: consider the cases of {a mathematical formula}y∈Δuni(KB). If {a mathematical formula}y=o, then {a mathematical formula}δy=δo. Let {a mathematical formula}y=ow[R1]⋯w[Rm] for {a mathematical formula}m≥1: then for some {a mathematical formula}1≤i≤n, {a mathematical formula}O⊨Bi⊑∃R1, and for {a mathematical formula}1≤j&lt;m, {a mathematical formula}O⊨∃Rj−⊑∃Rj+1. Obviously, these entailments are valid in {a mathematical formula}O∪O′, so {a mathematical formula}∃R1∈tuni(O∪O′,A)(δo) and there exists {a mathematical formula}δ1∈Δuni(O∪O′,A) such that {a mathematical formula}R1∈runi(O∪O′,A)(δo,δ1) and {a mathematical formula}∃R1−∈tuni(O∪O′,A)(δ1). Moreover, for each {a mathematical formula}1≤j&lt;m, we have that {a mathematical formula}∃Rj+1∈tuni(O∪O′,A)(δj) and there exists {a mathematical formula}δj+1∈Δuni(O∪O′,A) such that {a mathematical formula}Rj+1∈runi(O∪O′,A)(δj,δj+1) and {a mathematical formula}∃Rj+1−∈tuni(O∪O′,A)(δj+1). So we take {a mathematical formula}δy to be equal to {a mathematical formula}δm. It is easy to see that (C.1) is satisfied.</list-item><list-item>concept B is {a mathematical formula}O-inconsistent iff {a mathematical formula}O⊨B⊑C⊓D for some concept disjointness {a mathematical formula}C⊑¬D∈O, or there exist {a mathematical formula}n≥1 and roles {a mathematical formula}R1,…,Rn such that {a mathematical formula}B↝OR1, {a mathematical formula}∃Ri−↝ORi+1, and</list-item><list-item>role R is {a mathematical formula}O-inconsistent iff {a mathematical formula}O⊨R⊑S⊓Q or {a mathematical formula}O⊨R⊑S−⊓Q− for some role disjointness {a mathematical formula}S⊑¬Q∈O, or one of {a mathematical formula}∃R,∃R− is {a mathematical formula}O-inconsistent.</list-item></list><paragraph label="Proposition C.1">Let conditions (ii) and (iii) ofLemma 7.1hold. Further, let{a mathematical formula}Asbe an ABox over Σ such that{a mathematical formula}〈S∪B,As〉and{a mathematical formula}〈T∪B,As〉are consistent, and let{a mathematical formula}Usband{a mathematical formula}Utbbe their respective canonical models. Then{a mathematical formula}Usbis Γ-homomorphically embeddable into{a mathematical formula}Utb.</paragraph><paragraph label="Proof">We build a function h from {a mathematical formula}ΔUsb to {a mathematical formula}ΔUtb, which is a Γ-homomorphism from {a mathematical formula}Usb to {a mathematical formula}Utb.Base of induction. Initially, for each {a mathematical formula}a∈ind(As) we define {a mathematical formula}h(a)=a. Let us immediately verify that {a mathematical formula}tΓUsb(a)⊆tΓUtb(a). Let {a mathematical formula}B′∈tΓUsb(a), it follows by (A) there exists B over Σ such that {a mathematical formula}As⊨B(a) and {a mathematical formula}S∪B⊨B⊑B′. Note that B is {a mathematical formula}S∪B-consistent, then by (ii), {a mathematical formula}T∪B⊨B⊑B′, therefore we obtain {a mathematical formula}B′∈tUtb(a). The proof of {a mathematical formula}rΓUsb(a,b)⊆rΓUtb(a,b) is analogous.Next, assume that {a mathematical formula}σ∈ΔUsb and {a mathematical formula}σ=aw[R]. We show how to define {a mathematical formula}h(σ). It follows that {a mathematical formula}a↝Ksbw[R] and by (C) we obtain a concept B over Σ such that {a mathematical formula}As⊨B(a), and {a mathematical formula}B↝S∪BR. Then B is {a mathematical formula}S∪B-consistent, and by (iii) there exists {a mathematical formula}y∈Δgen(T∪B,B(o)) such that{a mathematical formula} Since {a mathematical formula}{B}⊆tUtb(a), by (E) there exists {a mathematical formula}δ∈ΔUtb such that{a mathematical formula} As for a TBox {a mathematical formula}O, ABoxes {a mathematical formula}A and {a mathematical formula}A′, and {a mathematical formula}x∈Δgen(O,A), {a mathematical formula}z∈Δuni(O,A′) with {a mathematical formula}x=tail(z), the concept and role types of x and z coincide, it follows now by transitivity of ‘⊆’ that{a mathematical formula} Hence, we assign {a mathematical formula}h(σ)=δ.Inductive step. We show now how to define homomorphism for {a mathematical formula}σw[R]∈ΔUsb with {a mathematical formula}σ=σ′w[S] given that {a mathematical formula}h(σ) and {a mathematical formula}h(σ′) are defined. It follows {a mathematical formula}w[S]↝Ksbw[R] and S is a basic role over Σ by the structure of {a mathematical formula}S∪B. Moreover, {a mathematical formula}∃S− is {a mathematical formula}S∪B-consistent, and by (D), {a mathematical formula}∃S−↝S∪BR. So (iii) is triggered, and there exists {a mathematical formula}y∈Δgen(T∪B,∃S−(o)) satisfying{a mathematical formula}Let {a mathematical formula}B=supΓB(∃S−), {a mathematical formula}C=supΓB(∃S), and {a mathematical formula}S=supΓB(S) ({a mathematical formula}supΣO was defined in Section 7.2). Then {a mathematical formula}uni(S∪B,∃S−(o)) and {a mathematical formula}uni(T∪B,∃S−(o)) can be partially depicted as follows. Note that here the presented concept and role labels are not the exact concept and role types. Moreover, we depict only those individuals and links between them that are guaranteed to exist given the information at hand. Note also that in the pictures further in this proof, we depict only the necessary bits of information.{a mathematical formula} Denote by {a mathematical formula}B(o) assertions {a mathematical formula}B1(o),…,Bm(o) for {a mathematical formula}Bi∈B, and similarly for {a mathematical formula}C(a). Moreover, denote by {a mathematical formula}S(a,o) assertions {a mathematical formula}S1(a,o),…,Sk(a,o) for {a mathematical formula}Si∈S. There are two possible cases considering that {a mathematical formula}B is a set of inclusions from Σ to Γ, {a mathematical formula}T is a TBox over Γ, and S is a role over Σ.(I){a mathematical formula}o↝〈T∪B,∃S−(o)〉w[Q1]↝⋯↝w[Qn], {a mathematical formula}n≥0 and {a mathematical formula}Qi are roles over Γ.Then, if {a mathematical formula}n=0, {a mathematical formula}y=o, otherwise {a mathematical formula}y=w[Qn].Consider KB {a mathematical formula}〈T,{B(o)}〉, then we obtain that {a mathematical formula}y∈Δgen(T,{B(o)}) and{a mathematical formula} Observe that {a mathematical formula}B⊆tΓUtb(h(σ)), since obviously {a mathematical formula}B⊆tΓUsb(σ) and h is a homomorphism on σ. Therefore, by (E) we obtain {a mathematical formula}δ∈ΔUtb such that{a mathematical formula} As above, it follows {a mathematical formula}tΓUsb(σw[R])⊆tΓUtb(δ), and {a mathematical formula}rΓUsb(σ,σw[R])⊆rΓUtb(h(σ),δ). Hence, we assign {a mathematical formula}h(σw[R])=δ. This case can be depicted as follows:{a mathematical formula}(II){a mathematical formula}o↝〈T∪B,∃S−(o)〉w[S−]↝w[Q1]↝⋯↝w[Qn], {a mathematical formula}n≥0, {a mathematical formula}Qi are roles over Γ.Then, if {a mathematical formula}n=0, {a mathematical formula}y=w[S−], otherwise {a mathematical formula}y=w[Qn].Consider KB {a mathematical formula}〈T,{C(a),S(a,o)}〉. Then {a mathematical formula}a↝〈T,{C(a),S(a,o)}〉w[Q1]↝⋯↝w[Qn], {a mathematical formula}y′∈Δgen(T,{C(a),S(a,o)}): if {a mathematical formula}n=0, {a mathematical formula}y′=a, otherwise {a mathematical formula}y′=w[Qn], and{a mathematical formula} As above, {a mathematical formula}C⊆tΓUtb(h(σ′)), therefore by (E) we obtain {a mathematical formula}δ∈ΔUtb such that {a mathematical formula}tΓgen(T,{C(a),S(a,o)})(y′)⊆tΓUtb(δ).Observe that if {a mathematical formula}rΓgen(S∪B,∃S−(o))(o,w[R])≠∅, it has to be the case that{a mathematical formula} Let {a mathematical formula}R′∈rΓgen(S∪B,∃S−(o))(o,w[R]), it follows {a mathematical formula}R′∈rΓgen(T,{C(a),S(a,o)})(o,a), and from the latter, {a mathematical formula}T⊨Si−⊑R′ for some {a mathematical formula}Si∈S. As {a mathematical formula}Si⊆rΓUtb(h(σ′),h(σ)), we obtain that {a mathematical formula}R′∈tΓUtb(h(σ),h(σ′)).All in all, it follows that {a mathematical formula}tΓUsb(σw[R])⊆tΓUtb(δ), and {a mathematical formula}rΓUsb(σ,σw[R])⊆rΓUtb(h(σ),δ). Hence, we set {a mathematical formula}h(σw[R])=δ. We conclude with a graphical representation of this case:{a mathematical formula}In such a way we can define {a mathematical formula}h(σ) for each {a mathematical formula}σ∈ΔUsb, hence h is a Γ-homomorphism from {a mathematical formula}Usb to {a mathematical formula}Utb.  □</paragraph><paragraph label="Proposition C.2">Let conditions (ii) and (iv) ofLemma 7.1hold. Further, let{a mathematical formula}Asbe an ABox over Σ such that{a mathematical formula}〈S∪B,As〉and{a mathematical formula}〈T∪B,As〉are consistent, and let{a mathematical formula}Usband{a mathematical formula}Utbbe their respective canonical models. Then{a mathematical formula}Utbis Γ-homomorphically embeddable into{a mathematical formula}Usb.</paragraph><paragraph label="Proof">We build a function h from {a mathematical formula}ΔUtb to {a mathematical formula}ΔUsb, a Γ-homomorphism from {a mathematical formula}Utb to {a mathematical formula}Usb.Base of induction. Initially, for each {a mathematical formula}a∈ind(As) we define {a mathematical formula}h(a)=a. Let us immediately verify that {a mathematical formula}tΓUtb(a)⊆tΓUsb(a). Let {a mathematical formula}B′∈tΓUtb(a), it follows by (A) there exists B over Σ such that {a mathematical formula}As⊨B(a) and {a mathematical formula}T∪B⊨B⊑B′. Then B is {a mathematical formula}S∪B-consistent (recall that {a mathematical formula}Ksb=〈S∪B,As〉 is consistent), so by (ii), {a mathematical formula}S∪B⊨B⊑B′, therefore we obtain {a mathematical formula}B′∈tUsb(a). The proof of {a mathematical formula}rΓUtb(a,b)⊆rΓUsb(a,b) is analogous.Next, assume {a mathematical formula}σ∈ΔUtb and {a mathematical formula}σ=aw[R], we show how to define {a mathematical formula}h(σ). It follows that {a mathematical formula}a↝Ktbw[R] and by (C) we obtain B over Σ such that {a mathematical formula}As⊨B(a), and {a mathematical formula}B↝T∪BR. We are going to show now there exists {a mathematical formula}y∈Δgen(S∪B,B(o)) such that{a mathematical formula}{a mathematical formula} Assume, first, R is a role over Γ, and observe that B is {a mathematical formula}S∪B-consistent, then by (iv) there exists {a mathematical formula}y∈Δgen(S∪B,B(o)) satisfying (C.2) and (C.3).Assume now R is a role over Σ, then it follows {a mathematical formula}B=∃R. Let {a mathematical formula}o↝〈S∪B,∃R(o)〉w[Q] for a role {a mathematical formula}Q over Σ such that {a mathematical formula}S⊨Q⊑R (such Q always exists, for instance R itself if it does not have proper subroles). Then we choose y to be {a mathematical formula}w[Q], and show first that (C.2) is satisfied. Let {a mathematical formula}B∈tΓgen(T∪B,∃R(o))(w[R]), then by (B), {a mathematical formula}T∪B⊨∃R−⊑B, and as {a mathematical formula}∃R−∈tΣgen(S∪B,∃R(o))(w[Q]), by (ii) we obtain that {a mathematical formula}B∈tΓgen(S∪B,∃R(o))(w[Q]). In a similar way, we can show that (C.3) is satisfied.To continue the proof consider {a mathematical formula}{B}⊆tUsb(a), then by (E) there exists {a mathematical formula}δ∈ΔUsb such that {a mathematical formula}tgen(S∪B,B(o))(y)⊆tUsb(δ) and {a mathematical formula}rgen(S∪B,B(o))(o,y)⊆rUsb(a,δ). It follows now using (C.2) that {a mathematical formula}tΓUtb(aw[R])⊆tΓUsb(δ). Analogously using (C.3) one obtains {a mathematical formula}rΓUtb(a,aw[R])⊆rΓUsb(a,δ).Inductive step. We show how to define homomorphism for {a mathematical formula}σw[R]∈ΔUtb with {a mathematical formula}σ=σ′w[S] given that {a mathematical formula}h(σ) is defined. It follows {a mathematical formula}w[S]↝Ktbw[R], therefore {a mathematical formula}T∪B⊨∃S−⊑∃R, and R is a role over Γ distinct from{a mathematical formula}S−. By (B) it also follows {a mathematical formula}∃R∈tUtb(σ), and since h is a Γ-homomorphism, {a mathematical formula}∃R∈tΓUsb(h(σ)). As {a mathematical formula}As is an ABox over Σ and {a mathematical formula}S is a TBox over Σ, there exists a concept B over Σ such that {a mathematical formula}B∈tUsb(h(σ)) and {a mathematical formula}B⊨B⊑∃R. Next, assume that {a mathematical formula}o↝〈T∪B,B(o)〉w[Q] for some role Q such that {a mathematical formula}T∪B⊨Q⊑R. Then B is {a mathematical formula}S∪B-consistent and {a mathematical formula}B↝T∪BQ. As above for {a mathematical formula}σ=aw[R], by (vi) there exists {a mathematical formula}y∈Δgen(S∪B,B(o)) such that{a mathematical formula} Again, by (E) we obtain δ in {a mathematical formula}ΔUsb such that {a mathematical formula}tgen(S∪B,B(o))(y)⊆tUsb(δ) and {a mathematical formula}rgen(S∪B,B(o))(o,y)⊆rUsb(h(σ),δ). Observe that {a mathematical formula}T∪B⊨Q⊑R, so the concept and role types of {a mathematical formula}w[R] and {a mathematical formula}(o,w[R]) are subsumed by those of {a mathematical formula}w[Q] and {a mathematical formula}(o,w[Q]) in {a mathematical formula}gen(T∪B,B(o)). Finally, we obtain that {a mathematical formula}tUtb(σw[R])⊆tUsb(δ) and {a mathematical formula}rUtb(σ,σw[R])⊆rUsb(h(σ),δ). Hence, we assign {a mathematical formula}h(σw[R])=δ.In such a way we can define {a mathematical formula}h(σ) for each {a mathematical formula}σ∈ΔUtb, hence h is a Γ-homomorphism from {a mathematical formula}Utb to {a mathematical formula}Usb.  □</paragraph></section><section label="Appendix D">Non-emptiness problem for {a mathematical formula}UCQ-representability<paragraph label="Proposition D.1">For a concept B over Σ and{a mathematical formula}C′over Γ, inclusion{a mathematical formula}B⊑C′is representable in{a mathematical formula}Sand{a mathematical formula}Mif and only if there exists{a mathematical formula}B′over Γ such that{a mathematical formula}B⊨B⊑B′, and for each{a mathematical formula}S-consistent concept D over Σ:</paragraph><list><list-item>{a mathematical formula}S∪B⊨D⊑B′implies{a mathematical formula}S∪B⊨D⊑C′,</list-item><list-item>if{a mathematical formula}B′=∃Q′−for some role{a mathematical formula}Q′over Γ, then{a mathematical formula}S∪B⊨D⊑∃Q′implies{a mathematical formula}D↝S∪BQfor some role Q such that{a mathematical formula}S∪B⊨{Q⊑Q′,∃Q−⊑C′}.</list-item></list><paragraph label="Proof">(⇐) Let B be a concept over Σ and {a mathematical formula}C′ over Γ, {a mathematical formula}B′≠C′, and conditions (H) and (I) are satisfied. We show inclusion {a mathematical formula}B⊑C′ is representable in {a mathematical formula}S and {a mathematical formula}M by {a mathematical formula}B′⊑C′. Take {a mathematical formula}T a parsimonious {a mathematical formula}UCQ-representation for {a mathematical formula}S under {a mathematical formula}M: we prove {a mathematical formula}T′=T∪{B′⊑C′} is a parsimonious {a mathematical formula}UCQ-representation by showing the following is satisfied:<list>for each {a mathematical formula}S-consistent and {a mathematical formula}T′∪B-inconsistent pair of concepts or roles {a mathematical formula}(X,Y), it follows {a mathematical formula}(X,Y) is {a mathematical formula}S∪B-inconsistent, which corresponds to the ⇐ direction of condition (i) of Lemma 7.1,for each {a mathematical formula}S∪B-consistent concept or role X over Σ and each {a mathematical formula}X′ over Γ, {a mathematical formula}T′∪B⊨X⊑X′ implies {a mathematical formula}S∪B⊨X⊑X′, which corresponds to the ⇐ direction of condition (ii) of Lemma 7.1, andcondition (iv) of Lemma 7.1.First, for condition </list><paragraph>(ii) of Lemma 7.1, let D be an {a mathematical formula}S∪B-consistent concept over Σ and {a mathematical formula}E′ a concept over Γ such that {a mathematical formula}T′∪B⊨D⊑E′ and {a mathematical formula}T∪B⊭D⊑E′. Hence, there exists {a mathematical formula}D′ over Γ such that {a mathematical formula}T⊨{D′⊑B′,C′⊑E′} and {a mathematical formula}B⊨D⊑D′. Since {a mathematical formula}T is a parsimonious {a mathematical formula}UCQ-representation and {a mathematical formula}T∪B⊨D⊑B′, it follows {a mathematical formula}S∪B⊨D⊑B′, so there exists {a mathematical formula}B1 over Σ such that {a mathematical formula}S⊨D⊑B1 and {a mathematical formula}B⊨B1⊑B′. Next, {a mathematical formula}B′,C′ satisfy condition (H), therefore {a mathematical formula}S∪B⊨B1⊑C′, so there exists C over Σ such that {a mathematical formula}S⊨B1⊑C and {a mathematical formula}B⊨C⊑C′. And we can continue by analogy. To summarize, there exist {a mathematical formula}B1,C and E over Σ such that{a mathematical formula} and {a mathematical formula}B⊨{B1⊑B′,C⊑C′,E⊑E′}. Finally, we obtain that {a mathematical formula}S∪B⊨D⊑E′.Next, for condition (i), let {a mathematical formula}(D1,D2) be a pair of {a mathematical formula}S-consistent, {a mathematical formula}T∪B-consistent and {a mathematical formula}T′∪B-inconsistent concepts. For the sake of contradiction, assume {a mathematical formula}(D1,D2) is {a mathematical formula}S∪B-consistent (hence, each {a mathematical formula}Di is {a mathematical formula}S∪B-consistent).Suppose both {a mathematical formula}Di are {a mathematical formula}T′∪B-consistent. Without loss of generality, we may assume that for some {a mathematical formula}D′ over Γ, {a mathematical formula}T′∪B⊨{D1⊑D′,D2⊑¬D′}. From condition (ii), it follows there exists D over Σ such that {a mathematical formula}S⊨D1⊑D and {a mathematical formula}B⊨D⊑D′. Consider the following cases:1) {a mathematical formula}T∪B⊨D2⊑¬D′ (and {a mathematical formula}T∪B⊭D1⊑D′). Then, either there exist {a mathematical formula}D2′,F′ over Γ such that {a mathematical formula}T⊨{D2′⊑F′,F′⊑¬D′} and {a mathematical formula}B⊨D2⊑D2′ (see the diagram below), or {a mathematical formula}B⊨D2⊑¬D′. In both cases, {a mathematical formula}(D,D2) is {a mathematical formula}T∪B-inconsistent, so it follows {a mathematical formula}(D,D2) is {a mathematical formula}S∪B-inconsistent. In view of {a mathematical formula}S⊨D1⊑D, we obtain contradiction with the assumption {a mathematical formula}(D1,D2) is {a mathematical formula}S∪B-consistent.2) {a mathematical formula}T∪B⊭D2⊑¬D′. Then, there exists {a mathematical formula}F′ over Γ such that {a mathematical formula}T′∪B⊨D2⊑F′ and {a mathematical formula}T⊨F′⊑¬D′ (note, {a mathematical formula}T∪B⊭D2⊑F′). From condition (ii), it follows there exists F over Σ such that {a mathematical formula}S⊨D2⊑F and {a mathematical formula}B⊨F⊑F′. Now, as {a mathematical formula}(D,F) is {a mathematical formula}T∪B-inconsistent, it follows {a mathematical formula}(D,F) is {a mathematical formula}S∪B-inconsistent, which in view of {a mathematical formula}S⊨{D1⊑D,D2⊑F} contradicts the assumption {a mathematical formula}(D1,D2) is {a mathematical formula}S∪B-consistent.{a mathematical formula}Suppose one of {a mathematical formula}Di is {a mathematical formula}T′∪B-inconsistent. Consider the following two cases by (F):1) for some {a mathematical formula}D′ over Γ, {a mathematical formula}T′∪B⊨{Di⊑D′,Di⊑¬D′}. The contradiction is obtained similarly as in the case both {a mathematical formula}Di are {a mathematical formula}T′∪B-consistent.2) there exist {a mathematical formula}n≥1 and distinct roles {a mathematical formula}S1′,…,Sn′ such that {a mathematical formula}Di↝T′∪BS1′, {a mathematical formula}∃Sj′−↝T′∪BSj+1′ and {a mathematical formula}T′∪B⊨Sn′⊑R′⊓Q′ for {a mathematical formula}R′⊑¬Q′∈T, or {a mathematical formula}T′∪B⊨∃Sn′−⊑E′⊓F′ for {a mathematical formula}E′⊑¬F′∈T.If {a mathematical formula}n=1 and {a mathematical formula}S1′ is a role over Σ (i.e., {a mathematical formula}Di=∃S1′ and {a mathematical formula}S1′ is {a mathematical formula}S∪B-consistent), then from condition (ii), it follows {a mathematical formula}S∪B⊨S1′⊑R′⊓Q′ or {a mathematical formula}S∪B⊨∃S1′−⊑E′⊓F′. In the former case, there exist roles {a mathematical formula}R,Q over Σ such that {a mathematical formula}S⊨S1′⊑R⊓Q and {a mathematical formula}B⊨{R⊑R′,Q⊑Q′}; then {a mathematical formula}(R,Q) is {a mathematical formula}T∪B-inconsistent, since {a mathematical formula}T is a parsimonious {a mathematical formula}UCQ-representation, it follows {a mathematical formula}(R,Q) is {a mathematical formula}S∪B-inconsistent. In the latter case, there exist concepts {a mathematical formula}E,F over Σ such that {a mathematical formula}S⊨∃S1′−⊑E⊓F and {a mathematical formula}B⊨{E⊑E′,F⊑F′}; then {a mathematical formula}(E,F) is {a mathematical formula}T∪B-inconsistent, hence {a mathematical formula}(E,F) is {a mathematical formula}S∪B-inconsistent. In any case we obtain {a mathematical formula}S1′ is {a mathematical formula}S∪B-inconsistent, which contradicts the assumption {a mathematical formula}Di is {a mathematical formula}S∪B-consistent.If {a mathematical formula}n=1 and {a mathematical formula}S1′ is a role over Γ, assume {a mathematical formula}T∪B⊭Di⊑∃S1′. From condition (ii) it follows {a mathematical formula}S∪B⊨Di⊑∃S1′, so there exists D over Σ such that {a mathematical formula}S⊨Di⊑D and {a mathematical formula}B⊨D⊑∃S1′. Then {a mathematical formula}D↝T∪BT′ for some role {a mathematical formula}T′ (possibly coinciding with {a mathematical formula}S1′) such that {a mathematical formula}T∪B⊨T′⊑S1′. In the case {a mathematical formula}T∪B⊨S1′⊑R′⊓Q′ or {a mathematical formula}T∪B⊨∃S1′−⊑E′⊓F′, since {a mathematical formula}T is a parsimonious {a mathematical formula}UCQ-representation, from condition (iv) it follows there exists a role T such that {a mathematical formula}D↝S∪BT, and {a mathematical formula}S∪B⊨T⊑R′⊓Q′ or {a mathematical formula}S∪B⊨∃T−⊑E′⊓F′. Again, we obtain that D is {a mathematical formula}S∪B-inconsistent, which contradicts the assumption {a mathematical formula}Di is {a mathematical formula}S∪B-consistent.Assume now {a mathematical formula}T∪B⊭∃S1′−⊑E′⊓F′ (the case {a mathematical formula}T∪B⊭S1′⊑R′⊓Q′ is not possible). Then it follows {a mathematical formula}T⊨{∃S1′−⊑B′,C′⊑E′} and/or {a mathematical formula}T⊨{∃S1′−⊑B′,C′⊑F′}, and the role T above is such that {a mathematical formula}S∪B⊨∃T−⊑B′. If T is over Σ, then {a mathematical formula}S⊨∃T−⊑B1 and {a mathematical formula}B⊨B1⊑B′ for some concept {a mathematical formula}B1 over Σ, next we have that {a mathematical formula}T′∪B⊨B1⊑E′⊓F′, so from condition (ii) it follows {a mathematical formula}S∪B⊨B1⊑E′⊓F′, and as before {a mathematical formula}B1 is {a mathematical formula}S∪B-inconsistent, which contradicts the assumption {a mathematical formula}Di is {a mathematical formula}S∪B-consistent. If T is over Γ, then {a mathematical formula}B′=∃T−=∃S1−, and by (I) it follows there exists {a mathematical formula}S1 such that {a mathematical formula}D↝S∪BS1 and {a mathematical formula}S∪B⊨{S1⊑S1′,∃S1−⊑C′}. Since {a mathematical formula}∃S1′−≠C′, it follows {a mathematical formula}S1 is over Σ, and there exists C over Σ such that {a mathematical formula}S⊨∃S1−⊑C and {a mathematical formula}B⊨C⊑C′. Now, we have that {a mathematical formula}T′∪B⊨C⊑E′⊓F′, from condition (ii) it follows {a mathematical formula}S∪B⊨C⊑E′⊓F′, so as before C is {a mathematical formula}S∪B-inconsistent, which contradicts the assumption {a mathematical formula}Di is {a mathematical formula}S∪B-consistent.For {a mathematical formula}n&gt;1, we can continue reasoning as for the case {a mathematical formula}n=1 to obtain a contradiction. Finally, we conclude that {a mathematical formula}Di is {a mathematical formula}S∪B-inconsistent, hence {a mathematical formula}(D1,D2) is {a mathematical formula}S∪B-inconsistent.Let {a mathematical formula}(S1,S2) be a pair of {a mathematical formula}S-consistent, {a mathematical formula}T∪B-consistent and {a mathematical formula}T′∪B-inconsistent roles (this is the only non-trivial case). Since {a mathematical formula}T′ extends {a mathematical formula}T with a concept inclusion, we have that there exist {a mathematical formula}D1,D2 covering {a mathematical formula}{∃S1,∃S2} or {a mathematical formula}{∃S1−,∃S2−} such {a mathematical formula}(D1,D2) is {a mathematical formula}T′∪B-inconsistent and {a mathematical formula}T∪B-consistent. By reasoning as above, we obtain {a mathematical formula}(D1,D2) is {a mathematical formula}S∪B-inconsistent, therefore {a mathematical formula}(S1,S2) is {a mathematical formula}S∪B-inconsistent.To show condition (iv) of Lemma 7.1 assume an {a mathematical formula}S∪B-consistent concept D over Σ and a role R such that {a mathematical formula}D↝T′∪BR and it is not the case that {a mathematical formula}D↝T∪BR. Hence, R is a role over Γ, and there exists {a mathematical formula}D′ over Γ such that {a mathematical formula}T⊨{D′⊑B′,C′⊑∃R} and {a mathematical formula}B⊨D⊑D′. As before, we can conclude there exists (an {a mathematical formula}S∪B-consistent) C over Σ such that {a mathematical formula}B⊨C⊑C′ (and {a mathematical formula}S⊨D⊑C). It means {a mathematical formula}T∪B⊨C⊑∃R, therefore either {a mathematical formula}C↝T∪BR, or {a mathematical formula}C=∃Q for some role Q over Σ such that {a mathematical formula}T∪B⊨Q⊑R, and {a mathematical formula}C↝T∪BQ. Since {a mathematical formula}T is a parsimonious {a mathematical formula}UCQ-representation, it follows there exists {a mathematical formula}z∈Δgen(S∪B,C(o)) such that{a mathematical formula} with {a mathematical formula}x=w[R] or {a mathematical formula}x=w[Q]. Observe that {a mathematical formula}R∈rΓgen(T∪B,C(o))(o,x), which implies that {a mathematical formula}z=w[S] for some role S such that {a mathematical formula}S∪B⊨C⊑∃S. Now, notice that {a mathematical formula}S∪B⊨D⊑∃S: we obtain that {a mathematical formula}o↝〈S∪B,D(o)〉w[T] for some role T (possibly coinciding with S) such that {a mathematical formula}S∪B⊨T⊑S. Finally, we have that{a mathematical formula} so we take y in condition (ii) to be equal to {a mathematical formula}w[T].Assume now {a mathematical formula}B′=∃R− for some role R over Γ, and D is an {a mathematical formula}S∪B-consistent concept over Σ such that {a mathematical formula}D↝T∪BR. By condition (ii), it follows {a mathematical formula}S∪B⊨D⊑∃R. The interesting case to consider is {a mathematical formula}tΓgen(T∪B,D(o))(w[R])={∃R−} (hence, {a mathematical formula}rΓgen(T∪B,D(o))(o,w[R])={R}), as for {a mathematical formula}T it is enough to take {a mathematical formula}y∈Δgen(S∪B,D(o)) equal to {a mathematical formula}w[S] such that {a mathematical formula}D↝S∪BS and {a mathematical formula}S∪B⊨S⊑R (such S exists: we take S equal to R if {a mathematical formula}D↝S∪BR). However, given the axiom {a mathematical formula}∃R−⊑C′ in {a mathematical formula}T′, we have {a mathematical formula}tΓgen(T′∪B,D(o))(w[R])⊇{∃R−,C′} (note, still {a mathematical formula}rΓgen(T′∪B,D(o))(o,w[R])={R}). As {a mathematical formula}B′ and {a mathematical formula}C′ satisfy (I) and {a mathematical formula}S∪B⊨D⊑∃R, it follows there exists S such that {a mathematical formula}D↝S∪BS and {a mathematical formula}S∪B⊨{S⊑R,∃S−⊑C′}; moreover by {a mathematical formula}C′≠∃R− and the structure of {a mathematical formula}S∪B it follows S is over Σ. From the latter we obtain a role Q over Σ such that {a mathematical formula}S⊨S⊑Q and {a mathematical formula}B⊨Q⊑R, moreover {a mathematical formula}∃Q− and Q are {a mathematical formula}S∪B-consistent. Now, assume {a mathematical formula}T⊨∃R−⊑E′; then {a mathematical formula}T∪B⊨∃Q−⊑E′, and since {a mathematical formula}T satisfies condition (ii) it follows {a mathematical formula}S∪B⊨∃Q−⊑E′, therefore {a mathematical formula}E′∈tΓgen(S∪B,D(o))(w[S]). Thus {a mathematical formula}tΓgen(T′∪B,D(o))(w[R])⊆tΓgen(S∪B,D(o))(w[S]), and we take {a mathematical formula}y=w[S] to satisfy condition (iv) of Lemma 7.1.(⇒) Suppose inclusion {a mathematical formula}B⊑C′ is representable in {a mathematical formula}S and {a mathematical formula}M by a target axiom α. Then {a mathematical formula}T={α} is a parsimonious {a mathematical formula}UCQ-representation and {a mathematical formula}T∪B⊨B⊑C′. If {a mathematical formula}B⊨B⊑C′, we take {a mathematical formula}B′ equal to {a mathematical formula}C′: obviously, (H) and (I) are satisfied. Now, assume {a mathematical formula}B⊭B⊑C′. Then it must be the case α is of the form {a mathematical formula}D′⊑C′ and {a mathematical formula}B⊨B⊑D′ for some concept {a mathematical formula}D′ over Γ. So we take {a mathematical formula}B′ equal to {a mathematical formula}D′, and prove below (H) and (I) are satisfied.For (H), let {a mathematical formula}S∪B⊨D⊑B′ for a {a mathematical formula}S∪B-consistent concept D over Σ. It follows {a mathematical formula}S⊨D⊑B1 and {a mathematical formula}B⊨B1⊑B′ for some concept {a mathematical formula}B1 over Σ. Consequently, {a mathematical formula}T∪B⊨B1⊑C′, and as {a mathematical formula}T is a parsimonious {a mathematical formula}UCQ-representation, we obtain that {a mathematical formula}S∪B⊨B1⊑C′. Finally, we proved that {a mathematical formula}S∪B⊨D⊑C′.For (I), assume {a mathematical formula}B′ is of the form {a mathematical formula}∃Q′− for some role {a mathematical formula}Q′ over Γ, and {a mathematical formula}S∪B⊨D⊑∃Q′. As above, there exists {a mathematical formula}B1 over Σ such that {a mathematical formula}B⊨B1⊑∃Q′. Then, {a mathematical formula}B1↝T∪BS′ for some role {a mathematical formula}S′ (possibly coinciding with {a mathematical formula}Q′) such that {a mathematical formula}T∪B⊨S′⊑Q′. By condition (iv) of Lemma 7.1 and {a mathematical formula}Q′∈rΓgen(T∪B,B1(o))(o,w[S′]), there exists a role S such that {a mathematical formula}tΓgen(T∪B,B1(o))(w[S′])⊆tΓgen(S∪B,B1(o))(w[S]) and {a mathematical formula}rΓgen(T∪B,B1(o))(o,w[S′])⊆rΓgen(S∪B,B1(o))(o,w[S]). It implies, {a mathematical formula}B1↝S∪BS. Further, since {a mathematical formula}S∪B⊨D⊑B1, we have that {a mathematical formula}D↝S∪BQ for some role Q (possibly coinciding with S) such that {a mathematical formula}T∪B⊨Q⊑S. It is straightforward to verify that {a mathematical formula}S∪B⊨{Q⊑Q′,∃Q−⊑C′}.  □</paragraph></paragraph><paragraph label="Proposition D.2">For a role R over Σ and{a mathematical formula}Q′over Γ, inclusion{a mathematical formula}R⊑Q′is representable in{a mathematical formula}Sand{a mathematical formula}Mif and only if there exists{a mathematical formula}R′over Γ such that{a mathematical formula}B⊨R⊑R′, and</paragraph><list><list-item>for each{a mathematical formula}S-consistent role S over Σ,{a mathematical formula}S∪B⊨S⊑R′implies{a mathematical formula}S∪B⊨S⊑Q′;</list-item><list-item>{a mathematical formula}B′,C′satisfy conditions (H) and (I) for{a mathematical formula}B′=∃R′,{a mathematical formula}C′=∃Q′, and{a mathematical formula}B′=∃R′−,{a mathematical formula}C′=∃Q′−.</list-item></list><paragraph label="Proof">(⇐) Let R be a role over Σ and {a mathematical formula}Q′ over Γ, {a mathematical formula}R′≠Q′, and conditions (J) and (K) are satisfied. We show inclusion {a mathematical formula}R⊑Q′ is representable in {a mathematical formula}S and {a mathematical formula}M by {a mathematical formula}R′⊑Q′. Similarly, to the proof of Proposition D.1, take {a mathematical formula}T a parsimonious {a mathematical formula}UCQ-representation for {a mathematical formula}S under {a mathematical formula}M: we prove {a mathematical formula}T′=T∪{R′⊑Q′} is a parsimonious {a mathematical formula}UCQ-representation by showing the direction of condition (i) stating that for each {a mathematical formula}S-consistent and {a mathematical formula}T′∪B-inconsistent pair of concepts or roles {a mathematical formula}(X,Y), {a mathematical formula}(X,Y) is {a mathematical formula}S∪B-inconsistent, the ⇐ direction of condition (ii), and condition (iv) of Lemma 7.1 are satisfied.Satisfaction of conditions (ii) and (i) of Lemma 7.1 can be shown by analogy with the corresponding proofs in Proposition D.1. Note, here for concept inclusions/disjointness axioms we use the fact that {a mathematical formula}∃R′,∃Q′ and {a mathematical formula}∃R′−,∃Q′− satisfy (H), and for role inclusions/disjointness axioms we use the fact {a mathematical formula}R′,Q′ satisfy (J).For condition (iv), the interesting case to consider is {a mathematical formula}D↝T∪BR′, with D an {a mathematical formula}S∪B-consistent concept over Σ, {a mathematical formula}tΓgen(T∪B,D(o))(w[R])={∃R′−} and {a mathematical formula}rΓgen(T∪B,D(o))(o,w[R])={R′}. Now, given {a mathematical formula}R′⊑Q′∈T′, {a mathematical formula}tΓgen(T′∪B,D(o))(w[R])⊇{∃R′−,∃Q′−} and {a mathematical formula}rΓgen(T′∪B,D(o))(o,w[R])⊇{R′,Q′}. By condition (ii), it follows {a mathematical formula}S∪B⊨D⊑∃R′. As {a mathematical formula}∃R′− and {a mathematical formula}∃Q′− satisfy (I) and {a mathematical formula}S∪B⊨D⊑∃R′, it follows there exists S such that {a mathematical formula}D↝S∪BS and {a mathematical formula}S∪B⊨{S⊑R′,∃S−⊑∃Q′−}; moreover by {a mathematical formula}∃Q′−≠∃R′− and the structure of {a mathematical formula}S∪B it follows S is over Σ. From the latter we obtain a role Q over Σ such that {a mathematical formula}S⊨S⊑Q and {a mathematical formula}B⊨Q⊑R, moreover {a mathematical formula}∃Q− and Q are {a mathematical formula}S∪B-consistent. Now, assume {a mathematical formula}T⊨∃R′−⊑E′; then {a mathematical formula}T∪B⊨∃Q−⊑E′, and since {a mathematical formula}T satisfies condition (ii) it follows {a mathematical formula}S∪B⊨∃Q−⊑E′, therefore {a mathematical formula}E′∈tΓgen(S∪B,D(o))(w[S]). Similarly, for {a mathematical formula}T′ such that {a mathematical formula}T⊨R′⊑T′, we can show {a mathematical formula}T′∈rΓgen(S∪B,D(o))(o,w[S]). Thus, we take {a mathematical formula}y=w[S] to satisfy condition (iv) of Lemma 7.1.(⇒) Suppose inclusion {a mathematical formula}R⊑Q′ is representable in {a mathematical formula}S and {a mathematical formula}M by a target axiom α. Then {a mathematical formula}T={α} is a parsimonious {a mathematical formula}UCQ-representation and {a mathematical formula}T∪B⊨R⊑Q′. If {a mathematical formula}B⊨R⊑Q′, we take {a mathematical formula}R′ equal to {a mathematical formula}Q′: obviously, (J) and (K) are satisfied. Now, assume {a mathematical formula}B⊭R⊑Q′. Then it must be the case α is of the form {a mathematical formula}S′⊑Q′ and {a mathematical formula}B⊨R⊑S′ for some role {a mathematical formula}S′ over Γ. So we take {a mathematical formula}R′ equal to {a mathematical formula}S′, then (J) is shown similarly to (H) in the proof of Proposition D.1, and satisfaction of (K) is shown exactly as in the proof of ⇒ of Proposition D.1 for {a mathematical formula}B′=∃R′, {a mathematical formula}C′=∃Q′, and {a mathematical formula}B′=∃R′−, {a mathematical formula}C′=∃Q′−.  □</paragraph><paragraph label="Proposition D.3">For roles{a mathematical formula}R1,R2over Σ,{a mathematical formula}(R1,R2)is target contradictable in{a mathematical formula}Sand{a mathematical formula}Miff either for{a mathematical formula}{R,Q}⊆{R1,R2}there exists{a mathematical formula}R′over Γ such that<list>{a mathematical formula}B⊨R⊑R′, and either{a mathematical formula}Q⊑¬R′∈B, or there exists{a mathematical formula}Q′over Γ such that{a mathematical formula}B⊨Q⊑Q′andor{a mathematical formula}B⊨R⊑¬R′and inclusion{a mathematical formula}Q⊑R′is representable in{a mathematical formula}Sand{a mathematical formula}M;or for</list><paragraph>{a mathematical formula}{B,C}⊆{∃R1,∃R2}or{a mathematical formula}{∃R1−,∃R2−}there exists{a mathematical formula}B′over Γ such that</paragraph><list><list-item>{a mathematical formula}B⊨B⊑B′, and either{a mathematical formula}C⊑¬B′∈B, or there exists{a mathematical formula}C′over Γ such that{a mathematical formula}B⊨C⊑C′and</list-item><list-item>or{a mathematical formula}B⊨B⊑¬B′and inclusion{a mathematical formula}C⊑B′is representable in{a mathematical formula}Sand{a mathematical formula}M.</list-item></list><paragraph>Then{a mathematical formula}(R1,R2)is target contradictable by either{a mathematical formula}R′⊑R′, or{a mathematical formula}Q′⊑¬R′in (L), by axiom α, where{a mathematical formula}Q⊑R′is representable by α in (M), by either{a mathematical formula}B′⊑B′, or{a mathematical formula}C′⊑¬B′in (N), and by axiom α, where{a mathematical formula}C⊑B′is representable by α in (O).</paragraph></paragraph><paragraph label="Proof">(⇐) Let {a mathematical formula}R1,R2 be roles over Σ and one of the conditions (L), (M), (N), or (O) is satisfied. We show {a mathematical formula}(R1,R2) is target contradictable by α given by each of the conditions. Take {a mathematical formula}T a parsimonious {a mathematical formula}UCQ-representation for {a mathematical formula}S under {a mathematical formula}M: we prove {a mathematical formula}T′=T∪{α} is a parsimonious {a mathematical formula}UCQ-representation, by showing conditions (i), (ii), and (iv) of Lemma 7.1 are satisfied (only the required directions, see the proof of Proposition D.1). That {a mathematical formula}(R1,R2) is {a mathematical formula}T′∪B-inconsistent, follows immediately from the shape of α and {a mathematical formula}B in each of the cases. Observe that if α is given by one of the conditions (M) or (O), then {a mathematical formula}T′ is a parsimonious {a mathematical formula}UCQ-representation follows from the proof of Proposition D.1, Proposition D.2. As for α given by conditions (L) or (N), it should be clear that conditions (ii) and (iv) of Lemma 7.1 are satisfied, as disjointness axioms do not affect entailments of the concept and role inclusions. Therefore, below we show {a mathematical formula}T′ satisfies condition (i).Assume condition (L) is satisfied, and {a mathematical formula}α=Q′⊑¬R′ (the case {a mathematical formula}α=R′⊑R′ is trivial), hence {a mathematical formula}B⊭Q⊑¬R′. Let {a mathematical formula}(D1,D2) be a pair of {a mathematical formula}S-consistent, {a mathematical formula}T∪B-consistent and {a mathematical formula}T′∪B-inconsistent concepts. The case both {a mathematical formula}Di is {a mathematical formula}T′∪B-consistent is not possible due to the shape of α. Then some {a mathematical formula}Di is {a mathematical formula}T′∪B-inconsistent, and by (F) it follows there exist {a mathematical formula}n≥1 and distinct roles {a mathematical formula}S1′,…,Sn′ such that {a mathematical formula}Di↝T∪BS1′, {a mathematical formula}∃Sj′−↝T∪BSj+1′ and {a mathematical formula}T∪B⊨Sn′⊑R′⊓Q′ or {a mathematical formula}T∪B⊨Sn′⊑R′−⊓Q′−. In the following, we consider only {a mathematical formula}T∪B⊨Sn′⊑R′⊓Q′.For the sake of contradiction, assume {a mathematical formula}Di is {a mathematical formula}S∪B-consistent. If {a mathematical formula}n=1 and {a mathematical formula}S1′ is a role over Σ (i.e., {a mathematical formula}Di=∃S1′ and {a mathematical formula}S1′ is {a mathematical formula}S∪B-consistent), then we obtain contradiction with (a) rised from the assumption {a mathematical formula}Di is {a mathematical formula}S∪B-consistent. If {a mathematical formula}n=1 and {a mathematical formula}S1′ is a role over Γ, then since {a mathematical formula}T is a parsimonious {a mathematical formula}UCQ-representation and {a mathematical formula}Di↝T∪BS1′, by condition (iv), we obtain a role {a mathematical formula}S1 such that {a mathematical formula}Di↝S∪BS1, and {a mathematical formula}S∪B⊨S1⊑R′⊓Q′: contradiction with (b).For {a mathematical formula}n&gt;1, inductively using condition (iv), we obtain roles {a mathematical formula}S1,…,Sn−1 over Σ and {a mathematical formula}Sn such that {a mathematical formula}Di↝S∪BS1, {a mathematical formula}∃Sj−↝S∪BSj+1, and {a mathematical formula}S∪B⊨Sn⊑R′⊓Q′. Then (b) implies that {a mathematical formula}∃Sn−1− is {a mathematical formula}S∪B-inconsistent, which contradicts the assumption {a mathematical formula}Di is {a mathematical formula}S∪B-consistent. Finally, we conclude that {a mathematical formula}Di is {a mathematical formula}S∪B-inconsistent, hence {a mathematical formula}(D1,D2) is {a mathematical formula}S∪B-inconsistent.Let {a mathematical formula}(S1,S2) be a pair of {a mathematical formula}S-consistent, {a mathematical formula}T∪B-consistent and {a mathematical formula}T′∪B-inconsistent roles. For the sake of contradiction, assume {a mathematical formula}(S1,S2) is {a mathematical formula}S∪B-consistent (and each of {a mathematical formula}Si is {a mathematical formula}S∪B-consistent).Suppose both {a mathematical formula}Si is {a mathematical formula}T′∪B-consistent. From the shape of α, without loss of generality, we may assume that {a mathematical formula}T′∪B⊨{S1⊑R′,S2⊑Q′}. From condition (ii), we obtain {a mathematical formula}S∪B⊨{S1⊑R′,S2⊑Q′}, which contradicts (a).Suppose one of {a mathematical formula}Si is {a mathematical formula}T′∪B-inconsistent. Then by (G) either {a mathematical formula}T∪B⊨Si⊑R′⊓Q′ or {a mathematical formula}T∪B⊨Si⊑R′−⊓Q′−, or D is {a mathematical formula}T′∪B-inconsistent for {a mathematical formula}D=∃Si or {a mathematical formula}D=∃Si−. In the latter case, we obtain contradiction as in the case {a mathematical formula}(D1,D2) is {a mathematical formula}T′∪B-inconsistent. In the former case, from condition (ii), it follows {a mathematical formula}S∪B⊨Si⊑R′⊓Q′ or {a mathematical formula}S∪B⊨Si⊑R′−⊓Q′−, which contradicts (a). Finally, we conclude {a mathematical formula}(S1,S2) is {a mathematical formula}S∪B-inconsistent.Assume condition (N) is satisfied, and {a mathematical formula}α=C′⊑¬B′ (the case {a mathematical formula}α=B′⊑B′ is trivial), hence {a mathematical formula}B⊭C⊑¬B′. Let {a mathematical formula}(D1,D2) be a pair of {a mathematical formula}S-consistent, {a mathematical formula}T∪B-consistent and {a mathematical formula}T′∪B-inconsistent concepts. For the sake of contradiction, assume {a mathematical formula}(D1,D2) is {a mathematical formula}S∪B-consistent (and each of {a mathematical formula}Di is {a mathematical formula}S∪B-consistent).Suppose both {a mathematical formula}Di is {a mathematical formula}T′∪B-consistent. From the shape of α, without loss of generality, we may assume that {a mathematical formula}T∪B⊨{D1⊑B′,D2⊑C′}. From condition (ii), it follows {a mathematical formula}S∪B⊨{D1⊑B′,D2⊑C′}: contradiction with (c).Suppose one of {a mathematical formula}Di is {a mathematical formula}T′∪B-inconsistent. By (F), consider {a mathematical formula}T∪B⊨Di⊑B′⊓C′. From condition (ii), it follows {a mathematical formula}S∪B⊨Di⊑B′⊓C′: contradiction with (c). Now, consider the case there exist {a mathematical formula}n≥1 and distinct roles {a mathematical formula}S1′,…,Sn′ such that {a mathematical formula}Di↝T∪BS1′, {a mathematical formula}∃Sj′−↝T∪BSj+1′ and {a mathematical formula}T∪B⊨∃Sn′−⊑B′⊓C′. Inductively using condition (iv), we obtain roles {a mathematical formula}S1,…,Sn−1 over Σ and {a mathematical formula}Sn such that {a mathematical formula}Di↝S∪BS1, {a mathematical formula}∃Sj−↝S∪BSj+1, and {a mathematical formula}S∪B⊨∃Sn−⊑B′⊓C′. Then (d) implies that {a mathematical formula}∃Sn−1− (or {a mathematical formula}Di if {a mathematical formula}n=1) is {a mathematical formula}S∪B-inconsistent, which contradicts the assumption {a mathematical formula}Di is {a mathematical formula}S∪B-consistent. Finally, we conclude that {a mathematical formula}Di is {a mathematical formula}S∪B-inconsistent, hence {a mathematical formula}(D1,D2) is {a mathematical formula}S∪B-inconsistent.Let {a mathematical formula}(S1,S2) be a pair of {a mathematical formula}S-consistent, {a mathematical formula}T∪B-consistent and {a mathematical formula}T′∪B-inconsistent roles. From the shape of α, it follows D is {a mathematical formula}T′∪B-inconsistent, for {a mathematical formula}D=∃Si or {a mathematical formula}D=∃Si− and {a mathematical formula}i∈{1,2}. It can be shown D is {a mathematical formula}S∪B-inconsistent as above.(⇒) Suppose pair {a mathematical formula}(R1,R2) is target contradictable in {a mathematical formula}S and {a mathematical formula}M by a target axiom α. If {a mathematical formula}(R1,R2) is {a mathematical formula}B-inconsistent, then there exist {a mathematical formula}R,Q∈{R1,R2} and {a mathematical formula}R′ over Γ such that {a mathematical formula}B⊨{R⊑R′,Q⊑¬R′} (hence, (L) is satisfied), or there exist {a mathematical formula}B,C in {a mathematical formula}{∃R1,∃R2} or in {a mathematical formula}{∃R1,∃R2} and {a mathematical formula}B′ over Γ such that {a mathematical formula}B⊨{B⊑B′,C⊑¬B′} (hence, (N) is satisfied).Assume {a mathematical formula}(R1,R2) is {a mathematical formula}B-consistent. Then α is a non-trivial axiom, {a mathematical formula}T={α} is a parsimonious {a mathematical formula}UCQ-representation, and {a mathematical formula}(R1,R2) is {a mathematical formula}T∪B-inconsistent.Suppose α is a role disjointness axiom {a mathematical formula}S1⊑¬S2. Then it follows there exist {a mathematical formula}R,Q∈{R1,R2} and {a mathematical formula}S,T∈{S1,S2} such that {a mathematical formula}B⊨{R⊑S,Q⊑T}. So we set {a mathematical formula}R′ equal to S and {a mathematical formula}Q′ equal to T. We prove (a) and (b) are satisfied. For (a), assume an {a mathematical formula}S∪B-consistent pair of roles {a mathematical formula}S1,S2 over Σ such that {a mathematical formula}S∪B⊨{S1⊑R′,S2⊑Q′}. It follows there exist {a mathematical formula}S11,S22 over Σ such that {a mathematical formula}S⊨{S1⊑S11,S2⊑S22} and {a mathematical formula}B⊨{S11⊑R′,S22⊑Q′}. Next, {a mathematical formula}(S11,S22) is {a mathematical formula}T∪B-inconsistent, and since {a mathematical formula}T is a parsimonious {a mathematical formula}UCQ-representation, it follows {a mathematical formula}(S11,S22) is {a mathematical formula}S∪B-inconsistent, which contradicts {a mathematical formula}(S1,S2) is {a mathematical formula}S∪B-consistent. Hence, it cannot be the case {a mathematical formula}S∪B⊨{S1⊑R′,S2⊑Q′}. For (b), assume an {a mathematical formula}S∪B-consistent concept D over Σ such that {a mathematical formula}D↝S∪BS and {a mathematical formula}S∪B⊨S⊑R′⊓Q′. If S is over Σ, then as above, we obtain a contradiction with D being {a mathematical formula}S∪B-consistent. If S is over Γ, it follows {a mathematical formula}S=R′=Q′, and there exists a concept {a mathematical formula}D1 over Σ such that {a mathematical formula}S⊨D⊑D1 and {a mathematical formula}B⊨D1⊑∃S. As above, {a mathematical formula}(D1,D1) is {a mathematical formula}T∪B-inconsistent, and since {a mathematical formula}T is a parsimonious {a mathematical formula}UCQ-representation, it follows {a mathematical formula}(D1,D1) is {a mathematical formula}S∪B-inconsistent, which contradicts D is {a mathematical formula}S∪B-consistent. Hence, it cannot be the case {a mathematical formula}S∪B⊨S⊑R′⊓Q′. In a similar way we obtain a contradiction if assume {a mathematical formula}S∪B⊨S⊑R′−⊓Q′−. Thus, (L) is satisfied.Suppose α is a role inclusion assertion {a mathematical formula}S1⊑S2. Then it follows there exist {a mathematical formula}R,Q∈{R1,R2} such that {a mathematical formula}B⊨{R⊑¬S2,Q⊑S1}. So we set {a mathematical formula}R′ equal to {a mathematical formula}S2, the proof {a mathematical formula}Q⊑R′ is representable by {a mathematical formula}S1⊑R′ is similar to the proof of ⇒ of Proposition D.2. Thus, (M) is satisfied.Suppose α is a concept disjointness axiom {a mathematical formula}D1⊑¬D2. Then it follows there exist {a mathematical formula}B,C in {a mathematical formula}{∃R1,∃R2} or {a mathematical formula}{∃R1−,∃R2−} and {a mathematical formula}D,E∈{D1,D2} such that {a mathematical formula}B⊨{B⊑D,C⊑E}. So we set {a mathematical formula}B′ equal to D and {a mathematical formula}C′ equal to E. We can prove (c) and (d) are satisfied by analogy with the proof of (a) and (b). Thus, (N) is satisfied.Suppose α is a concept inclusion assertion {a mathematical formula}D1⊑D2. Then it follows there exist {a mathematical formula}B,C in {a mathematical formula}{∃R1,∃R2} or {a mathematical formula}{∃R1−,∃R2−} such that {a mathematical formula}B⊨{B⊑¬D2,C⊑D1}. So we set {a mathematical formula}B′ equal to {a mathematical formula}D2, the proof {a mathematical formula}C⊑B′ is representable by {a mathematical formula}D1⊑B′ is similar to the proof of ⇒ of Proposition D.1. Thus, (O) is satisfied.  □</paragraph><paragraph label="Proposition D.4">For concepts{a mathematical formula}B1,B2over Σ,{a mathematical formula}(B1,B2)is target contradictable in{a mathematical formula}Sand{a mathematical formula}Mif either for{a mathematical formula}{B,C}⊆{B1,B2}there exists{a mathematical formula}B′over Γ such that<list>{a mathematical formula}B⊨B⊑B′, and either{a mathematical formula}C⊑¬B′∈B, or there exists{a mathematical formula}C′over Γ such that{a mathematical formula}B⊨C⊑C′andor{a mathematical formula}B⊨B⊑¬B′and inclusion{a mathematical formula}C⊑B′is representable in{a mathematical formula}Sand{a mathematical formula}M;or</list><paragraph>{a mathematical formula}B1=∃Ror{a mathematical formula}B2=∃Rfor a role R, and</paragraph><list><list-item>{a mathematical formula}(R,R)is target contradictable in{a mathematical formula}Sand{a mathematical formula}M.</list-item></list><paragraph>Then{a mathematical formula}(B1,B2)is target contradictable by either{a mathematical formula}B′⊑B′or{a mathematical formula}C′⊑¬B′in (P), by axiom α, where{a mathematical formula}C⊑B′is representable by α in (Q), and by axiom α such that{a mathematical formula}(R,R)is target contradictable by α in (R).</paragraph></paragraph><paragraph label="Proof">The proof is similar to the proof of Proposition D.3.  □</paragraph></section></appendices><references><reference label="[1]">R. Cote,D. Rothwell,J. Palotay,R. Beckett,L. BrochuThe systematized nomenclature of human and veterinary medicineTechnical report<host>(1993)College of American PathologistsSNOMED International, Northfield, IL</host></reference><reference label="[2]"><authors>S. Schulz,K. Marko,B. Suntisrivaraporn</authors><title>Formal representation of complex SNOMED CT expressions</title><host>BMC Med. Inform. Decis. Mak.8 (2008)</host></reference><reference label="[3]"><authors>M. Lenzerini</authors><title>Data integration: a theoretical perspective</title><host>Proc. of the 21st ACM SIGACT SIGMOD SIGART Symp. on Principles of Database Systems (PODS)(2002) pp.233-246</host></reference><reference label="[4]"><authors>A. Kementsietsidis,M. Arenas,R.J. Miller</authors><title>Mapping data in peer-to-peer systems: semantics and algorithmic issues</title><host>Proc. of the ACM SIGMOD Int. Conf. on Management of Data(2003) pp.325-336</host></reference><reference label="[5]"><authors>P. Adjiman,P. Chatalic,F. Goasdoué,M.-C. Rousset,L. Simon</authors><title>Distributed reasoning in a peer-to-peer setting: application to the semantic web</title><host>J. Artif. Intell. Res.25 (2006) pp.269-314</host></reference><reference label="[6]"><authors>A. Fuxman,P.G. Kolaitis,R.J. Miller,W.C. Tan</authors><title>Peer data exchange</title><host>ACM Trans. Database Syst.31 (2006) pp.1454-1498</host></reference><reference label="[7]"><authors>J. Euzenat,P. Shwaiko</authors><title>Ontology Matching</title><host>(2007)Springer</host></reference><reference label="[8]"><authors>P. Shvaiko,J. Euzenat</authors><title>Ontology matching: state of the art and future challenges</title><host>IEEE Trans. Knowl. Data Eng.25 (2013) pp.158-176</host></reference><reference label="[9]"><authors>J. Euzenat,C. Meilicke,H. Stuckenschmidt,P. Shvaiko,C.T. dos Santos</authors><title>Ontology alignment evaluation initiative: six years of experience</title><host>J. Data Semant.15 (2011) pp.158-192</host></reference><reference label="[10]"><authors>R. Diaconescu,J. Goguen,P. Stefaneas</authors><title>Logical support for modularisation</title><host>Papers Presented at the Second Annual Workshop on Logical Environments(1993)Cambridge University Press pp.83-130</host></reference><reference label="[11]"><authors>B. Cuenca Grau,B. Parsia,E. Sirin,A. Kalyanpur</authors><title>Modularity and Web ontologies</title><host>Proc. of the 10th Int. Conf. on the Principles of Knowledge Representation and Reasoning (KR)(2006) pp.198-209</host></reference><reference label="[12]"><authors>B. Cuenca Grau,I. Horrocks,Y. Kazakov,U. Sattler</authors><title>Modular reuse of ontologies: theory and practice</title><host>J. Artif. Intell. Res.31 (2008) pp.273-318</host></reference><reference label="[13]"><authors>S. Buvač,R. Fikes</authors><title>A declarative formalization of knowledge translation</title><host>Proc. of the 4th Int. Conf. on Information and Knowledge Management (CIKM)(1995) pp.340-34710.1145/221270.221610</host></reference><reference label="[14]"><authors>D. Dou,D. Mcdermott,P. Qi</authors><title>Ontology translation on the semantic web</title><host>J. Data Semant.2 (2005) pp.35-57</host></reference><reference label="[15]"><authors>D. Dou,H. Qin,H. Liu</authors><title>Semantic translation for rule-based knowledge in data mining</title><host>Proc. of the 22nd Int. Conf. on Database and Expert Systems Applications (DEXA)Lecture Notes in Computer Sciencevol. 6861 (2011)Springer pp.74-89</host></reference><reference label="[16]"><authors>R. Fagin,P.G. Kolaitis,R.J. Miller,L. Popa</authors><title>Data exchange: semantics and query answering</title><host>Theor. Comput. Sci.336 (2005) pp.89-124</host></reference><reference label="[17]"><authors>P. Barceló</authors><title>Logical foundations of relational data exchange</title><host>SIGMOD Rec.38 (2009) pp.49-58</host></reference><reference label="[18]"><authors>N.C. Shu,B.C. Housel,R.W. Taylor,S.P. Ghosh,V.Y. Lum</authors><title>EXPRESS: a data EXtraction Processing, and Restructuring System</title><host>ACM Trans. Database Syst.2 (1977) pp.134-174</host></reference><reference label="[19]"><authors>L.M. Haas,M.A. Hernández,H. Ho,L. Popa,M. Roth</authors><title>Clio grows up: from research prototype to industrial tool</title><host>Proc. of the ACM SIGMOD Int. Conf. on Management of Data(2005) pp.805-81010.1145/1066157.1066252</host></reference><reference label="[20]"><authors>M. Arenas,P. Barceló,L. Libkin,F. Murlak</authors><title>Relational and XML Data Exchange</title><host>Synthesis Lectures on Data Managementvol. 8 (2010)Morgan &amp; Claypool</host></reference><reference label="[21]"><authors>M. Arenas,P. Barceló,L. Libkin,F. Murlak</authors><title>Foundations of Data Exchange</title><host>(2014)Cambridge University Press</host></reference><reference label="[22]"><authors>L. Libkin,C. Sirangelo</authors><title>Data exchange and schema mappings in open and closed worlds</title><host>J. Comput. Syst. Sci.77 (2011) pp.542-571</host></reference><reference label="[23]"><authors>A. Hernich,N. Schweikardt</authors><title>Logic and data exchange: which solutions are “good” solutions?</title><host>Revised Selected Papers of the 8th Int. Conf. on Logic and the Foundations of Game and Decision Theory (LOFT 8)Lecture Notes in Computer Sciencevol. 6006 (2008)Springer pp.61-85</host></reference><reference label="[24]"><authors>R. Fagin,P.G. Kolaitis,L. Popa,W.C. Tan</authors><title>Reverse data exchange: coping with nulls</title><host>Proc. of the 28th ACM SIGACT SIGMOD SIGART Symp. on Principles of Database Systems (PODS)(2009) pp.23-32</host></reference><reference label="[25]"><authors>M. Arenas,J. Pérez,J.L. Reutter</authors><title>Data exchange beyond complete data</title><host>Proc. of the 30th ACM SIGACT SIGMOD SIGART Symp. on Principles of Database Systems (PODS)(2011) pp.83-94</host></reference><reference label="[26]"><host>F. BaaderD. CalvaneseD. McGuinnessD. NardiP.F. Patel-SchneiderThe Description Logic Handbook: Theory, Implementation and Applications(2003)Cambridge University Press</host></reference><reference label="[27]">B. Motik,B. Cuenca Grau,I. Horrocks,Z. Wu,A. Fokoue,C. LutzOWL 2 Web Ontology Language Profilessecond edition(2012)W3C Recommendation, World Wide Web Consortium. Available at<host>http://www.w3.org/TR/owl2-profiles/</host></reference><reference label="[28]">J. Bao,OWL 2 Web Ontology Language Document Overviewsecond edition(2012)W3C Recommendation, World Wide Web Consortium. Available at<host>http://www.w3.org/TR/owl2-overview/</host></reference><reference label="[29]"><authors>D. Calvanese,G. De Giacomo,D. Lembo,M. Lenzerini,R. Rosati</authors><title>Tractable reasoning and efficient query answering in description logics: the DL-Lite family</title><host>J. Autom. Reason.39 (2007) pp.385-429</host></reference><reference label="[30]"><authors>E. Botoeva,R. Kontchakov,V. Ryzhikov,F. Wolter,M. Zakharyaschev</authors><title>Games for query inseparability of description logic knowledge bases</title><host>Artif. Intell.234 (2016) pp.78-119</host></reference><reference label="[31]"><authors>M. Arenas,J. Pérez,C. Riveros</authors><title>The recovery of a schema mapping: bringing exchanged data back</title><host>ACM Trans. Database Syst.34 (2009) pp.22:1-22:48</host></reference><reference label="[32]"><authors>R. Fagin,P.G. Kolaitis,L. Popa,W.C. Tan</authors><title>Schema mapping evolution through composition and inversion</title><host>Schema Matching and Mapping(2011)Springer pp.191-22210.1007/978-3-642-16518-4_7</host></reference><reference label="[33]">R. Fikes,M. Cutkosky,T.R. Gruber,J. Van BaalenKnowledge sharing technology project overviewTechnical Report KSL 91-71<host>(1991)Knowledge Systems Laboratory, Stanford University</host></reference><reference label="[34]"><authors>J. McCarthy</authors><title>Notes on formalizing context</title><host>Proc. of the 13th Int. Joint Conf. on Artificial Intelligence (IJCAI)(1993)Morgan Kaufmann pp.555-560</host></reference><reference label="[35]"><authors>S. Buvac,I.A. Mason</authors><title>Propositional logic of context</title><host>Proc. of the 11th Nat. Conf. on Artificial Intelligence (AAAI)(1993) pp.412-419</host></reference><reference label="[36]">R. GuhaContexts: a formalization and some applicationsPh.D. thesis(1992)Stanford UniversityStanford, CA, USAUMI Order No. GAX92-17827</reference><reference label="[37]"><authors>D. Dou,D. Mcdermott</authors><title>Deriving axioms across ontologies</title><host>Proc. of the 5th Int. Conf. on Autonomous Agents and Multiagent Systems (AAMAS)(2006) pp.952-954</host></reference><reference label="[38]"><authors>A.Y. Halevy</authors><title>Answering queries using views: a survey</title><host>Very Large Database J.10 (2001) pp.270-294</host></reference><reference label="[39]"><authors>A.Y. Levy,A.O. Mendelzon,Y. Sagiv,D. Srivastava</authors><title>Answering queries using views</title><host>Proc. of the 14th ACM SIGACT SIGMOD SIGART Symp. on Principles of Database Systems (PODS)(1995) pp.95-104</host></reference><reference label="[40]"><authors>J.D. Ullman</authors><title>Information integration using logical views</title><host>Proc. of the 6th Int. Conf. on Database Theory (ICDT)Lecture Notes in Computer Sciencevol. 1186 (1997)Springer pp.19-40</host></reference><reference label="[41]"><authors>A. Doan,A.Y. Halevy,Z.G. Ives</authors><title>Principles of Data Integration</title><host>(2012)Morgan Kaufmann</host></reference><reference label="[42]"><authors>A.Y. Halevy,N. Ashish,D. Bitton,M.J. Carey,D. Draper,J. Pollock,A. Rosenthal,V. Sikka</authors><title>Enterprise information integration: successes, challenges and controversies</title><host>Proc. of the ACM SIGMOD Int. Conf. on Management of Data(2005) pp.778-78710.1145/1066157.1066246</host></reference><reference label="[43]"><authors>N.F. Noy,A. Doan,A.Y. Halevy</authors><title>Semantic integration (editorial)</title><host>AI Mag.26 (2005) pp.7-</host></reference><reference label="[44]"><authors>D. Calvanese,G. De Giacomo,D. Lembo,M. Lenzerini,R. Rosati</authors><title>Conceptual modeling for data integration</title><host>A.T. BorgidaV. ChaudhriP. GiorginiE. YuConceptual Modeling: Foundations and Applications – Essays in Honor of John MylopoulosLecture Notes in Computer Sciencevol. 5600 (2009)Springer pp.173-197</host></reference><reference label="[45]"><authors>D. Calvanese,G. De Giacomo,M. Lenzerini</authors><title>A framework for ontology integration</title><host>Proc. of the 2001 Int. Semantic Web Working Symp. (SWWS)(2001) pp.303-316</host></reference><reference label="[46]"><host>H. StuckenschmidtC. ParentS. SpaccapietraModular Ontologies: Concepts, Theories and Techniques for Knowledge ModularizationLecture Notes in Computer Sciencevol. 5445 (2009)Springer10.1007/978-3-642-01907-4</host></reference><reference label="[47]"><authors>B. Konev,C. Lutz,D. Walther,F. Wolter</authors><title>Model-theoretic inseparability and modularity of description logic ontologies</title><host>Artif. Intell.203 (2013) pp.66-103</host></reference><reference label="[48]"><authors>B. Konev,D. Walther,F. Wolter</authors><title>Forgetting and uniform interpolation in large-scale description logic terminologies</title><host>Proc. of the 21st Int. Joint Conf. on Artificial Intelligence (IJCAI)(2009) pp.830-835</host></reference><reference label="[49]"><authors>N. Nikitina,S. Rudolph</authors><title>(Non-)succinctness of uniform interpolants of general terminologies in the description logic EL</title><host>Artif. Intell.215 (2014) pp.120-140</host></reference><reference label="[50]"><authors>P. Koopmann,R.A. Schmidt</authors><title>Uniform interpolation and forgetting for ALC ontologies with ABoxes</title><host>Proc. of the 29th AAAI Conf. on Artificial Intelligence (AAAI)(2015)AAAI Press pp.175-181</host></reference><reference label="[51]"><authors>C. Lutz,D. Walther,F. Wolter</authors><title>Conservative extensions in expressive description logics</title><host>Proc. of the 20th Int. Joint Conf. on Artificial Intelligence (IJCAI)(2007) pp.453-458</host></reference><reference label="[52]"><authors>E. Botoeva,C. Lutz,V. Ryzhikov,F. Wolter,M. Zakharyaschev</authors><title>Query-based entailment and inseparability for ALC ontologies</title><host>Proc. of the 25th Int. Joint Conf. on Artificial Intelligence (IJCAI)(2016)AAAI Press</host></reference><reference label="[53]"><authors>C. Lutz,F. Wolter</authors><title>Deciding inseparability and conservative extensions in the description logic EL</title><host>J. Symb. Comput.45 (2010) pp.194-228</host></reference><reference label="[54]"><authors>R. Kontchakov,F. Wolter,M. Zakharyaschev</authors><title>Logic-based ontology comparison and module extraction, with an application to DL-Lite</title><host>Artif. Intell.174 (2010) pp.1093-1141</host></reference><reference label="[55]"><authors>B. Konev,R. Kontchakov,M. Ludwig,T. Schneider,F. Wolter,M. Zakharyaschev</authors><title>Conjunctive query inseparability of OWL 2 QL TBoxes</title><host>Proc. of the 25th AAAI Conf. on Artificial Intelligence (AAAI)(2011) pp.221-226</host></reference><reference label="[56]"><authors>P. Blackburn,M. de Rijke,Y. Venema</authors><title>Modal Logic</title><host>Cambridge Tracts in Theoretical Computer Sciencevol. 53 (2001)Cambridge University Press</host></reference><reference label="[57]"><authors>S. Abiteboul,R. Hull,V. Vianu</authors><title>Foundations of Databases</title><host>(1995)Addison Wesley Publ. Co.</host></reference><reference label="[58]"><authors>M. Arenas,E. Botoeva,D. Calvanese,V. Ryzhikov,E. Sherkhonov</authors><title>Exchanging description logic knowledge bases</title><host>Proc. of the 13th Int. Conf. on the Principles of Knowledge Representation and Reasoning (KR)(2012)AAAI Press pp.308-318</host></reference><reference label="[59]"><authors>P.G. Kolaitis</authors><title>Schema mappings, data exchange, and metadata management</title><host>Proc. of the 24th ACM SIGACT SIGMOD SIGART Symp. on Principles of Database Systems (PODS)(2005) pp.61-75</host></reference><reference label="[60]"><authors>R. Fagin,P.G. Kolaitis,L. Popa</authors><title>Data exchange: getting to the core</title><host>ACM Trans. Database Syst.30 (2005) pp.174-210</host></reference><reference label="[61]"><authors>A. Artale,D. Calvanese,R. Kontchakov,M. Zakharyaschev</authors><title>The DL-Lite family and relations</title><host>J. Artif. Intell. Res.36 (2009) pp.1-69</host></reference><reference label="[62]"><authors>R. Mazala</authors><title>Infinite games</title><host>E. GrädelW. ThomasT. WilkeAutomata, Logics, and Infinite GamesLecture Notes in Computer Sciencevol. 2500 (2002)Springer pp.23-4210.1007/3-540-36387-4_2</host></reference><reference label="[63]"><authors>C.H. Papadimitriou</authors><title>Computational Complexity</title><host>(1994)Addison Wesley Publ. Co.</host></reference><reference label="[64]"><authors>M.Y. Vardi</authors><title>The complexity of relational query languages</title><host>Proc. of the 14th ACM SIGACT Symp. on Theory of Computing (STOC)(1982) pp.137-146</host></reference><reference label="[65]"><authors>M.Y. Vardi</authors><title>Reasoning about the past with two-way automata</title><host>Proc. of the 25th Int. Coll. on Automata, Languages and Programming (ICALP)Lecture Notes in Computer Sciencevol. 1443 (1998)Springer pp.628-641</host></reference><reference label="[66]"><authors>J.-F. Baget,M. Leclère,M.-L. Mugnier,E. Salvat</authors><title>On rules with existential variables: walking the decidability line</title><host>Artif. Intell.175 (2011) pp.1620-1654</host></reference><reference label="[67]"><authors>A. Hernich</authors><title>Computing universal models under guarded TGDs</title><host>Proc. of the 15th Int. Conf. on Database Theory (ICDT)(2012) pp.222-23510.1145/2274576.2274600</host></reference><reference label="[68]"><authors>G. Gottlob,M. Manna,A. Pieris</authors><title>Combining decidability paradigms for existential rules</title><host>Theory Pract. Log. Program.13 (2013) pp.877-892</host></reference><reference label="[69]"><authors>R. Fagin,P.G. Kolaitis,L. Popa,W.-C. Tan</authors><title>Composing schema mappings: second-order dependencies to the rescue</title><host>ACM Trans. Database Syst.30 (2005) pp.994-1055</host></reference><reference label="[70]"><authors>R. Fagin</authors><title>Inverting schema mappings</title><host>ACM Trans. Database Syst.32 (2007) pp.25:2-25:53</host></reference><reference label="[71]"><authors>K. Chatterjee,M. Henzinger</authors><title>An O(n2) time algorithm for alternating Büchi games</title><host>Proc. of the 23rd Annual ACM-SIAM Symposium on Discrete Algorithms (SODA)(2012) pp.1386-1399</host></reference><reference label="[72]"><authors>D.E. Muller,P.E. Schupp</authors><title>Alternating automata on infinite trees</title><host>Theor. Comput. Sci.54 (1987) pp.267-276</host></reference><reference label="[73]"><authors>O. Kupferman,M.Y. Vardi,P. Wolper</authors><title>An automata-theoretic approach to branching-time model checking</title><host>J. ACM47 (2000) pp.312-360</host></reference><reference label="[74]"><authors>E.A. Emerson,C.S. Jutla</authors><title>Tree automata, mu-calculus and determinacy</title><host>Proc. of the 32nd Annual Symp. on the Foundations of Computer Science (FOCS)(1991) pp.368-377</host></reference></references><footnote><note-para label="1">If disjointness axioms are not allowed, then this new notion can be shown to be equivalent to the original formalization of {a mathematical formula}UCQ-representation.</note-para><note-para label="2">Observe that {a mathematical formula}M(As) could be defined as a universal {a mathematical formula}UCQ-solution for {a mathematical formula}〈∅,As〉 under {a mathematical formula}M.</note-para><note-para label="3">Note that standard reasoning and conjunctive query answering in DL-Lite{a mathematical formula}R is not sensitive to the presence of the UNA.</note-para></footnote></root>