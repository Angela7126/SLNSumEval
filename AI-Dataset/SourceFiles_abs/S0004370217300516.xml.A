<?xml version="1.0" encoding="utf-8"?>
<html>
 <body>
  <root>
   <title>
    Constrained coalition formation on valuation structures: Formal framework, applications, and islands of tractability.
   </title>
   <content>
    <section label="1">
     <section-title>
      Introduction
     </section-title>
     <section label="1.1">
      <section-title>
       Constrained coalition structure generation
      </section-title>
      <paragraph>
       Coalition structure generation is a fundamental problem in the study of coalition formation processes for multi-agent systems, which naturally occurs whenever agents can benefit form working together by forming coalitions (see, e.g., [59], [31]). The problem is defined over a pair {a mathematical formula}〈N,v〉, referred to as a coalitional game, where {a mathematical formula}N={a1,…,an} is a set of agents and where v is a valuation function that, for each coalition C, i.e., non-empty set {a mathematical formula}C⊆N of agents, returns a real number {a mathematical formula}v(C) meant to express the worth that the members of C can jointly achieve by cooperating (see, e.g., [71], [53]). The goal is to find an optimal coalition structure, i.e., a partition {a mathematical formula}{C1,…,Ck} of the agents into disjoint and exhaustive coalitions whose total value {a mathematical formula}∑i=1kv(Ci) is maximized.
      </paragraph>
      <paragraph label="Example 1.1">
       Consider the coalitional game {a mathematical formula}〈N,v〉 where {a mathematical formula}N={a1,a2,a3} and where v is the valuation function such that:{a mathematical formula}Note that the optimal coalition structures are {a mathematical formula}{{a1,a2,a3}} and {a mathematical formula}{{a1,a2},{a3}}. Their associated value is {a mathematical formula}v({a1,a2,a3})=v({a1,a2})+v({a3})=3.  ◁
      </paragraph>
      <paragraph>
       While coalition structure generation has been classically studied in the literature by assuming that all coalitions are allowed to form, in real-world applications it is often the case that some coalition structures are inadmissible, because they violate a number of constraints induced by the specific semantics of the application at hand (see, e.g., [59]).
      </paragraph>
      <paragraph>
       Constraints on the coalition structures that are allowed naturally emerge in those settings where cooperation is guided by an underlying structure reflecting, for instance, physical limitation, legal banishments, and social relationships. In these cases, it is natural to assume that if two disconnected agents are not connected by intermediaries in a given coalition, then they might not be able to cooperate at all. In particular, following Myerson's influential work [51], this intuition has been often formalized (see, e.g., [15], [70], [9]) by equipping each coalitional game {a mathematical formula}〈N,v〉 with an undirected graph {a mathematical formula}G=(N,E), called interaction graph, defined over the set of the agents, and by considering a coalition C as a feasible one, only if the subgraph of G induced over the nodes in C is connected.
      </paragraph>
      <paragraph>
       In fact, in addition to the “topological” constraints induced by the underlying interaction graphs, other kinds of constraints might occur in concrete domains when dealing with the coalition structure generation problem. For instance, the formation of certain coalitions might be prohibited by anti-trust laws or it might be subject to constraints on the coalition sizes. Settings of this kind have been also studied in the literature [26], [65], [56] and a general and unifying framework of these works has been proposed too [58]. In that framework, a coalitional game is equipped with two sets, {a mathematical formula}N and {a mathematical formula}P, of “negative” and “positive” constraints respectively. A negative constraint {a mathematical formula}n∈N is a set of agents, and it prescribes that no coalition C such that {a mathematical formula}C⊇n can be formed. Positive constraints are again formalized as set of agents, and they prescribe that for each feasible coalition C, there must exist a constraint {a mathematical formula}p∈P such that {a mathematical formula}C⊇p. As a matter of fact, however, the framework of [58] does not support the definition of interaction graphs and, despite its generality, it cannot simulate the topological constraints that are induced by them.
      </paragraph>
      <paragraph label="Example 1.2">
       Consider again the setting of Example 1.1 and the interaction graph reported on the left of Fig. 1. Note, for instance, that coalition {a mathematical formula}{a1,a3} is not allowed to form. Then, we claim that this simple scenario cannot be modeled via positive and negative constraints. Indeed, if a negative constraint {a mathematical formula}n={a1,a3} is considered, then the coalition {a mathematical formula}{a1,a2,a3} would be not feasible precisely because of n. More generally, because of the feasibility of {a mathematical formula}{a1,a2,a3} and by the monotone semantics of negative constraints, no negative constraint can be defined at all.Consider now the use of positive constraints. We know that {a mathematical formula}{a1} is feasible and, hence, it must occur as a positive constraint. However, in absence of negative constraints, this immediately entails that {a mathematical formula}{a1,a3} is feasible, too.  ◁
      </paragraph>
      <paragraph>
       As a matter of fact, topological constraints and positive/negative constraints have been separate worlds, so far. In the paper, we move from this observation and we propose to study a setting for coalition structure generation based on the concept of valuation structure, which basically consists of an interaction graph associated with certain kinds of negative constraints. In a nutshell, a set S of pairwise “incompatible” (pivotal) agents can be defined, so that every coalition C must satisfy the condition {a mathematical formula}|S∩C|≤1 in order to be a feasible one. Indeed, note that this is equivalent to having a negative constraint {a mathematical formula}S′, for each subset {a mathematical formula}S′⊆S with {a mathematical formula}|S′|=2.
      </paragraph>
      <paragraph label="Example 1.3">
       Assume that {a mathematical formula}a1 and {a mathematical formula}a2 are two pivotal agents in the setting of Example 1.1. Then, the feasible coalitions are further reduced to {a mathematical formula}{a1}, {a mathematical formula}{a2}, {a mathematical formula}{a3}, and {a mathematical formula}{a2,a3}, because the coalitions {a mathematical formula}{a1,a2,a3} and {a mathematical formula}{a1,a2} would be no longer allowed to form. In this scenario, which is graphically illustrated on the right of Fig. 1, an optimal coalition structure is {a mathematical formula}{{a1},{a2,a3}} whose associated value is {a mathematical formula}a2. Hence, the incompatibility of {a mathematical formula}a1 and {a mathematical formula}a2 leads to reduce the total available worth. ◁
      </paragraph>
     </section>
     <section label="1.2">
      <section-title>
       Contribution
      </section-title>
      <paragraph>
       The intuition underlying our formalization is that pivotal agents in S possess some specific properties differentiating themselves from the remaining agents in {a mathematical formula}N∖S. As an extreme case, a pivotal agent might well be an abstraction for some given parameter/object involved in the problem, i.e., it is not necessarily a “true” agent of the system. For instance, S might model a set of competing facilities to which the agents in {a mathematical formula}N∖S have to be connected. In fact, as the starting point of our analysis,
      </paragraph>
      <list>
       <list-item label="(1)">
        We define a framework for equipping coalitional games with valuation structures and we show that constraints induced by pivotal agents, combined with the underlying interaction graphs, are capable of expressing a number of relevant problems arising in a number of real application scenarios.
       </list-item>
      </list>
      <paragraph>
       Motivated by their relevance from the knowledge representation viewpoint, the paper then embarks on a systematic study of algorithmic and complexity issues arising with them. Prior to detailing these technical contributions, however, it is appropriate to recall that there is an extensive literature studying computational issues and proposing efficient solution algorithms for coalition structure generation, which we can partition in two groups based on the kinds of game encoding considered in the research.
      </paragraph>
      <paragraph>
       Classically, valuation functions are viewed as “black boxes” that, on input a coalition C, return the value {a mathematical formula}v(C). In particular, encoding and representation issues are not taken into account. In this context, exact solution approaches or algorithms with worst case guarantee have been proposed (e.g., [62], [22], [57], [60], [50], [66]); and heuristic methods have been defined, too (e.g., [64], [46], [65]). Orthogonally to these approaches and moving from the observation the naive encoding based on explicitly listing all possible coalitions, with attached their associated valuations, would require exponential space, efforts have been spent to define methods for representing valuation functions (hence, coalitional games) concisely. Then, coalition structure generation is more efficiently solved by applying optimization techniques to the compact representation directly [52]. In particular, algorithmic and complexity results have been derived for a number of well-known compact representations including marginal contribution networks[43], [52], games with synergy coalition groups[17], [52], coalitional skill games [5], games with agent-type representations [2], [67], weighted voting games [29], and graph games [27], [2], [4].
      </paragraph>
      <paragraph>
       Our analysis and our results are positioned within the latter group of works. Indeed, we study a number of computational problems related to coalition formation in the presence of valuation structures, by assuming that coalitional games are provided as input according to some compact encoding. In fact, in absence of valuation structures, it is well-known that coalition structure generation is NP-hard over a number of compact encodings including very simple ones, such as over graph games [2], [4]. Surprisingly, however, the precise complexity of the problem was not pointed out in earlier literature. Our first technical result is to address this research question. Indeed,
      </paragraph>
      <list>
       <list-item label="(2)">
        We show that coalition structure generation is complete for the polynomial time closure of NP, formally for the complexity class {a mathematical formula}FΔ2P[48]. The membership result is derived independently of the specific game encoding, while hardness is shown to hold even (i) over graph games and in absence of valuation structures, so that all coalitions are allowed to form, and (ii) over valuation structures whose underlying graphs are acyclic, so that very simple forms of cooperation can emerge only.
       </list-item>
      </list>
      <paragraph>
       Motivated by the above bad news, in particular by focusing on the latter setting (ii), we then look at the class of valuation functions that are independent of disconnected members (short: IDM), i.e., such that two agents have no effect on each other's marginal contribution to their separator{sup:1} w.r.t. the underlying interaction graph [69]. Indeed, in absence of valuation structures, coalition structure generation is already known [69] to be tractable for IDM functions over acyclic interaction graphs, or more generally over graphs having bounded treewidth[61]. The question is then whether this result can be extended to our more general setting where constraints on the coalitions allowed to form are expressed via valuation structures. This time, the answer is good news:
      </paragraph>
      <list>
       <list-item label="(3)">
        First, we show that IDM functions defined over interaction graphs with bounded treewidth can be encoded in polynomial time into equivalent marginal contribution networks [43] again of bounded treewidth, and vice versa. This is interesting because marginal contribution networks are an encoding that generalizes graph games and that is capable of expressing any valuation function, though in general at the price of an exponential blow-up in the size of representation (cf. [43]). Moreover, note that IDM functions define a class of functions in terms of their algebraic (and topological) properties. Hence, our result is also interesting for it algebraically characterizes a well-known and influential representation scheme for coalitional games, and for it allows to smoothly extend on this scheme all results derived for IDM functions, and vice versa—when focusing on bounded treewidth instances.
       </list-item>
       <list-item label="(4)">
        Then, we generalize the tractability result of IDM functions over graphs having bounded treewidth [69] to the case where valuation structures are considered. Founding on the correspondence discussed at point (3) above, the result is obtained by recasting coalition structure generation over marginal contribution networks into a constraint satisfaction problem (CSP), and by subsequently using structural decomposition methods for CSP instances (see, e.g., [36], [35], [41]). The approach uses novel ideas and methods that might be re-used in other application domains. Moreover, we show that it can be easily extended to deal with valuation structures in presence of arbitrary positive and negative constraints explicitly provided as input. The careful reader might note that alternative approaches would have been to use an encoding in monadic second-order logic by subsequently applying generalizations of Courcelle's theorem tailored to optimization problems [1], or to use general methods to solve combinatorial problems on graphs having bounded treewidth via dynamic programming [10]. However, these approaches would have asked to restrict the values returned by the valuation functions (to be given in unary) or the given interaction graphs (to have bounded degree).
       </list-item>
       <list-item label="(5)">
        In addition, we show that the above results hold not only for IDM functions, but also for functions derived from IDM ones via “affine transformations”—whose specification is allowed as an additional feature in the formal definition of a valuation structure. Consider, for instance, a setting where in order to leave the grand-coalition N, a “splitting cost” c has to be paid. In this case, we would obtain an “adjusted” valuation function {a mathematical formula}v′ such that {a mathematical formula}v′(C)=v(C)−c, for each {a mathematical formula}C⊂N, and {a mathematical formula}v′(N)=v(N). In particular, note that such transformed functions are no longer IDM ones, so that specific solution approaches have been required to deal with them.
       </list-item>
      </list>
      <paragraph>
       Finally, in order to provide a more comprehensive picture of the complexity issues arising with valuation structures, we complement the above research by addressing another fundamental problem for coalitional games, namely to determine how the worth that is obtained by forming an optimal coalition structure can be distributed over the agents in a way that is stable[53]. In particular,
      </paragraph>
      <list>
       <list-item label="(6)">
        We consider the well-known concept of core and we position it within our setting. Then, we show that core-related problems can be solved in polynomial time for classes of IDM valuation functions over graphs having bounded treewidth, even in presence of valuation structures. Results are derived as an application of the methods developed to deal with coalition structure generation in the same setting.
       </list-item>
      </list>
     </section>
     <section label="1.3">
      <section-title>
       Organization
      </section-title>
      <paragraph>
       The rest of the paper is organized as follows. Section 2 formalizes the concept of valuation structure and illustrates its applications. The coalition structure generation problem over valuation structures is defined in Section 3, where basic complexity results are also derived. Islands of tractability are singled out in Section 4, whereas Section 5 illustrates their specializations to the application scenarios we have previously pointed out. Stability issues are studied in Section 6, while a few final remarks are reported in Section 7.
      </paragraph>
     </section>
    </section>
    <section label="2">
     <section-title>
      Coalition structure generation revisited
     </section-title>
     <paragraph>
      In this section, we propose an extension of the coalition structure generation problem where optimization functions more general than the maximization of the social welfare are allowed, and where qualitative constraints on the coalition structures of interest can be expressed. The extension is based on the concept of “valuation structure”, which is first discussed and subsequently exemplified with a number of concrete applications.{sup:2}
     </paragraph>
     <section label="2.1">
      <section-title>
       Valuation structures: syntax and semantics
      </section-title>
      <paragraph>
       Let {a mathematical formula}Γ=〈N,v〉 be a coalitional game. Intuitively, the concept of valuation structure we are going to define on top of Γ plays the role to model certain kinds of constraints on the coalitions that are allowed to form plus an affine transformation on the basic valuation function v. In particular, because of the latter feature, throughout the paper N and v will not fully characterize a coalitional game in the conventional sense, because they do not suffice alone to describe the coalitional values in our extended setting.
      </paragraph>
      <paragraph>
       Let {a mathematical formula}G=(N,E) be an undirected graph called interaction graph, whose nodes are the agents in N. Edges are viewed as sets of nodes, so that for each {a mathematical formula}e∈E, {a mathematical formula}e⊆N and {a mathematical formula}|e|=2 hold. Let {a mathematical formula}S⊆N be a possibly-empty set of agents, called pivotal agents. Let {a mathematical formula}α,β:S↦R be two real-valued functions, and let {a mathematical formula}x,y∈R be real numbers.{sup:3} Then, the tuple {a mathematical formula}σ=〈G,S,α,β,x,y〉 is called a valuation structure for {a mathematical formula}〈N,v〉. The semantics of σ is next illustrated.
      </paragraph>
      <paragraph>
       The role of the interaction graph G is to constrain the formation of the coalitions based on their connectivity properties, in that a non-empty set C of agents, called coalition, is allowed to form only when the subgraph induced over the nodes in C is connected. Moreover, we would like to forbid the formation of any coalition C containing more than one pivotal agent, i.e., C is allowed only if {a mathematical formula}|C∩S|≤1. Whenever such connectivity and pivotal conditions are satisfied by C, we say that C is σ-feasible. The set of all σ-feasible coalitions in the game Γ is denoted by {a mathematical formula}Fσ(Γ).
      </paragraph>
      <paragraph label="Example 2.1">
       Consider a coalitional game {a mathematical formula}Γˆ=(Nˆ,vˆ) such that {a mathematical formula}Nˆ={a1,…,a7}. Moreover, consider the valuation structure {a mathematical formula}σˆ=〈Gˆ,{a1,a2},αˆ,βˆ,xˆ,yˆ〉 where {a mathematical formula}Gˆ is the interaction graph depicted in Fig. 2(a). Then, {a mathematical formula}C1={a1,a3} and {a mathematical formula}C2={a5,a6,a7} are two {a mathematical formula}σˆ-feasible coalitions. Instead, {a mathematical formula}{a1,a2} is not {a mathematical formula}σˆ-feasible because it contains two pivotal agents, and {a mathematical formula}{a5,a7} is not {a mathematical formula}σˆ-feasible because the subgraph of {a mathematical formula}Gˆ induced over the coalition is not connected. ◁
      </paragraph>
      <paragraph>
       The functions α and β and the real numbers x and y are used to define an affine transformation {a mathematical formula}valσ of the valuation function v. Formally, if {a mathematical formula}C∈Fσ(Γ) is a σ-feasible coalition, then we define its σ-value as follows:{a mathematical formula}
      </paragraph>
      <paragraph>
       If v is understood from the context, then we just write {a mathematical formula}valσ(C) in place of {a mathematical formula}valσ(v,C).
      </paragraph>
      <paragraph label="Example 2.2">
       Consider again the setting of Example 2.1, and the graph {a mathematical formula}Gˆ=(Nˆ,Eˆ) in Fig. 2(a). Note that each edge {a mathematical formula}e∈Eˆ is equipped with a weight {a mathematical formula}we∈R, so that we have, for instance, {a mathematical formula}w{a1,a3}=1 and {a mathematical formula}w{a1,a2}=2.{sup:4} Moreover, assume that the valuation function {a mathematical formula}vˆ is such that if C is a {a mathematical formula}σˆ-feasible coalition, then its value {a mathematical formula}vˆ(C) is defined as the sum of the weights of the edges covered by C, i.e., {a mathematical formula}vˆ(C)=∑e∈Eˆ,e⊆Cwe. For instance, for the coalitions {a mathematical formula}C1={a1,a3} and {a mathematical formula}C2={a5,a6,a7} presented in Example 2.1, we have {a mathematical formula}vˆ(C1)=w{a1,a3}=1, while {a mathematical formula}vˆ(C2)=w{a5,a6}+w{a6,a7}=1+1=2.Recall that {a mathematical formula}σˆ=〈Gˆ,{a1,a2},αˆ,βˆ,xˆ,yˆ〉 is the given valuation structure. Assume that {a mathematical formula}αˆ:{a1,a2}↦{1} and {a mathematical formula}βˆ:{a1,a2}↦{0} are two constant functions over the domain {a mathematical formula}{a1,a2} of the pivotal agents, and that {a mathematical formula}xˆ=0 and {a mathematical formula}yˆ=−12. Then, we have {a mathematical formula}valσˆ(C1)=1×vˆ(C1)+0=1 and {a mathematical formula}valσˆ(C2)=0×vˆ(C2)−12=−12. More generally, each {a mathematical formula}σˆ-feasible coalition that does not include a pivotal agent gets −12 as its final {a mathematical formula}σˆ-value. Instead, the {a mathematical formula}σˆ-value of any other {a mathematical formula}σˆ-feasible coalition C, hence containing precisely one of the two pivotal agents, is just given by the expression {a mathematical formula}∑e∈Eˆ,e⊆Cwe. ◁
      </paragraph>
      <paragraph>
       A σ-feasible coalition structure for Γ is a set {a mathematical formula}Π={C1,…,Ck} of σ-feasible coalitions such that {a mathematical formula}C1∪…∪Ck=N and {a mathematical formula}Ci∩Cj=∅, for each pair {a mathematical formula}i,j∈{1,…,k} with {a mathematical formula}i≠j. The set of all possible coalition structures is denoted by {a mathematical formula}CSσ(Γ). Note that {a mathematical formula}CSσ(Γ)≠∅, because each singleton coalition is σ-feasible, that is, {a mathematical formula}{ai}∈Fσ(Γ) holds, for each {a mathematical formula}ai∈N.
      </paragraph>
      <paragraph>
       For any {a mathematical formula}Π∈CSσ(Γ), by slightly abusing of notation, we define {a mathematical formula}valσ(v,Π) (or, shortly, {a mathematical formula}valσ(Π) if the valuation function v is clearly understood) as the value {a mathematical formula}∑C∈Πvalσ(v,C), which is called the σ-value of Π. Moreover, we denote by {a mathematical formula}optσ(Γ) the maximum σ-value that can be attained over all possible σ-feasible coalition structures. A coalition structure {a mathematical formula}Π⁎∈CSσ(Γ) such that {a mathematical formula}valσ(Π⁎)=optσ(Γ) is said to be σ-optimal on Γ, and the set of all σ-optimal coalition structures is denoted by {a mathematical formula}CS-optσ(Γ).
      </paragraph>
      <paragraph label="Example 2.3">
       In the setting of Example 2.1 and Example 2.2, it clearly emerges that it is suboptimal to form a coalition without including one of the two pivotal agents. Therefore, {a mathematical formula}σˆ-optimal coalition structures have necessarily the form {a mathematical formula}{A1,A2} where {a mathematical formula}A1∩A2=∅, {a mathematical formula}a1∈A1, {a mathematical formula}a2∈A2, and {a mathematical formula}A1∪A2=Nˆ. Note also that, since {a mathematical formula}A1 and {a mathematical formula}A2 are {a mathematical formula}σˆ-feasible, the subgraph of {a mathematical formula}Gˆ induced over {a mathematical formula}Ai, with {a mathematical formula}i∈{1,2}, has to be connected. As an example, Fig. 2(b) illustrates the {a mathematical formula}σˆ-feasible coalition structure {a mathematical formula}{{a1,a3},{a2,a4,a5,a6,a7}}, whose associated {a mathematical formula}σˆ-value is {a mathematical formula}1+6=7. In fact, this is not {a mathematical formula}σˆ-optimal, because the {a mathematical formula}σˆ value of {a mathematical formula}{{a1,a3,a4,a5},{a2,a6,a7}} is {a mathematical formula}7+2=9—see Fig. 2(c). It can be checked that this latter coalition structure is indeed {a mathematical formula}σˆ-optimal. ◁
      </paragraph>
      <paragraph>
       Note that, if in the above example no pivotal agents were defined, then the coalition structure consisting of the grand-coalition (i.e., {a mathematical formula}{Nˆ}) would be the only optimal one. In particular, in this scenario, the constraints provided by the interaction graph would be immaterial, in the sense that {a mathematical formula}{Nˆ} would be still optimal if the complete interaction graph (i.e., where every pair of agents is connected) were used in place of {a mathematical formula}Gˆ in the definition of the structure {a mathematical formula}σˆ. In general this is not the case, as illustrated in the following example.
      </paragraph>
      <paragraph label="Example 2.4">
       Consider the game {a mathematical formula}Γ¯=〈{a1,a2},v¯〉 such that {a mathematical formula}v¯({a1})=v¯({a2})=0 and {a mathematical formula}v¯({a1,a2})=1. Consider the valuation structure {a mathematical formula}σ¯=〈G¯,∅,α¯,β¯,x¯,y¯〉 where {a mathematical formula}G¯=({a1,a2},∅). Thus, the only {a mathematical formula}σ¯-feasible coalitions are the singletons {a mathematical formula}{a1} and {a mathematical formula}{a2}. It follows that there is precisely one {a mathematical formula}σ¯-optimal coalition structure, namely {a mathematical formula}{{a1},{a2}}, whose associated {a mathematical formula}σ¯-value is 0. However, if the graph where {a mathematical formula}a1 and {a mathematical formula}a2 are connected were used in place of {a mathematical formula}G¯, then the only optimal coalition structure would be {a mathematical formula}{{a2,a2}}. So, {a mathematical formula}G¯ provides a true constraint w.r.t. the formation of optimal coalition structures. ◁
      </paragraph>
      <paragraph>
       Actually, by looking critically at the above example, the reader might have noticed that the setting is rather artificial and counter-intuitive. Indeed, the graph {a mathematical formula}G¯ tells us that we cannot directly benefit from the cooperation between {a mathematical formula}a1 and {a mathematical formula}a2, whereas {a mathematical formula}v¯ tells precisely the opposite, that is, it evidences that a synergy can emerge from their cooperation.
      </paragraph>
      <paragraph>
       In fact, in order to study more natural scenarios, where worth functions suitably reflect the topological properties expressed by an underlying interaction graph, the concept of valuation functions that are independent of disconnected members was introduced in the literature. We recall from [69] that a valuation function v is independent of disconnected members (short: IDM) w.r.t. an interaction graph G if, for all agents {a mathematical formula}ai and {a mathematical formula}aj that are not connected in G and for each coalition C with {a mathematical formula}ai,aj∉C, the following holds:{a mathematical formula}
      </paragraph>
      <paragraph>
       Intuitively, the notion tells us that two agents have no effect on each other's marginal contribution to their vertex separator. In particular, if {a mathematical formula}C1 and {a mathematical formula}C2 are two coalitions and there are no edges between {a mathematical formula}C1∖C2 and {a mathematical formula}C2∖C1, then we have [69]:{a mathematical formula}
      </paragraph>
      <paragraph>
       Note that the valuation function {a mathematical formula}vˆ in Example 2.1 is an IDM function w.r.t. {a mathematical formula}Gˆ. Moreover, recall that in absence of pivotal agents the graph {a mathematical formula}Gˆ might be relaxed with the complete interaction graph. It is instructive to point out that this is not by chance.
      </paragraph>
      <paragraph>
       In order to formally state the result, observe that a valuation structure {a mathematical formula}〈G,∅,α,β,x,y〉 can be more compactly denoted by {a mathematical formula}〈G〉, because the functions α and β and the numbers x and y play no role. Moreover, if C is a coalition which is not necessarily {a mathematical formula}〈G〉-feasible and if {a mathematical formula}C1,…,Ck, with {a mathematical formula}k≥1, are the connected components of the subgraph of G induced over the nodes in C, then the set {a mathematical formula}{C1,…,Ck} is denoted by {a mathematical formula}C[G].
      </paragraph>
      <paragraph label="Theorem 2.5">
       Let{a mathematical formula}Γ=〈N,v〉be a coalitional game and let{a mathematical formula}〈G1〉and{a mathematical formula}〈G2〉be two valuation structures for Γ such that{a mathematical formula}Gi=(N,Ei), with{a mathematical formula}i∈{1,2}, and{a mathematical formula}E1⊆E2. Assume that v is anIDMfunction w.r.t.{a mathematical formula}G1(hence, w.r.t.{a mathematical formula}G2). Then,
      </paragraph>
      <list>
       <list-item label="(1)">
        If{a mathematical formula}Π2is{a mathematical formula}〈G2〉-optimal, then{a mathematical formula}⋃C∈Π2C[G1]is{a mathematical formula}〈G1〉-optimal.
       </list-item>
       <list-item label="(2)">
        If{a mathematical formula}Π1is{a mathematical formula}〈G1〉-optimal, then{a mathematical formula}Π1is{a mathematical formula}〈G2〉-optimal.
       </list-item>
      </list>
      <paragraph label="Proof">
       (1) Let {a mathematical formula}Π2 be any {a mathematical formula}〈G2〉-optimal coalition structure, and consider the coalition structure {a mathematical formula}Π1=⋃C∈Π2C[G1]. We claim that {a mathematical formula}Π1 is {a mathematical formula}〈G1〉-feasible. Indeed, if {a mathematical formula}C′ is a coalition in {a mathematical formula}Π1, then there is a coalition {a mathematical formula}C∈Π2 such that {a mathematical formula}C′∈C[G1]. That is, {a mathematical formula}C′ is the set of nodes of some connected component in the subgraph of {a mathematical formula}G1 induced over C. So, every coalition in {a mathematical formula}Π1 satisfies the connectedness condition enforced by the interaction graph {a mathematical formula}G1. Moreover, by construction of {a mathematical formula}Π1, it is immediate that {a mathematical formula}⋃C′∈Π1=N and {a mathematical formula}C′∩C″=∅, for each pair {a mathematical formula}C′,C″ of coalitions in {a mathematical formula}Π1. That is, {a mathematical formula}Π1 is a {a mathematical formula}〈G1〉-feasible coalition structure.We now claim that {a mathematical formula}val〈G2〉(Π2)=val〈G1〉(Π1). In fact, we show that, for each {a mathematical formula}C∈Π2, {a mathematical formula}val〈G2〉(C)=val〈G1〉(C[G1]) holds. To this end, let {a mathematical formula}C[G1] be the set {a mathematical formula}{C1,…,Ck} of {a mathematical formula}〈G1〉-feasible coalitions, and observe that {a mathematical formula}val〈G1〉(C[G1])=∑i=1kval〈G1〉(Ci)=∑i=1kv(Ci). Then, recall that v is an IDM function w.r.t. {a mathematical formula}G1 and that for each pair {a mathematical formula}Ch,Cj in {a mathematical formula}C[G1] with {a mathematical formula}h≠j, there is no edge in {a mathematical formula}G1 connecting some node in {a mathematical formula}Ch with some node in {a mathematical formula}Cj, since {a mathematical formula}Ch and {a mathematical formula}Cj are precisely connected components in the subgraph of {a mathematical formula}G1 induced over the nodes in C. Thus, by Equation (2), {a mathematical formula}v(Ch∪Cj)=v(Ch)+v(Cj). Moreover, observe that {a mathematical formula}C=C1∪…∪Ck. Hence, the above entails that {a mathematical formula}v(C)=∑i=1kv(Ci). Finally, we observe that C is {a mathematical formula}〈G2〉-feasible and, therefore, {a mathematical formula}val〈G2〉(C)=v(C). So, {a mathematical formula}val〈G2〉(Π2)=val〈G1〉(Π1).Armed with the above properties, let us assume, for the sake of contradiction, that {a mathematical formula}Π1 is not {a mathematical formula}〈G1〉-optimal and let {a mathematical formula}Π1′ be a {a mathematical formula}〈G1〉-optimal coalition structure with {a mathematical formula}val〈G1〉(Π1′)&gt;val〈G1〉(Π1). Therefore, {a mathematical formula}val〈G2〉(Π2)=val〈G1〉(Π1)&lt;val〈G1〉(Π1′). However, {a mathematical formula}Π1′ is trivially {a mathematical formula}〈G2〉-feasible and, hence, {a mathematical formula}val〈G2〉(Π1′)=val〈G1〉(Π1′)&gt;val〈G2〉(Π2) holds. However, by the optimality of {a mathematical formula}Π2, we know that {a mathematical formula}val〈G2〉(Π2)≥val〈G2〉(Π1′). Contradiction.(2) Assume that {a mathematical formula}Π1 is any {a mathematical formula}〈G1〉-optimal coalition structure. Hence, {a mathematical formula}Π1 is {a mathematical formula}〈G2〉-feasible too (and {a mathematical formula}val〈G1〉(Π1)=val〈G2〉(Π1)). Assume, for the sake of contradiction, that {a mathematical formula}Π1 is not {a mathematical formula}〈G2〉-optimal, and let {a mathematical formula}Π2 be a {a mathematical formula}〈G2〉-optimal coalition structure with {a mathematical formula}val〈G2〉(Π2)&gt;val〈G2〉(Π1). By point (1), {a mathematical formula}⋃C∈Π2C[G1] is {a mathematical formula}〈G1〉-optimal and, by inspection in the proof, we also know that {a mathematical formula}val〈G1〉(⋃C∈Π2C[G1])=val〈G2〉(Π2). Therefore, {a mathematical formula}val〈G1〉(⋃C∈Π2C[G1])&gt;val〈G1〉(Π1), which is impossible by the optimality of {a mathematical formula}Π1.  □
      </paragraph>
     </section>
     <section label="2.2">
      <section-title>
       Knowledge representation and applications
      </section-title>
      <paragraph>
       The concept of σ-optimal coalition structure illustrated in the above section is clearly more general than the counterpart where no valuation structure σ is considered. Indeed, given any coalitional game {a mathematical formula}Γ=〈N,v〉, by defining {a mathematical formula}⊥=〈KN〉 as the valuation structure where {a mathematical formula}KN is the complete interaction graph over the set N of agents, we can immediately check that any coalition {a mathematical formula}S⊆N is ⊥-feasible and that {a mathematical formula}val⊥(v,S)=v(S) holds. Therefore, results in the literature where no valuation structures have been considered (see Section 1) can be viewed as results that hold over ⊥-optimal coalition structures.
      </paragraph>
      <paragraph>
       Our goal is then to analyze arbitrary valuation structures, and we start here by illustrating a number of application scenarios that naturally fit the basic setting and our more general one. Further applications will be discussed in Section 6. In the following, we denote by +∞ any “sufficiently large” real number,{sup:5} and by −∞ its opposite. Moreover, for any real number {a mathematical formula}c∈R, we denote by {a mathematical formula}cD the real-valued function mapping each element in the domain D to the constant c—actually, the subscript will be hereinafter omitted, since this notation will be used for D coinciding with the set of pivotal agents only, and since this set will be clearly understood from the context.
      </paragraph>
      <paragraph>
       It is worthwhile noticing that the tractability results we shall provide in the paper for instances having bounded treewidth immediately apply to the specific applications discussed below, in some cases allowing us to close tractability questions that have been left open in the literature—as we shall discuss in detail in Section 5.
      </paragraph>
      <section label="2.2.1">
       <section-title>
        Application to multicut problems
       </section-title>
       <paragraph>
        In the multicut problem, we are given an undirected graph {a mathematical formula}G=(N,E) where each edge {a mathematical formula}e∈E is associated with a positive real number {a mathematical formula}we∈R+ (the weight of e), plus a set {a mathematical formula}P⊆N×N of source-terminal pairs. A multicut is a set of edges {a mathematical formula}E′⊆E such that in the graph {a mathematical formula}(N,E∖E′) each of the pairs in P is separated, i.e., for each {a mathematical formula}(s,t)∈P there is no path in {a mathematical formula}(N,E∖E′) connecting s and t. The goal is to find a multicut whose edges have minimum total weight. For {a mathematical formula}|P|=1, the problem reduces to the famous “min-cut/max-flow” problem, which is of central significance in combinatorial optimization and which is known to be feasible in polynomial time (see, e.g., [47]). In general, the problem is NP-hard and a number of (in)approximability results are known for it (see, e.g., [68]).
       </paragraph>
       <paragraph label="Example 2.6">
        Consider the graph reported in Fig. 3(a), and assume that {a mathematical formula}{(s1,t1), {a mathematical formula}(s2,t2)} is a given set of source-terminal pairs. Then, a solution to the multicut problem defined on these inputs is given by the multicut graphically illustrated in the same figure. Note that the total weight is {a mathematical formula}1+1+2=4. ◁
       </paragraph>
       <paragraph>
        In order to encode the multicut problem in our setting, the set N of the nodes is transparently viewed as a set of agents. Moreover, we define a graph {a mathematical formula}GP=(N,EP) such that {a mathematical formula}EP=E∪{{s,t}|(s,t)∈P}, i.e., the graph is obtained from G by adding an edge for each pair in P. Eventually, we let {a mathematical formula}w{s,t}=−∑e∈Ewe−1, for each {a mathematical formula}(s,t)∈P, and we define {a mathematical formula}vP as the function such that {a mathematical formula}vP(C) is the sum of the weights of the edges in the subgraph of {a mathematical formula}GP induced over any coalition C. Note that {a mathematical formula}vP(C)&lt;0 holds if, and only if, C covers some pair in P.
       </paragraph>
       <paragraph>
        Consider now the (trivial) valuation structure ⊥, and observe that given the definition of {a mathematical formula}vP, it is clearly suboptimal to form coalitions covering pairs from P. For instance, in the example illustrated in Fig. 3(a), a ⊥-optimal coalition structure is {a mathematical formula}{{s1,r1},{s2,r2,r3,t1},{t2}}. Note that this coalition structure is induced by a multicut of minimum total weight. This is not by chance. Indeed,{sup:6} in our reduction any multicut {a mathematical formula}E′ one-to-one corresponds to a ⊥-feasible coalition structure Π for {a mathematical formula}〈N,vP〉 such that {a mathematical formula}E′={e∈E|∀Cj∈Π,|e∩Cj|≤1} and {a mathematical formula}val⊥(vP,Π)≥0. In particular, note that for any coalition structure Π of this kind, {a mathematical formula}val⊥(vP,Π)=∑e∈Ewe−∑e′∈E′we′ holds. Therefore, a multicut of minimum weight can be computed by algorithms for computing (⊥-)optimal coalition structures.
       </paragraph>
      </section>
      <section label="2.2.2">
       <section-title>
        Application to multiway cut problems
       </section-title>
       <paragraph>
        Similarly to the multicut problem, the multiway cut problem takes as input a graph {a mathematical formula}G=(N,E), where each edge {a mathematical formula}e∈E is equipped with a weight {a mathematical formula}we∈R+. Moreover, it takes as input a set {a mathematical formula}T⊆N of terminals. A multiway cut {a mathematical formula}E′ is a set of edges {a mathematical formula}E′⊆E such that in the graph {a mathematical formula}(N,E∖E′) no pair of terminals from T are connected. The goal is to find a multiway cut whose edges have the minimum total weight. For {a mathematical formula}|T|=2 the problem is solvable in polynomial time (it again reduces to the min-cut problem), while it becomes NP-hard even for {a mathematical formula}|T|=3 (see [21]).
       </paragraph>
       <paragraph label="Example 2.7">
        Consider again the graph reported in Fig. 3(a), where all nodes in {a mathematical formula}{t1,t2,s1,s2} are now treated as terminals to be disconnected from each other. In order to end up with a multiway cut, we have in particular to disconnect {a mathematical formula}s2 and {a mathematical formula}t1, as it is done in Fig. 3(b). Note that the total weight of the cut becomes {a mathematical formula}1+1+2+1=5. ◁
       </paragraph>
       <paragraph>
        The multiway cut problem nicely fits our general setting. Indeed, we can first define {a mathematical formula}vmw as the function such that {a mathematical formula}vmw(C) is the weight of the edges in the subgraph of G induced over C—note that, in this case, we work on the original graph G. Then, we can consider the valuation structure {a mathematical formula}σmw=〈G,T,1,0,1,0〉 where terminals play the role of pivotal agents. Therefore, {a mathematical formula}σmw-feasible coalition structures naturally correspond to multiway cuts (and vice-versa). Moreover, note that for each {a mathematical formula}C⊆N, {a mathematical formula}vmw(C)=valσmw(C). That is, the affine transformation is immaterial, and similarly to the case of the multicut problem we get {a mathematical formula}valσmw(vmw,Π)=∑e∈Ewe−∑e′∈E′we′, where {a mathematical formula}E′ is the cut and Π the corresponding coalition structure. Putting it all together, the multiway cut problem is reduced to the computation of a {a mathematical formula}σmw-optimal coalition structure.
       </paragraph>
      </section>
     </section>
     <section label="2.3">
      Application to k-clustering
      <paragraph>
       Let us consider the framework for correlation clustering proposed by [6]. We have an undirected graph {a mathematical formula}G=(N,E) where each edge {a mathematical formula}e∈E has a label in {a mathematical formula}ℓe∈{+,−}. A cluster C is a non-empty subset of N such that the subgraph of G induced over C is connected.{sup:7} A clustering is just a partition of N into disjoint and exhaustive clusters. For any cluster {a mathematical formula}C⊆N, we denote by {a mathematical formula}E+(C)={e∈E|e⊆C,ℓe=+} the set of its positive intra-cluster edges, and by {a mathematical formula}E−(C)={e∈E‖e∩C|=1,ℓe=−} the set of negative inter-cluster edges with one end in C. Then, the correlation value of C is given by {a mathematical formula}vcc(C)=|E+(C)|+|E−(C)|, while the correlation value of a clustering Π is the sum of the correlation values of its clusters, i.e., the value {a mathematical formula}∑C∈Πvcc(C). The goal is to find an optimal clustering, that is, a clustering having maximum correlation value.
      </paragraph>
      <paragraph label="Example 2.8">
       Consider the graph illustrated in Fig. 3(c), where each edge is associated with a label in {a mathematical formula}{+,−}. It can be checked that an optimal correlation clustering is given by the set {a mathematical formula}{C1,C2,C3}. In particular, note that {a mathematical formula}vcc(C1)=1+2, {a mathematical formula}vcc(C2)=4+3, and {a mathematical formula}vcc(C3)=4+1, so that the overall value of the clustering is {a mathematical formula}3+6+5=14. ◁
      </paragraph>
      <paragraph>
       Note that, in the basic correlation clustering framework, the number of clusters is not a-priori fixed. More recently, an extension of this framework has been studied, where the number of clusters is stipulated to be a small constant k[33]. For instance, in the case of Fig. 3(c), by fixing {a mathematical formula}k=2, we would look for a bipartition of the graph in two connected components maximizing the correlation value—interestingly, the problem is NP-hard even in this case [33]. Accordingly, we would single out the two components {a mathematical formula}C1 and {a mathematical formula}C2∪C3, where {a mathematical formula}vcc(C2∪C3)=11. In particular, the clustering {a mathematical formula}{C1,C2,C3} is no longer admissible because it consists of 3 clusters.
      </paragraph>
      <paragraph>
       In order to accommodate this k-clustering problem in our setting, we need not only to define suitable pivotal agents (as in the multiway cut problem), but also to use an affine transformation of the valuation function. Formally, for any set {a mathematical formula}R⊆N of nodes, we consider the valuation structure {a mathematical formula}σR=〈G,R,1,0,0,−∞〉. Intuitively, according to {a mathematical formula}σR, it is always suboptimal to form a coalition that does not include an agent in R, so that any {a mathematical formula}σR-feasible coalition structure Π such that {a mathematical formula}valσR(vcc,Π)≥0 consists of exactly {a mathematical formula}|R| distinct coalitions (as R is the set of pivotal agents, there cannot be less than {a mathematical formula}|R| coalitions). Moreover, note that the set of possible coalitions is restricted to those that are feasible according to the graph G, as to avoid clusters formed by unconnected components. Therefore, Π is a clustering and {a mathematical formula}valσR(vcc,Π) is precisely its value. On the other hand, it is immediate to check that if Π is a clustering, then Π is also a {a mathematical formula}σR-feasible coalition structure, for any set R including precisely one element for each cluster in Π. Hence, an optimal k-clustering can be computed as a coalition structure having the maximum {a mathematical formula}σR-value over all {a mathematical formula}σR-optimal coalition structures for any subset {a mathematical formula}R⊆N with {a mathematical formula}|R|=k. In particular, since k is a given fixed constant [33], then polynomially many subsets R have to be considered.
      </paragraph>
     </section>
     <section label="2.4">
      <section-title>
       Application to chromatic partitioning
      </section-title>
      <paragraph>
       In a number of graph-based applications, different weights might be associated to an edge in order to express the similarity between the linked nodes/objects w.r.t. different semantics relationships. The setting can be modeled by assuming that a set {a mathematical formula}C of colors is given together with a graph {a mathematical formula}G=(N,E). Each edge {a mathematical formula}e∈E is associated with weights one-to-one corresponding to the colors. Accordingly, we denote by {a mathematical formula}wec∈R the weight of e under c. Then, we define a chromatic partition of G as a set {a mathematical formula}{〈C1,c1〉,…,〈Ch,ch〉} where {a mathematical formula}{C1,…,Ch} is a partition of N into disjoint and exhaustive coalitions and where {a mathematical formula}c1,…,ch are h distinct colors taken from {a mathematical formula}C. The value of each element {a mathematical formula}〈Ci,ci〉 is the sum of the weights under {a mathematical formula}ci of the edges covered by C, i.e., {a mathematical formula}∑e∈E,e⊆Ciweci, and the value of the partition is the sum of the values of its elements. The goal is to compute an optimal chromatic partition. Hence, the model is reminiscent of works on simultaneously labeling and partitioning (see, e.g., [12], [20] and the references therein).
      </paragraph>
      <paragraph label="Example 2.9">
       Consider the graph illustrated in Fig. 3(d). We assume that two colors are available only, namely ‘Red’ and ‘Blue’. Each edge e in the figure is associated with an expression of the form {a mathematical formula}weRed/weBlue reporting the weight of e under Red/Blue. The figure also reports a chromatic partition {a mathematical formula}{R,B} whose overall value is 5. It is easy to see that this is indeed an optimal chromatic partition. ◁
      </paragraph>
      <paragraph>
       Note that for {a mathematical formula}C={c1} chromatic partitioning is immaterial, as the only possible outcome is {a mathematical formula}{〈N,c1〉}. For {a mathematical formula}C={c1,c2}, the problem is intractable even when {a mathematical formula}wec1=wec2, for each {a mathematical formula}e∈E. Indeed, in this case, the problem reduces to computing a set {a mathematical formula}S⊆N maximizing the value {a mathematical formula}∑e∈E,e⊆Swec1+∑e∈E,e⊆N∖Swec1, which is NP-hard (cf. [27]).
      </paragraph>
      <paragraph>
       Let us now encode chromatic partitioning in our setting. Let {a mathematical formula}GC denote the graph {a mathematical formula}(N∪C,E∪EC), where colors are viewed as nodes and where {a mathematical formula}EC is obtained by including an edge between each node in N and each color in {a mathematical formula}C (thus, {a mathematical formula}|EC|=|N|×|C|). Intuitively, nodes in {a mathematical formula}C will play the role of pivotal agents and we proceed along the line of the encoding for the k-clustering problem, with {a mathematical formula}k=|C|. Accordingly, we consider the valuation structure {a mathematical formula}σch=〈GC,C,1,0,0,−∞〉. In particular, by considering the interaction graph {a mathematical formula}GC and since each coalition including a node in {a mathematical formula}C trivially satisfies the connectedness condition (due to the edges in {a mathematical formula}EC), we are guaranteed that it will be always optimal to form {a mathematical formula}σch-feasible coalition structures consisting of k coalitions, each including one distinct of the available k colors. W.l.o.g, such coalitions have the form {a mathematical formula}{C1,…,Ch,Ch+1,…,Ck} where {a mathematical formula}|Ci∩C|=1 holds, for each {a mathematical formula}i∈{1,…,h} and where {a mathematical formula}Cj⊆C holds, for each {a mathematical formula}j∈{h+1,…,k}. In fact, they one-to-one correspond to chromatic partitions {a mathematical formula}{〈C1,C1∩C〉,…,〈Ch,Ch∩C〉}. Therefore, if {a mathematical formula}vch is any valuation function such that, for each set of nodes {a mathematical formula}C⊆N∪C with {a mathematical formula}C∩C={ci},{a mathematical formula}vch(C)=∑e∈E,e⊆Cweci holds, then we can solve chromatic partitioning by computing a {a mathematical formula}σch-optimal coalition structure for {a mathematical formula}〈N,vch〉.
      </paragraph>
     </section>
    </section>
    <section label="3">
     <section-title>
      Coalition structure generation on valuation structures
     </section-title>
     <paragraph>
      An instance for the coalition structure generation problem on valuation structures, denoted in the following as {a mathematical formula}CSGval, is a pair {a mathematical formula}(Γ,σ), where {a mathematical formula}Γ=(N,v) is a coalitional game, and {a mathematical formula}σ=〈G,S,α,β,x,y〉 is a valuation structure on Γ. The goal is to compute a σ-optimal coalition structure {a mathematical formula}Π⁎∈CS-optσ(Γ). The problem generalizes on the valuation structure σ the well-known coalition structure generation problem (short: CSG), which is just the special case where the trivial valuation structure ⊥ is considered.
     </paragraph>
     <paragraph>
      Based on the observations in Section 2.2, we already know that {a mathematical formula}CSGval has a number of different concrete applications. Here, we start its formal analysis by studying its computational complexity, i.e., we want to formally assess the amount of resources that are needed to compute a σ-optimal coalition structure. To carry out this analysis, we preliminary need to adopt a representation for the input. We proceed as follows:
     </paragraph>
     <list>
      <list-item label="•">
       A trivial representation for Γ would just list all possible coalitions, with attached their associated valuations, hence requiring exponential space (w.r.t. {a mathematical formula}|N|). However, more compact encodings can be obtained in some cases [49], [45], [27], [30], [43], [17], [14]. Just think, as an extreme case, that a valuation function v such that {a mathematical formula}v(C)=0, for each {a mathematical formula}C⊆N, needs only constant space to be represented. Here, we do not commit ourselves to a specific representation strategy. Rather, by following [39], we assume that a representation{a mathematical formula}R for coalitional games defines two functions {a mathematical formula}ξR and {a mathematical formula}vR, which are used to encode a class of games denoted by {a mathematical formula}C(R). In particular, for each coalitional game {a mathematical formula}Γ∈C(R), {a mathematical formula}ξR(Γ) is the encoding of Γ, while {a mathematical formula}vR(ξR(Γ),C) is the value associated to the coalition C according to v. We require that this value can be computed in polynomial time w.r.t. {a mathematical formula}‖Γ‖. Moreover, we assume as usual that all agents in N are listed in {a mathematical formula}ξR(Γ), i.e., {a mathematical formula}‖ξR(Γ)‖≥|N| holds.
      </list-item>
      <list-item label="•">
       The encoding of the valuation structure {a mathematical formula}σ=〈G,S,α,β,x,y〉 is given by the encodings of its elements. We assume that α and β are represented by explicitly listing their entries, which in this case are polynomially many (in fact, we have {a mathematical formula}|S| entries), and we assume a standard encoding for the graph G in terms of an adjacency matrix, with size {a mathematical formula}‖G‖. Eventually, the size of σ is denoted by {a mathematical formula}‖σ‖.
      </list-item>
     </list>
     <section label="3.1">
      <section-title>
       Complexity in the general case
      </section-title>
      <paragraph>
       The complexity of the standard CSG problem has been already studied in the literature, and it has been shown to be NP-hard even when very specific kinds of encodings are considered, in particular, when coalitional games are given as graph games[69].
      </paragraph>
      <paragraph>
       Here, we recall that according to the graph-game representation {a mathematical formula}gg, the encoding {a mathematical formula}ξgg(Γ) of a coalitional game {a mathematical formula}Γ=〈N,v〉∈C(gg) is given in terms of a graph {a mathematical formula}(N,E) where each edge {a mathematical formula}e∈E is also equipped with a weight {a mathematical formula}we∈R. In particular, for each coalition {a mathematical formula}C⊆N, the value {a mathematical formula}v(C)=vgg(ξgg(Γ),C) is just given by the sum of the weights of the edges covered by the agents in C, i.e., {a mathematical formula}v(C)=∑e⊆C,e∈Ewe. Note that most of the games we have considered so far are given in this representation, as in Example 2.2, Section 2.2.1, and Section 2.2.2. Moreover, observe that valuation functions for games in {a mathematical formula}C(gg) are independent on disconnected members w.r.t. the underlying weighted graphs on top of which they are defined (see, also, [69]).
      </paragraph>
      <paragraph>
       The intractability of the CSG problem over graph games immediately leads to establish the intractability of our more general setting, where valuation structures can be possibly taken into account.
      </paragraph>
      <paragraph label="Theorem 3.1">
       cf. [27], [69], [4]{a mathematical formula}CSGvalisNP-hard, even on the class{a mathematical formula}C(gg).
      </paragraph>
      <paragraph>
       Surprisingly, however, the precise complexity of the CSG problem has been not pointed out in earlier literature. In fact, our first contribution is to show that the problem is slightly more complex than just being NP-hard. Indeed, it emerges to be complete for the class {a mathematical formula}FΔ2P consisting of all those computation problems that can be solved in polynomial time by possibly invoking, each time with a unitary cost, an oracle that solves a decision problem in the class NP. The reader is referred to, e.g., [54], [48], [44], for further background on these notions of complexity theory. Note that the membership in the class {a mathematical formula}FΔ2P of the CSG problem has been recently shown in the literature [15]. Inspection in that proof reveals that it smoothly extends to the presence of valuation structures. Accordingly, we next focus on showing the {a mathematical formula}FΔ2P-hardness part only.
      </paragraph>
      <paragraph label="Proof">
       CSG(hence{a mathematical formula}CSGval) is{a mathematical formula}FΔ2P-complete. Hardness holds even on the class{a mathematical formula}C(gg).Let us show the hardness part. Let {a mathematical formula}Φ=c1∧…∧cm be a Boolean formula in conjunctive normal form over the variables {a mathematical formula}X1,…,Xn. That is, for each {a mathematical formula}i∈{1,…,m}, {a mathematical formula}ci is a disjunction of literals, where each literal is either a variable {a mathematical formula}Xj or its negation {a mathematical formula}¬Xj. Let {a mathematical formula}s1,…,sm be a list of positive weights associated with the corresponding clauses of Φ. For any (possibly partial) truth assignment τ, its weight is defined as the sum of the weights associated with the clauses satisfied by τ. Computing the maximum possible weight associated with any assignment is {a mathematical formula}FΔ2P-hard [48].Based on Φ and {a mathematical formula}s1,…,sm, we build an encoding {a mathematical formula}ξgg(Γ) of a coalitional game {a mathematical formula}Γ=〈N,v〉∈C(gg). In particular, {a mathematical formula}ξgg(v) is the graph {a mathematical formula}(N,E) equipped with weights {a mathematical formula}we, for each {a mathematical formula}e∈E, such that:
       <list>
        For each clause {a mathematical formula}ci and for each literal L in {a mathematical formula}ci, N includes a literal node/agent{a mathematical formula}ℓ(L)i. Moreover, N includes the agent r, and no further agent is in N.For each pair {a mathematical formula}i,i′∈{1,…,m} with {a mathematical formula}i≠i′, and for each variable {a mathematical formula}Xj occurring in {a mathematical formula}ci such that {a mathematical formula}¬Xj occurs in {a mathematical formula}ci′, the edge {a mathematical formula}{ℓ(Xj)i,ℓ(¬Xj)i′} is in E. Moreover, for each clause {a mathematical formula}ci, with {a mathematical formula}i∈{1,…,m}, and for each pair of distinct literals L and {a mathematical formula}L′ in {a mathematical formula}ci, E includes the edge {a mathematical formula}{ℓ(L)i,ℓ(L′)i}. Finally, E includes the edge {a mathematical formula}{r,ℓ(L)i}, for each literal L in any clause {a mathematical formula}ci, and no further edge is in E.Weights are such that {a mathematical formula}w{r,ℓ(L)i}=si, for each literal L occurring in the clause {a mathematical formula}ci. Moreover, for each edge {a mathematical formula}{p,q}∈E with {a mathematical formula}r∉{p,q}, hereinafter called penalty edge, we have that {a mathematical formula}w{p,q}=−(∑i=1nsi+1)×(|E|+1).As an example,
       </list>
       <paragraph>
        Fig. 4 reports the graph we can build for the formula {a mathematical formula}Φˆ=cˆ1∧cˆ2 over the variables {a mathematical formula}X1,…,X4, where {a mathematical formula}cˆ1=(X1∨X2∨X3) and {a mathematical formula}cˆ2=(X1∨¬X2∨X4) are the clauses whose associated weights are {a mathematical formula}s1 and {a mathematical formula}s2, respectively.Note that {a mathematical formula}v(S)=0 holds, for each singleton coalition {a mathematical formula}S⊆N, i.e., with {a mathematical formula}|S|=1. Moreover, for an arbitrary coalition {a mathematical formula}S⊆N, {a mathematical formula}v(S)&gt;0 holds if, and only if, S does not cover any penalty edge while covering at least one non-penalty edge. By construction, we hence conclude that {a mathematical formula}v(S)&gt;0 if, and only if, the following three conditions are satisfied:
       </paragraph>
       <list>
        <list-item label="(C1)">
         {a mathematical formula}r∈S, because at least one edge that is not a penalty one must be covered;
        </list-item>
        <list-item label="(C2)">
         for each clause {a mathematical formula}ci, with {a mathematical formula}i∈{1,…,m}, there is at most one literal L in {a mathematical formula}ci such that {a mathematical formula}ℓ(L)i∈S, because any two such literals define agents that are connected with a penalty edge;
        </list-item>
        <list-item label="(C3)">
         there is no variable {a mathematical formula}Xj, with {a mathematical formula}j∈{1,…,n}, and pair of indices {a mathematical formula}i,i′∈{1,…,m}, such that {a mathematical formula}ℓ(Xj)i and {a mathematical formula}ℓ(¬Xj)i′ are in S, again because these literals define agents connected with a penalty edge.
        </list-item>
       </list>
       <paragraph>
        Note that if {a mathematical formula}Π⁎ is an optimal coalition structure in {a mathematical formula}CS-opt⊥(Γ), then we have that {a mathematical formula}val⊥(Π⁎)≥0. Now, let {a mathematical formula}Δ≥0 be any real number. Then, we claim: for each ⊥-feasible coalition structure{a mathematical formula}Π∈CS⊥(Γ),{a mathematical formula}val⊥(Π)≤Δ ⇔ for each{a mathematical formula}S⊆N,{a mathematical formula}v(S)≤Δ.
       </paragraph>
       <list>
        <list-item label="(⇒)">
         Assume that for each {a mathematical formula}Π∈CS⊥(Γ), {a mathematical formula}val⊥(Π)≤Δ. By contradiction, let {a mathematical formula}S⁎⊆N be a coalition with {a mathematical formula}v(S⁎)&gt;Δ. Consider then the ⊥-feasible coalition structure {a mathematical formula}Π⁎ including {a mathematical formula}S⁎ and a singleton coalition for each agent not in {a mathematical formula}S⁎. Then, {a mathematical formula}val⊥(Π⁎)=v(S⁎)&gt;Δ, which is impossible.
        </list-item>
        <list-item label="(⇐)">
         Assume that for each {a mathematical formula}S⊆N, {a mathematical formula}v(S)≤Δ. By condition (C1), for any two coalitions {a mathematical formula}S1 and {a mathematical formula}S2, {a mathematical formula}v(S1)&gt;0 and {a mathematical formula}v(S2)&gt;0 hold if, and only if, {a mathematical formula}S1∩S2⊇{r}. Therefore, if {a mathematical formula}Π⁎ is a coalition structure in {a mathematical formula}CS⊥(Γ), then {a mathematical formula}val⊥(Π⁎)≤maxS⊆N⁡v(S)≤Δ holds.
        </list-item>
       </list>
       <paragraph>
        Because of the above result, the value of an optimal coalition structure precisely coincides with the maximum value associated to any coalition. That is,{a mathematical formula}To any coalition S with {a mathematical formula}v(S)&gt;0, we now associate a (possibly partial) truth assignment {a mathematical formula}τS such that {a mathematical formula}Xj evaluates to true (resp., false) in {a mathematical formula}τS if {a mathematical formula}ℓ(Xj)i (resp., {a mathematical formula}ℓ(¬Xj)i) occurs in S, for some {a mathematical formula}i∈{1,…,m}. Because of the condition (C3) above, {a mathematical formula}τS is well-defined. Moreover, by conditions (C1) and (C2), we have that {a mathematical formula}v(S) coincides with the weight associated to the assignment {a mathematical formula}τS.As an example, by considering the coalition {a mathematical formula}S={ℓ(X11),ℓ(¬X22),r} in the setting of Fig. 4 for the formula {a mathematical formula}Φˆ, we get that the corresponding assignment {a mathematical formula}τS is undefined on {a mathematical formula}X3 and {a mathematical formula}X4, while {a mathematical formula}X1 evaluates to true and {a mathematical formula}X2 evaluates false in it. Note that S is in fact a coalition getting the maximum overall value, and {a mathematical formula}τS is a truth assignment having maximum weight (in fact, it is a satisfying assignment). This is not by chance. Indeed, the following result can be established: S is such that{a mathematical formula}v(S)≥v(S¯), for each{a mathematical formula}S¯⊆N ⇔ {a mathematical formula}τSis a truth assignment having maximum weight.
       </paragraph>
       <list>
        <list-item label="(⇒)">
         Assume, by contradiction, that {a mathematical formula}τ′ is a truth assignment with better weight than {a mathematical formula}τS. Define {a mathematical formula}S′ as the coalition including r, and where, for each clause {a mathematical formula}ci satisfied by {a mathematical formula}τ′, there is precisely one agent {a mathematical formula}ℓ(L)i such that L is a literal in {a mathematical formula}ci evaluating to true in {a mathematical formula}τ′. Note that the weight of {a mathematical formula}τS′ coincides with the weight of {a mathematical formula}τ′ itself. Thus, {a mathematical formula}v(S′) coincides with the weight of {a mathematical formula}τ′, and we have {a mathematical formula}v(S′)&gt;v(S), which is impossible.
        </list-item>
        <list-item label="(⇐)">
         By contradiction, if {a mathematical formula}S′ is a coalition such that {a mathematical formula}v(S′)&gt;v(S), then we would have that {a mathematical formula}τS′ has a better weight than {a mathematical formula}τS. Again, this is impossible.
        </list-item>
       </list>
       <paragraph>
        The above result together with Equation (3) entails that the value of an optimal coalition structure {a mathematical formula}Π⁎∈CS-opt⊥(Γ) coincides with the maximum possible weight associated with any assignment. The {a mathematical formula}FΔ2P-hardness is eventually established because the reduction is feasible in polynomial time.  □
       </paragraph>
      </paragraph>
     </section>
     <section label="3.2">
      <section-title>
       Structural restrictions: basic results
      </section-title>
      <paragraph>
       In the light of the above intractability result, it is sensible to single out classes of functions and valuation structures over which {a mathematical formula}CSGval and CSG can be efficiently solved. A natural approach to identify such classes is to focus on interaction graphs enjoying suitable structural properties. In fact, a basic structural property of a graph is acyclicity, and we next consider the more general concept of bounded treewidth [61].
      </paragraph>
      <paragraph>
       A tree decomposition of a graph {a mathematical formula}G=(N,E) is a pair {a mathematical formula}〈T,χ〉, where {a mathematical formula}T=(V,F) is a tree, and χ is a labeling function assigning to each vertex {a mathematical formula}p∈V a set of vertices {a mathematical formula}χ(p)⊆N, such that the following conditions are satisfied:
      </paragraph>
      <list>
       <list-item label="(1)">
        for each node b of G, there exists {a mathematical formula}p∈V such that {a mathematical formula}b∈χ(p);
       </list-item>
       <list-item label="(2)">
        for each edge {a mathematical formula}{b,d}∈E, there exists {a mathematical formula}p∈V such that {a mathematical formula}{b,d}⊆χ(p); and,
       </list-item>
       <list-item label="(3)">
        for each node b of G, the set {a mathematical formula}{p∈V|b∈χ(p)} induces a connected subtree of T.
       </list-item>
      </list>
      <paragraph>
       The width of {a mathematical formula}〈T,χ〉 is the number {a mathematical formula}maxp∈V⁡(|χ(p)|−1). The treewidth of G, denoted by {a mathematical formula}tw(G), is the minimum width over all its tree decompositions. A graph G is acyclic if and only if {a mathematical formula}tw(G)=1. Deciding if a given graph has treewidth bounded by a fixed natural number k is known to be feasible in linear time [11].
      </paragraph>
      <paragraph label="Example 3.3">
       Consider the graph {a mathematical formula}G˙=(N˙,E˙) shown in Fig. 5(a), and note that it contains a cycle over the nodes/agents in {a mathematical formula}{a1,a2,a3}. In Fig. 5(b), a tree decomposition of {a mathematical formula}G˙ is reported whose width is 2. ◁
      </paragraph>
      <paragraph>
       By focusing on acyclic and, more generally, on nearly-acyclic interaction graphs we can significantly constraint the coalitions that are allowed to form. However, this is not yet sufficient to end up with an island of tractability.
      </paragraph>
      <paragraph label="Proof">
       {a mathematical formula}CSGvalis{a mathematical formula}FΔ2P-hard, even on structures{a mathematical formula}〈G〉such that G is acyclic.Let {a mathematical formula}Γ=〈N,v〉 be a coalitional game such that {a mathematical formula}v(S)=0 holds, for each {a mathematical formula}S⊆N with {a mathematical formula}|S|=1. Based on Γ, we build a coalitional game {a mathematical formula}Γ′=〈N∪{a|N|+1},v′〉 where {a mathematical formula}a|N|+1 is a fresh agent not in N and where {a mathematical formula}v′ is the valuation function such that {a mathematical formula}v′(S′)=v(S′∖{a|N|+1}), for each {a mathematical formula}S′⊆N∪{a|N|+1}, and {a mathematical formula}v′({a|N|+1})=0. Moreover, we build the interaction graph {a mathematical formula}G′=(N∪{a|N|+1},E′) where {a mathematical formula}E′={{a|N|+1,ai}|ai∈N}.Note that {a mathematical formula}F〈G′〉(Γ′) consists of all the singleton coalitions plus all coalitions having the form {a mathematical formula}S∪{a|N|+1}, for each {a mathematical formula}S⊆N. Moreover, any coalition structure {a mathematical formula}Π′ in {a mathematical formula}CS〈G′〉(Γ′) has the form {a mathematical formula}{C+′}∪Π−′, where {a mathematical formula}C+′ is the coalition in {a mathematical formula}Π′ including {a mathematical formula}a|N|+1, and where {a mathematical formula}Π−′ is a set of singleton coalitions. Therefore, it holds that {a mathematical formula}val〈G′〉(Π′)=val〈G′〉(C+′)=v′(C+′)=v(C+′∖{a|N|+1}). In particular, by the properties of the valuation function v and by the construction of {a mathematical formula}v′, the following holds:{a mathematical formula}In words, the computation of the value {a mathematical formula}maxS⊆N⁡v(S) is reduced to the computation of the value associated with {a mathematical formula}〈G′〉-optimal coalition structures in {a mathematical formula}Γ′. Now, recall the proof of Theorem 3.2, by observing that the game built there based on the Boolean formula Φ precisely satisfies the conditions for our game Γ. Then, by Equation (4), the maximum value attained by any coalition in the game associated with Φ can be computed by solving {a mathematical formula}CSGval on input {a mathematical formula}(Γ′,〈G′〉). In fact, we already know that computing such maximum value is {a mathematical formula}FΔ2P-hard (cf. Equation (3) in the proof of Theorem 3.2), so that the {a mathematical formula}FΔ2P-hardness of {a mathematical formula}CSGval immediately follows.  □
      </paragraph>
      <paragraph>
       Intuitively, the hardness result can emerge because, over an acyclic interaction graph, we might still construct a “hard” valuation function where interactions are not properly taken into account. Indeed, we have already noticed that functions independent of disconnected members have been introduced in the literature precisely as classes of functions that adhere to the semantics of interaction graphs. However, it can be checked that the valuation function in the above proof does not satisfy this property. In fact, by applying the notion of treewidth over IDM valuation functions, the following tractability result—suitably restated within our setting and notation—was shown by [69] for the basic CSG problem (i.e., without taking into account valuation structures).
      </paragraph>
      <paragraph label="Theorem 3.5">
       cf. [69]Let{a mathematical formula}h≥0be a fixed natural number. Let{a mathematical formula}Rbe any representation for coalitional games, and let{a mathematical formula}Γ=〈N,v〉∈C(R)be a game such that v is a valuation function independent of disconnected members w.r.t. a graph G with{a mathematical formula}tw(G)≤h. Then,CSGcan be solved on Γ in polynomial times (w.r.t.{a mathematical formula}‖ξR(Γ)‖and{a mathematical formula}‖G‖).
      </paragraph>
      <paragraph>
       Note that the result trivializes whenever the size {a mathematical formula}‖ξR(Γ)‖ of the encoding for the valuation function is exponential w.r.t. the number of the agents in N. Instead, interesting cases emerge for “succinct” encodings, such as for the graph game representation (for which tractability has been also independently derived by [4]). Moreover, note that by combining Theorem 3.5 with Theorem 2.5, we can obtain the following tractability result for valuation structures based on interaction graphs only.
      </paragraph>
      <paragraph label="Proof">
       Let{a mathematical formula}h≥0be a fixed natural number. Let{a mathematical formula}Rbe any representation for coalitional games, let{a mathematical formula}Γ=〈N,v〉∈C(R)be a game such that v is a valuation function independent of disconnected members w.r.t. a graph G with{a mathematical formula}tw(G)≤h. Then,{a mathematical formula}CSGvalcan be solved on{a mathematical formula}(Γ,〈G〉)in polynomial time (w.r.t.{a mathematical formula}‖ξR(Γ)‖and{a mathematical formula}‖G‖).By Theorem 3.5, we can compute in polynomial time a solution {a mathematical formula}Π⁎ to CSG on input Γ, i.e., a solution to {a mathematical formula}CSGval on {a mathematical formula}(Γ,〈KN〉). Given {a mathematical formula}Π⁎, based on Theorem 2.5.(1), a solution to {a mathematical formula}CSGval on {a mathematical formula}(Γ,〈G〉) can be computed in polynomial time, too.  □
      </paragraph>
     </section>
    </section>
    <section label="4">
     Islands of tractability for {a mathematical formula}CSGval
     <paragraph>
      Our main technical achievement in the paper is to generalize Corollary 3.6 to arbitrary valuation structures (but still with bounded treewidth interaction graphs). The proof of the result is rather involved and it is based on two technical ingredients that are interesting in their own right:
     </paragraph>
     <list>
      <list-item label="(1)">
       First, we show that, over bounded treewidth graphs, any IDM valuation function admits a very simple kind of succinct representation, in terms of the well-known encoding based on marginal contribution networks[43]. Moreover, no matter of the representation scheme originally adopted for the valuation function, an equivalent marginal contribution network can be computed in polynomial time.
      </list-item>
      <list-item label="(2)">
       Second, we exhibit a polynomial-time algorithm solving {a mathematical formula}CSGval over marginal contribution networks whose underlying interaction graphs have bounded treewidth. The algorithm is defined by means of a non-trivial encoding in terms of a constraint satisfaction problem, and by exploiting known structural tractability results in this latter setting.
      </list-item>
     </list>
     <paragraph>
      The two ingredients are elaborated in Section 4.1 and Section 4.2, respectively.
     </paragraph>
     <section label="4.1">
      Marginal contribution networks and IDM functions
      <paragraph>
       A representation for coalitional games that received considerable attention in the last few years is based on marginal contribution networks[43].
      </paragraph>
      <paragraph>
       A marginal contribution network (short: MC-net) M consists in a set of rules involving a number of Boolean variables that represent the agents. Each rule has the form {a mathematical formula}{pattern}→value, where pattern is a conjunction that may include both positive and negative literals, and value is the additive contribution associated with this pattern. A rule applies to a set C of agents if all the agents whose literals occur positively in the pattern belong to C, and all the players whose literals occur negatively in the pattern do not belong to C. In the following, we denote by {a mathematical formula}mcn the representation for coalitional games such that for each {a mathematical formula}Γ=〈N,v〉∈C(mcn), {a mathematical formula}ξmcn(Γ) is a marginal contribution network{sup:8} and where, for each coalition C, {a mathematical formula}vmcn(ξmcn(Γ),C) is given by the sum of the values of all rules that apply to C. If no rule applies, then the value for the coalition is set to zero, by default.
      </paragraph>
      <paragraph label="Example 4.1">
       Consider a coalitional game {a mathematical formula}Γ˙=〈N˙,v˙〉, where {a mathematical formula}N˙={a1,…,a5} and where {a mathematical formula}v˙ is such that: {a mathematical formula}v˙({ai})=0, for each {a mathematical formula}i∈{1,…,5}; {a mathematical formula}v˙({a1,a2})=v˙({a2,a3})=v˙({a1,a3})=2; {a mathematical formula}v˙({a1,a2,a3})=5; and {a mathematical formula}v˙(C∪{a4})=v˙(C∪{a5})=v˙(C∪{a4,a5})=v˙(C), for each {a mathematical formula}C⊆{a1,a2,a3}. An encoding for this game in terms of a marginal contribution network is given by the following set of rules:{a mathematical formula}For instance, {a mathematical formula}v˙({a1,a2,a4})=2 derives as the first rule and the last rule apply. ◁
      </paragraph>
      <paragraph>
       In order to model the interactions among the agents in marginal contribution network M, we define a graph {a mathematical formula}AG(M), called the agent graph of M[43], whose nodes are the agents of the game, and where, for each rule {a mathematical formula}{pattern}→value occurring in M, every pair of agents (nodes) occurring in pattern are connected by an edge in {a mathematical formula}AG(M).
      </paragraph>
      <paragraph>
       For instance, it can be checked that the agent graph associated with the marginal contribution network of Example 4.1 is the one illustrated in Fig. 5(a).
      </paragraph>
      <paragraph>
       Our first result is that any function encoded via a marginal contribution network is independent of disconnected members w.r.t. its associated agent graph.
      </paragraph>
      <paragraph label="Proof">
       Let{a mathematical formula}Γ=〈N,v〉be a game in{a mathematical formula}C(mcn). Then, v is independent of disconnected members w.r.t.{a mathematical formula}AG(ξmcn(Γ)).Let {a mathematical formula}ai and {a mathematical formula}aj be two agents in N that are not connected in the graph {a mathematical formula}AG(ξmcn(Γ)) and let C be a coalition with {a mathematical formula}ai,aj∉C. We have to show that {a mathematical formula}v(C∪{ai})−v(C)=v(C∪{ai,aj})−v(C∪{aj}).Let {a mathematical formula}Ri be the set of all rules that apply to {a mathematical formula}C∪{ai} and that do not apply to C. Note that the agent {a mathematical formula}ai must positively occur in each rule in {a mathematical formula}Ri. Moreover, note that {a mathematical formula}v(C∪{ai})−v(C) precisely coincides with the sum of the values associated with the rules in {a mathematical formula}Ri. Then, let {a mathematical formula}Ri,j be the set of all rules that apply to {a mathematical formula}C∪{ai,aj} and that do not apply to {a mathematical formula}C∪{aj}, by noticing similarly that {a mathematical formula}v(C∪{ai,aj})−v(C∪{aj}) coincides with the sum of the values for them. Moreover, the agent {a mathematical formula}ai must positively occur in any rule taken from {a mathematical formula}Ri,j. Based on the above properties, we can now show that {a mathematical formula}Ri=Ri,j. Indeed, consider a rule r where agent {a mathematical formula}ai positively occurs. Since {a mathematical formula}ai and {a mathematical formula}aj are not connected in {a mathematical formula}AG(ξmcn(Γ)), we conclude that r does not contain {a mathematical formula}aj. Hence, r is in {a mathematical formula}Ri if, and only if, r is in {a mathematical formula}Ri,j.  □
      </paragraph>
      <paragraph>
       We now show that the converse of the above result holds, too. Indeed, we show that, when considering IDM functions, we can focus w.l.o.g. on games encoded via marginal contribution networks. In particular, note that the marginal contribution network can be built in polynomial time whenever classes of bounded treewidth graphs are considered.
      </paragraph>
      <paragraph label="Example 4.4">
       Let{a mathematical formula}Rbe any representation for coalitional games, and let{a mathematical formula}Γ=〈N,v〉∈C(R)be a game such that v is a valuation function independent of disconnected members w.r.t. a graph G with{a mathematical formula}tw(G)=h. Then, a marginal contribution network M (without negative literals) can be built in time polynomial w.r.t.{a mathematical formula}‖ξR(Γ)‖and exponential w.r.t. h, such that{a mathematical formula}AG(M)=Gand{a mathematical formula}vmcn(ξR(Γ),C)=vmcn(M,C), for each{a mathematical formula}C⊆N.We have to build an encoding for the game {a mathematical formula}Γ=〈N,v〉 in terms of a marginal contribution network M. Let {a mathematical formula}C⊆N be a coalition, and let {a mathematical formula}GC denote the subgraph of G induced over the nodes in C. Throughout the proof, we shall say that the coalition C is ℓ-sparse if the number of nodes in C having less than {a mathematical formula}|C|−1 adjacent nodes in {a mathematical formula}GC is ℓ. Note that if C is 0-sparse, then {a mathematical formula}GC is actually a clique over the nodes in C.The construction focuses precisely on 0-sparse coalitions (while arbitrary ℓ-sparse coalitions will play a role in the proof). Indeed, for each 0-sparse coalition {a mathematical formula}C⊆N, we include in M a rule {a mathematical formula}rC:{patternC}→valueC, such that {a mathematical formula}patternC is the conjunction containing all the agents in C and where: {a mathematical formula}valueC=v(C)−∑C′⊂Cv(C′). No further rule is in M. An example construction is illustrated below.Consider again the coalitional game {a mathematical formula}Γ˙ discussed in Example 4.1 and the interaction graph depicted in Fig. 5(a). The 0-sparse coalitions in this setting are the following ones: {a mathematical formula}{a1},…,{a5}, {a mathematical formula}{a1,a2}, {a mathematical formula}{a2,a3}, {a mathematical formula}{a1,a3}, {a mathematical formula}{a2,a4}, {a mathematical formula}{a3,a5}, and {a mathematical formula}{a1,a2,a3}. Then, the marginal contribution network consists of the following rules:{a mathematical formula} Note that the encoding differs from the one discussed in Example 4.1. In particular, now there is no rule containing negated agents. ◁We start the proof by pointing out the following two properties of the construction:
       <list>
        Assume that {a mathematical formula}tw(G)=h. If C is a 0-sparse coalition, then {a mathematical formula}C≤h+1 necessarily holds, by well-known results on tree decompositions. This means that {a mathematical formula}|{C′|C′⊆C}|≤2h+1. Therefore, {a mathematical formula}valueC can be built in polynomial time w.r.t. {a mathematical formula}‖ξR(Γ)‖ (and exponential w.r.t. h). Moreover, observe that the number of 0-sparse coalitions (hence cliques with {a mathematical formula}h+1 nodes at most in G) is polynomial w.r.t. the number of the nodes of the graph, and thus w.r.t. {a mathematical formula}‖ξR(Γ)‖ (again, still exponential w.r.t. h). Hence, the overall number of rules in M is still polynomial, and we conclude that M can be actually built in polynomial time.Each edge e in the graph G is actually a 0-sparse coalition. Therefore, there is a rule {a mathematical formula}re in M and the two agents in e are connected in {a mathematical formula}AG(M), too. On the other hand, if {a mathematical formula}rC is a rule in M (so that the agents in C form a clique in the graph {a mathematical formula}AG(M)), then we have that C is a 0-sparse coalition and hence all the agents in C already form a clique in G. We can thus conclude that {a mathematical formula}AG(M)=G holds.After these properties, it remains to be proven that the encoding is correct, that is,
       </list>
       <paragraph>
        {a mathematical formula}vmcn(M,C)=v(C), for each {a mathematical formula}C⊆N. The result will be proven by structural induction on the “sparseness” of the given coalition C.Base Case: In the base case, we have to show that the encoding is correct, for each 0-sparse coalition {a mathematical formula}C⊆N. In fact, even this case is not immediate, and it is proven by another structural induction, this time on the size of the coalition C. Base Case:Assume that C is a 0-sparse coalition with {a mathematical formula}|C|=1. Then, only the rule {a mathematical formula}rC can apply to C, and hence we get by construction that {a mathematical formula}vmcn(M,C)=valueC=v(C).Induction Step:Let {a mathematical formula}p&gt;0 be a natural number, and assume that for each 0-sparse coalition {a mathematical formula}C′⊆N with {a mathematical formula}|C′|≤p, {a mathematical formula}vmcn(M,C′)=v(C′) holds. Let C be a 0-sparse coalition with {a mathematical formula}|C|=p+1. By the definition of the valuation function associated with a marginal contribution network, we get {a mathematical formula}vmcn(M,C)=∑C′⊆CvalueC′=valueC+∑C′⊂CvalueC′, because all rules that apply to any subset {a mathematical formula}C′⊂C apply to C, too (recall that there is no negated agent in these rules). Note also that, for each {a mathematical formula}C′⊂C, we have that {a mathematical formula}C′ is 0-sparse and {a mathematical formula}|C′|≤p. Therefore, we can apply the inductive hypothesis in order to conclude that {a mathematical formula}vmcn(M,C)=valueC+∑C′⊂Cv(C′). Eventually, recall that {a mathematical formula}valueC=v(C)−∑C′⊂Cv(C′). So, {a mathematical formula}valueC+∑C′⊂Cv(C′)=v(C) and we get that {a mathematical formula}vmcn(M,C)=v(C).Induction Step: Assume now that for each ℓ-sparse coalition {a mathematical formula}C′⊆N, {a mathematical formula}vmcn(M,C′)=v(C′). We will show that, for each {a mathematical formula}(ℓ+1) sparse coalition {a mathematical formula}C⊆N, {a mathematical formula}vmcn(M,C)=v(C). Again, we used a nested induction on the size of C. Base Case:Assume that C is a {a mathematical formula}(ℓ+1)-sparse coalition with {a mathematical formula}|C|=ℓ+1, with {a mathematical formula}ℓ≥0. Then, there are two agents/nodes {a mathematical formula}a1 and {a mathematical formula}a2 in C that are not connected by means of an edge in G. Consider the coalitions {a mathematical formula}C1=C∖{a1}, {a mathematical formula}C2=C∖{a2}, and {a mathematical formula}C3=C1∩C2. It is immediately seen that {a mathematical formula}|C1|=ℓ, {a mathematical formula}|C2|=ℓ, {a mathematical formula}|C3|≤ℓ, and that {a mathematical formula}Ci, for each {a mathematical formula}i∈{1,2,3}, is (trivially) {a mathematical formula}si-sparse for some {a mathematical formula}si≤ℓ. Hence, {a mathematical formula}vmcn(M,Ci)=v(Ci), for each {a mathematical formula}i∈{1,2,3}, holds by the inductive hypothesis, and we derive:{a mathematical formula} Since {a mathematical formula}C={a1,a2}∪C3 and since v is independent of disconnected members w.r.t. G, we conclude, by Equation (1) in Section 2.1, that {a mathematical formula}v({a1}∪C3)+v({a2}∪C3)−v(C3)=v(C). Hence, {a mathematical formula}vmcn(M,C)=v(C).Induction Step:Let {a mathematical formula}p≥ℓ+1 be a natural number, and assume that for each {a mathematical formula}(ℓ+1)-sparse coalition {a mathematical formula}C″⊆N, with {a mathematical formula}|C″|≤p, {a mathematical formula}vmcn(M,C″)=v(C″) holds. Let C be a {a mathematical formula}(ℓ+1)-sparse coalition, with {a mathematical formula}|C|=p+1, and let {a mathematical formula}{a1,…,aℓ+1} be the set of the {a mathematical formula}ℓ+1 nodes in C having less than {a mathematical formula}|C|−1 adjacent nodes in {a mathematical formula}GC. Consider the coalitions: {a mathematical formula}C1 consisting of {a mathematical formula}a1 plus all the nodes that are adjacent to it in {a mathematical formula}GC; {a mathematical formula}C2=C∖{a1}, and {a mathematical formula}C3=C1∩C2. Note that {a mathematical formula}C1∖C2={a1} holds. Moreover, for each {a mathematical formula}i∈{1,2,3}, {a mathematical formula}|Ci|≤p and {a mathematical formula}Ci is (trivially) a {a mathematical formula}si-sparse coalition for some {a mathematical formula}si≤p. Hence, the inductive hypothesis can be applied on {a mathematical formula}C1, {a mathematical formula}C2, and {a mathematical formula}C3, by deriving that {a mathematical formula}vmcn(M,Ci)=v(Ci), for each {a mathematical formula}i∈{1,2,3}. Eventually, we derive:{a mathematical formula} Now, we observe that there is no edge connecting {a mathematical formula}a1 (the only element of {a mathematical formula}C1∖C2) with a node in {a mathematical formula}C2∖C1. Therefore, we can apply Equation (2) in Section 2.1 and conclude that {a mathematical formula}v(C1)+v(C2)−v(C1∩C2)=v(C1∪C2), where {a mathematical formula}C1∩C2=C3 and {a mathematical formula}C1∪C2=C. It follows that {a mathematical formula}vmcn(M,C)=v(C).  □
       </paragraph>
      </paragraph>
      <paragraph>
       For any fixed constant {a mathematical formula}h&gt;0, we shall denote by {a mathematical formula}CTW-h(mcn) the restriction of the class {a mathematical formula}C(mcn) to all those marginal contribution networks whose associated agent graphs have treewidth h at most. According to the above results, {a mathematical formula}CTW-h(mcn) is representative of all coalitional games based on IDM valuation functions (w.r.t. interactions graphs having treewidth bounded by h). Moreover, observe that we can further assume that {a mathematical formula}CTW-h(mcn) contains only networks with rules that do not involve negative literals. Indeed, the following is easily established.
      </paragraph>
      <paragraph label="Proof">
       Let{a mathematical formula}Γ=〈N,v〉∈C(mcn)be a game such that{a mathematical formula}tw(AG(ξmcn(Γ)))≤h. Then, a marginal contribution network M containing no rule with a negated literal can be built in time polynomial w.r.t.{a mathematical formula}‖ξmcn(Γ)‖and exponential w.r.t. h, such that{a mathematical formula}AG(M)=AG(ξmcn(Γ))and{a mathematical formula}vmcn(M,C)=vmcn(ξmcn(Γ),C), for each{a mathematical formula}C⊆N.By Theorem 4.2, v is independent of disconnected members w.r.t. {a mathematical formula}AG(ξmcn(Γ)). So, the result follows from Theorem 4.3 applied on Γ and the graph {a mathematical formula}AG(ξmcn(Γ)).  □
      </paragraph>
     </section>
     <section label="4.2">
      <section-title>
       Coalition structure generation over marginal contribution networks
      </section-title>
      <paragraph>
       The second technical ingredient we exhibit is a method to efficiently solve {a mathematical formula}CSGval over the class {a mathematical formula}CTW-h(mcn). The analysis is carried out by encoding {a mathematical formula}CSGval in terms of a (weighted) constraint satisfaction problem (short: CSP), and by showing that CSP instances associated with games in {a mathematical formula}CTW-h(mcn) can be solved in polynomial time.
      </paragraph>
      <paragraph>
       Before embarking on this analysis, it is useful to recall, e.g., from [36] that the CSP-encoding approach is a powerful method that has already been exploited to show tractability results in a number of different areas of research. However, the issues that arise in the context of coalition structure generation under valuation structures have been not considered in earlier approaches, and the specific encoding algorithm is substantially more involved than those already available in the literature. In particular, a distinguishing feature of our proposal is the ability of handling “connectivity constraints” (induced by the underlying interactions graphs). This feature might turn out to be useful in different domains whenever a graph structure is given and solutions are required to “induce”, according to some specific semantics, some connected substructure.
      </paragraph>
      <section label="4.2.1">
       <section-title>
        Constraint satisfaction problems
       </section-title>
       <paragraph>
        We start with some preliminaries on constraint satisfaction. The reader interested in expanding on this formalism is referred to [23].
       </paragraph>
       <paragraph>
        A constraint satisfaction problem instance is a triple {a mathematical formula}I=〈Var,U,C〉, where Var is a finite set of variables, U is a finite domain of values, and {a mathematical formula}C={C1,C2,…,Cq} is a finite set of constraints. Each constraint {a mathematical formula}Cv, for {a mathematical formula}1≤v≤q, is a pair {a mathematical formula}(Sv,rv), where {a mathematical formula}Sv⊆Var is a set of variables called the constraint scope, and {a mathematical formula}rv is a set of substitutions from variables in {a mathematical formula}Sv to values in U indicating the allowed combinations of simultaneous values for the variables in {a mathematical formula}Sv, called tuples. A substitution from a set of variables {a mathematical formula}V⊆Var to U is extensively denoted as the set of pairs of the form {a mathematical formula}X/u, where {a mathematical formula}u∈U is the value to which {a mathematical formula}X∈V is mapped. A substitution θ satisfies a constraint {a mathematical formula}Cv if its restriction to {a mathematical formula}Sv, i.e., the set of all pairs {a mathematical formula}X/u∈θ such that {a mathematical formula}X∈Sv, occurs as a tuple in {a mathematical formula}rv. A solution to {a mathematical formula}I is a substitution {a mathematical formula}θ:Var↦U for which q tuples {a mathematical formula}t1∈r1,…,tq∈rq exist such that {a mathematical formula}θ=t1∪…∪tq. Thus, a solution satisfies all the constraints in {a mathematical formula}I.
       </paragraph>
       <paragraph>
        Encoding. Let {a mathematical formula}Γ=〈N,v〉∈CTW-h(mcn), with {a mathematical formula}N={a1,…,an}, be a coalitional game and let {a mathematical formula}σ=〈G,S,α,β,x,y〉 be an associated valuation structure where {a mathematical formula}G=AG(ξmcn(Γ)). That is, interactions are constrained by the underlying agent graph (cf. Theorem 4.3). The CSP instance associated with Γ and σ, denoted by {a mathematical formula}CSP(Γ,σ)=〈Var,U,C〉, is defined as follows:
       </paragraph>
       <list>
        <list-item label="•">
         Variables are transparently viewed as the agents in N, that is, {a mathematical formula}Var=N.
        </list-item>
        <list-item label="•">
         The domain U contains an element of the form {a mathematical formula}〈fromj,originℓ,levelh〉 for each triple of indices {a mathematical formula}j,ℓ,h∈{1,…,n}. Moreover, U contains an element of the form {a mathematical formula}〈originℓ,level0〉 for each index {a mathematical formula}ℓ∈{1,…,n}. No further constant is in U.
        </list-item>
        <list-item label="•">
         The set C consists of the following three kinds of constraints.
        </list-item>
       </list>
       <paragraph>
        Intuitively, elements in U are used to encode a number of spanning trees (of some underlying coalitions) defined over the interaction graph. In particular, the element {a mathematical formula}〈originℓ,level0〉 can be assigned to the variable {a mathematical formula}aℓ only, with the intended meaning that {a mathematical formula}aℓ is the root of a spanning tree. Instead, if a node {a mathematical formula}ai is mapped to the constant {a mathematical formula}〈fromj,originℓ,levelh〉, then we intend that {a mathematical formula}ai belongs to a spanning tree rooted at node {a mathematical formula}aℓ, that {a mathematical formula}aj is the father of {a mathematical formula}ai in this tree, and that {a mathematical formula}ai occurs at the level h of the tree (with level 0 being the root). More than one node can be defined as a root node, so that more than one spanning tree can be actually induced by a solution. However, we require that each pivotal agent is necessarily the root of a spanning tree, hence preventing that it occurs in the same tree (hence, component) associated with another pivotal agent.
       </paragraph>
       <paragraph label="Example 4.6">
        Consider again the coalitional game {a mathematical formula}Γ˙ and the encoding in terms of a marginal contribution network, say {a mathematical formula}M˙, defined in Example 4.4. Consider the valuation structure {a mathematical formula}σ˙=〈AG(M˙),{a3,a5},1,0,0,−∞〉, where {a mathematical formula}a3 and {a mathematical formula}a5 are pivotal agents.A solution to the CSP associated with {a mathematical formula}Γ˙ and {a mathematical formula}σ˙ is given by the following substitution:{a mathematical formula}The reader can check that constraints of kind (C2) and (C3) are satisfied by {a mathematical formula}θ˙. Moreover, the reader can observe in Fig. 6 that the CSP solution induces a {a mathematical formula}σ˙-feasible coalition structure, where {a mathematical formula}a3 and {a mathematical formula}a5 belong to different coalitions (and spanning trees). ◁
       </paragraph>
       <paragraph>
        The crucial properties of the above correspondence from games to CSP instances are formalized below. Hereinafter, for any substitution θ from (any subset of) Var to U, and for any index {a mathematical formula}i∈{1,…,n}, we denote by {a mathematical formula}θi the set of all agents that are mapped via θ to a tuple containing the term ‘{a mathematical formula}origini’. Moreover, we denote by {a mathematical formula}Πθ the coalition structure including precisely the coalition {a mathematical formula}θi, for each {a mathematical formula}i∈{1,…,n} such that {a mathematical formula}θi≠∅.
       </paragraph>
       <paragraph>
        For instance, in Example 4.6, we have that {a mathematical formula}θ˙1=θ˙2=θ˙4=∅, {a mathematical formula}θ˙3={a3,a2,a1,a4}, and {a mathematical formula}θ˙5={a5}. Note that {a mathematical formula}Πθ˙={θ˙3,θ˙5} is a {a mathematical formula}σ˙-feasible coalition structure.
       </paragraph>
       <paragraph label="Proof">
        For each σ-feasible coalition structure Π in{a mathematical formula}CSσ(Γ), there is a solution θ to{a mathematical formula}CSP(Γ,σ)such that{a mathematical formula}Π=Πθ.Let Π be a σ-feasible coalition structure in {a mathematical formula}CSσ(Γ), and consider a substitution θ built as follows. For each coalition C in Π, observe that the subgraph {a mathematical formula}GC of {a mathematical formula}AG(ξmcn(Γ)) induced over the nodes of C is connected. Let {a mathematical formula}TC be a spanning tree of {a mathematical formula}GC and let us root it at a node {a mathematical formula}aℓ∈C. In particular, if C contains a pivotal agent, then {a mathematical formula}aℓ is precisely this (univocally determined) agent. Otherwise, {a mathematical formula}aℓ is any arbitrary node in C. Then, the restriction of θ over the variables in C is built as follows. For the agent {a mathematical formula}aℓ, we set {a mathematical formula}θ(aℓ)=〈originℓ,level0〉. Moreover, for each agent {a mathematical formula}ai∈C∖{aℓ}, let {a mathematical formula}aj be the parent of {a mathematical formula}ai, and let h be the number of edges occurring in the path connecting {a mathematical formula}aj and {a mathematical formula}aℓ in {a mathematical formula}TC. Then, we set {a mathematical formula}θ(ai)=〈fromj,originℓ,levelh+1〉. Note that if the parent of {a mathematical formula}ai is {a mathematical formula}aℓ, then we have that {a mathematical formula}θ(ai)=〈fromℓ,originℓ,level1〉. Otherwise, i.e., if {a mathematical formula}aj≠aℓ, then we have that {a mathematical formula}h&gt;0. Eventually, since the coalitions in Π are disjoint and they cover all the agents/variables in N, by iterating the above construction over all such coalitions, we get that the substitution θ is well defined, i.e., it maps each variable to a constant in U. In particular, by construction, {a mathematical formula}Π=Πθ.In order to conclude the proof, we claim that, for each coalition {a mathematical formula}C∈Π, θ satisfies all the constraints where a variable in C occurs. Note that constraints of kind (C1) are trivially satisfied by any substitution. Thus, we have just to focus on the constraints of kind (C2) and (C3). Let {a mathematical formula}ai be a node in C, let {a mathematical formula}aℓ be the root node of {a mathematical formula}TC and consider the following constraints:
       </paragraph>
       <list>
        <list-item label="(C2)">
         Observe that {a mathematical formula}θ(ai) is either the tuple {a mathematical formula}〈origini,level0〉 with {a mathematical formula}i=ℓ, or a tuple having the form {a mathematical formula}〈fromj,originℓ,levelh〉, for an index j such that {a mathematical formula}aj is connected to {a mathematical formula}ai, and where {a mathematical formula}h∈{1,…,n}. In particular, whenever {a mathematical formula}ai is a pivotal agent, then we are guaranteed that {a mathematical formula}i=ℓ holds, by construction. It follows that θ satisfies the constraint {a mathematical formula}Ci=({ai},ri).
        </list-item>
        <list-item label="(C3)">
         Consider now a constraint of the form {a mathematical formula}Ci,j, and let us distinguish the following cases (corresponding to the items in the definition of the elements in {a mathematical formula}ri,j).
        </list-item>
       </list>
       <paragraph label="Proof">
        For each solution θ to{a mathematical formula}CSP(Γ,σ),{a mathematical formula}Πθis a σ-feasible coalition structure in{a mathematical formula}CSσ(Γ).Let θ be a solution and consider the set {a mathematical formula}Πθ. We first show that, for each agent {a mathematical formula}ai∈N, there is a coalition {a mathematical formula}C∈Πθ such that {a mathematical formula}ai∈C. Indeed, as θ is solution, {a mathematical formula}θ(ai) is necessarily mapped to a tuple having a term of the form {a mathematical formula}originℓ for some index {a mathematical formula}ℓ∈{1,…,n}. This means that {a mathematical formula}ai∈θℓ holds and that {a mathematical formula}θℓ∈Πθ. Moreover, by definition of {a mathematical formula}Πθ and given the universe U of the CSP instance, it is immediate to check that for each pair of coalitions C and {a mathematical formula}C′ in {a mathematical formula}Πθ, {a mathematical formula}C∩C′≠∅ holds. Therefore, {a mathematical formula}Πθ is a set of disjoint coalitions covering all the agents in N. To complete the proof, we have to show that each coalition C in {a mathematical formula}Πθ is a feasible one. (Connectivity):Let C be a coalition in {a mathematical formula}Πθ, and assume that {a mathematical formula}aℓ∈N is the agent such that {a mathematical formula}C=θℓ. First, note that each node {a mathematical formula}ai in C is mapped via θ to a tuple containing a term of the form {a mathematical formula}levelh, where {a mathematical formula}h∈{0,…,n}. In the following, we shall say that h is the level of {a mathematical formula}ai, and we prove that the subgraph of {a mathematical formula}Πθ induced over the nodes in C is connected. In fact, we claim that for each node {a mathematical formula}ai in C whose level is {a mathematical formula}h+1 with {a mathematical formula}h≥0, {a mathematical formula}ai is connected to a node {a mathematical formula}aj in C whose level is h. To prove the claim, observe that because of the constraint {a mathematical formula}Ci,j, {a mathematical formula}θ(ai)=〈fromj,originℓ,levelh+1〉 holds, where {a mathematical formula}aj is an agent connected to {a mathematical formula}ai. Therefore, in the base case where {a mathematical formula}j=ℓ, we have concluded. Otherwise, we are guaranteed that {a mathematical formula}θ(aj) has the form {a mathematical formula}〈fromk,originℓ,levelh〉, hence {a mathematical formula}aj is a node in C and its level is h. Finally, by a simple argument based on structural induction on the above observation, we can conclude that each node {a mathematical formula}ai whose level is {a mathematical formula}h+1 is connected to {a mathematical formula}aℓ by means of a path involving only nodes in C and whose associated levels are lower than h.(Pivotal agents):Let {a mathematical formula}ai and {a mathematical formula}aj be two pivotal agents in S. Because of the constraints of kind (C2), it must be the case that {a mathematical formula}θ(ai)=〈origini,level0〉 and {a mathematical formula}θ(aj)=〈originj,level0〉. Thus, by construction of {a mathematical formula}Πθ, {a mathematical formula}ai and {a mathematical formula}aj belongs to distinct coalitions in {a mathematical formula}Πθ. Given that the above two properties hold, we conclude that {a mathematical formula}Πθ is σ-feasible.  □
       </paragraph>
      </section>
      <section label="4.2.2">
       <section-title>
        Weighted CSPs
       </section-title>
       <paragraph>
        The next ingredient we need is to equip CSP instances with weights as to properly encode the goal of maximizing the σ-value. Note that this is not immediate in our setting, because the original valuation function v is mapped, by the affine transformation provided by the valuation structure σ, into a novel function {a mathematical formula}valσ that do not preserve the properties of v. In particular, even if v is an IDM function, this is not necessarily the case for {a mathematical formula}valσ and, hence, the results derived in the previous section would not apply on it. For this reason, we are forced to work on the original valuation function v, and to deal with the affine transformation with a more sophisticated encoding.
       </paragraph>
       <paragraph>
        Before detailing the encoding, we recall that a weighted CSP (short: WCSP) instance consists of a tuple {a mathematical formula}〈I,wr1,…,wrq〉, where {a mathematical formula}I=〈Var,U,C〉 with {a mathematical formula}C={C1,C2,…,Cq} is a CSP instance, and where, for each tuple {a mathematical formula}tv∈rv, {a mathematical formula}wrv(tv)∈R denotes the weight associated with {a mathematical formula}tv. For a solution {a mathematical formula}θ=t1∪…∪tq to {a mathematical formula}I, we define {a mathematical formula}w(θ)=∑v=1qwrv(tv) its associated weight. Then, a solution to {a mathematical formula}〈I,wr1,…,wrq〉 is a solution{sup:9}θ to {a mathematical formula}I such that {a mathematical formula}w(θ)≥w(θ′), for each solution {a mathematical formula}θ′ to {a mathematical formula}I.
       </paragraph>
       <paragraph>
        Given the game {a mathematical formula}Γ=〈N,v〉∈CTW-h(mcn) and {a mathematical formula}σ=〈G,S,α,β,x,y〉, we define {a mathematical formula}WCSP(Γ,σ) as the weighted CSP instance whose underlying CSP instance is {a mathematical formula}CSP(Γ,σ) and where each constraint relation {a mathematical formula}rγ of kind (C1), which is in fact associated with the rule {a mathematical formula}γ:{pattern}→value, is equipped with the function {a mathematical formula}wrγ defined as follows.
       </paragraph>
       <paragraph>
        First, we say that a rule γ is active w.r.t. a tuple {a mathematical formula}t∈rγ if there is an agent {a mathematical formula}ai∈{a1,…,an}, called the witness, such that {a mathematical formula}ti (i.e., the set of agents mapped via t to a constant with a term {a mathematical formula}origini) coincides with the set of the agents occurring in pattern (i.e., with the scope {a mathematical formula}Sγ)—recall from Corollary 4.5 that we are assuming all agents to occur positively in pattern. Then, for each tuple {a mathematical formula}t∈rγ,
       </paragraph>
       <list>
        <list-item label="•">
         if γ is not active w.r.t. t, then we set {a mathematical formula}wrγ(t)=0;
        </list-item>
        <list-item label="•">
         otherwise, i.e., if γ is active w.r.t. t and {a mathematical formula}ai is the associated witness (which is, in fact, unique), then we distinguish two cases:
        </list-item>
       </list>
       <paragraph>
        Concerning constraints of kind (C2), for each constraint relation {a mathematical formula}ri, with {a mathematical formula}ai∈N,
       </paragraph>
       <list>
        <list-item label="•">
         we set {a mathematical formula}wri(ai/u)=0, for each constant {a mathematical formula}u∈U∖{〈origini,level0〉}};
        </list-item>
        <list-item label="•">
         for the constant {a mathematical formula}〈origini,level0〉, we distinguish two cases:
        </list-item>
       </list>
       <paragraph>
        All other constraint relations of kind (C3) are equipped with the constant function assigning 0 to each substitution, and we hence shall get rid of them.
       </paragraph>
       <paragraph>
        We now show that the proposed weighting scheme leads to equip coalition structures with their associated σ-value.
       </paragraph>
       <paragraph label="Proof">
        For each solution θ to{a mathematical formula}CSP(Γ,σ),{a mathematical formula}w(θ)=valσ(Πθ).Let {a mathematical formula}Πθ be the coalition structure associated with θ (cf. Lemma 4.7 and Lemma 4.8). In the following, for any set of nodes/variables W, we denote by {a mathematical formula}θ[W] the restriction of the substitution θ over the elements in W.Let {a mathematical formula}ai be an agent such that {a mathematical formula}θi∈Πθ, and let {a mathematical formula}Ri denote the set of rules in {a mathematical formula}ξmcn(Γ) that apply to {a mathematical formula}θi. Then, we first claim that:{a mathematical formula}In order to prove the claim, let us consider the definition of {a mathematical formula}valσ(θi), by distinguishing two cases, depending on whether {a mathematical formula}ai is a pivotal agent:
        <list>
         In the case where {a mathematical formula}ai is a pivotal agent, then {a mathematical formula}valσ(θi)=v(θi)×α(ai)+β(ai);otherwise, we have {a mathematical formula}valσ(θi)=v(θi)×x+y.Let us focus on case (1). In this case, we have that
        </list>
        <paragraph>
         {a mathematical formula}θ(ai)=〈origini,level0〉, and hence {a mathematical formula}wri(θ[Si])=β(ai) holds, by definition of the weighting function. Moreover, consider any rule {a mathematical formula}γ∈Ri with {a mathematical formula}γ:{pattern}→value. Let A be the set of agents occurring (positively) in pattern, and consider the tuple {a mathematical formula}t∈rγ such that {a mathematical formula}θ⊇t (hence, {a mathematical formula}A=Sγ). Since γ applies to {a mathematical formula}θi, it must be the case that {a mathematical formula}ti=A. Hence, γ is active w.r.t. t and we have that {a mathematical formula}wrγ(θ[Sγ])=value×α(ai). Now, recall that the worth of any coalition is just given by the sum of the values associated to the rules that apply to it. Therefore, {a mathematical formula}v(θi) is the sum of the values of all rules in {a mathematical formula}Ri. Hence, {a mathematical formula}∑γ∈Riwrγ(θ[Sγ])+wri(θ[Si])=v(θi)×α(ai)+β(ai).Let us focus on case (2). Then, we apply the same line of reasoning as above, by replacing the value {a mathematical formula}α(ai) (resp., {a mathematical formula}β(ai)), with x (resp., y). Eventually, we derive that {a mathematical formula}∑γ∈Riwrγ(θ[Sγ])+wri(θ[Si])=v(θi)×x+y.At this point, we know that Equation (5) is correct. Moreover, we recall that {a mathematical formula}valσ(Πθ) is just given by the sum of {a mathematical formula}valσ(θi) over each coalition {a mathematical formula}θi∈Πθ. That is,{a mathematical formula}On the other hand, if R denotes the set of all the rules, we can write:{a mathematical formula}In order to conclude the proof, we have to show that the right-hand sides of Equation (6) and Equation (7) coincide. To this end, consider first an agent {a mathematical formula}aj∈N such that {a mathematical formula}θj is not in {a mathematical formula}Πθ. This means that {a mathematical formula}θ(aj)≠〈originj,level0〉 and, hence, {a mathematical formula}wrj(θ[Sj])=0 holds. That is, {a mathematical formula}∑θi∈Πθwri(θ[Si])=∑aj∈Nwrj(θ[Sj]).We will now prove that {a mathematical formula}∑θi∈Πθ∑γ∈Riwrγ(θ[Sγ])=∑γ∈Rwrγ(θ[Sγ]). In fact, note that any rule γ that belongs to a set {a mathematical formula}Ri cannot belong to a set {a mathematical formula}Rj for some agent {a mathematical formula}aj≠ai. Therefore, we have just to take care of those rules γ that do not apply to any coalition in {a mathematical formula}Πθ, and we shall show that {a mathematical formula}wrγ(θ[Sγ])=0 holds for them. Indeed, consider the tuple {a mathematical formula}θ[Sγ]∈rγ, and just note that such rules γ are not active w.r.t. {a mathematical formula}θ[Sγ].  □
        </paragraph>
       </paragraph>
      </section>
      <section label="4.2.3">
       <section-title>
        Proof of the main result and extensions
       </section-title>
       <paragraph>
        The structure of a CSP instance {a mathematical formula}I is often represented in the literature by its associated primal graph {a mathematical formula}PG(I) defined over the variables in Var and where two variables are connected with an edge if, and only if, they occur in the same scope of some constraint. While looking at the CSP instance {a mathematical formula}CSP(Γ,σ)=〈Var,U,C〉, it is immediate to check that two variables occur in the same scope of some constraint if, and only if, the associated agents occurs in some rule of the underlying marginal contribution network. Therefore, the graph associated with the constraints coincides with the agent graph underlying Γ.
       </paragraph>
       <paragraph label="Fact 4.10">
        {a mathematical formula}PG(CSP(Γ,σ))=AG(ξmcn(Γ)).
       </paragraph>
       <paragraph>
        Moreover, over bounded treewidth instances the construction of {a mathematical formula}WCSP(Γ,σ) can be efficiently carried out.
       </paragraph>
       <paragraph label="Proof">
        Let{a mathematical formula}h≥0be a fixed natural number. Let{a mathematical formula}Γ=〈N,v〉be a game in{a mathematical formula}CTW-h(mcn), and let{a mathematical formula}σ=〈AG(ξmcn(Γ)),S,α,β,x,y〉be a valuation structure. Then,{a mathematical formula}WCSP(Γ,σ)can be built in polynomial time (w.r.t.{a mathematical formula}‖ξmcn(Γ)‖+‖σ‖).We have to build {a mathematical formula}CSP(Γ,σ)=〈Var,U,C〉. Clearly, Var and U can be build in polynomial time as {a mathematical formula}|N|≤‖ξc-mcn(Γ)‖. Constraints of the form (C2) and (C3) can be built in polynomial time, as they are defined over two variables at most. Concerning the constraints of kind (C1), observe that we have one constraint {a mathematical formula}(Sγ,rγ), for each rule {a mathematical formula}γ:{pattern}→value in the encoding, where {a mathematical formula}|Sγ|≤|N|. In particular, we observe that {a mathematical formula}|rγ|≤n|Sγ| and to conclude we just we claim that {a mathematical formula}|Sγ|≤h. Indeed, if {a mathematical formula}|Sγ|=p&gt;h, then the agent graph {a mathematical formula}AG(ξmcn(Γ)) would contain a clique over {a mathematical formula}p&gt;h agents (in {a mathematical formula}Sγ), and the treewidth of this graph would be at least p, hence greater than h. In order to conclude the proof, we can just notice that the weighting functions can be also built in polynomial time. In particular, we explicitly list the weights in the encoding, with their size being bounded by {a mathematical formula}‖σ‖.{sup:10}  □
       </paragraph>
       <paragraph>
        By Lemma 4.7, Lemma 4.8, Lemma 4.9, Fact 4.10, Lemma 4.11, Theorem 4.3, and given that solutions to (weighted) constraint satisfaction are known to be computable in polynomial time on classes of instances whose associated primal graphs have treewidth bounded by some fixed constant (see, e.g., [23], [40], [34]), we derive our main result generalizing Corollary 3.6 to arbitrary valuation structures.
       </paragraph>
       <paragraph label="Theorem 4.12">
        Let{a mathematical formula}h≥0be a fixed natural number. Let{a mathematical formula}Rbe any representation for coalitional games, let{a mathematical formula}Γ=〈N,v〉∈C(R)be a game such that v is a valuation function independent of disconnected members w.r.t. a graph G with{a mathematical formula}tw(G)≥h. Let{a mathematical formula}σ=〈G,S,α,β,x,y〉be a valuation structure. Then,{a mathematical formula}CSGvalcan be solved on{a mathematical formula}(Γ,σ)in polynomial time (w.r.t.{a mathematical formula}‖ξR(Γ)‖and{a mathematical formula}‖σ‖).
       </paragraph>
       <paragraph>
        Interestingly, the flexibility of the CSP encoding allow us to easily generalize the above result to handle the constraints studied by [58] (see Section 1). In order to accommodate the extension, the CSP instance associated with a game {a mathematical formula}Γ=〈N,v〉∈C(mcn), a valuation structure σ, and sets {a mathematical formula}P and {a mathematical formula}N of positive and negative constraints, respectively, is obtained from the instance {a mathematical formula}CSP(Γ,σ)=〈Var,U,C〉 defined in Section 4.2.1 as follows.
       </paragraph>
       <paragraph>
        First, we define {a mathematical formula}UP as the set obtained from U by replacing the constant {a mathematical formula}origini, for each {a mathematical formula}ai∈N, with the marked constants {a mathematical formula}originip, for each positive constraint {a mathematical formula}p∈P. We do not modify the set of variables, and we say that a substitution θ is consistent if, for each pair of variables {a mathematical formula}aj,ah in its domain, {a mathematical formula}θ(aj)=originip and {a mathematical formula}θ(aj)=originip¯ implies that {a mathematical formula}p=p¯. Moreover, for each agent {a mathematical formula}ai∈N and {a mathematical formula}p∈P, we denote by {a mathematical formula}θip the coalition including all agents that are mapped by θ to the constant {a mathematical formula}originip. Eventually, if θ is a substitution with image contained in {a mathematical formula}UP, we denote by {a mathematical formula}unmark(θ) the substitution obtained by stripping off all the markings.
       </paragraph>
       <paragraph>
        Second, we build a set {a mathematical formula}CP of constraints as follows. For each constraint {a mathematical formula}(S,r)∈C, the constraint {a mathematical formula}(S,rP) is in {a mathematical formula}CP, where {a mathematical formula}rP is obtained by including all the possible consistent (marked) tuples that can be built from the tuples in r. Clearly enough, all the properties of {a mathematical formula}CSP(Γ,σ)=〈Var,U,C〉 are preserved with this transformation. In particular, an assignment θ is a solution to the resulting CSP instance if, and only if, {a mathematical formula}Πunmark(θ) is a σ-feasible coalition structure (cf. Lemma 4.7 and Lemma 4.8).
       </paragraph>
       <paragraph>
        Eventually, the following two groups of constraints are added in {a mathematical formula}CP:
       </paragraph>
       <list>
        <list-item label="(C4)">
         For each {a mathematical formula}p∈P with {a mathematical formula}p⊆N, {a mathematical formula}CP contains the constraint {a mathematical formula}Cp=(p,rp) having the agents in p as scope and whose relation {a mathematical formula}rp contains all the substitutions t such that {a mathematical formula}tip=p, for some {a mathematical formula}ai. Moreover, it contains all substitutions {a mathematical formula}t′ for which no constant in the image is marked with p. Note that since in any solution θ each agent is eventually mapped to a constant in {a mathematical formula}UP with marking, say {a mathematical formula}p¯, taken from {a mathematical formula}P, then the corresponding constraint {a mathematical formula}Cp¯ forces the formation of a coalition {a mathematical formula}θip¯ covering {a mathematical formula}p¯. Hence, {a mathematical formula}p¯ witnesses that {a mathematical formula}θi satisfies the positive constraints.
        </list-item>
        <list-item label="(C5)">
         For each {a mathematical formula}n∈N with {a mathematical formula}n⊆N, {a mathematical formula}CP contains the constraint {a mathematical formula}Cn=(n,rn) having the agents in n as scope and whose relation {a mathematical formula}rn contains all possible substitutions t from n to {a mathematical formula}UP for which there is no agent {a mathematical formula}ai∈N with {a mathematical formula}ti=n. Note that in this case, we do not take care at all of the markings, as none of the formed coalitions can cover a negative constraint.
        </list-item>
       </list>
       <paragraph label="Remark">
        By putting it all together, we derive that an assignment θ is a solution to the resulting CSP instance if, and only if, {a mathematical formula}Πunmark(θ) is a σ-feasible coalition structure (cf. Lemma 4.7 and Lemma 4.8) and moreover each coalition in {a mathematical formula}Πunmark(θ) covers at least one positive constraint, while there is no coalition in {a mathematical formula}Πunmark(θ) covering a negative constraint. Eventually, constraints of kind (C4) and (C5) can be equipped with 0 as a weight, while each tuple t in a constraint of the form {a mathematical formula}rP is equipped with the weight associated with the tuple {a mathematical formula}unmark(t) in the original constraint r. Therefore, Lemma 4.9 trivially holds on the modified scenario, too. The only difference is now that the primal graph of the CSP will no longer coincide with the underlying agent graph. Rather, it can be obtained from the agent graph by adding the edges associated with such novel constraints. Hence, we can derive that {a mathematical formula}CSGval, under constraints {a mathematical formula}P and {a mathematical formula}N, can be solved on in polynomial time on valuation functions v that are independent of disconnected members w.r.t. graphs G such that {a mathematical formula}GP,N have treewidth bounded by some fixed natural number. In particular, by {a mathematical formula}GP,N we denote the graph obtained by adding to G an edge between each pair of agents involved in a positive or negative constraint. As pointed out in the Introduction, the semantics of a set S of pivotal agents can be recast in terms of the set of negative constraints {a mathematical formula}{{ai,aj}|ai,aj∈S}. However, the resulting graph would contain a clique over the agents in S, thereby obscuring the intricacy of the setting. Our results deal instead with pivotal agents as first-class citizens, and the set S does not influence the treewidth of the underlying graph.
       </paragraph>
      </section>
     </section>
    </section>
    <section label="5">
     <section-title>
      Back to the applications
     </section-title>
     <paragraph>
      Now that we have established Theorem 4.12, we turn back to the applications of Section 2.2 by discussing their complexity over structures having bounded treewidth. The analysis comes as a simple corollary of our general result, though in some cases we actually close tractability questions that have been left open in the literature.
     </paragraph>
     <section label="5.1">
      <section-title>
       Multicut problems
      </section-title>
      <paragraph>
       The problem of identifying islands of tractability for the multicut problem has been intensively studied in the literature and a number of results have been derived by exploiting the structural properties of the graphs on top of which the problem is defined.
      </paragraph>
      <paragraph>
       For classes of graphs G having bounded treewidth, it has been shown [8] that the problem is tractable if the size of the set P of the source-terminal pairs to be disconnected is constant (see, also, [42]). The result does not prescribe any restriction on the weights associated with the edges. Instead, if we deal with unitary weights only (so that the problem reduces to finding the multicut consisting of the minimum possible number of edges), then we know that tractability holds over the instances for which {a mathematical formula}GP, i.e., the graph derived from G by adding an edge between each pair in P, has bounded treewidth [37]. Note that, while this latter result focuses on unitary weights (i.e., undirected graphs only), it is actually incomparable with the result by [8]. Indeed, if the size of P is a constant, then the treewidth of {a mathematical formula}GP is within a constant from the treewidth of G. However, {a mathematical formula}GP might have bounded treewidth even when the size of P is not constant.
      </paragraph>
      <paragraph>
       It is interesting to point out that the result by [37] is based on encoding the multicut problem as a monadic second-order (MSO) formula over the structure {a mathematical formula}GP, and by exploiting a generalization of Courcelle's Theorem [19] tailored to optimization problems [1]. Motivated by the fact that the resulting algorithm is unpractical (the running time is non-elementary in terms of the number of quantifier alternations of the MSO formula), a direct solution approach has been proposed more recently by [55]. However, it was open so far whether the result by [37] can be extended to arbitrary weighted graphs.{sup:11} Here, we close this question by providing the following positive answer. In the proof, note that the only technical ingredient we exploit is the connection between the multicut problem and the problem of computing ⊥-optimal coalitions structures, which was not pointed out in earlier literature—in particular, Theorem 4.12 plays no role.
      </paragraph>
      <paragraph label="Proof">
       Let{a mathematical formula}h≥0be a fixed natural number. On classes of graphs G and source-terminal pairs P with{a mathematical formula}tw(GP)≤h, the multicut problem can be solved in polynomial time.Recall from Section 2.2.1 that the multicut problem can be reduced to computing a ⊥-optimal coalition structure for the game {a mathematical formula}〈N,vP〉 (see Theorem B.1 in Appendix B for the formal correspondence). Recall also that {a mathematical formula}vP is the function such that {a mathematical formula}vP(C) is the sum of the weights of the edges in the subgraph of {a mathematical formula}GP induced over any coalition C. Therefore, {a mathematical formula}〈N,vP〉∈C(gg) holds, i.e., the valuation function can be encoded as graph game. Then, we recall from [69] that valuation functions for games in {a mathematical formula}C(gg) are independent of disconnected members w.r.t. the underlying graphs. So, {a mathematical formula}vP is an IDM function w.r.t. {a mathematical formula}GP, and we can apply Theorem 3.5, in order to conclude that a ⊥-optimal coalition structure for {a mathematical formula}〈N,vP〉 can be computed in polynomial time.  □
      </paragraph>
     </section>
     <section label="5.2">
      Multiway cut (and k-clustering) problems
      <paragraph>
       Similarly to the multicut problem, a number of structural tractability results for the multiway cut problems are known, but the picture is still not completely clear. The tractability of the problem over classes of graphs G that are trees has been established in the early nineties by [16]. However, a practical dynamic programming algorithm (with a linear running time) followed many years later [18].
      </paragraph>
      <paragraph>
       In a very influential paper on cut problems [21], it has been claimed that standard dynamic programming methods can be used to show that the multicut problem remains tractable when moving from trees to graphs having bounded treewidth. However, no algorithm has been actually reported there, and no formal proof of the result has been reported in the subsequent literature. Here, we show that the claim of [21] is correct.
      </paragraph>
      <paragraph label="Proof">
       Let{a mathematical formula}h≥0be a fixed natural number. On classes of graphs G such that{a mathematical formula}tw(G)≤h, the multiway cut problem can be solved in polynomial time.Recall from Section 2.2.1 that the multiway cut problem can be reduced to computing a {a mathematical formula}σmw-optimal coalition structure for {a mathematical formula}〈N,vmw〉 (see Theorem B.2 in Appendix B for the formal correspondence). Observe also that {a mathematical formula}〈N,vmw〉 can be encoded as a graph game, because {a mathematical formula}vmw(C) is just the sum of the weights of the edges in the subgraph of G induced over any coalition C. Moreover, recall that {a mathematical formula}σmw=〈G,T,1,0,1,0〉. Given these ingredients, we are in the position of applying Theorem 4.12 on {a mathematical formula}(〈N,vmw〉,σmw).  □
      </paragraph>
      <paragraph>
       The encoding we have discussed for the k-clustering problem in Section 2.2.1 founds on the encoding for the multiway cut problem. Indeed, we have observed that an optimal k-clustering can be computed as a coalition structure having the maximum {a mathematical formula}σR-value (for {a mathematical formula}〈N,vcc〉) over all {a mathematical formula}σR-optimal coalition structures for any subset {a mathematical formula}R⊆N with {a mathematical formula}|R|=k, where {a mathematical formula}σR=〈G,R,1,0,0,−∞〉 is the valuation structure that solves the problem of finding the multiway cut of minimum weight where R is considered as the set of terminals. So, polynomially many subsets R have to be considered and, by applying Theorem 5.2, the problem is solvable in polynomial time.
      </paragraph>
     </section>
     <section label="5.3">
      <section-title>
       Chromatic clustering
      </section-title>
      <paragraph>
       We conclude our analysis by considering the chromatic clustering problem. Recall from Section 2.2 that the problem has been reduced to computing a {a mathematical formula}σch-optimal coalition structure for the game {a mathematical formula}〈N,vch〉, where {a mathematical formula}σch=〈GC,C,1,0,0,−∞〉 and where {a mathematical formula}vch is any valuation function such that, for each set of nodes {a mathematical formula}C⊆N∪C with {a mathematical formula}C∩C={ci}, {a mathematical formula}vch(C)=∑e∈E,e⊆Cweci (see Theorem B.4 in Appendix B). Moreover, recall that {a mathematical formula}GC is the graph where colors are viewed as nodes and where an edge is added between each node in N and each color in {a mathematical formula}C. Then, the following can be established.
      </paragraph>
      <paragraph label="Proof">
       Let{a mathematical formula}h≥0be a fixed natural number. On classes of graphs G and sets{a mathematical formula}Cof colors such that{a mathematical formula}tw(GC)≤h, the chromatic clustering problem can be solved in polynomial time.Similarly to the cases discussed above, given the encoding we have proposed and analyzed, the tractability of chromatic clustering follows for graphs {a mathematical formula}GC having bounded treewidth, provided we can show that {a mathematical formula}vch is independent of disconnected members. So, in the light of Theorem 4.2, we will complete the proof by showing that {a mathematical formula}vch can be encoded as a marginal contribution network M such that {a mathematical formula}AG(M)=GC. Indeed, the network can be built as follows. For each color {a mathematical formula}ci∈C and for each edge {a mathematical formula}e={a,b}∈E, we include in M the rule: {a mathematical formula}a∧b∧ci→weci, and no further rule is included in M. It is immediate to check that the encoding is correct and that {a mathematical formula}AG(M)=GC (w.l.o.g., we assume there are no isolated nodes in G).  □
      </paragraph>
     </section>
    </section>
    <section label="6">
     <section-title>
      Stability issues under valuation structures
     </section-title>
     <paragraph>
      Computing an optimal coalition structure {a mathematical formula}Π⁎ is generally not enough in applications where agents collaborate within the same environment. Indeed, another fundamental problem for coalitional games is to determine how the worth that is obtained by forming the structure {a mathematical formula}Π⁎ can be subsequently distributed over the agents in a way that is stable. This problem has been largely studied in the literature, and several approaches have been proposed founding on well-known solution concepts, such as the core, the kernel, the bargaining set, the nucleolus, and the Shapley value (see, e.g., [53]).
     </paragraph>
     <paragraph>
      In the following, we shall focus on the core, which is arguably the most influential and considered stability concept, and we shall position it within our setting where coalitional games are equipped with valuation structures. In particular, in Section 6.1, we formalize this concept together with some natural reasoning problems that are related to it. Eventually, Section 6.2 is devoted to analyze the complexity of such problems, with the usual intended goal of identifying possibly large islands of tractability.
     </paragraph>
     <section label="6.1">
      <section-title>
       Solution concepts and computational problems
      </section-title>
      <paragraph>
       Let {a mathematical formula}Γ=〈N,v〉 be a coalitional game, where {a mathematical formula}N={a1,…,an}. A worth distribution in Γ can be simply viewed as a n-dimensional payoff vector{a mathematical formula}x∈Rn whose i-th component, denoted by {a mathematical formula}xi, is the worth received by agent {a mathematical formula}ai, for each {a mathematical formula}i∈{1,…,n}. For any coalition {a mathematical formula}S⊆N, {a mathematical formula}x(S) is hereinafter used as a shorthand for {a mathematical formula}∑ai∈Sxi.
      </paragraph>
      <paragraph>
       Let σ be a valuation structure for Γ, and assume that the agents organize themselves in the σ-feasible coalition structure {a mathematical formula}Π∈Fσ(Γ). According to Π, the worth to be divided over the agents in a coalition {a mathematical formula}C∈Π is given by {a mathematical formula}valσ(v,C). Therefore, the “output” of the game can be viewed as a pair {a mathematical formula}(Π,x), where {a mathematical formula}x∈Rn is a payoff vector that is efficient w.r.t. Π, that is, {a mathematical formula}x(C)=valσ(v,C) holds, for each {a mathematical formula}C∈Π. In the following, we denote by {a mathematical formula}Eσ(v,Π) (or, shorty, by {a mathematical formula}Eσ(Π) if v is understood) the set of all such efficient payoff vectors. Note that {a mathematical formula}Eσ(v,Π) can contain infinitely many payoff vectors, and so the fundamental problem arises of singling out the most desirable ones among them.
      </paragraph>
      <paragraph>
       The concept of the core goes back to the work by [28] and it was formalized by [32]. Here, we consider its natural generalization to the setting where valuation structures are taken into account. Intuitively, a pair {a mathematical formula}(Π,x), with {a mathematical formula}x∈Eσ(v,Π), belongs to the core in that it is “stable” because there is no σ-feasible coalition whose members will receive a higher payoff than in x by leaving the current coalition structure. We refer to this notion{sup:12} as the coalition structure core of Γ w.r.t. σ, formally defined as the set{a mathematical formula}
      </paragraph>
      <paragraph>
       The following property is useful to simplify our reasoning on this concept.{sup:13}
      </paragraph>
      <paragraph label="Theorem 6.1">
       Let{a mathematical formula}Γ=〈N,v〉be a coalitional game, let σ be a valuation structure, and let{a mathematical formula}(Π,x)be in{a mathematical formula}CS-coreσ(Γ). Then,{a mathematical formula}Π∈CS-optσ(Γ). Moreover,{a mathematical formula}(Π⁎,x)is in{a mathematical formula}CS-coreσ(Γ), for each σ-optimal coalition structure{a mathematical formula}Π⁎∈CS-optσ(Γ).
      </paragraph>
      <paragraph label="Example 6.2">
       Consider again the coalitional game {a mathematical formula}Γ˙=〈{a1,…,a5},v˙〉 and the valuation structure {a mathematical formula}σ˙=〈AG(M˙),{a3,a5},1,0,0,−∞〉 defined in Example 4.4 and Example 4.6, respectively. Moreover, consider the coalition structure {a mathematical formula}Π˙={{a5},{a1,a2,a3,a4}}, and the payoff vector {a mathematical formula}x∈R5 such that {a mathematical formula}x1=x2=x3=53 and {a mathematical formula}x4=x5=0. Note that {a mathematical formula}x5=valσ˙({a5})=v˙({a5})=0 and {a mathematical formula}x({a1,a2,a3,a4})=x1+x2+x3+x4=valσ˙({a1,a2,a3,a4})=v˙({a1,a2,a3,a4})=5. Hence, x belongs to the set {a mathematical formula}Eσ˙(Π˙) of the payoff vectors that are efficient w.r.t. {a mathematical formula}Π˙. In fact, {a mathematical formula}(Π˙,x) belongs to {a mathematical formula}CS-coreσ˙(Γ˙), as it can be checked that {a mathematical formula}x(C)≥valσ˙(C) holds, for each σ-feasible coalition C. Note that, by Theorem 6.1, this entails that {a mathematical formula}Π˙ belongs to {a mathematical formula}CS-optσ˙(Γ˙).Consider now the game {a mathematical formula}Γ¨=〈{a1,…,a5},v¨〉 where the valuation function {a mathematical formula}v¨ is considered such that {a mathematical formula}v¨(C)=v˙(C), for each {a mathematical formula}C⊆N with {a mathematical formula}|C∩{a1,a2,a3}|≠3, and {a mathematical formula}v¨(C)=2 for the remaining coalitions C. Note that the modification does not alter the optimality of {a mathematical formula}Π˙, which belongs to {a mathematical formula}CS-optσ˙(Γ¨). Moreover, observe that if a vector x is efficient w.r.t. {a mathematical formula}Π˙, then it holds that {a mathematical formula}x1+x2+x3+x4=2 and {a mathematical formula}x5=0. Therefore, this vector cannot simultaneously satisfy the stability conditions required to be in the core. In particular, just observe that the following set of inequalities is not satisfiable:{a mathematical formula} Hence, there is no pair of the form {a mathematical formula}(Π˙,x) in the coalition structure core of {a mathematical formula}Γ¨ w.r.t. {a mathematical formula}σ˙. More generally, it can be checked that {a mathematical formula}CS-coreσ˙(Γ¨)=∅. Indeed, this follows by Theorem 6.1 and since {a mathematical formula}Π˙ belongs to {a mathematical formula}CS-optσ˙(Γ¨). ◁
      </paragraph>
     </section>
     <section label="6.2">
      <section-title>
       Complexity analysis
      </section-title>
      <paragraph>
       With the above concepts in place, we can now state the main reasoning (computation) problem we shall consider in the subsequent analysis:
      </paragraph>
      <list>
       <list-item label="•">
        CS-Core-Find: Given a pair {a mathematical formula}(Γ,σ), compute an element in {a mathematical formula}CS-coreσ(Γ), or decide that {a mathematical formula}CS-coreσ(Γ)=∅.
       </list-item>
      </list>
      <paragraph>
       The problem is easily seen to be intractable, formally NP-hard, as it inherits the results that are known to hold for coalitional games without coalitional structures [15]. Motivated by the bad news, we next consider IDM functions evaluated w.r.t. interaction graphs having bounded treewidth. Hence, because of the results in Section 4.1, we shall hereinafter study CS-Core-Find and CS-Approx-Core-Find on the class {a mathematical formula}CTW-h(mcn) of all marginal contribution networks whose agent graphs have treewidth h at most, where h is a fixed constant. To prove the tractability on this class, we start by analyzing the complexity of two tasks playing a key role in the computation of core-related questions.
      </paragraph>
      <paragraph>
       First, we consider the problem of computing a coalition getting the maximum value over all possible coalitions. This problem is conceptually even more foundational when compared with the coalition structure generation problem, and technically it can be viewed as a kind of special case. Therefore, the following comes with no surprise.
      </paragraph>
      <paragraph label="Proof">
       Let{a mathematical formula}h≥0be a fixed natural number. Let{a mathematical formula}Γ=〈N,v〉∈CTW-h(mcn)and let{a mathematical formula}σ=〈G,S,α,β,x,y〉be a valuation structure. Then, computing a σ-feasible coalition{a mathematical formula}C⁎such that{a mathematical formula}valσ(C⁎)≥valσ(C), for each{a mathematical formula}C∈Fσ(Γ), is feasible in polynomial time (w.r.t.{a mathematical formula}‖ξmcn(Γ)‖and{a mathematical formula}‖σ‖).Based on σ, we first build in polynomial time two different settings:
       <list>
        For each {a mathematical formula}ai∈S, let {a mathematical formula}σi=〈G,S,αi,βi,0,0〉 be the valuation structure where {a mathematical formula}αi (resp., {a mathematical formula}βi) is the function such that {a mathematical formula}αi(ai)=α(ai) (resp., {a mathematical formula}βi(ai)=β(ai)); and {a mathematical formula}αi(aj)=0 (resp., {a mathematical formula}βi(aj)=0), for each {a mathematical formula}aj∈S∖{ai}. Let Π be a {a mathematical formula}σi-feasible coalition structure, and note that {a mathematical formula}valσi(v,Π)=valσi(v,Ci), where {a mathematical formula}Ci is the coalition in Π such that {a mathematical formula}ai∈Ci. In its turn, {a mathematical formula}valσi(v,Ci) coincides with {a mathematical formula}valσ(v,Ci), by construction of {a mathematical formula}σi. In particular, check that {a mathematical formula}Ci is trivially a σ-feasible coalition. On the other hand, if {a mathematical formula}Ci is a σ-feasible coalition, then we can build a {a mathematical formula}σi-feasible coalition structure Π consisting of {a mathematical formula}Ci and all other agents as singleton coalitions. Again, we have that {a mathematical formula}valσi(v,Π)=valσ(v,Ci). Therefore, the value of any {a mathematical formula}σi-optimal coalition structure coincides with the maximum possible value of any σ-feasible coalition including agent {a mathematical formula}ai. In the following, we shall denote this optimal value by {a mathematical formula}vci⁎, and we explicitly remark here that, because of Theorem 4.12 and the above characterization, {a mathematical formula}vci⁎ can be computed in polynomial time.For each agent {a mathematical formula}aj∈N∖S, let {a mathematical formula}σj=〈G,S∪{aj},αj,βj,0,0〉 be the valuation structure such that {a mathematical formula}αj(ai)=βj(ai)=0, for each {a mathematical formula}ai∈S, and {a mathematical formula}αj(aj)=x and {a mathematical formula}βj(aj)=y. By exploiting the same line of reasoning as in the point (1) above, we can derive that the value of any {a mathematical formula}σj-optimal coalition coincides with the maximum possible value of any σ-feasible coalition including agent {a mathematical formula}aj and excluding all agents in S, hereinafter denoted by {a mathematical formula}vcj⁎. In particular, observe that {a mathematical formula}aj is not a pivotal agent in the original valuation structure, so that the affine transformation is determined by the parameters x and y. Instead, {a mathematical formula}aj plays the role of a pivotal agent in {a mathematical formula}σj, and the functions {a mathematical formula}αj and {a mathematical formula}βj are accordingly defined as to guarantee the correctness of the valuation. Eventually, we remark that {a mathematical formula}vcj⁎ can be computed in polynomial time, because of the above characterization and again by Theorem 4.12.Let now
       </list>
       <paragraph>
        {a mathematical formula}C⁎ be a σ-feasible coalition such that {a mathematical formula}valσ(v,C⁎)≥valσ(v,C), for each {a mathematical formula}C∈Fσ(Γ), and let us distinguish two cases. First, there can exist a pivotal agent {a mathematical formula}ai∈S such that {a mathematical formula}ai∈C⁎, in which case we can apply the construction in (1) for deriving that {a mathematical formula}vci⁎=valσ(v,C⁎). Otherwise, we have that {a mathematical formula}C⁎∩S=∅, in which case we can apply the construction in (2) for deriving that {a mathematical formula}vcj⁎=valσ(v,C⁎), for each agent {a mathematical formula}aj∈C⁎. Since the values of the form {a mathematical formula}vci⁎ and {a mathematical formula}vcj⁎ correspond to valuations of σ-feasible coalitions, by putting the above ingredients together, we conclude that:{a mathematical formula}In order to conclude the proof, note that the left side of the above equation involves polynomially-many values, and recall that each of them can be computed in polynomial time. Therefore, {a mathematical formula}valσ(v,C⁎) (and a σ-feasible coalition where this value is attained) can be overall computed in polynomial time, too.  □
       </paragraph>
      </paragraph>
      <paragraph>
       Let us now move to the second task. Let {a mathematical formula}Γ=〈N,v〉 be a coalitional game with {a mathematical formula}n=|N|, let σ be a valuation structure, and let {a mathematical formula}xˆ∈Rn be a payoff vector. For each feasible coalition {a mathematical formula}C∈Fσ(Γ), we define the excess of C at {a mathematical formula}xˆ (in Γ w.r.t. σ) as the value {a mathematical formula}e(xˆ,C,Γ,σ)=xˆ(C)−valσ(v,C) (shortly denoted as {a mathematical formula}e(xˆ,C), when Γ and σ are clearly understood). Intuitively, this is a measure of the satisfaction of the agents in C when they receive the payoff {a mathematical formula}xˆ(C). Indeed, the agents in C are satisfied by the given payoff distribution and would not like to deviate from {a mathematical formula}xˆ if, and only if, {a mathematical formula}e(xˆ,C)≥0. The problem of deciding whether the minimum possible excess is non-negative has been already studied in the literature for classes of games encoded via marginal contribution networks. In particular, it has been shown to be feasible in polynomial time over the class {a mathematical formula}CTW-h(mcn), in absence of valuation structures and for any fixed natural number h[43]. Based on Theorem 6.3, we now extend this result to arbitrary valuation structures.
      </paragraph>
      <paragraph label="Theorem 6.4">
       Let{a mathematical formula}h≥0be a fixed natural number. Let{a mathematical formula}Γ=〈N,v〉∈CTW-h(mcn)with{a mathematical formula}n=|N|, let{a mathematical formula}σ=〈G,S,α,β,x,y〉be a valuation structure, and let{a mathematical formula}xˆ∈Rnbe a payoff vector. Then, computing a σ-feasible coalition{a mathematical formula}C⁎such that{a mathematical formula}e(xˆ,C⁎,Γ,σ)≤e(xˆ,C,Γ,σ), for each{a mathematical formula}C∈Fσ(Γ), is feasible in polynomial time (w.r.t.{a mathematical formula}‖ξmcn(Γ)‖,{a mathematical formula}‖σ‖, and{a mathematical formula}‖xˆ‖).Let {a mathematical formula}ξmcn(Γ) be the marginal contribution network encoding the coalitional game Γ. For each w, consider the marginal contribution network {a mathematical formula}Mw defined as follows. For each rule {a mathematical formula}{pattern}→value in {a mathematical formula}ξmcn(Γ), {a mathematical formula}Mw includes the rule {a mathematical formula}{pattern}→w×value. For each agent {a mathematical formula}ai∈N, {a mathematical formula}Mw includes the rule {a mathematical formula}{ai}→−xˆi. No further rule is in {a mathematical formula}Mw. Note that the network {a mathematical formula}Mw induces a valuation function {a mathematical formula}vw such that {a mathematical formula}vw(C)=−xˆ(C)+w×v(C), for each {a mathematical formula}C∈Fσ(Γ). The idea is then to apply the construction reported in the proof of Theorem 6.3 on the valuation structure {a mathematical formula}〈G,S,1,β,1,y〉 and the valuation function {a mathematical formula}vw, where w is defined as follows. When we are in charge of dealing with case (1), for each agent {a mathematical formula}ai in S, we define {a mathematical formula}w=α(ai). Instead, when we deal with (2), for each agent {a mathematical formula}aj∈N∖S, we define {a mathematical formula}w=x. Then, by inspecting the proof of Theorem 6.3, we derive that in the case (1), {a mathematical formula}vci⁎ coincides with the minimum excess computed over any coalition including agent {a mathematical formula}ai; while in the case (2), {a mathematical formula}vcj⁎ coincides with the minimum excess computed over any coalition that includes agent {a mathematical formula}aj and does not include any agent in S. In particular, note that the maximum values {a mathematical formula}vci⁎ and {a mathematical formula}vcj⁎ coincide with minimum excesses because the valuation functions are opposite in sign. Eventually, by computing the maximum value over all agents {a mathematical formula}ai∈S and {a mathematical formula}aj∈N∖S, we end up with the minimum possible excess in polynomial time.  □
      </paragraph>
      <paragraph>
       Now, we have all ingredients in place to prove the main result of this section. We further stress that the result is given for marginal contribution networks having bounded treewidth but, because of the characterizations derived in Section 4.1, it actually holds on any IDM function w.r.t. an interaction graph having bounded treewidth.
      </paragraph>
      <paragraph label="Proof">
       Let{a mathematical formula}h≥0be a fixed natural number. Let{a mathematical formula}Γ=〈N,v〉∈CTW-h(mcn)and let{a mathematical formula}σ=〈G,S,α,β,x,y〉be a valuation structure. Then,CS-Core-Findcan be solved on{a mathematical formula}(Γ,σ)in polynomial time (w.r.t.{a mathematical formula}‖ξR(Γ)‖and{a mathematical formula}‖σ‖).Let us consider CS-Core-Find. We are given a game {a mathematical formula}Γ=〈N,v〉∈CTW-h(mcn) and we have to compute an element in {a mathematical formula}CS-coreσ(Γ), or decide that this set is empty. First, we compute a σ-optimal coalition structure {a mathematical formula}Π⁎∈CS-optσ(Γ), which is feasible in polynomial time by Theorem 4.12. Because of Theorem 6.1, Core-Find can be reduced to computing a payoff vector x such that {a mathematical formula}x(C)=valσ(v,C), for each {a mathematical formula}C∈Π⁎; and {a mathematical formula}x(C)≥valσ(v,C), for each {a mathematical formula}C∈Fσ(Γ) (or decide that no vector of this kind exist). Note that x is just a vector that satisfies a system of linear (in)equalities defined over {a mathematical formula}|N| variables and possibly exponentially-many (in)equalities. It is well-known that a system of this kind can be solved in polynomially many steps, where each step consists of asking to a separation oracle whether a given vector is a solution and, if not, to report an (in)equality that is violated [63]. In particular, the whole computation is feasible in polynomial time, provided the existence of a separation oracle whose invocations take polynomial time. In our case, an oracle of this kind is as follows. Given a vector x, we can trivially check whether {a mathematical formula}x(C)=valσ(v,C), for each {a mathematical formula}C∈Π⁎. If some of the (polynomially-many) equalities is violated, then it is reported as output. Otherwise, we need to check whether {a mathematical formula}x(C)≥valσ(v,C), for each {a mathematical formula}C∈Fσ(Γ). To this end, we compute a σ-feasible coalition {a mathematical formula}C⁎ getting the minimum possible excess (at x) over all possible feasible coalitions. Note that, by Theorem 6.4, this task is feasible in polynomial time. If {a mathematical formula}e(x,C⁎,Γ,σ)≥0, then no inequality is violated and we can return {a mathematical formula}(Π⁎,x) as an element in the core. Otherwise, i.e., if {a mathematical formula}e(x,C⁎,Γ,σ)&lt;0, then we know that the inequality {a mathematical formula}x(C⁎)≥valσ(v,C⁎) is violated by x and it is returned as output by the oracle.  □
      </paragraph>
     </section>
    </section>
    <section label="7">
     <section-title>
      Conclusion
     </section-title>
     <paragraph>
      The coalition structure generation problem has been reconsidered in this paper, by taking into account constraints on the allowed coalitions defined in terms of “valuation structures”. A clear picture of the complexity issues arising in this setting has been depicted, by singling out islands on tractability based on the properties of the underlying valuation functions and of the underlying interaction graphs. Notably, the results have been formulated in a way that is independent of the specific scheme being adopted to represent the valuations functions. In particular, they hold for any given compact encoding. A number of concrete applications have been discussed, too.
     </paragraph>
     <paragraph>
      Our work paves the way for further investigations. First, it would be interesting to study further kinds of constraints that are likely to occur in real-world application domains, in addition to those associated with pivotal agents and interaction graphs. With this respect, inspired by constrained clustering methods (see, e.g., [72]), we envisage that general forms of cannot-link constraints can be profitably incorporated in the concept of valuation structure, in order to prescribe that some pivotal agent a in S is “incompatible” with some proper subset of {a mathematical formula}S∖{a}—currently, our setting accommodates only the case where a is “incompatible” with all the remaining pivotal agents in {a mathematical formula}S∖{a}. Further extensions can be defined to deal with a-priori knowledge on the sizes of the coalitions that are allowed to form [7] or with labeling mechanisms more sophisticated than those discussed in Section 2.4 (inspired, e.g., to [12], [20]).
     </paragraph>
     <paragraph>
      Orthogonally to the above directions, it would be relevant to extend the analysis of the questions related to worth distribution problems in the presence of valuation structures to further solution concepts. In the paper, we have focused on the core and, hence, we mainly dealt with stability issues. Other solution concepts proposed in the literature, for instance the Shapley value, look at worth distribution problems by taking into account fairness issues, too. In fact, it is well-known that computing the Shapley value is an intractable problem in general, formally #P-complete. However, recent research evidenced that, on some classes of games and when certain structural restrictions are considered, the value can be computed in polynomial time (see, e.g., [38], [3]). An interesting question is therefore whether the Shapley value retains this desirable computational property on IDM functions and in presence of valuation structures.
     </paragraph>
     <paragraph>
      Finally, from the practical viewpoint, the most natural avenue of further research is to embark on the implementation of the approaches we have exhibited to single out islands of tractability and to conduct experimental activity to assess their scalability on synthetic benchmarks and real-world instances.
     </paragraph>
    </section>
   </content>
   <appendices>
    <section label="Appendix A">
     <section-title>
      Notation
     </section-title>
     <paragraph>
      Table A.1 reports the notation used consistently throughout the paper.
     </paragraph>
    </section>
    <section label="Appendix B">
     Results in Section 2.2
     <paragraph label="Theorem B.1">
      Let{a mathematical formula}E′⊆Ebe a set of edges. Then, the following properties hold:
     </paragraph>
     <list>
      <list-item label="(1)">
       If{a mathematical formula}E′is a multicut, then there is a ⊥-feasible coalition structure Π for{a mathematical formula}〈N,vP〉with{a mathematical formula}E′={e∈E|∀Cj∈Π,|e∩Cj|≤1}and{a mathematical formula}val⊥(Π)=∑e∈Ewe−∑e′∈E′we′≥0.
      </list-item>
      <list-item label="(2)">
       If Π is a ⊥-feasible coalition structure for{a mathematical formula}〈N,vP〉with{a mathematical formula}val⊥(Π)≥0, then{a mathematical formula}E′={e∈E|∀Cj∈Π,|e∩Cj|≤1}is a multicut and{a mathematical formula}val⊥(Π)=∑e∈Ewe−∑e′∈E′we′.
      </list-item>
     </list>
     <paragraph label="Proof">
      (1) Assume that {a mathematical formula}E′ is a multicut, and let {a mathematical formula}C1,…,Ck be the connected components in the graph {a mathematical formula}(N,E∖E′). If {a mathematical formula}e∈E is an edge such that {a mathematical formula}|e∩Cj|≤1 holds, for each {a mathematical formula}j∈{1,…,k}, then e belongs to the multicut {a mathematical formula}E′. That is, by letting {a mathematical formula}Π={C1,…,Ck}, it clearly holds that {a mathematical formula}E′={e∈E|∀Cj∈Π,|e∩Cj|≤1}. Moreover, Π exhaustively covers all the nodes in N, and {a mathematical formula}Ci∩Cj=∅ holds, for each pair of distinct indices {a mathematical formula}i,j∈{1,…,k}. Therefore, Π is a ⊥-feasible coalition structure for {a mathematical formula}〈N,vP〉. Moreover, it holds that {a mathematical formula}val⊥(Π)=∑j=1kvP(Cj), where {a mathematical formula}vP(Cj) is the sum of the weights of the edges in the subgraph of {a mathematical formula}GP induced over {a mathematical formula}Cj. In fact, every pair in P is disconnected by {a mathematical formula}E′, so that its endpoints belong to different components. This entails that {a mathematical formula}vP(Cj) is also the sum of the weights of the edges in the subgraph of G induced over {a mathematical formula}Cj. Hence, {a mathematical formula}val⊥(Π) is just the sum of all the weights of the edges in G, except those belonging to {a mathematical formula}E′. Formally, {a mathematical formula}val⊥(Π)=∑e∈Ewe−∑e′∈E′we′.(2) Assume that Π is a ⊥-feasible coalition structure such that {a mathematical formula}E′={e∈E|∀Cj∈Π,|e∩Cj|≤1} and {a mathematical formula}val⊥(Π)≥0. By definition of the valuation function, this entails that for each source-terminal pair in P, its endpoints belongs to distinct coalitions of Π. That is, the set {a mathematical formula}E′ of the edges that are not entirely covered by any coalition in Π forms a multicut. In particular, Π is precisely the coalition structure associated with {a mathematical formula}E′ according to point (1), and hence {a mathematical formula}val⊥(Π)=∑e∈Ewe−∑e′∈E′we′.  □
     </paragraph>
     <paragraph label="Theorem B.2">
      Let{a mathematical formula}E′⊆Ebe set of edges. Then, the following properties hold:
     </paragraph>
     <list>
      <list-item label="(1)">
       If{a mathematical formula}E′is a multiway cut, then there is a{a mathematical formula}σmw-feasible coalition structure Π for{a mathematical formula}〈N,vmw〉such that{a mathematical formula}E′={e∈E|∀Cj∈Π,|e∩Cj|≤1}and{a mathematical formula}valσmw(Π)=∑e∈Ewe−∑e′∈E′we′.
      </list-item>
      <list-item label="(2)">
       If Π is a{a mathematical formula}σmw-feasible coalition structure for{a mathematical formula}〈N,vmw〉, then{a mathematical formula}E′={e∈E|∀Cj∈Π,|e∩Cj|≤1}is a multiway cut and{a mathematical formula}valσmw(Π)=∑e∈Ewe−∑e′∈E′we′.
      </list-item>
     </list>
     <paragraph label="Proof">
      (1) If {a mathematical formula}E′ is a multiway cut and {a mathematical formula}C1,…,Ck are the connected components in the graph {a mathematical formula}(N,E∖E′), then {a mathematical formula}|Cj∩T|≤1 holds, for each {a mathematical formula}j∈{1,…,k}. Hence, {a mathematical formula}Π={C1,…,Ck} is a {a mathematical formula}σmw-feasible coalition structure. Eventually, we trivially have that {a mathematical formula}E′={e∈E|∀Cj∈Π,|e∩Cj|≤1} and {a mathematical formula}valσmw(Π)=∑e∈Ewe−∑e′∈E′we′.(2) If Π is a {a mathematical formula}σmw-feasible coalition structure, then {a mathematical formula}|Cj∩T|≤1 holds, for each {a mathematical formula}Cj∈Π. Therefore, the set {a mathematical formula}E′={e∈E|∀Cj∈Π,|e∩Cj|≤1} is a multiway cut. Again, by definition of the valuation function, we have {a mathematical formula}valσmw(Π)=∑e∈Ewe−∑e′∈E′we′.  □
     </paragraph>
     <paragraph label="Theorem B.3">
      Let Π be a clustering. Then, the following properties hold:
     </paragraph>
     <list>
      <list-item label="(1)">
       If Π is a k-clustering, then there is a set{a mathematical formula}R⊆Nwith{a mathematical formula}|R|=kand such that Π is a{a mathematical formula}σR-feasible coalition structure for{a mathematical formula}〈N,vcc〉with{a mathematical formula}valσR(Π)=∑Ci∈Πvcv(Ci)≥0.
      </list-item>
      <list-item label="(2)">
       If there is a set{a mathematical formula}R⊆Nof agents with{a mathematical formula}|R|=kand such that Π is a{a mathematical formula}σR-feasible coalition structure for{a mathematical formula}〈N,vcc〉with{a mathematical formula}valσR(Π)≥0, then Π is a k-clustering and{a mathematical formula}valσR(Π)=∑Ci∈Πvcc(Ci).
      </list-item>
     </list>
     <paragraph label="Proof">
      (1) Let Π be a k-clustering. Thus, Π has the form {a mathematical formula}{C1,…,Ck} where {a mathematical formula}C1∪…∪Ck=N and {a mathematical formula}Ci∩Cj=∅, for each pair of distinct indices i and j. For each {a mathematical formula}i∈{1,…,k}, let {a mathematical formula}ri be an agent in {a mathematical formula}Ci, and define {a mathematical formula}R={r1,…,rk}. Then, Π is a {a mathematical formula}σR-feasible coalition structure, where {a mathematical formula}σR=〈G,R,1,0,0,−∞〉. In particular, observe that the subgraph induced over {a mathematical formula}Ci is connected, for each {a mathematical formula}i∈{1,…,k}, by definition of cluster. Hence, both pivotal and connectedness conditions hold. Moreover, {a mathematical formula}valσR(Π)=∑Ci∈Πvcc(Ci) holds, by definition of {a mathematical formula}σR and since there is no coalition in Π that does not include an agent in R.(2) Assume that Π is a {a mathematical formula}σR-feasible coalition structure with {a mathematical formula}|R|=k and {a mathematical formula}valσR(Π)≥0. Since {a mathematical formula}|R|=k, we have that {a mathematical formula}|Π|≥k holds. Moreover, if the inequality were strict, then we would have {a mathematical formula}valσR(Π)&lt;0, because of the fact that {a mathematical formula}σR=〈G,R,1,0,0,−∞〉. Therefore, {a mathematical formula}|Π|=k. Moreover, Π is a k-clustering because the connectedness condition holds on each of its coalitions (again because of the {a mathematical formula}σR-feasibility), and we have {a mathematical formula}valσR(Π)=∑Ci∈Πvcc(Ci).  □
     </paragraph>
     <paragraph label="Theorem B.4">
      The following properties hold:
     </paragraph>
     <list>
      <list-item label="(1)">
       If{a mathematical formula}{(C1,c1),…,(Ch,ch)}is a chromatic partition, then{a mathematical formula}Π={C1∪{c1},…,Ch∪{ch}}∪{{c′}|c′∈C∖{c1,…,ch}}is a{a mathematical formula}σch-feasible coalition structure for{a mathematical formula}〈N,vch〉such that{a mathematical formula}valσch(Π)=∑Ci∈Π∑e∈E,e⊆Ciweci.
      </list-item>
      <list-item label="(2)">
       If Π is a{a mathematical formula}σch-feasible coalition structure for{a mathematical formula}〈N,vch〉with{a mathematical formula}valσch(Ci)≠−∞, for each{a mathematical formula}Ci∈Π, then there is a chromatic partitioning{a mathematical formula}{(C1,c1),…,(Ch,ch)}such that{a mathematical formula}Π={C1∪{c1},…,Ch∪{ch}}∪{{c′}|c′∈C∖{c1,…,ch}}and{a mathematical formula}valσcp(Π)=∑Ci∈Π∑e∈E,e⊆Ciweci.
      </list-item>
     </list>
     <paragraph label="Proof">
      (1) If {a mathematical formula}{(C1,c1),…,(Ch,ch)} is a chromatic partition, then {a mathematical formula}ci≠cj for each {a mathematical formula}i,j∈{1,…,h} with {a mathematical formula}i≠j. Therefore, Π satisfies the pivotal condition. Moreover, for each {a mathematical formula}i∈{1,…,h}, we have that each agent in {a mathematical formula}Ci is connected to {a mathematical formula}ci in {a mathematical formula}GC. Hence, the connectivity condition is satisfied too, and Π is a {a mathematical formula}σch-feasible coalition structure. Eventually, since there is no coalition in Π that does not contain a pivotal agent, we immediately get {a mathematical formula}valσcp(Π)=∑Ci∈Π∑e∈E,e⊆Ciweci.(2) If Π is a {a mathematical formula}σch-feasible coalition structure with {a mathematical formula}valσcp(Ci)≠−∞, for each {a mathematical formula}Ci∈Π, then Π includes no coalition without pivotal agents. Thus, there is a chromatic partitioning {a mathematical formula}{(C1,c1),…,(Ch,ch)} such that {a mathematical formula}Π={C1∪{c1},…,Ch∪{ch}}∪{{c′}|c′∈C∖{c1,…,ch}} and {a mathematical formula}valσcp(Π)=∑Ci∈Π∑e∈E,e⊆Ciweci.  □
     </paragraph>
    </section>
   </appendices>
  </root>
 </body>
</html>