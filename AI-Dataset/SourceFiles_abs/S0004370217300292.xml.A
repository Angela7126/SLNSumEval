<?xml version="1.0" encoding="utf-8"?>
<html>
 <body>
  <root>
   <title>
    Efficiency and complexity of price competition among single-product vendors.
   </title>
   <content>
    <section label="1">
     <section-title>
      Introduction
     </section-title>
     <paragraph>
      We focus on marketplaces that contain multiple vendors offering a single product and unit-demand buyers. For example, we may think of software development companies, each offering an operating system. Each potential user is interested in buying one operating system from some software company and has preferences over the different options available in the market. Her final choice depends not only on her preferences but also on the prices of the available products; eventually, each user will choose the product with the best value for money, or will simply abstain from purchasing a product if the available options are not satisfactory for her. In turn, vendors are aware of this buyer behavior and aim to set the price of their product to a value that will maximize their profit. In particular, the dilemma a vendor faces is to select between a very small price that will guarantee a large market share or a huge price that will be attractive only to a few buyers. Of course, there are usually many options in between, and coming up with a pricing that will maximize profits in such an environment is challenging.
     </paragraph>
     <paragraph>
      We model the above scenario as a two-stage full-information game (with both the vendors and the buyers as players) which we call a price competition game. In the first stage, each vendor selects the price of its product among a set of viable price values (i.e., the price values that are above a fixed production cost per unit of product). Buyers have unit demands and (possibly different) valuations for vendors. Together with the valuations of buyers, a vector of prices (with one price per vendor) determines in a second stage the most attractive vendor for each buyer. Each vendor has full information about the valuations of buyers and can predict their behavior. The objective of each vendor is to set its price so that its profit (i.e., volume of buyers it attracts times the difference of price and production cost) is maximized given the prices of the other vendors.
     </paragraph>
     <paragraph>
      A high-level overview of our contribution. We present a list of results for these price competition games. Our starting point is the observation that equilibria (i.e., buyers-to-vendors assignments and corresponding prices so that all vendors and all buyers are satisfied) are guaranteed to exist only when all buyers have the same valuations; price competition games with buyers belonging to at least two different types (with respect to their valuations) may not have equilibria. Even when equilibria exist, they may be highly suboptimal. We use the notion of the price of anarchy (introduced by Koutsoupias and Papadimitriou [15]; see also Papadimitriou [21]) to quantify how low the social welfare of equilibria can be compared to the optimal one. The social welfare is essentially the sum of buyer utilities and vendor profits. We also formulate several variations of equilibrium computation problems and present complexity results about them. These results range from polynomial-time algorithms (e.g., for the problem of determining prices that form an equilibrium together with a given buyers-to-vendors assignment) to hardness results (e.g., for the general problem of deciding whether a given price competition game admits an equilibrium). Motivated by the negative results on the existence and quality of equilibria, we investigate whether efficient buyers-to-vendors assignments can be enforced as equilibria by subsidizing the vendors. Our main contribution here is conceptual: subsidies can indeed overcome the drawbacks of price competition. Our technical contributions include tight bounds on the amount of subsidies sufficient to enforce a social welfare-maximizing buyers-to-vendors assignment as an equilibrium, as well as inapproximability results for the problem of minimizing the amount of subsidies sufficient to do so.
     </paragraph>
     <paragraph>
      Related work. AI literature has long considered settings where vendors and buyers interact in electronic marketplaces (see e.g. [22]). Our model is very similar to (and actually inspired from) the one considered by Meir et al. [18] who focus on the impact of discounts (i.e., prices that are decreasing functions of demand) on vendors' profit compared to fixed prices. After observing that price discounts have no impact at all in the full-information setting, they mostly focus on a Bayesian setting with uncertainty on buyers' valuations. In contrast, we restrict our attention to the full-information model and consider only fixed prices. As we will see, this simple setting is very rich from the computational point of view. With the work of Meir et al. [18] as an exception, our assumptions differ significantly from most of the literature on price competition. For example, unlike early models such as the ones proposed by Cournot and Bertrand (see the book of Mas-Colell et al. [17]) as well as very recent refinements (e.g., the work of Babaioff et al. [3]), we assume that all vendors have unlimited supply. Also, contrary to other recent models that consider buyers with combinatorial valuations for bundles of different products as in the papers of Guruswami et al. [13], Chawla and Roughgarden [8], Babaioff et al. [4], Lev et al. [16] and more, we specifically assume that each buyer is interested in obtaining just a single product. In this way, the decision each buyer faces is rather trivial and this allows us to concentrate on the competition between the vendors. The competition of single-product vendors with unlimited supply differentiates our model also from the concept of Walrasian equilibrium, where the emphasis is on assigning prices to different items so that all buyers are satisfied, see e.g., [12], [13]. In addition, unlike variations of the models studied in these papers (such as in [14]), vendors do not use price discrimination in our case. On a more technical level, we implicitly assume an infinite number of buyers and use the notion of buyer types to distinguish between sets of buyers; this is a less important difference of our model to previous work on pricing. Very recent work, following the conference version of this manuscript, includes Anshelevich and Sekar [1] that introduces seller costs to Bertrand competition and allows for arbitrary supply. They study a two-stage full-information pricing game, where vendors sell edges on a directed graph and buyers wish to buy paths that connect a source to a sink node, and characterize the structure and properties of equilibria of that game. In addition, Borodin et al. [6] consider a pricing game with a single budget-constrained buyer and strategic vendors and characterize equilibria for a large class of valuation functions.
     </paragraph>
     <paragraph>
      The use of subsidies in price competition games suggests yet another way of introducing external monetary incentives in games; such incentives (or disincentives) have been considered in many different contexts. Much of the work in mechanism design uses such incentives to motivate players to act truthfully (see [20] for an introduction to the field). The (apparently non-exhaustive) list also includes their use in cooperative game theory in order to encourage coalitions of players to reach stability [5] and as a means to stabilize normal form games [19]. As in [2] and [7], the use of monetary incentives in the current paper aims to improve efficiency. Monetary disincentives like taxes have been used to improve the efficiency of network routing (see [9] and the references therein for a relatively recent approach that extends early developments in the literature of the economics of transportation) and, in the recent AI literature, in boolean games [23].
     </paragraph>
     <paragraph>
      Roadmap. The rest of the paper is structured as follows. We begin with preliminary definitions in Section 2. Then, we consider questions about the existence of equilibria in price competition games and their price of anarchy in Section 3. We formulate computational problems for equilibria and study related complexity questions in Section 4. We investigate the potential of subsidizing specific vendor prices in Section 5 and, finally, we conclude with open questions in Section 6.
     </paragraph>
    </section>
    <section label="2">
     <section-title>
      Preliminaries
     </section-title>
     <paragraph>
      Our setting includes a set M containing m vendors targeting a large population of buyers. The buyers are classified into n buyer types from a set N. We denote by {a mathematical formula}μi the volume of buyer type i; for example, {a mathematical formula}μi=3 can have the meaning that there are 3 million buyers of type i. Each of these buyers has a non-negative valuation {a mathematical formula}vij for vendor j (representing the satisfaction each buyer of type i has when buying the product of vendor j). Essentially, the buyers are classified into types depending on the valuations they have for the vendors.
     </paragraph>
     <paragraph>
      Each vendor j has a non-negative cost {a mathematical formula}cj per unit of product; we refer to {a mathematical formula}cj as the production cost of vendor j. The objective of each vendor j is to determine a price {a mathematical formula}pj for its product; naturally, {a mathematical formula}pj≥cj so that the vendor always has non-negative profit. A price vector{a mathematical formula}p=(p1,...,pm) (containing a price per vendor) defines a demand set{a mathematical formula}Di(p) which, for each buyer type i, denotes the set of vendors that maximize the utility of the buyers of type i, i.e.,{a mathematical formula}
     </paragraph>
     <paragraph>
      Intuitively, the demand set for buyers of type i consists of the most attractive vendors for these buyers. We assume that the operator {a mathematical formula}arg⁡maxj∈M returns (a set containing) an artificial vendor which represents an “abstain” option that a buyer has when its maximum utility (over all vendors) is non-positive. With a small abuse of notation, we introduce an extra vendor into M in order to represent this abstain option for buyers; this vendor has production cost of 0, it always has a price of 0, and the valuations of buyers for it are 0.
     </paragraph>
     <paragraph>
      A buyers-to-vendors assignment (or, simply, an assignment) is represented by an {a mathematical formula}n×(m+1) matrix x which denotes how the volume of the buyers of each type is split among different vendors. In particular, the entry {a mathematical formula}xij denotes the volume of buyers of type i that are assigned to vendor j and it must be {a mathematical formula}∑j∈Mxij=μi for every buyer type i. An assignment x is consistent to a price vector p if {a mathematical formula}xij&gt;0 implies {a mathematical formula}j∈Di(p). We can interpret such an assignment as maximizing the utility of buyers given the price vector p. We will denote by{a mathematical formula} the total utility of buyers of type i given a price vector p and a consistent assignment x.
     </paragraph>
     <paragraph>
      We study the game induced among vendors and buyers and use the term price competition game to refer to it. This can be thought of as a two stage game. At a first stage, the strategy of each vendor is its price. At a second stage, the buyers respond to these prices as described above. The utility of vendor j, when the vendors use a price vector p and the buyers are assigned to vendors according to an assignment x that is consistent to p, is defined as{a mathematical formula} Vendors are utility-maximizers. A price vector p and a consistent assignment x form a (pure Nash) equilibrium when for every vendor j, the price {a mathematical formula}pj maximizes the utility {a mathematical formula}uj(y,(pj′,p−j)) among all prices {a mathematical formula}pj′≥cj and all assignments y that are consistent to {a mathematical formula}(pj′,p−j). Here, the notation {a mathematical formula}(pj′,p−j) is used to represent the price vector where all vendors besides j use the prices in p and vendor j has deviated to price {a mathematical formula}pj′.
     </paragraph>
     <paragraph>
      The social welfare of an assignment x is defined as{a mathematical formula} This definition does not require the assignment x to be consistent to a price vector and can be used to define the optimal social welfare as{a mathematical formula} When the assignment x is consistent to a price vector p, the social welfare can be equivalently seen as the total utility of vendors and buyers since{a mathematical formula}
     </paragraph>
     <paragraph>
      The price of anarchy of a price competition game is the ratio of the optimal social welfare over the minimum social welfare among all equilibria. Of course, this is well-defined only for price competition games that do have equilibria.
     </paragraph>
     <paragraph label="Example 1">
      Consider a price competition game as shown in Table 1.Note that the buyers-to-vendors assignment x where {a mathematical formula}xA1=μA, {a mathematical formula}xB2=μB, {a mathematical formula}xC3=μC, while all other entries in x are equal to 0, is consistent to the price vector {a mathematical formula}p=(2,2,2) and maximizes the social welfare. In particular, vendor 1 obtains utility {a mathematical formula}u1(x,p)=μA(p1−c1)=2, vendor 2 obtains utility {a mathematical formula}u2(x,p)=μB(p2−c2)=1/2, while vendor 3 has {a mathematical formula}u3(x,p)=μC(p3−c3)=0; since all buyers obtain utility equal to 0, it holds that {a mathematical formula}SW(x)=5/2. We remark that {a mathematical formula}(x,p) is not a pure Nash equilibrium, as vendor 1 can lower its price to {a mathematical formula}p1′=1−ϵ, where {a mathematical formula}ϵ&gt;0 is arbitrarily small, and attract all buyers; the obtained utility under the new assignment y is {a mathematical formula}u1(y,(p1′,p−1))=13/6⋅(1−ϵ), i.e., {a mathematical formula}u1(y,(p1′,p−1))&gt;u1(x,p).
     </paragraph>
     <paragraph>
      In the following, we sometimes use the abbreviation {a mathematical formula}x+ instead of {a mathematical formula}max⁡{0,x} and write {a mathematical formula}[ℓ] instead of the set {a mathematical formula}{1,2,...,ℓ} for an integer {a mathematical formula}ℓ≥1.
     </paragraph>
    </section>
    <section label="3">
     <section-title>
      Existence and quality of equilibria
     </section-title>
     <paragraph label="Lemma 1">
      As a warm up, we present a negative result that reveals a strong relation of the price of anarchy of price competition games to the number of buyer types. There are one-vendor price competition games with price of anarchy that is arbitrarily close to n.
     </paragraph>
     <paragraph label="Proof">
      Consider a price competition game with n buyer types and one vendor with a production cost of 0. Let {a mathematical formula}α∈(0,1). The volume of a buyer type {a mathematical formula}i∈N is {a mathematical formula}μi=αi−1. The valuation of buyers of type i is {a mathematical formula}vi=(∑j=inμj)−1 for {a mathematical formula}i∈[n−1] and {a mathematical formula}vn=(1+α)/μn. By setting its price up to {a mathematical formula}vi for {a mathematical formula}i∈[n−1], the vendor can only get a utility of at most {a mathematical formula}vi∑j=inμj by attracting the buyers of type {a mathematical formula}i,i+1,...,n. By the definition of {a mathematical formula}vi, this utility is at most 1. This is smaller than the utility the vendor would have by selecting a price of {a mathematical formula}vn and attracting only the buyers of type n (the remaining buyers simply abstain). This is an equilibrium in which the utility of the vendor (as well as the social welfare) is {a mathematical formula}1+α. In contrast, the social welfare of the assignment in which all buyers are assigned to the vendor is {a mathematical formula}∑i=1nμivi≥(1−α)n; the inequality holds by the definition of {a mathematical formula}vi and since{a mathematical formula} The price of anarchy is then at least {a mathematical formula}(1−α)n/(1+α) which can become arbitrarily close to n by selecting α appropriately.  □
     </paragraph>
     <paragraph label="Theorem 2">
      Interestingly, the price of anarchy does not depend on any other quantity and the lower bound of Lemma 1 is tight. The price of anarchy of any price competition game with n buyer types is at most n.
     </paragraph>
     <paragraph label="Proof">
      Consider an equilibrium {a mathematical formula}(x,p) of a price competition game. We first claim that if buyers of some type i are split between two vendors j and {a mathematical formula}j′, then it must be {a mathematical formula}pj=cj and {a mathematical formula}pj′=cj′ (hence, the two vendors have zero utility) and the assignment in which all these buyers are assigned to vendor j without changing the prices is still an equilibrium and has the same social welfare. This is due to the fact that, at equilibrium, the utilities of buyers of type i assigned to j and {a mathematical formula}j′ should be the same. Hence, if one of the two vendors had a price strictly higher than its production cost, it could increase its utility by negligibly decreasing its price; this would result in attracting all buyers of type i previously assigned to j and {a mathematical formula}j′. So, by moving all buyers of type i from vendor {a mathematical formula}j′ to vendor j, we still have an assignment that is consistent to p in which the utilities of buyers and vendors do not change. Clearly, this new assignment is an equilibrium with a social welfare equal to the initial one.So, without loss of generality, we consider an equilibrium {a mathematical formula}(x,p) such that, for every i, all buyers of type i are assigned to the same vendor j, i.e., {a mathematical formula}xij=μi. We denote by {a mathematical formula}η(i) the vendor where the buyers of type i are assigned in x. Also, we denote by {a mathematical formula}o(i) the vendor to which the buyers of type i are assigned in an optimal assignment. Again, if there exists an optimal assignment where buyers of the same type i are split among different vendors, we can move all these buyers to a single vendor without decreasing the social welfare, hence {a mathematical formula}o(i) is well defined. We can further assume that when {a mathematical formula}η(i)≠o(i), this implies that {a mathematical formula}vi,o(i)−co(i)&gt;vi,η(i)−cη(i). If this is not the case and it is {a mathematical formula}vi,o(i)−co(i)=vi,η(i)−cη(i), we can consider the optimal assignment that assigns the buyers of type i to vendor {a mathematical formula}η(i).We will show that{a mathematical formula} for every {a mathematical formula}i∈N. Then, the following derivation can prove the theorem:{a mathematical formula} The first inequality follows by the definition of the social welfare, the second one follows from the fact that the function {a mathematical formula}o(⋅) can assign at most all n buyer types to the same vendor, the third one follows from (1) and the last equality follows from the definition of the optimal social welfare.It remains to prove inequality (1). If {a mathematical formula}η(i)=o(i), we use the fact that vendor {a mathematical formula}o(i) attracts (at least) the buyers of type i at equilibrium. Hence,{a mathematical formula}If {a mathematical formula}η(i)≠o(i), let {a mathematical formula}qo(i)=vi,o(i)−vi,η(i)+pη(i). First, we claim that {a mathematical formula}qo(i) is a valid price for vendor {a mathematical formula}o(i). Indeed, by our assumption {a mathematical formula}vi,o(i)−co(i)&gt;vi,η(i)−cη(i) above and since {a mathematical formula}pη(i)≥cη(i), we have{a mathematical formula} This means that vendor {a mathematical formula}o(i) can consider deviating to any price value δ from the non-empty interval {a mathematical formula}[co(i),qo(i)). From the discussion above, it is {a mathematical formula}vi,o(i)−δ&gt;vi,η(i)−pη(i), which means that, by deviating to δ, vendor {a mathematical formula}o(i) can attract the buyers of type i from vendor {a mathematical formula}η(i). Using the equilibrium condition (and denoting by {a mathematical formula}x′ the resulting consistent assignment when vendor {a mathematical formula}o(i) deviates to price δ), we have that{a mathematical formula} Since the above inequality holds for any {a mathematical formula}δ&lt;qo(i), it must also be{a mathematical formula} This completes the proof of the theorem.  □
     </paragraph>
     <paragraph label="Lemma 3">
      Recall that the upper bound on the price of anarchy is meaningful only for games that admit equilibria. In the following, we show that games with one buyer type always have equilibria (and, by Theorem 2, all equilibria have optimal social welfare since the price of anarchy is 1) while the existence of a second buyer type may result to instability. Price competition games with one buyer type always have at least one equilibrium.
     </paragraph>
     <paragraph label="Proof">
      Consider a price competition game with one buyer type. We use the simplified notation {a mathematical formula}vj to denote the valuation of the buyers for vendor j. Let {a mathematical formula}j⁎∈arg⁡maxj∈M⁡{vj−cj} and {a mathematical formula}j′∈arg⁡maxj∈M∖j⁎⁡{vj−cj} be two vendors with the highest values for the difference {a mathematical formula}vj−cj. Set {a mathematical formula}pj⁎=vj⁎−vj′+cj′ and {a mathematical formula}pj=cj for any vendor {a mathematical formula}j≠j⁎. We claim that this price vector together with the consistent assignment x that assigns the buyers to vendor {a mathematical formula}j⁎ is an equilibrium. Indeed, no vendor {a mathematical formula}j≠j⁎ has any incentive to change its price; a decrease would result in negative utility while an increase would not change the assignment. Moreover, vendor {a mathematical formula}j⁎ has no incentive to change its price; a decrease can only lower its utility while an increase would result in a new assignment in which all buyers are attracted by vendor {a mathematical formula}j′.  □
     </paragraph>
     <paragraph label="Lemma 4">
      There exists a price competition game with two buyer types that admits no equilibrium.
     </paragraph>
     <paragraph label="Proof">
      If only the left vendor is assigned buyers (the argument holds symmetrically for the right vendor), the right vendor can attract the right buyers by setting its price to any non-zero value smaller than 2 and increase its utility from 0 to positive.The case where the left vendor gets no left buyers and the right vendor gets no right buyers requires the inequalities {a mathematical formula}vℓℓ−pℓ≤(vℓr−pr)+ and {a mathematical formula}vrr−pr≤(vrℓ−pℓ)+, i.e., {a mathematical formula}5−pℓ≤(3−pr)+ and {a mathematical formula}5−pr≤(3−pℓ)+; this implies that {a mathematical formula}pℓ≥5 and {a mathematical formula}pr≥5, which in turn implies that no vendor receives any buyers since they all have negative utility and prefer to abstain. Clearly, this is not an equilibrium since a vendor can attract all buyers, by lowering its price to smaller than 5, and, thus, obtain strictly positive utility.The only remaining case is when some left buyers are assigned to the left vendor and some right buyers are assigned to the right vendor. This requires the two inequalities {a mathematical formula}vℓℓ−pℓ≥(vℓr−pr)+ and {a mathematical formula}vrr−pr≥(vrℓ−pℓ)+. Clearly, if the first inequality is strict, the left vendor can increase {a mathematical formula}pℓ (and, consequently, its utility) so that the first inequality becomes equality. Similarly, the second inequality should be an equality as well. So, the requirements for this case are actually the equalities {a mathematical formula}5−pℓ=(3−pr)+ and {a mathematical formula}5−pr=(3−pℓ)+. The only prices that satisfy both equalities simultaneously are {a mathematical formula}pℓ=pr=5 which do not form an equilibrium since any vendor can set its price to a value negligibly smaller than 3, attract all buyers, and increase its utility from 5 to arbitrarily close to 6. The proof is complete.  □
     </paragraph>
     <paragraph>
      We remark that Meir et al. [18] also present a two-vendor four-buyer-type price competition game that does not admit any equilibrium; the game in the proof of Lemma 4 is the simplest one with this property.
     </paragraph>
    </section>
    <section label="4">
     <section-title>
      Complexity of equilibria
     </section-title>
     <paragraph>
      We begin the discussion of this section by formulating some concrete computational problems related to equilibria of price competition games. VerifyEquilibrium: Given a price vector p and a buyers-to-vendors assignment x in a price competition game {a mathematical formula}G, decide whether {a mathematical formula}(x,p) is an equilibrium of {a mathematical formula}G.ComputePrice: Given a buyers-to-vendors assignment x in a price competition game {a mathematical formula}G, decide whether there exists a price vector p to which x is consistent so that {a mathematical formula}(x,p) is an equilibrium of {a mathematical formula}G.PriceCompetition: Decide whether a given price competition game has any equilibrium or not.
     </paragraph>
     <section label="4.1">
      Complexity of VerifyEquilibrium
      <paragraph>
       VerifyEquilibrium can be easily seen to be solvable in {a mathematical formula}O(nmlog⁡n) time. First, one needs to check whether x is consistent to p, i.e., whether the utility of each buyer type is maximized at the vendor(s) used in x; this can be done by computing at most {a mathematical formula}O(nm) buyer utilities. Then, for every vendor j, it suffices to sort (in {a mathematical formula}O(nlog⁡n) time) the buyer types according to the maximum price that would incentivize them to select vendor j, given the prices for the remaining vendors, and, then, compute (in {a mathematical formula}O(n) time) the price that maximizes the vendor's utility when deviating to this price level (a vendor's utility is equal to the volume of buyers it attracts times the difference of the price level from the production cost). The final decision is YES if x is consistent to p and the utility of all vendors in {a mathematical formula}(x,p) is equal to the maximum utility over all the deviations considered; otherwise, it is NO. In the following, we call this algorithm Verify; its pseudocode appears below as Algorithm 1.
      </paragraph>
     </section>
     <section label="4.2">
      Complexity of ComputePrice
      <paragraph>
       The problem ComputePrice looks significantly more difficult at first glance since there are too many price vectors (to which x is consistent) that have to be considered. Interestingly, we will present a polynomial-time algorithm (henceforth called CandidatePrice) which, given a price competition game and a buyers-to-vendors assignment x, comes up with a single candidate price vector p that can in turn easily be checked whether it forms an equilibrium together with x using Verify.
      </paragraph>
      <paragraph>
       CandidatePrice works as follows; see also Algorithm 2. It first computes a set Z of seed vendors which will have a price equal to their production cost. In order to define Z, it is convenient to consider the directed graph H that has a node for each vendor and a directed edge from node j to node {a mathematical formula}j′ labeled by i if buyers of type i are assigned to vendor j in x and, furthermore, {a mathematical formula}vij−cj≤vij′−cj′. Now, the set Z is defined recursively as follows:
      </paragraph>
      <list>
       <list-item label="1.">
        Any vendor that is not assigned any buyer in x belongs to Z; such a vendor is called empty.
       </list-item>
       <list-item label="2.">
        Any vendor j such that {a mathematical formula}mini:xij&gt;0⁡vij=cj belongs to Z.
       </list-item>
       <list-item label="3.">
        Any vendor that is part of a directed cycle in H belongs to Z.
       </list-item>
       <list-item label="4.">
        Any vendor that has a directed edge to a vendor of Z also belongs to Z.
       </list-item>
      </list>
      <paragraph>
       CandidatePrice returns the price vector p with {a mathematical formula}pj=cj for each seed vendor j and{a mathematical formula} for each non-seed vendor.
      </paragraph>
      <paragraph label="Example 2">
       Consider the price competition game {a mathematical formula}G shown in Table 2.Let x be the assignment where all buyers of type A are assigned to vendor 1, all buyers of type B are assigned to vendor 4, buyers of type C are assigned to 2, buyers of type D are assigned to vendor 1 and, finally, buyers of type E are assigned to vendor 3. The directed graph H is depicted in Fig. 1.Note that vendors 1, 2, and 3 are seed vendors since they are part of a directed cycle. This leads to the following price vector {a mathematical formula}p={0,0,0,1}. In order to verify that {a mathematical formula}(x,p) is indeed a pure Nash equilibrium, it suffices to run algorithm Verify with input {a mathematical formula}(x,p); this is true since all buyers are assigned to vendors in their demand set, vendors 1, 2 and 3 cannot increase their utility by unilaterally increasing their price as, then, they would lose all assigned buyers, while vendor 4 cannot increase its price, since its assigned buyers would move to vendor 1, and cannot attract new buyers by decreasing its price.
      </paragraph>
      <paragraph label="Lemma 5">
       The correctness of the algorithm is given by the following lemma. Letpbe the price vector returned by CandidatePrice on input a price competition game{a mathematical formula}Gand a buyers-to-vendors assignmentx. If{a mathematical formula}Gadmits an equilibrium{a mathematical formula}(x,q), then{a mathematical formula}qj=pjfor every non-empty vendor j.
      </paragraph>
      <paragraph label="Proof">
       Consider the price vector p returned by CandidatePrice. We will show that q satisfies the very same properties as p does, for non-empty seed and non-seed vendors. We begin by arguing about the empty vendors, where it may hold that {a mathematical formula}pj≠qj for an empty vendor j.Empty vendors. Given the price vector q, we construct a new price vector {a mathematical formula}q¯ by setting {a mathematical formula}q¯j=cj for every empty vendor j in x and {a mathematical formula}q¯j=qj for every other vendor j. Since {a mathematical formula}(x,q) is an equilibrium, {a mathematical formula}(x,q¯) is an equilibrium as well. To see why, it suffices to show that no buyer has any incentive to deviate to an empty vendor in x. Assume otherwise that {a mathematical formula}(x,q¯) is not an equilibrium; we will show that {a mathematical formula}(x,q) should not be an equilibrium as well. Since {a mathematical formula}(x,q¯) is not an equilibrium, there must exist some i such that buyers of type i are assigned to a vendor j in x and satisfy {a mathematical formula}vij′−q¯j′&gt;vij−q¯j for some vendor {a mathematical formula}j′ that is empty in x. From the definition of {a mathematical formula}q¯, this means that {a mathematical formula}vij′−cj′&gt;vij−qj and vendor {a mathematical formula}j′ could set its price to a sufficiently small but strictly higher than its production cost price to attract the buyers of type i and increase its utility from 0 (since {a mathematical formula}j′ is an empty vendor according to x) to positive; this contradicts the assumption that {a mathematical formula}(x,q) is an equilibrium. Now, clearly, {a mathematical formula}q¯ has the desired structure (i.e., prices equal to production costs) for vendors that are empty in x, and it suffices to prove that {a mathematical formula}p=q¯.For the remainder of the proof, recall that, by the definition of q, {a mathematical formula}qj=q¯j for any non-empty vendor j.Seed vendors. First, observe that for any non-empty vendor j with {a mathematical formula}mini:xij&gt;0⁡vij=cj, it should obviously be {a mathematical formula}q¯j=cj since x is consistent to {a mathematical formula}q¯.Now, consider a directed cycle L of length ℓ in H; we have to show that {a mathematical formula}q¯j=cj for each vendor {a mathematical formula}j∈L. Let {a mathematical formula}j1, {a mathematical formula}j2, ..., {a mathematical formula}jℓ be the vendors in L and denote by {a mathematical formula}i1, {a mathematical formula}i2, ..., {a mathematical formula}iℓ the (not necessarily distinct) labels of the corresponding edges. Observe that the (consistency) conditions that guarantee that the buyers of type {a mathematical formula}ik do not prefer vendor {a mathematical formula}jk+1 to vendor {a mathematical formula}jk for {a mathematical formula}k∈[ℓ−1] and buyers of type {a mathematical formula}iℓ do not prefer vendor {a mathematical formula}j1 to vendor {a mathematical formula}jℓ together with the conditions defining the directed cycle L can only hold if {a mathematical formula}vikjk−q¯jk=vikjk+1−q¯jk+1 for all {a mathematical formula}k∈[ℓ−1] and {a mathematical formula}viℓjℓ−q¯jℓ=viℓj1−q¯j1. Now, if there is a vendor {a mathematical formula}j′∈L with {a mathematical formula}q¯j′&gt;cj′, let {a mathematical formula}j⁎ be the predecessor of {a mathematical formula}j′ in L. Then, by negligibly decreasing {a mathematical formula}q¯j′, vendor {a mathematical formula}j′ could also attract the buyers assigned to both vendor {a mathematical formula}j⁎ and itself in x; this would strictly increase its utility, contradicting the fact that {a mathematical formula}(x,q¯) is an equilibrium.We will also show that for every vendor j that is identified as a seed vendor by the recursive step 4 of CandidatePrice, it is {a mathematical formula}q¯j=cj. Assume otherwise and consider the first vendor j that is identified as seed vendor by the recursive step 4 that has {a mathematical formula}q¯j&gt;cj. This means that H has an edge from j to some seed vendor {a mathematical formula}j′, labeled by i, and, hence, {a mathematical formula}vij−cj≤vij′−cj′. By our assumption that j is the first seed vendor with {a mathematical formula}q¯j&gt;cj identified at step 4 of the algorithm, it is {a mathematical formula}q¯j′=cj′. Hence, {a mathematical formula}vij−q¯j&lt;vij′−q¯j′ which contradicts the consistency of x to {a mathematical formula}q¯.Non-seed vendors. First, we will prove that for every such vendor j, it must be {a mathematical formula}q¯j&gt;cj. Consider the subgraph {a mathematical formula}H′ that is induced by the nodes of H corresponding to non-seed vendors. By the definition of seed vendors, {a mathematical formula}H′ is acyclic and its vendors are non-empty. We will show that the inequality holds for the leaves of {a mathematical formula}H′ and will then use this fact to also show that it holds for their parents and, recursively, for all vendors in {a mathematical formula}H′.Case I: leaf vendors. For a leaf vendor j of {a mathematical formula}H′, its price may satisfy {a mathematical formula}q¯j=cj only if there is a buyer type i assigned to j in x and another vendor {a mathematical formula}j′ so that {a mathematical formula}vij−q¯j=vij′−q¯j′, as otherwise j could negligibly increase its price and obtain more utility. But then, it is {a mathematical formula}vij−cj=vij′−q¯j′≤vij′−cj′ and, hence, H should also contain the directed edge from j to {a mathematical formula}j′. Since j is non-seed, {a mathematical formula}j′ should be non-seed as well and the edge should exist in {a mathematical formula}H′, contradicting the fact that j is a leaf in {a mathematical formula}H′.Case II: non-leaf vendors. Let {a mathematical formula}j⁎ be a non-seed vendor with {a mathematical formula}q¯j⁎=cj⁎ such that all its children j in {a mathematical formula}H′ have {a mathematical formula}q¯j&gt;cj. Again, there is a buyer type i assigned to {a mathematical formula}j⁎ in x and another vendor {a mathematical formula}j′ so that {a mathematical formula}vij⁎−q¯j⁎=vij′−q¯j′, as, otherwise, vendor {a mathematical formula}j⁎ could increase its price above its production cost and increase its utility. Since {a mathematical formula}q¯j⁎=cj⁎ and {a mathematical formula}q¯j′≥cj′, our assumptions imply that {a mathematical formula}vij⁎−cj⁎≤vij′−cj′. Hence, {a mathematical formula}j′ is one of the children of {a mathematical formula}j⁎. But then, {a mathematical formula}j′ can negligibly decrease its price to attract (in addition to all the buyers it gets in x) the buyers assigned to {a mathematical formula}j⁎ as well; this would increase the utility of vendor {a mathematical formula}j′. This contradicts the fact that {a mathematical formula}(x,q¯) is an equilibrium and establishes that {a mathematical formula}q¯j&gt;cj for every non-seed vendor j.It remains to show that for every non-seed vendor j, {a mathematical formula}q¯j is given by the same expression (2) as {a mathematical formula}pj. If there are no seed vendors, i.e., (the set Z is empty), assume that there is a vendor j with {a mathematical formula}q¯j&lt;mini:xij&gt;0⁡vij. Then, the only reason that may prevent vendor j from increasing its price is that there is a buyer of type i assigned to j in x and another vendor {a mathematical formula}j′ such that {a mathematical formula}vij−q¯j=vij′−q¯j′. Since {a mathematical formula}j′ is a non-seed vendor, it is {a mathematical formula}q¯j′&gt;cj′ and, hence, vendor {a mathematical formula}j′ could negligibly decrease its price to attract (in addition to all the buyers it gets in x) the buyers assigned to j as well; this would increase the utility of vendor {a mathematical formula}j′.Otherwise, if the set Z of seed vendors is non-empty, we will show that every non-seed vendor j has {a mathematical formula}q¯j=pj. First, assume otherwise that {a mathematical formula}q¯j&gt;pj. By the definition of {a mathematical formula}pj, this means that there is a buyer type i assigned to j in x and a seed vendor {a mathematical formula}j′ such that {a mathematical formula}q¯j&gt;vij−(vij′−cj′)+ and subsequently (since {a mathematical formula}q¯j′=cj′), {a mathematical formula}vij−q¯j&lt;(vij′−qj′)+. This contradicts the consistency of x to {a mathematical formula}q¯. Finally, assume that {a mathematical formula}q¯j&lt;pj. Then, the only reason that may prevent vendor j from increasing its price is that there is a buyer of type i assigned to j in x and another vendor {a mathematical formula}j′ such that {a mathematical formula}vij−q¯j=vij′−q¯j′. If {a mathematical formula}j′∈Z, the last equality also implies that {a mathematical formula}q¯j=pj, contradicting our assumption. Hence, it must be {a mathematical formula}j′∉Z, i.e., {a mathematical formula}q¯j′&gt;cj′. Then, vendor {a mathematical formula}j′ could negligibly decrease its price to attract (in addition to the buyers it gets in x) the buyers assigned to j as well; this would increase the utility of vendor {a mathematical formula}j′. This completes the proof that {a mathematical formula}p=q¯, and, hence, that {a mathematical formula}pj=qj for any non-empty vendor j.  □
      </paragraph>
     </section>
     <section label="4.3">
      Complexity of PriceCompetition
      <paragraph>
       We now turn our attention to PriceCompetition and first consider the cases where either the number of buyer types or the number of vendors is constant.
      </paragraph>
      <paragraph label="Proof">
       PriceCompetitionis solvable in polynomial time when the number of buyer types is constant.We begin by arguing that it suffices to consider non-fractional assignments, i.e., assignments where all buyers of the same type are assigned to a single vendor. To see that, consider an equilibrium {a mathematical formula}(x,p) where buyers of some type i are split between two vendors j and {a mathematical formula}j′. Then, it must be {a mathematical formula}pj=cj and {a mathematical formula}pj′=cj′, and the assignment in which all these buyers are assigned to vendor j without changing the prices is still an equilibrium. Indeed, at equilibrium the utilities of buyers of type i assigned to j and {a mathematical formula}j′ should be the same. Hence, if one of the two vendors had a price strictly higher than its production cost, it could increase its utility by negligibly decreasing its price; this would result in attracting all buyers of type i previously assigned to j and {a mathematical formula}j′. So, by moving all buyers of type i from vendor {a mathematical formula}j′ to vendor j, we still have an assignment that is consistent to p in which the utilities of buyers and vendors do not change; observe that since {a mathematical formula}pj′=cj′, it holds that {a mathematical formula}uj′(x,p)=0 and, hence, vendor {a mathematical formula}j′ does not lose utility by this change. Clearly, the new assignment is also an equilibrium.The theorem follows since there are at most {a mathematical formula}(m+1)n different non-fractional buyers-to-vendors assignments and corresponding instances of ComputePrice that we need to consider.  □
      </paragraph>
      <paragraph>
       The case of a constant number of vendors (this can be thought of as an oligopoly) is considerably more involved but still computable in polynomial time as we show in the following.
      </paragraph>
      <paragraph>
       For a fixed price vector p, we define the induced preference, denoted by {a mathematical formula}≻i, of buyers of type i as {a mathematical formula}j≻ij′ if {a mathematical formula}vij−pj&gt;vij′−pj′ and {a mathematical formula}j≃ij′ if {a mathematical formula}vij−pj=vij′−pj′. We use the term preference profile to refer to a combination of buyer preferences. The main idea is to enumerate the different preference profiles that are defined for all price vectors {a mathematical formula}p∈Rm. Observe that the sign (from {a mathematical formula}{−,0,+}) of the expression {a mathematical formula}vij−vij′−pj+pj′ indicates whether buyers of type i prefer vendor j to vendor {a mathematical formula}j′ (i.e., {a mathematical formula}j≻ij′), are indifferent between the two (i.e., {a mathematical formula}j≃j′), or prefer vendor {a mathematical formula}j′ to j (i.e., {a mathematical formula}j′≻ij). The number of different preferences of buyers between the two specific vendors, when keeping valuations fixed, is given by the number of different sign patterns for the expressions {a mathematical formula}vij−vij′−pj+pj′ for {a mathematical formula}i=1,...,n as the difference {a mathematical formula}pj−pj′ runs from −∞ to ∞. Since there are at most n different values of the difference {a mathematical formula}vij−vij′, this number is at most {a mathematical formula}2n+1; this holds since, at the beginning, all signs are positive and, as {a mathematical formula}pj−pj′ increases, the sign of each buyer type will change, first to 0 and then to negative. In total, the number of distinct sign patterns we need to enumerate in order to consider all distinct preference profiles is at most {a mathematical formula}(2n+1)(m+12) as there are {a mathematical formula}(m+12) ways to select a pair j, {a mathematical formula}j′ of vendors; this is polynomial in n when m is constant.
      </paragraph>
      <paragraph>
       When considering a preference profile ⪰, we compute the following assignment x which should be given to CandidatePrice in order to return a price vector p; the pair {a mathematical formula}(x,p) will in turn be given to Verify to detect whether it corresponds to an equilibrium or not. For each buyer type i with a unique top preference (i.e., strictly preferring a particular vendor to all others), x assigns buyers of type i to their most preferred vendor. For each buyer type i that has a set T of at least two vendors tied as its top preference, x assigns i to a(ny) vendor j of T maximizing {a mathematical formula}vij−cj. We call this algorithm Enumerate; its pseudocode appears as Algorithm 3.
      </paragraph>
      <paragraph label="Lemma 7">
       Clearly, on input a price competition game that does not admit an equilibrium, Enumerate will not find any. The next lemma completes the proof of correctness of Enumerate. On input a price competition game, Enumerate returns an equilibrium if one exists.
      </paragraph>
      <paragraph label="Proof">
       Assume that Enumerate is applied on input a price competition game {a mathematical formula}G that admits an equilibrium {a mathematical formula}(x,q). If x is the unique assignment that is consistent to q, Enumerate will consider the preference profile ⪰ corresponding to vector q and will pass the uniquely defined assignment x as input to CandidatePrice to compute a price vector p; by Lemma 5, {a mathematical formula}(x,p) will form an equilibrium of {a mathematical formula}G.Now, assume that x is not the unique assignment that is consistent to q. Denote by {a mathematical formula}x¯ the assignment computed by Enumerate (notice that {a mathematical formula}x¯ is consistent to q as well) when considering the preference profile that corresponds to the price vector q. We will show that {a mathematical formula}(x¯,q) is an equilibrium as well; then, Lemma 5 guarantees that an equilibrium will be found when Enumerate will run CandidatePrice with input assignment {a mathematical formula}x¯.Consider a buyer type i with {a mathematical formula}xij&gt;0 and {a mathematical formula}x¯ij′&gt;0 for two different vendors j and {a mathematical formula}j′. By our assumptions, we have {a mathematical formula}vij−qj=vij′−qj′ (since buyers of type i are indifferent between vendors j and {a mathematical formula}j′ in q) and {a mathematical formula}vij−cj≤vij′−cj′ (since Enumerate sets {a mathematical formula}x¯ij′&gt;0). We will show that {a mathematical formula}qj=cj and {a mathematical formula}qj′=cj′. Indeed, assume that {a mathematical formula}qj′&gt;cj′. Then, by negligibly decreasing its price in q, vendor {a mathematical formula}j′ could increase its utility by attracting (in addition to the buyers it gets in x) all the buyers of type i. Hence, {a mathematical formula}qj′=cj′ and {a mathematical formula}vij−qj=vij′−cj′. By the inequality {a mathematical formula}vij−cj≤vij′−cj′, we obtain that {a mathematical formula}qj=cj. The lemma follows since the different assignments of buyers in x and {a mathematical formula}x¯ does not affect the utility of the corresponding vendors (which is zero).  □
      </paragraph>
      <paragraph label="Theorem 8">
       By the discussion above and Lemma 7, we obtain the following. PriceCompetitionis solvable in polynomial time when the number of vendors is constant.
      </paragraph>
      <paragraph>
       The restrictions on the numbers of vendors or buyer types are necessary in order to come up with efficient algorithms for PriceCompetition (unless {a mathematical formula}P=NP).
      </paragraph>
      <paragraph label="Theorem 9">
       PriceCompetitionis NP-hard.
      </paragraph>
      <paragraph label="Proof">
       We use a reduction from the well-known NP-hard Exact-3-Cover problem (X3C) which is formally described as follows. Exact-3-Cover: Given a universe {a mathematical formula}U of {a mathematical formula}n=3q elements and a collection {a mathematical formula}C of m 3-sized subsets of {a mathematical formula}U, is there a cover {a mathematical formula}C⊆C consisting of q disjoint sets? Given an instance of X3C we describe an instance of PriceCompetition as follows; see also Table 3:
       <list>
        For every subset {a mathematical formula}S∈C, there is a set-vendor {a mathematical formula}νS;for every element {a mathematical formula}e∈U, there are two vendors {a mathematical formula}νe,1 and {a mathematical formula}νe,2;for every element {a mathematical formula}e∈U, there is an element-buyer type {a mathematical formula}be with volume 1, and valuations 12 for every vendor {a mathematical formula}νS such that {a mathematical formula}e∈S, 5 for vendor {a mathematical formula}νe,1, and 3 for vendor {a mathematical formula}νe,2;for every element {a mathematical formula}e∈U, there is a buyer type {a mathematical formula}be⁎ with volume 1 and valuation 3 for vendor {a mathematical formula}νe,1, and 5 for vendor {a mathematical formula}νe,2;for every subset {a mathematical formula}S∈C, there are two buyer types: one buyer type {a mathematical formula}bS,h with volume 3 and valuation 30 for vendor {a mathematical formula}νS, and one buyer type {a mathematical formula}bS,ℓ with volume 9 and valuation 6 for vendor {a mathematical formula}νS;all valuations not mentioned above and all production costs are zero.First, observe that in any equilibrium
       </list>
       <paragraph>
        {a mathematical formula}(x,p), a vendor {a mathematical formula}νS corresponding to the set {a mathematical formula}S={e1,e2,e3} of {a mathematical formula}C may have been assigned
       </paragraph>
       <list>
        <list-item label="•">
         either all buyers of type {a mathematical formula}bS,h by setting its price {a mathematical formula}pνS to 30, i.e., equal to the valuation {a mathematical formula}vbS,h,νS;
        </list-item>
        <list-item label="•">
         or all buyers of types {a mathematical formula}bS,h, {a mathematical formula}be1, {a mathematical formula}be2, {a mathematical formula}be3, and {a mathematical formula}bS,ℓ by setting its price to 6, i.e., equal to the valuation {a mathematical formula}vbS,ℓ,νS.
        </list-item>
       </list>
       <paragraph>
        To see why the above claim is true, observe that, in any of the two cases, the utility of vendor {a mathematical formula}νS at equilibrium is 90. Clearly, by decreasing its price so that it lies in the ranges {a mathematical formula}(12,30) or {a mathematical formula}(0,6), the utility of the vendor becomes strictly smaller than 90 since any consistent assignment will belong to one of the two cases. By setting the price in the range {a mathematical formula}(6,12], no consistent assignment includes the buyers of type {a mathematical formula}bS,ℓ and, hence, the utility of vendor {a mathematical formula}νS is at most 72.Now, assume that the initial X3C instance is a YES instance with a cover C consisting of q 3-sets from {a mathematical formula}C. Then, consider the price vector p with {a mathematical formula}pνS=vbS,ℓ,νS=6 for every set {a mathematical formula}S∈C, {a mathematical formula}pνS=vbS,h,νS=30 for every set {a mathematical formula}S∉C, and {a mathematical formula}pνe,1=0 and {a mathematical formula}pνe,2=2 for every {a mathematical formula}e∈U. Let x be the consistent assignment that assigns each element buyer of type e to the set vendor {a mathematical formula}νS such that {a mathematical formula}S∈C and {a mathematical formula}e∈S, assigns the buyers of type {a mathematical formula}bS,h to vendor {a mathematical formula}νS for every set {a mathematical formula}S∈C, assigns the buyers of type {a mathematical formula}bS,ℓ to vendor {a mathematical formula}νS for every set {a mathematical formula}S∈C while the buyers of type {a mathematical formula}bS,ℓ abstain for every set {a mathematical formula}S∉C, and assigns the buyers of type {a mathematical formula}be⁎ to vendor {a mathematical formula}νe,2. We now argue that {a mathematical formula}(x,p) is an equilibrium. First, observe that all set vendors follow one of the two strategies mentioned above and are at equilibrium. Now, for every element {a mathematical formula}e∈U, the vendors {a mathematical formula}νe,1 and {a mathematical formula}νe,2 are essentially engaged in a two-vendor game competing only for buyers of type {a mathematical formula}be⁎ since the buyers of type {a mathematical formula}be have a utility of 6 at vendor {a mathematical formula}νS with {a mathematical formula}e∈S and their deviation to a vendor among {a mathematical formula}νe,1 and {a mathematical formula}νe,2 would never increase their utility to above 5. The prices {a mathematical formula}pνe,1=0 and {a mathematical formula}pνe,2=2 form an equilibrium in this two-vendor game. Indeed, the utility of vendor {a mathematical formula}νe,1 is zero (since it is not assigned any buyers according to x) and its price equals its production cost, which means that this vendor cannot gain any utility by deviating. Moreover, the utility of vendor {a mathematical formula}νe,2 is 2 and it cannot be increased (since the buyers of type {a mathematical formula}be⁎ would then go to vendor {a mathematical formula}νe,1 or abstain) or decreased (since the vendor would then have less utility).On the other hand, if the initial X3C instance is a NO instance, we claim that no assignment x of buyers to vendors can be consistent to a price vector p so that {a mathematical formula}(x,p) is an equilibrium. Assume otherwise and consider all set vendors. By the discussion above, each set vendor has set its price either to 30 or to 6 at equilibrium. We remark that there exists at least one element-buyer type {a mathematical formula}be that has no buyers assigned to any set vendor {a mathematical formula}νS that corresponds to a subset S containing element {a mathematical formula}e∈U; this holds since the initial X3C instance is a NO instance. Therefore, all these set vendors, that are candidate vendors for buyers of type {a mathematical formula}be, have set their price to exactly 30 in the equilibrium and, so, the buyers of type {a mathematical formula}be can only be assigned to vendors {a mathematical formula}νe,1 or {a mathematical formula}νe,2. Hence, the vendors {a mathematical formula}νe,1 and {a mathematical formula}νe,2 can compete not only for the buyers of type {a mathematical formula}be⁎ but also for the buyers of type {a mathematical formula}be. But then, observe that these two vendors and the buyers of type {a mathematical formula}be and {a mathematical formula}be⁎ would follow the circular dynamics in the counter-example of Lemma 4; this implies that no equilibrium exists and the proof is complete.  □
       </paragraph>
      </paragraph>
     </section>
    </section>
    <section label="5">
     <section-title>
      Enforcing equilibria using subsidies
     </section-title>
     <paragraph>
      We now consider the option to use subsidies. A subsidy given to a vendor aims to compensate it for setting its price at a particular value. In this way, subsidies can be used to enforce a particular pair of price vector and consistent buyers-to-vendors assignment. Formally, given a price vector p and a consistent assignment x, denote by {a mathematical formula}θj(x,p) the maximum utility of vendor j over all deviations {a mathematical formula}pj′ and all assignments y that are consistent to {a mathematical formula}(pj′,p−j). Vendor j has no incentive to follow any such deviation when it is given an amount of subsidies {a mathematical formula}sj≥θj(x,p)−uj(x,p). If this inequality holds for every vendor j, we say that the pair {a mathematical formula}(x,p) is enforced as an equilibrium. We denote by {a mathematical formula}s(x,p) the entry-wise minimum subsidy vector that enforces {a mathematical formula}(x,p) as an equilibrium, i.e., {a mathematical formula}sj(x,p)=θj(x,p)−uj(x,p). We use the terms “total amount” and “cost” to refer to the sum of all entries of a subsidy vector.
     </paragraph>
     <paragraph>
      Our first observation is that a large amount of subsidies may inherently be necessary in order to enforce any equilibrium.
     </paragraph>
     <paragraph label="Theorem 10">
      For every{a mathematical formula}δ&gt;0, there exists a price competition game, in which no subsidy assignment of cost smaller than{a mathematical formula}(1/4−δ)SW⁎can enforce any pair of price vector and consistent buyers-to-vendors assignment as an equilibrium.
     </paragraph>
     <paragraph label="Proof">
      Consider a price competition game with two buyer types of unit volume each and two vendors with a production cost of 0. We use the terms left and right to refer to the vendors and buyer types. Let {a mathematical formula}ϵ&gt;0; then the valuations are {a mathematical formula}vℓℓ=vrr=4−ϵ and {a mathematical formula}vrℓ=vℓr=3. We will show that no price vector and consistent buyers-to-vendors assignment can be enforced as an equilibrium using an amount of subsidies less than {a mathematical formula}2−2ϵ. The optimal social welfare is {a mathematical formula}8−2ϵ and the theorem will follow by setting ϵ to a sufficiently small positive value.Consider a buyers-to-vendors assignment x and let {a mathematical formula}pℓ and {a mathematical formula}pr be the two prices to which x is consistent. First observe that the left vendor will attract buyers of both types by setting its price to (any value that is negligibly smaller than) {a mathematical formula}min⁡{3,pr−1+ϵ} (if positive) while it can attract the buyers of left type by setting its price to (any value that is negligibly smaller than) {a mathematical formula}min⁡{4−ϵ,1−ϵ+pr}; the two terms in the min expression denote the price necessary so that the buyers do not abstain and prefer the left vendor to the right one. Hence, by expressing the subsidies in terms of the maximum utility of the vendors at any deviation minus their current utility we get an amount β of subsidies that is{a mathematical formula} We will distinguish between cases (omitting symmetric ones) depending on the price values {a mathematical formula}pℓ and {a mathematical formula}pr and will use (3) to show that {a mathematical formula}β≥2−2ϵ in any case.Case 1:{a mathematical formula}pℓ,pr&gt;4−ϵ. All buyers abstain and both max expressions evaluate to at least 6.Case 2:{a mathematical formula}pℓ&gt;4−ϵand{a mathematical formula}3&lt;pr≤4−ϵ. The left buyers abstain and the right buyers may either abstain or be assigned to the right vendor. By just considering the last two terms of (3), we get {a mathematical formula}β≥6−pr≥2+ϵ.Case 3:{a mathematical formula}pℓ&gt;4−ϵand{a mathematical formula}pr≤3. The right vendor may attract all buyers and the amount of subsidies in it is at least {a mathematical formula}6−2pr. The amount of subsidies at the left vendor is then at least {a mathematical formula}2pr−2+2ϵ. In total, {a mathematical formula}β≥4+2ϵ.Case 4:{a mathematical formula}3&lt;pℓ,pr≤4−ϵ. The left (respectively, right) buyers can only be assigned to the left (respectively, right) vendor. Since the max expressions of (3) evaluate to {a mathematical formula}2pr−2+2ϵ and {a mathematical formula}2pℓ−2+2ϵ, we obtain {a mathematical formula}β≥pr+pℓ−4+4ϵ≥{a mathematical formula}2+4ϵ.Case 5:{a mathematical formula}3&lt;pℓ≤4−ϵand{a mathematical formula}pr≤3. The right hand side of (3) is minimized when buyers of different types are assigned to different vendors. The max expressions are at least {a mathematical formula}1−ϵ+pr and at least {a mathematical formula}2pℓ−2+2ϵ. Altogether, we get {a mathematical formula}β≥pℓ−1+ϵ≥2+ϵ.Case 6:{a mathematical formula}pℓ,pr≤3. We have to distinguish between a few subcases. First, consider the subcase where each vendor receives the buyers of a different type. Clearly, the max expressions evaluate to at least {a mathematical formula}1−ϵ+pr and {a mathematical formula}1−ϵ+pℓ; altogether, we get {a mathematical formula}β≥2−2ϵ. If, in contrast, buyers of both types are assigned to the same (say, left) vendor, this should be due to the fact that {a mathematical formula}pr≥1−ϵ+pℓ (so that the right buyer prefers the left vendor). Then, the first max expression is at least {a mathematical formula}1−ϵ+pr≥2−2ϵ+pℓ while the second one is at least {a mathematical formula}1−ϵ+pℓ. Overall, we have that {a mathematical formula}β≥3−3ϵ.  □
     </paragraph>
     <paragraph label="Theorem 11">
      In the following, we restrict ourselves to optimal assignments and show tight bounds on the cost of subsidies that are necessary and sufficient to enforce these assignments as equilibria. In every price competition game, the optimal assignment can be enforced as an equilibrium using an amount of subsidies that is at most{a mathematical formula}SW⁎. This bound is tight. In particular, for every{a mathematical formula}ϵ&gt;0, there exists a price competition game in which the optimal assignment cannot be enforced as an equilibrium with a total amount of subsidies less than{a mathematical formula}(1−ϵ)SW⁎.
     </paragraph>
     <paragraph label="Proof">
      We first prove the upper bound. Consider an optimal assignment x with {a mathematical formula}xij∈{0,μi} for every buyer type/vendor pair and the price vector p with {a mathematical formula}pj=cj; clearly, x is consistent to p. By deviating to any other price, vendor j cannot get any buyers that are not assigned to it in the optimal assignment; it can, however, increase its utility by raising the price for those buyers that are already assigned to it. Hence, it suffices to assign a subsidy of {a mathematical formula}sj(x,p)=∑ixij(vij−cj) to each vendor j; this obviously yields a total amount of subsidies equal to {a mathematical formula}SW⁎ that enforces the optimal assignment as an equilibrium, since each vendor obtains the maximum utility from its assigned buyers.For the lower bound, let {a mathematical formula}χ&gt;2 and consider the price competition game with two buyer types of unit volume and valuations χ and 1 for a single vendor of production cost of 0. The optimal social welfare is {a mathematical formula}SW⁎=χ+1. Observe that the utility of the vendor is maximized to χ by setting its price to χ while any price that is consistent to assigning both buyer types to the vendor is at most 1 for a vendor utility of at most 2. Hence, the amount of subsidies required to enforce the optimal assignment as an equilibrium is at least {a mathematical formula}χ−2 which becomes at least {a mathematical formula}(1−ϵ)SW⁎ by setting χ sufficiently large.  □
     </paragraph>
     <paragraph>
      Even though the minimum amount of subsidies that is sufficient to enforce the optimal assignment as an equilibrium can be large in terms of the optimal social welfare, one might hope that it could be efficiently computable. Unfortunately, this is far from true as we show below in Theorem 12. Before presenting the theorem, let us formally define the corresponding optimization problem: MinSubsidies: Given a price competition game {a mathematical formula}G with an optimal assignment x, compute a price vector p that minimizes the cost {a mathematical formula}s(x,p) over all price vectors to which x is consistent.
     </paragraph>
     <paragraph>
      Notice that MinSubsidies should return an equilibrium {a mathematical formula}(x,p) when one exists. This can be efficiently decided using algorithm CandidatePrice. The hardness of the problem manifests itself in instances that do not admit equilibria. It is not hard to show that, in this case, CandidatePrice does not minimize the amount of subsidies required. This is shown in the following example.
     </paragraph>
     <paragraph label="Example 3">
      Consider the price competition game in the proof of Lemma 4; we repeat it in Table 4.Consider the allocation x where all buyers of type ℓ are assigned to vendor ℓ and all buyers of type r are assigned to vendor r. By applying algorithm CandidatePrice, we obtain the price vector {a mathematical formula}p=(5,5) and the corresponding subsidy vector {a mathematical formula}s(x,p)=(1,1); this amount of subsidies is required so that no vendor has incentive to lower the price to {a mathematical formula}3−ϵ and obtain all buyers and a utility of {a mathematical formula}6−2ϵ. One can observe that the price vector {a mathematical formula}p′=(4.5,4.5) and the corresponding subsidy vector {a mathematical formula}s′(x,p′)=(0.5,0.5) enforces the optimal assignment as an equilibrium using half the amount of subsidies.
     </paragraph>
     <paragraph>
      We now formally prove that no polynomial time algorithm can approximate the minimum amount of subsidies within a constant factor.
     </paragraph>
     <paragraph label="Theorem 12">
      ApproximatingMinSubsidieswithin any constant is NP-hard.
     </paragraph>
     <paragraph label="Proof">
      We will use an approximation-preserving reduction from the Node Cover problem in k-uniform hypergraphs (i.e., hypergraphs in which every edge consists of {a mathematical formula}k≥2 nodes), which is formally described as follows. Node Cover: Given a k-uniform hypergraph G, compute a node subset C of minimum size so that every (hyper)edge e has at least one of its nodes in C. The quantity k in the definition of Node Cover is a constant. It is known that, for every constant {a mathematical formula}ϵ&gt;0, approximating Node Cover within {a mathematical formula}k−1−ϵ is NP-hard [10]. Given a k-uniform hypergraph G, we construct the following price competition game; see also Table 5:
      <list>
       for every edge e of G, there is an edge vendor e and a buyer type {a mathematical formula}be with volume 1 and valuation {a mathematical formula}(k+1)2 for vendor e;for every node j of G, there are: one node vendor j, one auxiliary vendor {a mathematical formula}j⁎, one buyer type {a mathematical formula}bj with volume 1 and valuations {a mathematical formula}k+3 for vendor j and {a mathematical formula}k+2 for every vendor e such that {a mathematical formula}j∈e, and a buyer type {a mathematical formula}bj⁎ with volume {a mathematical formula}1/(k+2) and valuations {a mathematical formula}k+2 for vendor j and {a mathematical formula}k+3 for vendor {a mathematical formula}j⁎.all valuations not mentioned above as well as all production costs are zero.In the optimal assignment
      </list>
      <paragraph label="Proof">
       {a mathematical formula}xˆ, for every node j of G, buyers of type {a mathematical formula}bj are assigned to vendor j, and buyers of type {a mathematical formula}bj⁎ are assigned to vendor {a mathematical formula}j⁎ and, for every edge e of G, buyers of type {a mathematical formula}be are assigned to vendor e. We will show that the minimum amount of subsidies required to enforce this optimal assignment as an equilibrium is equal to the size of a minimum node cover of G. We will need the following lemma.Letpbe a price vector to which assignment{a mathematical formula}xˆis consistent. Then, for every auxiliary vendor{a mathematical formula}j⁎, edge vendor e, and node vendor j,{a mathematical formula}{a mathematical formula}{a mathematical formula}where{sup:1}{a mathematical formula}γj=1−k+1k+21pj⁎−1≥1+min⁡{k+2,mine:j∈e⁡pe}.First, observe that the buyers of type {a mathematical formula}bj⁎ are still assigned to vendor {a mathematical formula}j⁎ when {a mathematical formula}j⁎ deviates to any price {a mathematical formula}pj⁎′ that is at most {a mathematical formula}k+3 (the valuation of {a mathematical formula}bj⁎ for vendor {a mathematical formula}j⁎) and such that the assignment {a mathematical formula}xˆ is still consistent to the new price vector {a mathematical formula}(pj⁎′,p−j⁎), i.e., {a mathematical formula}k+3−pj⁎′≥k+2−pj. Hence, {a mathematical formula}sj⁎(xˆ,p) is equal to the maximum (over all price deviations {a mathematical formula}pj⁎′) utility of the vendor minus the vendor's utility at price {a mathematical formula}pj⁎; this is expressed by (4).A vendor e corresponding to an edge {a mathematical formula}e=(j1,...,jk) of G can attract the buyers of type {a mathematical formula}be by deviating to a price {a mathematical formula}pe′ up to {a mathematical formula}(k+1)2 for a utility of {a mathematical formula}pe′ (up to {a mathematical formula}(k+1)2). Also, vendor e can attract the buyers of type {a mathematical formula}bji by deviating to a price {a mathematical formula}pe′ such that the utility of buyers of type {a mathematical formula}bji when assigned to vendor e is not lower than their utility when assigned to vendor {a mathematical formula}ji, i.e., {a mathematical formula}k+2−pe′≥k+3−pji or {a mathematical formula}pe′≤pji−1. In such a case, the vendor will also attract the buyers of type {a mathematical formula}be as well. When the deviation to a price {a mathematical formula}pe′ attracts the buyers of {a mathematical formula}be and node buyers corresponding to a subset {a mathematical formula}e‾ of at most {a mathematical formula}k−1 nodes of e, the utility will be up to {a mathematical formula}kminji∈e‾⁡{pji−1}. This is never more than {a mathematical formula}k(k+2) since {a mathematical formula}pji for {a mathematical formula}ji∈e‾ must be up to {a mathematical formula}k+3 (the valuation of buyers of type {a mathematical formula}bji for vendor {a mathematical formula}ji) so that {a mathematical formula}xˆ is consistent to the price vector p. Finally, by deviating to any price {a mathematical formula}pe′ up to {a mathematical formula}minji∈e⁡{pji−1}, the utility will be {a mathematical formula}(k+1)pe′, i.e., up to {a mathematical formula}(k+1)minji∈e⁡{pji−1}. Again, {a mathematical formula}se(xˆ,p) is equal to the maximum (over all price deviations {a mathematical formula}pe′) utility of the vendor minus the vendor's utility at price {a mathematical formula}pe, which is expressed by (5).A node vendor j can attract buyers of type {a mathematical formula}bj by deviating to a price {a mathematical formula}pj′ up to {a mathematical formula}k+3 (the valuation of buyers of type {a mathematical formula}bj for vendor j) such that {a mathematical formula}k+3−pj′≥k+2−pe for all edge vendors e corresponding to edges incident to node j in G. Hence, this price can be up to {a mathematical formula}1+min⁡{k+2,mine:j∈e⁡pe}. Also, vendor j can attract buyers of type {a mathematical formula}bj⁎ (from vendor {a mathematical formula}j⁎) by deviating to a price {a mathematical formula}pj′ that satisfies {a mathematical formula}k+2−pj′≥k+3−pj⁎; this price can be up to {a mathematical formula}pj⁎−1. Hence, the maximum utility of vendor j is achieved when deviating to one of the two prices. The volume of buyers attracted is {a mathematical formula}(k+3)/(k+2) when deviating to the lowest of the two values and either 1 (the volume of buyers of type {a mathematical formula}bj) or {a mathematical formula}1/(k+2) (the volume of buyers of type {a mathematical formula}bj⁎) when deviating to the highest among the two values. The quantity {a mathematical formula}γj in the statement of the lemma denotes the volume of buyers attracted by vendor j in the latter case. Then, {a mathematical formula}sj(xˆ,p) is given by the difference between the maximum utility at a deviation and the current vendor's utility in (6).  □Given a node cover C of G, we construct the price vector p with {a mathematical formula}pj⁎=k+3 for every auxiliary vendor {a mathematical formula}j⁎, {a mathematical formula}pe=(k+1)2 for every edge vendor e, {a mathematical formula}pj=k+2 for every node vendor j corresponding to a node {a mathematical formula}j∈C, and {a mathematical formula}pj=k+3 for every other node vendor {a mathematical formula}j∉C. It is easy to see that the optimal assignment is consistent to p. By Lemma 13, we have that {a mathematical formula}sj⁎(xˆ,p)=0 for every auxiliary vendor {a mathematical formula}j⁎, {a mathematical formula}se(xˆ,p)=0 for every edge vendor e, {a mathematical formula}sj(xˆ,p)=1 for every node vendor {a mathematical formula}j∈C and {a mathematical formula}sj(xˆ,p)=0, otherwise. Obviously the cost of {a mathematical formula}s(xˆ,p) is {a mathematical formula}|C|.We will now show that for any price vector p to which the optimal assignment {a mathematical formula}xˆ is consistent, there is a node cover of G of size at most the cost of {a mathematical formula}s(xˆ,p). In order to show this, we will start with an arbitrary price vector p to which {a mathematical formula}xˆ is consistent and will transform it, through a sequence of rounds that will not violate the consistency of {a mathematical formula}xˆ to prices and will not increase the cost of the corresponding subsidies, to a price vector with the following properties: all edge vendors have prices equal to {a mathematical formula}(k+1)2, auxiliary node vendors have prices equal to {a mathematical formula}k+3, node vendors corresponding to a node cover C of G have prices equal to {a mathematical formula}k+2 while the remaining node vendors have prices equal to {a mathematical formula}k+3. The corresponding subsidies are 1 in every node vendor corresponding to a node of C and 0 elsewhere. We describe these rounds in the following. An example of this process is presented in Fig. 2 and Table 6.First, we consider the edge vendors one by one and increase the price of each of them to {a mathematical formula}(k+1)2. Clearly, the increase of the price of any edge vendor can only cause a decrease in the subsidy at the edge vendor (from equation (5)). Also, the increase of the price of any edge vendor that, initially, has value at least {a mathematical formula}k+2 does not increase the subsidy in any auxiliary or node vendor (from equations (4) and (6)). Now consider a vendor corresponding to the edge {a mathematical formula}e=(j1,...,jk) that initially has a price {a mathematical formula}pe of {a mathematical formula}k+2−δ for some {a mathematical formula}δ∈(0,k+2). Increasing this price to {a mathematical formula}(k+1)2 causes a decrease of {a mathematical formula}k2+k−1+δ in the subsidy of the edge vendor e. If e does not have the minimum price among the edge vendors corresponding to edges containing node {a mathematical formula}ji for every {a mathematical formula}ji∈e, the price increase does not affect the subsidies in node vendors {a mathematical formula}ji∈e. Otherwise, by inspecting the right-hand side of (6), we have that the initial subsidies in {a mathematical formula}ji∈e are at least {a mathematical formula}k+3−δ−pji. Clearly, after the edge vendor price increase and since {a mathematical formula}pj⁎≤k+3, the subsidies in node vendor {a mathematical formula}ji are at most {a mathematical formula}k+3−pji; the subsidies in any other vendor are not affected. Overall, we have a decrease in the total amount of subsidies by at least {a mathematical formula}k2+k−1+δ−kδ which is strictly positive since {a mathematical formula}δ≤k+2.After the above round, each edge vendor has a price of {a mathematical formula}(k+1)2 and, since {a mathematical formula}pj⁎≤k+3 for any vendor {a mathematical formula}j⁎, the subsidy of node vendor j is exactly {a mathematical formula}k+3−pj. In a second round, we consider all node vendors with prices strictly smaller than {a mathematical formula}k+2 and increase them to {a mathematical formula}k+2 and all auxiliary vendors with prices strictly smaller than {a mathematical formula}k+3 and increase them to {a mathematical formula}k+3. Observe that (from (4)) the subsidy of an auxiliary vendor is 0 after this round (i.e., it does not increase), the subsidies at edge vendors are not affected (since no node vendor price increases above {a mathematical formula}k+2; see (5)), and the subsidies in node vendors (which are now given by the expression {a mathematical formula}k+3−pj) can only decrease.So, after the first two rounds, all auxiliary vendor prices are equal to {a mathematical formula}k+3, all edge vendor prices are equal to {a mathematical formula}(k+1)2, and the node vendor prices are in {a mathematical formula}[k+2,k+3]. In the third round, we consider all edges of G one by one; for each edge {a mathematical formula}e=(j1,...,jk), we set the minimum price among {a mathematical formula}j1, {a mathematical formula}j2, ..., {a mathematical formula}jk to {a mathematical formula}k+2. Let {a mathematical formula}j′ be this vendor; assuming that the price of {a mathematical formula}j′ is {a mathematical formula}k+2+δ when it is considered (with {a mathematical formula}δ∈[0,1]), this causes a decrease of {a mathematical formula}(k+1)δ in the subsidy of the edge vendor e (as well as possible decreases in the subsidies of other edge vendors corresponding to other edges containing node {a mathematical formula}j′) and an increase of δ in the subsidy of the node vendor {a mathematical formula}j′, i.e., no overall increase. During the last round, all node vendor prices that are strictly higher than {a mathematical formula}k+2 are set to {a mathematical formula}k+3. Increasing the price of a node vendor j can only decrease the subsidies in j, does not affect the subsidies in {a mathematical formula}j⁎, and does not affect the subsidy of any edge vendor corresponding to an edge e containing node j, since there is a node {a mathematical formula}j′∈e so that the price of the node vendor {a mathematical formula}j′ has already been set to {a mathematical formula}k+2, implying an edge vendor subsidy of zero (this follows from (5)). Again, this last round does not increase the total amount of subsidies. Observe that the nodes corresponding to node vendors with price equal to {a mathematical formula}k+2 form a node cover in G. The subsidies in each of these node vendors is exactly 1 while no subsidies correspond to the remaining vendors.  □
      </paragraph>
     </paragraph>
    </section>
    <section label="6">
     <section-title>
      Discussion and open problems
     </section-title>
     <paragraph>
      In this work, we have posed and answered a long list of questions about price competition games among single-product vendors. Of course, our work reveals a lot more open problems. We mention a few here. First, we remark that identifying broad classes of games that always admit equilibria is very interesting. It is not hard to see that games with single-minded buyers, i.e., where each buyer only wishes to be assigned to a single vendor, always have pure equilibria, as essentially each vendor sets the price that maximizes its utility and the buyers either abstain or choose their preferred vendor; note that, in this setting, there is no price competition among vendors. Another class of games that always admits pure equilibria is the following extension of the case in Lemma 3: let there be n buyer types, where {a mathematical formula}vij=v1j+ci, for {a mathematical formula}2≤i≤n where {a mathematical formula}ci≥0 is a constant. Note that, in this setting, all buyer types agree on the same ranking of vendors and that, for fixed i, {a mathematical formula}vij−vij′ is constant for any pair of vendors {a mathematical formula}j,j′; we can adapt the proof of Lemma 3 to prove this claim. However, one can show that the case, where all buyer types agree on the same ranking of vendors but {a mathematical formula}vij−vij′ may vary for different pairs j, {a mathematical formula}j′, does not always admit equilibria. To see that, consider a game with two vendors of production cost 0 and two buyer types of volume 1. Let {a mathematical formula}v11=6, {a mathematical formula}v12=4, {a mathematical formula}v21=5 and {a mathematical formula}v22=0, where again {a mathematical formula}vij denotes the valuation of a buyer of type i for vendor j; it is not hard to show that this game does not admit equilibria.
     </paragraph>
     <paragraph>
      From the algorithmic point of view, observe that we have made no particular attempt to optimize the running time of our algorithms. We believe that there is much room for improvement on the running time of CandidatePrice and Enumerate. In particular, it would be interesting to come up with FPT algorithms (see Downey and Fellows [11]) for PriceCompetition with respect to different parameters. Second, in spite of our inapproximability result (Theorem 12), we believe that it is important to design polynomial-time approximation algorithms for MinSubsidies. For example, is there a logarithmic approximation algorithm? What about additive approximations using an amount of subsidies that exceeds the minimum by at most {a mathematical formula}ρ⋅SW⁎ for some small {a mathematical formula}ρ&gt;0?
     </paragraph>
     <paragraph>
      Another set of open problems comes from introducing constraints to price competition games such as supply limitations. For example, consider additional input parameters that indicate the maximum volume of buyers each vendor can support. We believe that this subtle difference in the definition makes the setting even richer from the computational point of view. Another question concerns mixed equilibria. Do such equilibria always exist? Observe that the strategy spaces of vendors have infinite size in this case. Can they be computed efficiently? What is their price of anarchy? What about generalizations of our model that include uncertainty for buyer valuations? It is our firm belief that these questions deserve investigation.
     </paragraph>
     <paragraph>
      An alternative model for using subsidies is to reimburse the vendors so that a given buyers-to-vendors assignment x results in an equilibrium with the vendors figuring out the corresponding price vector p on their own. Instead, our model reimburses the vendors so that a given pair {a mathematical formula}(x,p) is an equilibrium. Apart from the requirement that the vendors compute collectively an appropriate price vector, we remark that there are cases where this variant leads to higher subsidies; the price competition game in Example 3 is such a case.
     </paragraph>
     <paragraph>
      Finally, it makes sense to consider vendors with concave production costs (that model economies of scale), as opposed to fixed production costs per unit that we consider in the paper. Clearly, all our negative results, such as the existence of price competition games with no pure Nash equilibria and the NP-completeness results, still hold but we do not know if the positive results carry over to this more general setting. We remark that this modification also affects the consequences after a price change. For example, a vendor may decrease its price in order to attract more buyers and, after these buyers select that vendor, the vendor can further reduce its price as now its production cost per item has decreased. These model variants deserve investigation as well.
     </paragraph>
    </section>
   </content>
  </root>
 </body>
</html>