<?xml version="1.0" encoding="utf-8"?>
<html>
 <body>
  <root>
   <title>
    Semantic characterization of rational closure: From propositional logic to description logics.
   </title>
   <content>
    <section label="1">
     <section-title>
      Introduction
     </section-title>
     <paragraph>
      In [31] Kraus Lehmann and Magidor (henceforth KLM) proposed an axiomatic approach to nonmonotonic reasoning based on the notion of plausible inference. Plausible inferences are represented by conditionals of the form {a mathematical formula}A|∼B, to be read as “typically or normally A entails B”. For instance, the conditional assertion {a mathematical formula}monday|∼go_work can be used in order to represent that “normally if it is Monday I go to work”. Conditional entailment is nonmonotonic since from {a mathematical formula}A|∼B one cannot derive {a mathematical formula}A∧C|∼B, in our example from {a mathematical formula}monday|∼go_work one cannot monotonically derive {a mathematical formula}monday∧ill|∼go_work (“normally if it is Monday, even if I am ill I go to work”).
     </paragraph>
     <paragraph>
      KLM presented a hierarchy of axiomatic systems for plausible inference, each system specifies a set of postulates characterizing plausible inference. The systems are, from the weakest to the strongest: cumulative logic C, loop-cumulative logic CL, and most important preferential logic P. In subsequent work [33] preferential logic was strengthened to rational logic R and the latter was proposed as the most adequate system to represent (nonmonotonic) plausible inference.
     </paragraph>
     <paragraph>
      Although it is arguable whether, KLM systems, and in particular R, represent adequately all types of nonmonotonic inferences,{sup:1} we think that KLM systems and the strongest R in particular, are still a significant proposal for nonmonotonic reasoning for two reasons: (a) on a theoretical level, they define a set of inferential properties which are useful (even if not necessarily wanted) to classify and analyze concrete nonmonotonic inference, (b) they provide a simple and direct language to express plausible inferences and to reason about them.
     </paragraph>
     <paragraph>
      In this work we take KLM logic R as the basis of our approach to nonmonotonic reasoning. Even if R formalizes some properties of nonmonotonic inference it is too weak in itself to perform useful nonmonotonic inferences.
     </paragraph>
     <paragraph>
      We have just seen that by the nonmonotonicity of {a mathematical formula}|∼, {a mathematical formula}A|∼B does not entail {a mathematical formula}A∧C|∼B ({a mathematical formula}monday|∼go_work does not entail {a mathematical formula}monday∧ill|∼go_work), and this is a wanted property of {a mathematical formula}|∼: it is what allows to express sets of conditionals that in classical logic would lead to contradictory or absurd conclusions (for instance {a mathematical formula}{monday→go_work,monday∧ill→¬go_work} gives {a mathematical formula}¬(monday∧ill) in classical logic, that is that it is impossible to be ill on Monday). However, there are cases in which, in the absence of information to the contrary, we would like to be able to tentatively infer that also {a mathematical formula}A∧C|∼B, with the possibility of withdrawing the inference in case we discovered that it is inconsistent. For instance, we might want to infer that {a mathematical formula}A∧C|∼B when C is irrelevant with respect to the property B: in the example, we might want to tentatively infer from {a mathematical formula}monday|∼go_work (“normally if it is Monday, I go to work”) that {a mathematical formula}monday∧shines|∼go_work (“normally if it is Monday, even if the sun shines I go to work”), with the possibility of withdrawing the conclusion if we discovered that indeed the sun shining prevents from going to work. R cannot handle irrelevant information in conditionals, and the inferences just exemplified are not supported.
     </paragraph>
     <paragraph>
      Partially motivated by this weakness, Lehmann and Magidor have proposed a true nonmonotonic mechanism on the top of R. Rational closure[33] on the one hand preserves the properties of R, on the other hand it allows to perform some truthful nonmonotonic inferences, like the one just mentioned ({a mathematical formula}monday∧shines|∼go_work). In [33] the authors give a syntactic procedure to calculate the set of conditionals entailed by the rational closure as well as a quite complex semantic construction. It is worth noticing that a strongly related construction has been proposed by Pearl [38] with his notion of 1-entailment, originating from a probabilistic interpretation of conditionals within the well-established System Z.
     </paragraph>
     <paragraph>
      In this paper we provide a semantic reconstruction of rational closure for propositional logic as well as for Description Logics (DLs for short) with a specific attention to the standard {a mathematical formula}ALC. We first consider rational closure as defined by Lehman and Magidor [33] for propositional logic, and we provide a semantic characterization based on a minimal models mechanism on rational models. Then we extend the whole formalism and semantics to Description Logics: we first naturally adapt to DLs Lehman and Magidor's propositional rational closure, starting from an extension of {a mathematical formula}ALC with a typicality operator T that selects the most typical instances of a concept C (the extension is called {a mathematical formula}ALC+TR). For {a mathematical formula}ALC+TR, we provide both a syntactic and a semantical notion of rational closure, along the same lines used for the propositional case: we first define rational closure over the TBox, and subsequently rational closure for the ABox.
     </paragraph>
     <paragraph>
      The first problem we tackle in this work is that of giving a purely semantical characterization of the syntactic notion of rational closure. Our semantic characterization has as its main ingredient the modal semantics of logic R, over which we build a minimal models' mechanism, based on the minimization of the rank of worlds. Intuitively, we prefer the models that minimize the rank of domain elements: the lower the rank of a world, the more normal (or less exceptional) is the world and our minimization corresponds intuitively to the idea of minimizing less-normal or less-plausible worlds (or maximizing most plausible ones). We show that a semantic reconstruction of rational closure can be obtained as a specific instance of a general semantic framework for nonmonotonic reasoning. Within this general framework we give two characterizations of rational closure: one based on a fixed interpretations semantics and the other with a variable interpretations semantics.
     </paragraph>
     <paragraph>
      The theoretical question we address in this first part of the paper is the following:
     </paragraph>
     <list>
      <list-item>
       Given the fact that logic R is characterized by a specific class of Kripke models, what are the Kripke models that characterize the rational closure of a set of positive conditionals?
      </list-item>
     </list>
     <paragraph>
      We notice in passim that our semantic characterization of rational closure in terms of minimal models is different from the one given by Lehmann and Magidor's in [33] which is based on a different notion of minimal models. Moreover we consider our semantic characterization as a specific case of a general minimal models' mechanism for nonmonotonic reasoning, and in this paper we show under what conditions we capture rational closure. The generality of our semantical characterization is well-suited to study variants of rational closure. Finally, the semantic characterization does also easily extend to other logics, as Description Logics ({a mathematical formula}ALC), that we discuss next. In the second part of the paper we consider Description Logics. If propositional KLM systems deal with propositions (“I go to work”) and relations among propositions (“usually, if it is Monday, then I go to work”), Description Logics deal with concepts, relations among concepts, as well as with individuals. In Description Logics one can use concept inclusion in order to express that all the members of a class have a given property (thus {a mathematical formula}Cats⊑Mammal expresses the general property that “cats are mammals”, and {a mathematical formula}Pet⊑∃HasOwner.⊤ that “all pets have an owner”). One can also use assertions in order to represent the fact that an individual has a given property, e.g. {a mathematical formula}Cat(tom) (“Tom is a cat”) or {a mathematical formula}∃HasOwner.⊤(tom) (“Tom has an owner”) or {a mathematical formula}HasOwner(tom,nadeem) (“Nadeem is Tom's owner”). A distinguishing quality of Description Logics is their controlled complexity: the trade-off between expressivity of the languages and good computational complexities is one of the main reasons justifying the success of DLs.
     </paragraph>
     <paragraph>
      Many works in the literature have considered how to extend the basic formalism of Description Logics with nonmonotonic reasoning features [1], [2], [8], [12], [13], [23], [32], [30], [5], [37], [40], [21]; the purpose of these extensions is to allow to reason about prototypical properties of individuals or classes of individuals. In these extensions one can represent, for instance, knowledge expressing the fact that the heart is usually positioned in the left-hand side of the chest, with the exception of people with situs inversus, that have the heart positioned in the right-hand side. Also, one can infer that an individual enjoys all the typical properties of the classes it belongs to. So, for instance, in the absence of information that someone has situs inversus, one would assume that it has the heart positioned in the left-hand side.
     </paragraph>
     <paragraph>
      In spite of the number of work in this direction, the problem of extending DLs for reasoning about prototypical properties seems far from being solved. The most well-known semantics for nonmonotonic reasoning have been used to the purpose, from default logic [1], to circumscription [2], from Lifschitz's nonmonotonic logic MKNF [12], [37] to KLM logics. In particular, concerning KLM logics, in [17] a preferential extension of {a mathematical formula}ALC (called {a mathematical formula}ALC+T) is defined, based on the KLM logic P, and in [5] a defeasible description logic based on the KLM logic R is introduced. In [23] a minimal model semantics for the logic {a mathematical formula}ALC+T is presented.
     </paragraph>
     <paragraph>
      An approach to the definition of rational closure for DLs has been proposed by Casini and Straccia in [8], where a notion of rational closure is defined for {a mathematical formula}ALC through an algorithmic construction similar to the one introduced by Freund in [14] for the propositional calculus. For propositional logic, this construction can be proved to be equivalent to the notion of rational closure proposed by Lehmann and Magidor in [33]. [8] explores the axiomatic properties of this notion of rational closure for {a mathematical formula}ALC, and shows that the notion of default assumption consequence is a rational consequence relation validating the knowledge base. On the other hand, [8] does not consider a semantics for rational closure.
     </paragraph>
     <paragraph>
      In this paper, we take our moves from the notion of propositional rational closure given by Lehmann and Magidor, and we show that it can be naturally extended to the description logic {a mathematical formula}ALC. Furthermore, we investigate its semantics, by extending to {a mathematical formula}ALC the minimal model semantics introduced at the propositional level in order to address question A. The questions we address in the second part of the paper are therefore the following:
     </paragraph>
     <list>
      <list-item>
       What is the natural extension of the well-established notion of rational closure in [33] to Description Logics?
      </list-item>
      <list-item>
       What is the corresponding semantics?
      </list-item>
      <list-item>
       How can this mechanism deal with the ABox?
      </list-item>
     </list>
     <paragraph>
      As we will see, for concept inclusions (TBox) the extension of both the syntactic and the semantical characterization of rational closure from propositional logic to DLs is relatively direct, although the presence of typicality assertions in the ABox makes things not straightforward. Furthermore, the algorithmic construction we propose for ABox reasoning is novel and it entirely relies on the semantical characterization: only once we have extended the semantics for rational closure to take into account ABox individuals, we can provide the corresponding mechanism to compute rational closure of the ABox.
     </paragraph>
     <paragraph>
      As matter of fact, we do not consider our adaption of Lehmann and Magidor's rational closure to DLs as the conclusive solution to the issue of nonmonotonic extensions of Description Logics. Rational closure has some known weaknesses that come together with its recognized advantages (among which, its computational lightness, which is crucial in Description Logics). Both advantages and weaknesses are inherited by its extension to Description Logics. Nevertheless, since rational closure is one of the most established formalisms for nonmonotonic reasoning and it has good computational properties, we think that its application to Description Logics significantly contributes to the quest of nonmonotonic extensions of Description Logics. Furthermore, this work can be regarded as a first step towards the exploration of semantics for more refined versions of rational closure, that overcome some of the known weaknesses of this mechanism (see for instance [9], [11] which combines rational closure with inheritance networks).
     </paragraph>
     <paragraph>
      To summarize the resulting approach: our starting point is the standard Description Logic {a mathematical formula}ALC, more precisely {a mathematical formula}ALC extended with a typicality operator T. The operator T, first introduced in [17], allows to directly express typical properties such as {a mathematical formula}T(HeartPosition)⊑Left, {a mathematical formula}T(Bird)⊑Fly, and {a mathematical formula}T(Penguin)⊑¬Fly, whose intuitive meaning is that, normally, the heart is positioned in the left-hand side of the chest, that typical birds fly, whereas penguins do not. In this paper, the T operator is intended to enjoy the well-established properties of rational logic R. Even if T is a nonmonotonic operator (so that for instance {a mathematical formula}T(HeartPosition)⊑Left does not entail that {a mathematical formula}T(HeartPosition⊓SitusInversus)⊑Left), the logic itself is monotonic. Indeed, in this logic it is not possible to monotonically infer from {a mathematical formula}T(Bird)⊑Fly, in the absence of information to the contrary, that also {a mathematical formula}T(Bird⊓Black)⊑Fly. Nor can it be nonmonotonically inferred from {a mathematical formula}Bird(tweety), in the absence of information to the contrary, that {a mathematical formula}T(Bird)(tweety). Nonmonotonicity is achieved first by adapting to {a mathematical formula}ALC with T the propositional construction of rational closure. This nonmonotonic extension allows to infer typical subsumptions from the TBox (TBox reasoning). Intuitively and similarly to the propositional case, the rational closure construction amounts to assigning a rank (a level of exceptionality) to every concept; this rank is used to evaluate typical inclusions of the form {a mathematical formula}T(C)⊑D: the inclusion is supported by the rational closure whenever the rank of C is strictly smaller than the rank of {a mathematical formula}C⊓¬D. From a semantic point of view, nonmonotonicity is achieved by defining, on the top of {a mathematical formula}ALC with typicality, a minimal model semantics which is similar to the one in [23]. Differently from [23], the notion of minimality used here is based on the minimization of the ranks of the domain elements, rather than on the minimization of the extension of specific concepts. This semantics provides a characterization to the rational closure construction for {a mathematical formula}ALC.
     </paragraph>
     <paragraph>
      Last, we tackle the problem of extending rational closure to ABox reasoning: in order to ascribe typical properties to individuals, we maximize the typicality of an individual. This is done by minimizing its rank (that is, its level of exceptionality). As we will see, because of the interaction between individuals (due to roles) it is not possible to separately assign a unique minimal rank to each individual and alternative minimal ranks must be considered. We end up with a kind of skeptical inference with respect to the ABox.
     </paragraph>
     <paragraph>
      The rational closure construction we propose for {a mathematical formula}ALC has not just a theoretical interest and a simple minimal model semantics. We show that it retains the same complexity of the underlying description logic. For {a mathematical formula}ALC, the problem of deciding whether a typical inclusion belongs to the rational closure of the TBox is in ExpTime as well as the problem of deciding whether an assertion {a mathematical formula}C(a) belongs to the rational closure of the knowledge base over the ABox. In this respect, the proposed approach is less complex than other approaches to nonmonotonic reasoning in DLs such as [23], [2] and comparable in complexity with the approaches in [8], [6], [37], and thus a good candidate to define effective nonmonotonic extensions of DLs. The results on the rational closure in {a mathematical formula}ALC (as an extension of Lehmann and Magidor's rational closure [33]) extensively rely on the finite model property, which holds for {a mathematical formula}ALC. However, the construction of rational closure can be extended to more expressive description logics that do not enjoy the finite model property. Some preliminary results on the rational closure for {a mathematical formula}SHIQ[29] can be found in [26].
     </paragraph>
    </section>
    <section label="2">
     <section-title>
      Propositional rational closure: a semantic characterization
     </section-title>
     <section label="2.1">
      KLM rational system R
      <paragraph>
       The language of logic R consists just of conditional assertions {a mathematical formula}A|∼B. We here consider a richer language which also allows boolean combinations of assertions. Our language {a mathematical formula}L is defined from a set of propositional variables ATM, the boolean connectives and the conditional operator {a mathematical formula}|∼. From propositional variables, propositional formulas are defined as usual in the propositional logic. We use {a mathematical formula}A,B,C,… to denote propositional formulas (that do not contain conditional formulas), whereas {a mathematical formula}F,G,… are used to denote all formulas (including conditionals). The formulas of {a mathematical formula}L are defined as follows: if A is a propositional formula, {a mathematical formula}A∈L; if A and B are propositional formulas, {a mathematical formula}A|∼B∈L; if F is a boolean combination of formulas of {a mathematical formula}L, then {a mathematical formula}F∈L. A knowledge base K is a set of conditional assertions {a mathematical formula}A|∼B. In this work, we restrict our attention to finite knowledge bases.
      </paragraph>
      <paragraph>
       Before presenting the axiomatization of R, let us clarify one point: in its original presentation [33], a conditional {a mathematical formula}A|∼B is considered as a consequence relation between a pair of propositional formulas A and B, so that their systems provide a set of “postulates” (or closure conditions) that the intended consequence relation must satisfy. Alternatively, these postulates may be seen as rules to derive new conditionals from given ones. We take a slightly different viewpoint, shared, among others, by Halpern and Friedman [15] (see Section 8) and Boutilier [4], who proposed a modal interpretation of R: in our understanding, this system is an ordinary logical system in which a conditional {a mathematical formula}A|∼B is a formula belonging to the object language. Whenever we restrict our consideration, as done by Lehmann and Magidor in [33], to the entailment of a conditional from a set of conditionals, the two viewpoints coincide, and a conditional is a logical consequence of a set of conditionals in logic R if and only if it belongs to all rational consequence relations extending that set of conditionals, or (in semantic terms), it is valid in all rational models (as defined by [33]) of that set.
      </paragraph>
      <paragraph>
       Here is the axiomatization of logic R. In our presentation Lehmann and Magidor's postulates/rules are just axioms. We use {a mathematical formula}⊢PC (resp. {a mathematical formula}⊨PC) to denote provability (resp. validity) in the propositional calculus.
      </paragraph>
      <list>
       <list-item>
        All axioms and rules of propositional logic   (PC)
       </list-item>
       <list-item>
        {a mathematical formula}A|∼A   (REF)
       </list-item>
       <list-item>
        if {a mathematical formula}⊢PCA↔B then {a mathematical formula}(A|∼C)→(B|∼C)   (LLE)
       </list-item>
       <list-item>
        if {a mathematical formula}⊢PCA→B then {a mathematical formula}(C|∼A)→(C|∼B)   (RW)
       </list-item>
       <list-item>
        {a mathematical formula}((A|∼B)∧(A|∼C))→(A∧B|∼C)   (CM)
       </list-item>
       <list-item>
        {a mathematical formula}((A|∼B)∧(A|∼C))→(A|∼B∧C)   (AND)
       </list-item>
       <list-item>
        {a mathematical formula}((A|∼C)∧(B|∼C))→(A∨B|∼C)  (OR)
       </list-item>
       <list-item>
        {a mathematical formula}((A|∼B)∧¬(A|∼¬C))→(A∧C|∼B)   (RM)
       </list-item>
      </list>
      <paragraph>
       The axiom (CM) is called cumulative monotony and it is characteristic of all KLM logics, axiom (RM) is called rational monotony and it characterizes the logic of rational entailment R (it is what distinguishes rational from the weaker preferential entailment). In [15], Friedman and Halpern have shown that the axiom system of R is complete with respect to a wide spectrum of different semantics (e.g. possibilistic structures and k-rankings), proposed in order to formalize some forms of nonmonotonic reasoning. This can be explained by the fact that all these models are examples of plausibility structures, and the truth in them is captured by the axioms of R.
      </paragraph>
      <paragraph>
       The logic R enjoys a very simple modal semantics, actually it turns out that it corresponds to the flat fragment of the well-known conditional logic VC[34]. The modal semantics is defined by considering a set of worlds {a mathematical formula}W equipped by an accessibility (or preference) relation &lt;. Intuitively the meaning of {a mathematical formula}x&lt;y is that x is more typical/more normal/less exceptional than y. We say that a conditional {a mathematical formula}A|∼B is true in a model if B holds in all most normal worlds where A is true, i.e. in all &lt;-minimal worlds satisfying A.
      </paragraph>
      <paragraph label="Definition 1">
       A rational model is a triple{a mathematical formula} where:
       <list>
        {a mathematical formula}W is a non-empty set of worlds;&lt; is an irreflexive, transitive relation on {a mathematical formula}W satisfying modularity: for all {a mathematical formula}x,y,z, if {a mathematical formula}x&lt;y then either {a mathematical formula}x&lt;z or {a mathematical formula}z&lt;y. &lt; further satisfies the Smoothness condition defined below;V is a function {a mathematical formula}V:W⟼2ATM, which assigns to every world w the set of atoms holding in that world. If F is a boolean combination of formulas, its truth conditions ({a mathematical formula}M, {a mathematical formula}w⊨F) are defined as for propositional logic. Let A be a propositional formula; we define {a mathematical formula}Min&lt;M(A)={w∈W|M,w⊨A and {a mathematical formula}∀w′, {a mathematical formula}w′&lt;w implies {a mathematical formula}M,w′⊭A}. Moreover:{a mathematical formula} if for all {a mathematical formula}w′, if {a mathematical formula}w′∈Min&lt;M(A) then {a mathematical formula}M,w′⊨B.Validity and satisfiability of a formula are defined as usual. We say that a formula
       </list>
       <paragraph>
        F is satisfiable if there is a rational model {a mathematical formula}M=〈W,&lt;,V〉 and a world {a mathematical formula}w∈W such that {a mathematical formula}M,w⊨F. We say that a formula F is valid in a rational model {a mathematical formula}M=〈W,&lt;,V〉, and we write {a mathematical formula}M⊨F, if, for all {a mathematical formula}w∈W, it holds that {a mathematical formula}M,w⊨F. We say that a formula F is valid if it is valid in all rational models, i.e. if, for all rational models {a mathematical formula}M=〈W,&lt;,V〉, it holds that {a mathematical formula}M⊨F.Given a set of formulas K of {a mathematical formula}L and a model {a mathematical formula}M=〈W,&lt;,V〉, we say that {a mathematical formula}M is a model of K, written {a mathematical formula}M⊨K, if for every {a mathematical formula}F∈K and every {a mathematical formula}w∈W, we have that {a mathematical formula}M,w⊨F. K rationally entails a formula F, written {a mathematical formula}K⊨F if F is valid in all rational models of K.
       </paragraph>
      </paragraph>
      <paragraph>
       It is easy to see from Definition 1 that the truth condition of {a mathematical formula}A|∼B is “global” in a model {a mathematical formula}M=〈W,&lt;,V〉: given a world w, we have that {a mathematical formula}M,w⊨A|∼B if, for all {a mathematical formula}w′, if {a mathematical formula}w′∈Min&lt;M(A) then {a mathematical formula}M,w′⊨B. It immediately follows that {a mathematical formula}A|∼B holds in w if and only if {a mathematical formula}A|∼B is valid in a model, i.e. it holds that {a mathematical formula}M,w′⊨A|∼B for all {a mathematical formula}w′ in {a mathematical formula}W; for this reason we will often write {a mathematical formula}M⊨A|∼B. Moreover, when the reference to the model {a mathematical formula}M is unambiguous, we will simply write {a mathematical formula}Min&lt;(A) instead of {a mathematical formula}Min&lt;M(A).
      </paragraph>
      <paragraph>
       Theorems 6.8 and 6.9 in [18] provide a constructive proof of the following finite model property of R.
      </paragraph>
      <paragraph label="Fact 1">
       Given a set of formulas K, if it is satisfiable, then it is satisfiable in a finite model. Furthermore, if a given F is satisfiable in a model of K (for{a mathematical formula}K⊭¬F), then F is satisfiable in a finite model of K.
      </paragraph>
      <paragraph>
       From now on, we will restrict our consideration to rational models with a finite set of worlds.
      </paragraph>
      <paragraph>
       Given a rational model {a mathematical formula}M=〈W,&lt;,V〉, let us now define the rank {a mathematical formula}kM(w) of a world w and the rank {a mathematical formula}kM(F) of a formula F.
      </paragraph>
      <paragraph label="Definition 2">
       {a mathematical formula}Rank kM(w) of a world in MGiven a (finite) rational model {a mathematical formula}M=〈W,&lt;,V〉, the rank {a mathematical formula}kM of a world {a mathematical formula}w∈W, written {a mathematical formula}kM(w), is the length of the longest chain {a mathematical formula}w0&lt;…&lt;w from w to a minimal {a mathematical formula}w0 (i.e. there is no {a mathematical formula}w′ such that {a mathematical formula}w′&lt;w0).
      </paragraph>
      <paragraph>
       This definition makes sense even if the relation &lt; is not modular. Observe that, for a modular relation on a finite set, all maximal chains{sup:2} from an element w to a minimal {a mathematical formula}w0 have the same length.
      </paragraph>
      <paragraph>
       The previous definition defines from &lt; a rank function {a mathematical formula}kM:W⟼N. The opposite is also possible and in general in rational models the rank function {a mathematical formula}kM and &lt; can be defined from each other by letting {a mathematical formula}x&lt;y if and only if {a mathematical formula}kM(x)&lt;kM(y) (this is similarly stated by [33] where a rank function k over a possibly infinite set is used, since there is no restriction to finite models) Hence, modular preferential models are called ranked models.
      </paragraph>
      <paragraph label="Definition 3">
       Rank {a mathematical formula}kM(F) of a formula in a modelThe rank {a mathematical formula}kM(F) of a formula F in a model {a mathematical formula}M is {a mathematical formula}i=min{kM(w):M,w⊨F}. If there is no w such that {a mathematical formula}M,w⊨F, then we say F has no rank in {a mathematical formula}M.
      </paragraph>
      <paragraph>
       It is easy to observe that:
      </paragraph>
      <paragraph label="Proposition 1">
       For any{a mathematical formula}M=〈W,&lt;,V〉, we have{a mathematical formula}M⊨A|∼Bif and only if{a mathematical formula}kM(A∧B)&lt;kM(A∧¬B)or A has no rank in{a mathematical formula}M.
      </paragraph>
     </section>
     <section label="2.2">
      <section-title>
       Lehmann and Magidor's definition of rational closure
      </section-title>
      <paragraph>
       Although the operator {a mathematical formula}|∼ is nonmonotonic, the notion of rational entailment (defined in Definition 1) in itself is monotonic: if {a mathematical formula}K⊨F and {a mathematical formula}K⊆K⁎ then also {a mathematical formula}K⁎⊨F.
      </paragraph>
      <paragraph>
       In order to strengthen R, Lehmann and Magidor in [33] propose the well-known mechanism of rational closure. As already mentioned, the main motivation of Lehmann and Magidor leading to the definition of rational closure was technical: it turns out that the intersection of all rational consequence relations satisfying a set of conditionals coincides with the weaker preferential consequence relation satisfying that set (that is weaker in that it does not satisfy (RM)), so that (i) the axiom/rule (RM) does not add anything and (ii) such relation in itself fails to satisfy (RM). Lehmann and Magidor's notion of rational closure provides a solution to both problems and can be seen as the “minimal” (in some sense) rational consequence completing a set of conditionals.
      </paragraph>
      <paragraph>
       Since in rational closure no boolean combination of conditionals is allowed, in the following, the knowledge base K is just a finite set of positive conditional assertions of the form {a mathematical formula}A|∼B. In such a case, rational entailment is equivalent to preferential entailment.
      </paragraph>
      <paragraph label="Definition 4">
       Exceptionality of propositional formulas and conditional formulasLet K be a knowledge base (i.e. a finite set of positive conditional assertions) and A a propositional formula. A is said to be exceptional for K if and only if {a mathematical formula}K⊨⊤|∼¬A. A conditional formula {a mathematical formula}A|∼B is exceptional for K if its antecedent A is exceptional for K. The set of conditional formulas of K which are exceptional for K will be denoted as {a mathematical formula}E(K).
      </paragraph>
      <paragraph>
       It is possible to define a non-increasing sequence of subsets of K, {a mathematical formula}C0⊇C1,C1⊇C2,… by letting {a mathematical formula}C0=K and, for {a mathematical formula}i&gt;0, {a mathematical formula}Ci the set of conditionals of {a mathematical formula}Ci−1 exceptional for {a mathematical formula}Ci−1, i.e. {a mathematical formula}Ci=E(Ci−1). Observe that, being K finite, there is an {a mathematical formula}n≥0 such that {a mathematical formula}Cn=∅ or for all {a mathematical formula}m&gt;n, {a mathematical formula}Cm=Cn. The sets {a mathematical formula}Ci are used to define the rank of a formula, as in the next definition. Notice that if there is an m such that {a mathematical formula}Cm=Cm+1, then for all {a mathematical formula}k&gt;m, it will hold that {a mathematical formula}Cm=Ck (indeed {a mathematical formula}E(Cm)=E(Cm+1)=…=E(Ck)).
      </paragraph>
      <paragraph label="Definition 5">
       Rank of a formulaA propositional formula A has rank i (for K), written {a mathematical formula}rank(A)=i, if and only if i is the least natural number for which A is not exceptional for {a mathematical formula}Ci. If A is exceptional for all {a mathematical formula}Ci then A has no rank.
      </paragraph>
      <paragraph>
       As mentioned above, we can restrict our consideration to sequences {a mathematical formula}C0,…,Cn where {a mathematical formula}Cn is the first set in the sequence such that either {a mathematical formula}Cn=∅ or {a mathematical formula}Cn=Cn+1: in both cases for all {a mathematical formula}t&gt;n, {a mathematical formula}Ct=Cn, therefore the formulas exceptional for {a mathematical formula}Ct and {a mathematical formula}Cn coincide. For this reason, if a formula A has a rank, then {a mathematical formula}rank(A)≤n.
      </paragraph>
      <paragraph>
       The notion of rank of a formula allows to define the rational closure of a knowledge base K.
      </paragraph>
      <paragraph label="Definition 6">
       Rational closure {a mathematical formula}K¯ of KLet K be a conditional knowledge base. The rational closure {a mathematical formula}K¯ of K is the set of all {a mathematical formula}A|∼B such that either (1) the rank of A is strictly less than the rank of {a mathematical formula}A∧¬B (this includes the case A has a rank and {a mathematical formula}A∧¬B has none), or (2) A has no rank.
      </paragraph>
      <paragraph>
       This mechanism, which is now well-established, allows to overcome some weaknesses of R. First of all, it is closed under rational monotonicity (RM): if {a mathematical formula}(A|∼B)∈K¯ and {a mathematical formula}(A|∼¬C)∉K¯ then {a mathematical formula}(A∧C)|∼B∈K¯. Furthermore, rational closure supports some of the wanted inferences that R does not support. For instance rational closure allows to deal with irrelevance: from {a mathematical formula}monday|∼go_work, it does support the nonmonotonic conclusion that {a mathematical formula}monday∧shines|∼go_work. In order to see that {a mathematical formula}monday∧shines|∼go_work belongs to the rational closure of {a mathematical formula}K={monday|∼go_work}, observe that {a mathematical formula}K⊭⊤|∼¬(monday∧shines), therefore {a mathematical formula}rank(monday∧shines)=0. On the other hand, {a mathematical formula}K⊨⊤|∼¬(monday∧shines∧¬go_work), therefore {a mathematical formula}rank(monday∧shines∧¬go_work)&gt;0, from which we derive our nonmonotonic conclusion.
      </paragraph>
     </section>
     <section label="2.3">
      <section-title>
       A semantic characterization of rational closure
      </section-title>
      <paragraph>
       Can we capture rational closure semantically?
      </paragraph>
      <paragraph>
       We aim to provide a semantic reconstruction of rational closure in terms of a minimal models' mechanism, thus providing an instantiation of the following general recipe for nonmonotonic reasoning:
      </paragraph>
      <list>
       <list-item label="(i)">
        fix an underlying modal semantics for conditionals (here we concentrate on R but another possible choice could have been the weaker P, as done for instance in [19], [23], [17]),
       </list-item>
       <list-item label="(ii)">
        obtain nonmonotonic inference by restricting semantic consequence to a class of “minimal” models. These minimal models should be chosen on the basis of semantic considerations, independent from the language and from the set of conditionals (knowledge base) whose nonmonotonic consequences we want to determine.
       </list-item>
      </list>
      <paragraph>
       In some respects, this approach is similar in spirit to “minimal models” approaches to nonmonotonic reasoning, such as circumscription [35]. However, as a difference with circumscription, the models (i) have a modal semantics, and (ii) the preference relation among models is independent from the language. This second aspect is also what differentiates this general recipe from other previous proposals such as [19], in which the idea is that preferred models are those ones that minimize the truth of specific formulas of the form {a mathematical formula}¬□¬A.
      </paragraph>
      <paragraph>
       The minimal model mechanism is based on comparing different models in order to see which one is preferred. As for circumscription, there are mainly two ways of comparing models with the same domain:
      </paragraph>
      <list>
       <list-item label="•">
        by keeping the valuation function fixed (only comparing {a mathematical formula}M and {a mathematical formula}M′ if V and {a mathematical formula}V′ in the two models coincide);
       </list-item>
      </list>
      <paragraph>
       or
      </paragraph>
      <list>
       <list-item label="•">
        by comparing {a mathematical formula}M and {a mathematical formula}M′ also in case {a mathematical formula}V≠V′.
       </list-item>
      </list>
      <paragraph>
       We consider the two possible semantics resulting from these alternatives.
      </paragraph>
      <paragraph>
       As already mentioned, in this paper we limit our attention to knowledge bases K that are finite and that contain only positive conditionals. We begin by proving a property that links the rank {a mathematical formula}kM of a formula in any rational model {a mathematical formula}M of a given knowledge base K and the rank of that formula as calculated in the definition of rational closure (Definition 5). The proof is similar to that of Lemma 5.18 in [33].
      </paragraph>
      <paragraph>
       In the next proposition we shall use the notion of {a mathematical formula}Mi defined as follows. Let {a mathematical formula}M=〈W,&lt;,V〉 be any rational model of K. Let {a mathematical formula}M0=M and, for all i, let {a mathematical formula}Mi=〈Wi,&lt;i,Vi〉 be the rational model obtained from {a mathematical formula}M by removing all the worlds w with {a mathematical formula}kM(w)&lt;i, i.e., {a mathematical formula}Wi={w∈W|kM(w)≥i}. The {a mathematical formula}Ci sets are those ones used to define the rank of a formula in Definition 5.
      </paragraph>
      <paragraph label="Proof">
       Let{a mathematical formula}M=〈W,&lt;,V〉be any rational model of K. For any propositional formula A, if{a mathematical formula}rank(A)≥i, then 1){a mathematical formula}kM(A)≥i, and 2) if{a mathematical formula}A|∼Bis rationally entailed by{a mathematical formula}Ci, then{a mathematical formula}Misatisfies{a mathematical formula}A|∼B.By induction on i. For {a mathematical formula}i=0, statement 1) holds, since it always holds that {a mathematical formula}kM(A)≥0. Statement 2) also holds trivially.For {a mathematical formula}i&gt;0, 1) holds: if {a mathematical formula}rank(A)≥i, then by Definition 5 for all {a mathematical formula}j&lt;i, {a mathematical formula}Cj⊨⊤|∼¬A. By inductive hypothesis on 2), for all {a mathematical formula}j&lt;i we have {a mathematical formula}Mj⊨⊤|∼¬A. Hence, for all w with {a mathematical formula}kM(w)&lt;i, {a mathematical formula}M,w⊨¬A, and {a mathematical formula}kM(A)≥i. To prove 2), we reason as follows. Since {a mathematical formula}Ci⊆C0, {a mathematical formula}M⊨Ci. Furthermore by definition of rank, for all {a mathematical formula}A|∼B∈Ci, {a mathematical formula}rank(A)≥i, hence by 1) just proved {a mathematical formula}kM(A)≥i. Hence {a mathematical formula}Min&lt;M(A)⊆Wi, and (given that {a mathematical formula}M⊨A|∼B) also {a mathematical formula}Mi⊨A|∼B. Therefore {a mathematical formula}Mi⊨Ci.  □
      </paragraph>
      <paragraph>
       A consequence of the previous proposition is the following.
      </paragraph>
      <paragraph label="Proof">
       Let{a mathematical formula}M=〈W,&lt;,V〉be any rational model of K. For all w such that{a mathematical formula}kM(w)=i, it holds that{a mathematical formula}M,w⊨{A→B|A|∼B∈Ci}.Let {a mathematical formula}M=〈W,&lt;,V〉 be any rational model of K. If {a mathematical formula}i=0, then for a contradiction suppose for some w with {a mathematical formula}kM(w)=0, and for some {a mathematical formula}A→B:A|∼B∈C0, {a mathematical formula}M,w⊨A∧¬B. In this case obviously {a mathematical formula}w∈Min&lt;M(A), which contradicts that {a mathematical formula}Min&lt;M(A)⊆{w∈W|M,w⊨B} (being {a mathematical formula}M a model of K and {a mathematical formula}A|∼B∈K). Therefore the proposition must hold. If {a mathematical formula}i&gt;0 we repeat the same reasoning just done by considering {a mathematical formula}Mi instead of {a mathematical formula}M: by Proposition 2, {a mathematical formula}Mi satisfies {a mathematical formula}Ci. By reasoning as for {a mathematical formula}i=0 we conclude that for all w with {a mathematical formula}kMi(w)=0, {a mathematical formula}Mi,w⊨{A→B:A|∼B∈Ci}. By definition of {a mathematical formula}Mi it follows that, for all w, it holds {a mathematical formula}kM(w)=i, then {a mathematical formula}M,w⊨{A→B:A|∼B∈Ci}.  □
      </paragraph>
      <paragraph label="Proof">
       Before we conclude the section we introduce one last proposition that we will use in the following. For all K and A, if{a mathematical formula}K⊨A|∼⊥, then for all{a mathematical formula}Ci,{a mathematical formula}Ci⊨A|∼⊥, and{a mathematical formula}Ci⊨⊤|∼¬A, i.e. A has no rank.Suppose for a contradiction that {a mathematical formula}K⊨A|∼⊥, but for some i, {a mathematical formula}Ci⊭A|∼⊥. In particular, let us consider the least i such that {a mathematical formula}Ci⊭A|∼⊥. By definition of {a mathematical formula}Ci we can assume that {a mathematical formula}C0⊃…⊃Ci−1⊃Ci. Consider a model {a mathematical formula}M=〈W,&lt;,V〉 of {a mathematical formula}Ci in which it does not hold that {a mathematical formula}A|∼⊥, i.e. in which {a mathematical formula}{w∈W|M⊨A}≠∅. By definition of {a mathematical formula}Ci, for all conditionals {a mathematical formula}A1|∼B1…An|∼Bn in {a mathematical formula}Ci−1−Ci, it holds that {a mathematical formula}Ci−1⊭⊤|∼¬A1,…,Ci−1⊭⊤|∼¬An, i.e. there are rational models {a mathematical formula}M1=〈W1,&lt;1,V1〉,…,Mn=〈Wn,&lt;n,Vn〉 of {a mathematical formula}Ci−1 in which {a mathematical formula}⊤|∼¬A1,…,⊤|∼¬An does not hold, respectively, i.e., in which there are worlds {a mathematical formula}x1,…,xn (respectively) such that {a mathematical formula}kM1(x1)=0,…,kMn(xn)=0, and {a mathematical formula}M1,x1⊨A1,…,Mn,xn⊨An. Consider now the model {a mathematical formula}M′=〈W′,&lt;′,V′〉 obtained from {a mathematical formula}M by letting {a mathematical formula}W′=W∪{x1,…,xn}, {a mathematical formula}V′=V for all worlds of {a mathematical formula}W, whereas {a mathematical formula}V=V1,…,Vn for the worlds {a mathematical formula}x1,…,xn respectively. Let {a mathematical formula}kM′(x1)=0,…,kM′(xn)=0, whereas for all {a mathematical formula}w∈W, let {a mathematical formula}kM′(w)=kM(w)+1. Define {a mathematical formula}&lt;′ accordingly. We can prove that {a mathematical formula}M′ satisfies {a mathematical formula}Ci−1: for conditionals {a mathematical formula}Ai|∼Bi in {a mathematical formula}Ci this follows since for sure the minimal {a mathematical formula}Ai-worlds will be worlds already in the starting {a mathematical formula}M (since {a mathematical formula}Ci−1⊨⊤|∼¬Ai hence none of the {a mathematical formula}x1,…,xn is an {a mathematical formula}Ai-world), and keep satisfying {a mathematical formula}Ai|∼Bi as they did it in {a mathematical formula}M. For {a mathematical formula}Ai|∼Bi∈Ci−1−Ci, by construction of {a mathematical formula}M′, the minimal {a mathematical formula}Ai-worlds will be one of the {a mathematical formula}x1,…,xn just introduced, and they satisfy the conditional since they did so in the original models. Furthermore in {a mathematical formula}M′ there is an A-world (for the A of the proposition), which shows that {a mathematical formula}Ci−1⊭A|∼⊥. This contradicts the assumption that i is the least natural number such that {a mathematical formula}Ci⊭A|∼⊥.  □
      </paragraph>
      <section label="2.3.1">
       <section-title>
        Fixed versus variable interpretations minimal models semantics
       </section-title>
       <paragraph>
        The first semantics we consider is a fixed interpretations minimal semantics, for short FIMS.
       </paragraph>
       <paragraph label="Definition 7">
        FIMSGiven models {a mathematical formula}M=〈W,&lt;,V〉 and {a mathematical formula}M′=〈W′,&lt;′,V′〉, we say that {a mathematical formula}M is preferred to {a mathematical formula}M′ with respect to the fixed interpretations minimal semantics, and we write {a mathematical formula}M&lt;FIMSM′, if
       </paragraph>
       <list>
        <list-item label="•">
         {a mathematical formula}W=W′
        </list-item>
        <list-item label="•">
         {a mathematical formula}V=V′
        </list-item>
        <list-item label="•">
         for all x, {a mathematical formula}kM(x)≤kM′(x) whereas there exists {a mathematical formula}x′ such that {a mathematical formula}kM(x′)&lt;kM′(x′).
        </list-item>
       </list>
       <paragraph label="Proposition 5">
        Given a finite model{a mathematical formula}Mof K, either{a mathematical formula}Mis a minimal FIMS model of K or there is a finite minimal FIMS model{a mathematical formula}M′of K such that{a mathematical formula}M′&lt;FIMSM.
       </paragraph>
       <paragraph label="Definition 8">
        In our second semantics, we let the interpretations vary. The semantics is called variable interpretations minimal semantics, for short VIMS. VIMSGiven models {a mathematical formula}M=〈W,&lt;,V〉 and {a mathematical formula}M′=〈W′,&lt;′,V′〉 we say that {a mathematical formula}M is preferred to {a mathematical formula}M′ with respect to the variable interpretations minimal semantics, and write {a mathematical formula}M&lt;VIMSM′, if
       </paragraph>
       <list>
        <list-item label="•">
         {a mathematical formula}W=W′
        </list-item>
        <list-item label="•">
         for all x, {a mathematical formula}kM(x)≤kM′(x) whereas there exists {a mathematical formula}x′ such that {a mathematical formula}kM(x′)&lt;kM′(x′).
        </list-item>
       </list>
       <paragraph>
        It is easy to realize that the two semantics, FIMS and VIMS, define different sets of minimal models. This is illustrated by the following example.
       </paragraph>
       <paragraph label="Example 1">
        Let {a mathematical formula}K={penguin|∼bird,penguin|∼¬fly,bird|∼fly}. We derive that {a mathematical formula}K⊭FIMSpenguin∧black|∼¬fly. Indeed in FIMS there can be a model {a mathematical formula}M in which {a mathematical formula}W={x,y,z}, {a mathematical formula}V(x)={penguin,bird,fly,black}, {a mathematical formula}V(y)={penguin,bird}, {a mathematical formula}V(z)={bird,fly}, and {a mathematical formula}z&lt;y&lt;x. {a mathematical formula}M is a model of K, and it is minimal with respect to FIMS (indeed once fixed {a mathematical formula}V(x),V(y),V(z) as above, it is not possible to lower the rank of x nor of y nor of z unless we falsify K). Furthermore, in {a mathematical formula}Mx is a typical world in which “it is a penguin” and “it is black” hold (since there is no other world satisfying the same propositions which is preferred to it) where “it flies” holds. Therefore, {a mathematical formula}K⊭FIMSpenguin∧black|∼¬fly.On the other hand, {a mathematical formula}M is not minimal with respect to VIMS. Indeed, consider the model {a mathematical formula}M′=〈W,&lt;′,V′〉 obtained from {a mathematical formula}M by letting {a mathematical formula}V′(x)={penguin,bird,black}, {a mathematical formula}V′(y)=V(y), {a mathematical formula}V′(z)=V(z) and by defining {a mathematical formula}&lt;′ as: {a mathematical formula}z&lt;′y and {a mathematical formula}z&lt;′x. Clearly {a mathematical formula}M′⊨K, and {a mathematical formula}M′&lt;VIMSM, since {a mathematical formula}kM′(x)&lt;kM(x), while {a mathematical formula}kM′=kM for all other worlds.
       </paragraph>
       <paragraph>
        The example above shows that FIMS and VIMS lead to different sets of minimal models for a given K. Notice, however, that the model {a mathematical formula}M′ we have used to illustrate this fact is not a minimal model for K in VIMS. A minimal model in VIMS for K that can be defined on the set of worlds {a mathematical formula}W is given by {a mathematical formula}V(x)=V(y)=V(z)={bird,fly}, and the empty relation &lt;. This is quite a degenerate model of K in which “it is a penguin” is never true. This illustrates the strength of VIMS: in case of knowledge bases that only contain positive conditionals, logical entailment in VIMS collapses into classical logic entailment. This feature corresponds to a similar feature of the nonmonotonic logic {a mathematical formula}Pmin in [19] (see Section 2.4), can be proven in the same way, and leads to the following proposition.
       </paragraph>
       <paragraph label="Proposition 6">
        Let K be a set of positive conditionals. Let us replace all formulas of the form{a mathematical formula}A|∼Bin K with{a mathematical formula}A→B, and call{a mathematical formula}K∘the resulting set of formulas. We have that{a mathematical formula}K⊨VIMSA|∼Bif and only if{a mathematical formula}K∘⊨PCA→B.
       </paragraph>
       <paragraph>
        As for {a mathematical formula}Pmin this strong feature of VIMS can be prevented by adding existence assertions to the knowledge base, in the example we could add, for instance, {a mathematical formula}¬(penguin|∼⊥) to force us to consider non-trivial models where the proposition “it is a penguin” is satisfied. In the next section, we will apply VIMS in a similar way, by restricting our consideration to knowledge bases that include existence assertions (expressed by negated conditionals).
       </paragraph>
      </section>
      <section label="2.3.2">
       <section-title>
        A semantic reconstruction of rational closure
       </section-title>
       <paragraph>
        Can we capture rational closure within one or the other of the semantics above? A first conjecture might be that the FIMS of Definition 7 could capture rational closure. However, we are soon forced to recognize that this is not the case. For instance, Example 1 above illustrates that {a mathematical formula}{penguin|∼bird,penguin|∼¬fly,bird|∼fly}⊭FIMSpenguin∧black|∼¬fly. On the contrary, it can be easily verified that {a mathematical formula}penguin∧black|∼¬fly is in the rational closure of {a mathematical formula}{penguin|∼bird,penguin|∼¬fly,bird|∼fly}. Therefore, FIMS as it is does not allow us to define a semantics corresponding to rational closure. Things change if we consider FIMS applied to models that contain all possible valuations compatible with a given knowledge base K. We call these models canonical models.
       </paragraph>
       <paragraph label="Example 2">
        Consider Example 1 above. If we restrict our attention to models that also contain a world w with {a mathematical formula}V(w)={penguin,bird,black} which satisfies “it is a penguin”, “it is black” and “it does not fly” in which w is a typical world satisfying “it is a penguin”, we are able to conclude that typically it holds that if it is a penguin and it is black then it does not fly, the same as in rational closure. Indeed, in all minimal FIMS models of K that also contain w with {a mathematical formula}V(w)={penguin,bird,black}, it holds that {a mathematical formula}penguin∧black|∼¬fly (in particular, in Example 1 above, adding w to {a mathematical formula}M would give {a mathematical formula}z&lt;w and {a mathematical formula}w&lt;x).
       </paragraph>
       <paragraph>
        We are led to the conjecture that FIMS restricted to canonical models could be the right semantics for rational closure. Canonical models are defined with respect to the language {a mathematical formula}L restricted to the propositional variables occurring in the knowledge base and in the query. Given a knowledge base K and a query Q, let {a mathematical formula}ATMK,Q be the set of all the propositional variables of ATM occurring in K or in the query Q, and let {a mathematical formula}LK,Q be the restriction of the language {a mathematical formula}L to the propositional variables in {a mathematical formula}ATMK,Q.
       </paragraph>
       <paragraph>
        A truth assignment {a mathematical formula}v:ATMK,Q⟶{true,false} is compatible with K, if there is no propositional formula {a mathematical formula}A∈LK,Q such that {a mathematical formula}v(A)=true and {a mathematical formula}K⊨A|∼⊥ (where v is extended to arbitrary propositional formulas as usual).
       </paragraph>
       <paragraph label="Definition 9">
        Canonical modelA model {a mathematical formula}M=〈W,&lt;,V〉 satisfying a knowledge base K is said to be canonical if it contains (at least) a world associated to each truth assignment compatible with K, that is to say: if v is compatible with K, then there exists a world w in {a mathematical formula}W such that, for all propositional formulas {a mathematical formula}B∈LK,Q, {a mathematical formula}M,w⊨B if and only if {a mathematical formula}v(B)=true.
       </paragraph>
       <paragraph>
        It can be easily shown that, for any knowledge base, a minimal canonical FIMS model exists: this is any canonical model in which every possible world w has the rank associated to the conjunction of all atoms and negated atoms in {a mathematical formula}LK,Q that it satisfies. This is stated by the following theorem.
       </paragraph>
       <paragraph label="Proof">
        For any satisfiable K there exists a finite minimal canonical FIMS model{a mathematical formula}M.Since K is satisfiable consider a model {a mathematical formula}M=〈W,&lt;,V〉 of K. Given the finite model property of R, we can assume, without loss of generality that {a mathematical formula}M has a finite set of worlds. Let {a mathematical formula}v1,…,vr be any enumeration of the truth assignments {a mathematical formula}vi:ATMK,Q⟶{true,false} compatible with K. Observe that, since {a mathematical formula}ATMK,Q is a finite set of propositional variables, the truth assignments {a mathematical formula}vi as defined above are finitely many.We proceed starting from {a mathematical formula}M and extending it by the addition of new worlds. Let {a mathematical formula}M0=M. For each i, from 1 to r, we reason as follows. If there is no world in {a mathematical formula}Mi−1 associated to {a mathematical formula}vi, consider a model {a mathematical formula}M′=〈W′,&lt;′,V′〉 of K in which there is at least a world associated to {a mathematical formula}vi. Such a model {a mathematical formula}M′ exists since {a mathematical formula}vi is compatible with K. By Fact 1, we can assume {a mathematical formula}M′ to be finite as well. We add to {a mathematical formula}Mi−1 all the worlds in {a mathematical formula}M′, to get {a mathematical formula}Mi=〈Wi,&lt;i,Vi〉, where: (1) {a mathematical formula}Wi=Wi−1∪W′; (2) {a mathematical formula}&lt;i is defined as {a mathematical formula}&lt;i−1 on the worlds in {a mathematical formula}Wi−1; it is defined as {a mathematical formula}&lt;′ on the worlds in {a mathematical formula}W′ and, for all {a mathematical formula}x∈Wi−1 and {a mathematical formula}y∈W′, {a mathematical formula}x&lt;iy; (3) {a mathematical formula}Vi is defined as {a mathematical formula}Vi−1 on the worlds in {a mathematical formula}Wi−1 and it is defined as {a mathematical formula}V′ on the worlds in {a mathematical formula}W′.Observe, that the resulting model {a mathematical formula}Mi is the juxtaposition of the two models {a mathematical formula}Mi−1 and {a mathematical formula}M′, where the rank of each world in {a mathematical formula}Mi−1 is lower than the rank of each world in {a mathematical formula}M′. It is finite, as both {a mathematical formula}Mi−1 and {a mathematical formula}M′ are finite.It is easy to see that, if {a mathematical formula}Mi−1 satisfies K, then {a mathematical formula}Mi satisfies K as well. Consider any conditional {a mathematical formula}C|∼B∈K, and any world {a mathematical formula}w∈Min&lt;iMi(C). Then either {a mathematical formula}w∈Wi−1 or {a mathematical formula}w∈W′. If {a mathematical formula}w∈Wi−1, then {a mathematical formula}w∈Min&lt;iMi−1(C), by the definition of {a mathematical formula}&lt;i. Since {a mathematical formula}Mi−1 is a model of K, {a mathematical formula}Mi−1⊨C|∼B and {a mathematical formula}Mi−1,w⊨B. By construction, {a mathematical formula}Vi(w)=Vi−1(w), so that {a mathematical formula}Mi,w⊨B, and {a mathematical formula}Mi⊨C|∼B. If {a mathematical formula}w∈W′, then {a mathematical formula}w∈Min&lt;iM′(C), by the definition of {a mathematical formula}&lt;i. Since {a mathematical formula}M′ is a model of K, {a mathematical formula}M′⊨C|∼B and {a mathematical formula}M′,w⊨B. By construction, {a mathematical formula}Vi(w)=V′(w), so that {a mathematical formula}Mi,w⊨B, and {a mathematical formula}Mi⊨C|∼B.Given that {a mathematical formula}M0=M is a model of K, we conclude that all the {a mathematical formula}M1,M2,…,Mr are models of K. After all the valuations {a mathematical formula}v1,…,vr have been considered, we obtain a model {a mathematical formula}Mr of K which is canonical and is finite as well, as we have only considered finite models in the construction of {a mathematical formula}Mr. From {a mathematical formula}Mr, by Proposition 5, we can obtain a minimal canonical FIMS model.  □
       </paragraph>
       <paragraph>
        In the following, we show that the canonical models that are minimal with respect to FIMS are an adequate semantic counterpart of rational closure.
       </paragraph>
       <paragraph label="Proposition 7">
        Let{a mathematical formula}M=〈W,&lt;,V〉be a canonical model of K, minimal with respect to{a mathematical formula}&lt;FIMS. Given{a mathematical formula}i∈N, for all{a mathematical formula}w∈Wit holds that: if{a mathematical formula}M,w⊨A→Bfor all{a mathematical formula}A|∼Bin{a mathematical formula}Ci, then{a mathematical formula}kM(w)≤i.
       </paragraph>
       <paragraph label="Proof">
        The proof is by induction on i. If {a mathematical formula}i=0, suppose for a contradiction that there is a w such that {a mathematical formula}M,w⊨A→B for all {a mathematical formula}A|∼B in {a mathematical formula}C0, but {a mathematical formula}kM(w)&gt;0. Then it can be easily seen that the canonical model obtained from {a mathematical formula}M by simply changing {a mathematical formula}kM(w) into 0 is still a model of {a mathematical formula}C0=K and it is preferred to {a mathematical formula}M, thus contradicting the minimality of {a mathematical formula}M.For {a mathematical formula}i&gt;0, we reason in a similar way: let us consider {a mathematical formula}w∈W such that for all {a mathematical formula}A|∼B in {a mathematical formula}Ci, {a mathematical formula}M,w⊨A→B but {a mathematical formula}kM(w)&gt;i. Let {a mathematical formula}M′ be a model obtained from {a mathematical formula}M by changing &lt; in order to have {a mathematical formula}kM′(w)=i. {a mathematical formula}M′ is preferred to {a mathematical formula}M and it is a model of K, as it satisfies all the conditionals in K. Let {a mathematical formula}A|∼B∈K. It is clear that, for all the worlds {a mathematical formula}w′∈W with {a mathematical formula}w′≠w, {a mathematical formula}w′ satisfies {a mathematical formula}A|∼B in {a mathematical formula}M′, as it satisfies it in {a mathematical formula}M. To show that w satisfies {a mathematical formula}A|∼B, let {a mathematical formula}w∈Min&lt;M′(A). If {a mathematical formula}A|∼B in {a mathematical formula}Ci, we know from the hypothesis that w satisfies {a mathematical formula}A→B, and hence, w satisfies B. If {a mathematical formula}A|∼B in {a mathematical formula}K−Ci, there is a {a mathematical formula}j&lt;i such that {a mathematical formula}A|∼B∈Cj, {a mathematical formula}Cj⊭⊤|∼¬A while {a mathematical formula}Cj−1⊨⊤|∼¬A. From {a mathematical formula}Cj⊭⊤|∼¬A, it follows that there is a model {a mathematical formula}Mj of {a mathematical formula}Cj with a {a mathematical formula}w∘ such that {a mathematical formula}kMj(w∘)=0 and {a mathematical formula}w∘ satisfies A. By Proposition 3, we have that {a mathematical formula}Mj,w∘ satisfies {a mathematical formula}{A→B:A|∼B∈Cj}∪{A}, hence {a mathematical formula}Cj⊭A1→B1∧…∧Am→Bm∧A|∼⊥ and, by Proposition 4, we have that {a mathematical formula}K⊭A1→B1∧…∧Am→Bm∧A|∼⊥. Since {a mathematical formula}M′ (as {a mathematical formula}M) is canonical, it follows that there is a world {a mathematical formula}w⁎∈W such that {a mathematical formula}w⁎ satisfies all the implications {a mathematical formula}A′→B′ s.t. {a mathematical formula}A′|∼B′ in {a mathematical formula}Cj and {a mathematical formula}w⁎ satisfies A. By inductive hypothesis, {a mathematical formula}kM(w⁎)&lt;i, and therefore {a mathematical formula}kM(A)&lt;i. By construction of {a mathematical formula}M′, {a mathematical formula}kM′(w⁎)&lt;i, and therefore {a mathematical formula}kM′(A)&lt;i which contradicts the hypothesis that {a mathematical formula}w∈Min&lt;M′(A). Hence, {a mathematical formula}M′ satisfies all the conditionals in K. The fact that {a mathematical formula}kM(w)&gt;i and {a mathematical formula}kM′(w)=i contradicts the minimality of {a mathematical formula}M. Hence, it must be {a mathematical formula}kM(w)≤i, and the proof is over.  □
       </paragraph>
       <paragraph label="Proposition 8">
        Let{a mathematical formula}Mbe a canonical model of K minimal with respect to{a mathematical formula}&lt;FIMS. Then, given{a mathematical formula}i∈N,{a mathematical formula}rank(A)=iif and only if{a mathematical formula}kM(A)=i.
       </paragraph>
       <paragraph label="Proof">
        (Only if part) Let us assume that {a mathematical formula}rank(A)=i. By definition of rank, we know that {a mathematical formula}Ci⊭⊤|∼¬A. Then there is a rational model {a mathematical formula}M′ of {a mathematical formula}Ci that does not satisfy {a mathematical formula}⊤|∼¬A. In {a mathematical formula}M′ there must be a world {a mathematical formula}w′, with {a mathematical formula}kM′(w′)=0 such that {a mathematical formula}M′,w′⊨A. For all propositional formulas {a mathematical formula}B∈L, such that {a mathematical formula}M′,w′⊨B, it must be the case that {a mathematical formula}Ci that does not satisfy {a mathematical formula}⊤|∼¬B in {a mathematical formula}M′. Hence, for all propositional formulas {a mathematical formula}B∈L, such that {a mathematical formula}M′,w′⊨B, {a mathematical formula}Ci⊭⊤|∼¬B. Let {a mathematical formula}B′ be the conjunction of all these Bs. Clearly, A is one of the conjuncts of {a mathematical formula}B′. Furthermore, {a mathematical formula}Ci⊭⊤|∼¬B′. By Proposition 4, from {a mathematical formula}Ci⊭⊤|∼¬B′, it follows that {a mathematical formula}K⊭B′|∼⊥. Let v be the truth assignment associated with the world {a mathematical formula}w′ of {a mathematical formula}M′. Then v is compatible with K. Since {a mathematical formula}M is a canonical model, there must be a world {a mathematical formula}w∈W of {a mathematical formula}M such that for all propositional formulas {a mathematical formula}B∈L, {a mathematical formula}M,w⊨B if and only if {a mathematical formula}v(B)=true. In particular, we have that {a mathematical formula}M,w⊨A. We show that, for all {a mathematical formula}D|∼B∈Ci, {a mathematical formula}M,w⊨D→B. Observe that D and B are propositional formulas and that their valuation is the same in w and in {a mathematical formula}w′. Hence it is sufficient to show that {a mathematical formula}M′,w′⊨D→B, for all {a mathematical formula}D|∼B∈Ci. This follows from the fact that {a mathematical formula}M′,w′⊨D|∼B holds for all {a mathematical formula}D|∼B∈Ci. Indeed, if {a mathematical formula}M′,w′⊭D, it trivially holds that {a mathematical formula}M′,w′⊨D→B. If {a mathematical formula}M′,w′⊨D, then (since {a mathematical formula}kM′(w′)=0), {a mathematical formula}w′∈Min&lt;′M′(D), and hence {a mathematical formula}M′,w′⊨B. Thus, {a mathematical formula}M′,w′⊨D→B.Now, there is a world {a mathematical formula}w∈W such that, for all {a mathematical formula}D|∼B∈Ci, w satisfies {a mathematical formula}D→B. By Proposition 7, {a mathematical formula}kM(w)≤i. Since w satisfies A, {a mathematical formula}kM(A)≤i. As by Proposition 2 we know that {a mathematical formula}kM(A)≥i, we can conclude that {a mathematical formula}kM(A)=i.(If part) This direction is obvious, given the only if part: if {a mathematical formula}kM(A)=i, then {a mathematical formula}rank(A)=i. Indeed, by absurd, if {a mathematical formula}rank(A)=j≠i, then {a mathematical formula}kM(A)=j≠i, against the hypothesis.  □
       </paragraph>
       <paragraph label="Proposition 9">
        A direct consequence of Proposition 8 together with the observation that if a formula has a rank then its maximal value is n where n is the last element of {a mathematical formula}C0⊃…⊃Cn such that {a mathematical formula}Cn=∅ or such that for all {a mathematical formula}m&gt;n, {a mathematical formula}Cm=Cn is stated in the following proposition. Let n be the last element of{a mathematical formula}C0⊃…⊃Cnsuch that{a mathematical formula}Cn=∅or such that for all{a mathematical formula}m&gt;n{a mathematical formula}Cm=Cn, then in all minimal canonical models{a mathematical formula}M, for all worlds w,{a mathematical formula}kM(w)≤n.
       </paragraph>
       <paragraph>
        We can now prove the following theorem:
       </paragraph>
       <paragraph label="Theorem 2">
        Let K be a knowledge base and{a mathematical formula}Mbe a canonical model of K minimal with respect to{a mathematical formula}&lt;FIMS. We show that, for all conditionals{a mathematical formula}A|∼B∈L:{a mathematical formula}where{a mathematical formula}K¯is the rational closure of K.
       </paragraph>
       <paragraph label="Proof">
        (Only if part) Let us assume that {a mathematical formula}M=〈W,&lt;,V〉 satisfies {a mathematical formula}A|∼B. Then, for each world {a mathematical formula}w∈Min&lt;(A), w satisfies B. If {a mathematical formula}Min&lt;(A)=∅, then there is no w s.t. {a mathematical formula}M,w⊨A, hence A has no rank in {a mathematical formula}M and, by Proposition 8, A has no rank. In this case, by Definition 6, {a mathematical formula}A|∼B∈K¯. Let us assume that {a mathematical formula}kM(A)=i. As {a mathematical formula}kM(A∧B)&lt;kM(A∧¬B), then {a mathematical formula}kM(A∧¬B)&gt;i. By Proposition 8, {a mathematical formula}rank(A)=i and {a mathematical formula}rank(A∧¬B)&gt;i. Hence, by Definition 6, {a mathematical formula}A|∼B∈K¯.(If part) If {a mathematical formula}A|∼B belongs to {a mathematical formula}K¯, then, by Definition 6, either (a) {a mathematical formula}rank(A)&lt;rank(A∧¬B) (or A has a rank and {a mathematical formula}A∧¬B has not), or (b) A has no rank. In the first case (a), by Proposition 8 we have that {a mathematical formula}kM(A)&lt;kM(A∧¬B), which entails {a mathematical formula}kM(A∧B)&lt;kM(A∧¬B). Hence {a mathematical formula}M satisfies {a mathematical formula}A|∼B. In case, A has a rank and {a mathematical formula}A∧¬B has not, suppose {a mathematical formula}rank(A)=i. By Proposition 8, {a mathematical formula}kM(A)=i. It is easy to show that {a mathematical formula}kM(A∧¬B)&gt;i. If, by absurdum, {a mathematical formula}kM(A∧¬B)≤i, by Proposition 8, we would have {a mathematical formula}rank(A∧¬B)≤i, against the hypothesis that {a mathematical formula}A∧¬B has no rank.In case (b), by Proposition 8, A has no rank in {a mathematical formula}M, hence {a mathematical formula}M satisfies {a mathematical formula}A|∼B.  □
       </paragraph>
       <paragraph label="Definition 10">
        In Theorem 2 we have shown a correspondence between rational closure and minimal models with fixed interpretations, on the proviso that we restrict our attention to minimal canonical models. We can obtain the same effect by extending K into {a mathematical formula}K′ by adding negated conditionals: Let K be a knowledge base. We define{a mathematical formula} (that is C is a conjunction of literals whose propositional variables occur in the knowledge base or in the query).
       </paragraph>
       <paragraph>
        Indeed it can be easily verified that all models of {a mathematical formula}K′ are canonical, hence restricting FIMS to canonical models on the one hand and considering the extension of K as {a mathematical formula}K′ on the other hand amounts to the same effect. We can therefore restate Theorem 2 above as follows:
       </paragraph>
       <paragraph label="Theorem 3">
        Let K be a knowledge base and let{a mathematical formula}K′be defined as inDefinition 10. It holds that{a mathematical formula}where{a mathematical formula}K¯is the rational closure of K.
       </paragraph>
       <paragraph>
        Notice that the size of {a mathematical formula}K′ is exponential in that of K.
       </paragraph>
       <paragraph>
        Before we go any further, let us point out that this characterization of rational closure, in terms of minimal canonical FIMS models, is related to Lehmann and Magidor's semantical characterization in [33]: we use canonical models, as they do, and we show a correspondence between the rank of a formula (syntactically defined in terms of exceptionality) and the rank of the formula in minimal canonical FIMS models. However the definition of minimal canonical FIMS models that we use here, based on a specific preference relation between different canonical models, is different from the definition provided in [33] (see Section 5.3, Definition 20) where the involved preference relation is defined in terms of conditionals satisfied in the compared models.
       </paragraph>
       <paragraph label="Example 3">
        We may wonder whether the restriction to canonical models can be lifted by adopting a semantics based on variable valuations. In general the answer is negative. We have already mentioned that, if we consider knowledge bases containing only positive conditionals, logical entailment in VIMS collapses into classical logic entailment. To avoid this collapse, we can require that, when we are checking for entailment of a conditional {a mathematical formula}A|∼B from a K, at least an {a mathematical formula}A∧B-world and an {a mathematical formula}A∧¬B-world be present in the models of K. This can be obtained by adding to K the conditionals {a mathematical formula}¬(A∧B|∼⊥) and {a mathematical formula}¬(A∧¬B|∼⊥). Also in this case, however, we cannot give a positive answer to the above question. Indeed, it is possible to build a model of K, minimal with respect to VIMS, which falsifies a conditional {a mathematical formula}A|∼B which, on the contrary, is satisfied in all the canonical minimal models of K under FIMS. This is shown by the following: Let K be as follows:{a mathematical formula} Let{a mathematical formula}{a mathematical formula} and let{a mathematical formula} We define a model {a mathematical formula}M=(W,&lt;,V) of {a mathematical formula}K′, which is minimal with respect to VIMS, as follows: {a mathematical formula}W={x,w,y1.y2,y3}, where:{a mathematical formula}{a mathematical formula}{a mathematical formula}{a mathematical formula}{a mathematical formula} with {a mathematical formula}kM(y1)=0, {a mathematical formula}kM(y2)=1, {a mathematical formula}kM(y3)=1, {a mathematical formula}kM(x)=2 and {a mathematical formula}kM(w)=2. Observe that: x is an {a mathematical formula}A∧B-minimal world; w is an {a mathematical formula}A∧¬B-minimal world; {a mathematical formula}y1 is an S-minimal world; {a mathematical formula}y2 is a minimal world for R, L, E and H; and {a mathematical formula}y3 is a D-minimal world.{a mathematical formula}M is a model of K which is minimal with respect to VIMS. Also, {a mathematical formula}A|∼B is falsified in {a mathematical formula}M, while, on the contrary, {a mathematical formula}A|∼B holds in all the canonical models minimal with respect to FIMS. Indeed, in all such models the rank of {a mathematical formula}k(A∧B)=1 while {a mathematical formula}k(A∧¬B)=2. However, it is not possible to construct a model {a mathematical formula}M′ with 5 worlds so that {a mathematical formula}M′&lt;VIMSM. In particular, lowering the rank of w is never possible, since w is a non-typical D-world, and typical D-worlds are non-typical ⊤-worlds, hence w will always have rank at least 2. For x we reason in a different way: although in principle it could have rank 1, assigning to x rank 1 entails that there are at least 4 distinct R, L, E and H-worlds with rank 0. But this is impossible given that we have only 5 worlds in the model. In order to satisfy all these formulas by a single world, we have to introduce a world at level 1 (which can be a non-S and therefore satisfy pairs of these formulas). This is world {a mathematical formula}y2, whose rank cannot therefore be lowered. {a mathematical formula}y2 cannot be a D-world, we therefore need {a mathematical formula}y3 which is a minimal D-world that can have rank at least 1 and whose rank cannot therefore be lowered.
       </paragraph>
       <paragraph>
        As suggested by this example, in order to characterize rational closure in terms of VIMS, we should restrict our consideration to models which contain “enough” worlds. In the following, as in Theorem 3, we enrich K with negated conditionals but, as a difference with {a mathematical formula}K′ of Theorem 3, we only need to add to K a polynomial number of negated conditionals (instead of an exponential number). The purpose of the addition is that of restricting our attention to models that are minimal with respect to {a mathematical formula}&lt;VIMS and that have a set of worlds “large” enough to have, in principle, a distinct most-preferred world for each antecedent of conditionals in K. Intuitively, this condition discards the models, as the one illustrated by the example above, in which a formula (e.g. {a mathematical formula}A∧B) has a rank higher than the rank it could have just because there are not enough worlds (and lowering the rank of a formula would lead to the falsification of some conditionals in K).
       </paragraph>
       <paragraph>
        For this reason, we expand K into {a mathematical formula}K″ by adding, for each antecedent C of a conditional formulas in K, a new corresponding atom {a mathematical formula}ϕC, and by requiring that all these new atoms are mutually disjoint. This will guarantee that all models of {a mathematical formula}K″ will have a distinct world satisfying each newly introduced atom {a mathematical formula}ϕC and its corresponding formula C. Furthermore, if the problem to be addressed is that of knowing whether {a mathematical formula}A|∼B is logically entailed by K, we also introduce {a mathematical formula}ϕA∧B and {a mathematical formula}ϕA∧¬B in order to also have a distinct world associated to {a mathematical formula}A∧B and {a mathematical formula}A∧¬B. This is stated in a formal way in the following definition.
       </paragraph>
       <paragraph label="Definition 11">
        Given a knowledge base K, we define:
       </paragraph>
       <list>
        <list-item label="•">
         {a mathematical formula}AK,A|∼B={C|either,for some D,C|∼D∈K or C=A∧B or C=A∧¬B, and K⊭C|∼⊥};
        </list-item>
        <list-item label="•">
         {a mathematical formula}K″=K∪{¬(C∧ϕC|∼⊥):C∈AK,A|∼B}∪{(ϕCi∧ϕCj|∼⊥):Ci,Cj∈AK,A|∼B}.
        </list-item>
       </list>
       <paragraph>
        We can now establish a correspondence between FIMS and VIMS. By virtue of Theorem 2, this allows us to establish a correspondence between rational closure and VIMS, as stated by Theorem 1.
       </paragraph>
       <paragraph label="Theorem 4">
        Let{a mathematical formula}Mbe a canonical model of K, minimal with respect to FIMS, and let{a mathematical formula}K″be the extension of K defined as inDefinition 11. We have that:{a mathematical formula}
       </paragraph>
       <paragraph label="Proof">
        We show the contrapositive of the two directions.First, suppose {a mathematical formula}K″⊭VIMSA|∼B. Let {a mathematical formula}M′=〈W′,&lt;′,V′〉 be a model of {a mathematical formula}K″ minimal with respect to {a mathematical formula}&lt;VIMS that does not satisfy {a mathematical formula}A|∼B, i.e., such that {a mathematical formula}kM′(A∧¬B)≤kM′(A∧B). We want to show that also {a mathematical formula}M⊭A|∼B, i.e., {a mathematical formula}kM(A∧¬B)≤kM(A∧B). For a contradiction, suppose in the canonical {a mathematical formula}M, {a mathematical formula}kM(A∧¬B)=j&gt;kM(A∧B)=i. By Proposition 2, Proposition 8, {a mathematical formula}kM′(A∧¬B)≥j and {a mathematical formula}kM′(A∧B)≥i, and since by hypothesis {a mathematical formula}kM′(A∧¬B)≤kM′(A∧B), it follows that {a mathematical formula}kM′(A∧B)≥j&gt;i. We show that this goes against the minimality of {a mathematical formula}M′.From {a mathematical formula}M and {a mathematical formula}M′ we build a model {a mathematical formula}M⁎=〈W⁎,&lt;⁎,V⁎〉 such that {a mathematical formula}M⁎ is a model of {a mathematical formula}K″ and {a mathematical formula}M⁎&lt;VIMSM′. In particular, for each formula in {a mathematical formula}AK,A|∼B, we include in {a mathematical formula}W⁎ a minimal world from {a mathematical formula}M satisfying that formula. More precisely, we introduce in {a mathematical formula}W⁎ the following worlds from {a mathematical formula}M: {a mathematical formula}x∈Min&lt;M(A∧B), {a mathematical formula}x′∈Min&lt;M(A∧¬B) and a world {a mathematical formula}y∈Min&lt;M(C), for each C antecedent of a conditional in K s.t. {a mathematical formula}K⊭C|∼⊥. For these worlds, we define {a mathematical formula}V⁎=V and {a mathematical formula}kM⁎=kM. If the same element y is associated to two different formulas it must be duplicated into y and {a mathematical formula}y′ (and {a mathematical formula}V⁎(y′)=V⁎(y) and {a mathematical formula}kM⁎(y′)=kM⁎(y)). Furthermore, for each world y introduced as a representative of {a mathematical formula}Min&lt;M(C), {a mathematical formula}V⁎(y) is extended in order to include {a mathematical formula}ϕC. {a mathematical formula}&lt;⁎ is straightly defined from {a mathematical formula}kM⁎ in the obvious way. The construction is almost finished. Notice that up to this point we have introduced in {a mathematical formula}W⁎ no more elements than those in {a mathematical formula}W′. To conclude we have to rename the elements of {a mathematical formula}W⁎ with the names as the elements of {a mathematical formula}W′ that satisfy the same {a mathematical formula}ϕC, and we have to add to {a mathematical formula}W⁎ the elements of {a mathematical formula}W′ that are eventually missing (we let for these cases {a mathematical formula}V⁎=V′ and {a mathematical formula}kM⁎=kM′).It can be shown that {a mathematical formula}M⁎ is a model of {a mathematical formula}K″, and {a mathematical formula}M⁎&lt;VIMSM′, against the minimality of {a mathematical formula}M′. First of all, we show that {a mathematical formula}M⁎ is a model of {a mathematical formula}K″. Indeed, by construction we have introduced a new element y of {a mathematical formula}M for each C antecedent of a conditional in K or equal to {a mathematical formula}A∧B or {a mathematical formula}A∧¬B, and this element is still in {a mathematical formula}Min&lt;M⁎(C) (otherwise, {a mathematical formula}kM⁎(C)&lt;kM⁎(y)=kM(y)=kM(C), against Proposition 2, Proposition 8). Furthermore, {a mathematical formula}V⁎(y) includes {a mathematical formula}ϕC. Hence, {a mathematical formula}M⁎ satisfies all conditionals introduced in {a mathematical formula}K″ with form {a mathematical formula}¬(C∧ϕC)|∼⊥. Consider now the positive conditionals {a mathematical formula}C|∼D in {a mathematical formula}K″, that were already in K. Hence, consider any y inserted in {a mathematical formula}M⁎ from {a mathematical formula}M. Let {a mathematical formula}y∈Min&lt;M⁎(C). Then also {a mathematical formula}y∈Min&lt;M(C) (otherwise there would be another {a mathematical formula}y′∈Min&lt;M(C) with {a mathematical formula}M,y′⊨C and {a mathematical formula}kM(y′)&lt;kM(y) that would have been taken in the construction; and by construction in {a mathematical formula}M⁎ it would hold that {a mathematical formula}M⁎,y′⊨C and {a mathematical formula}kM⁎(y′)&lt;kM⁎(y), against {a mathematical formula}y∈Min&lt;M⁎(C)). Since {a mathematical formula}M is a model of K, and {a mathematical formula}C|∼D∈K, {a mathematical formula}M,y⊨D, hence also {a mathematical formula}M⁎,y⊨D. Consider now y introduced in {a mathematical formula}M⁎ from {a mathematical formula}M′. If {a mathematical formula}y∈Min&lt;M⁎(C), then we reason as follows to show that {a mathematical formula}y∈Min&lt;M′(C). First of all, we know that {a mathematical formula}kM⁎(y)=kM(C). Indeed in {a mathematical formula}M⁎ we have inserted a {a mathematical formula}y′ that was in {a mathematical formula}Min&lt;M(C). As shown above, {a mathematical formula}y′∈Min&lt;M⁎(C). Hence {a mathematical formula}kM⁎(y)=kM⁎(y′) and {a mathematical formula}kM⁎(y)=kM(C). But by construction {a mathematical formula}kM⁎(y)=kM′(y) and if {a mathematical formula}y∉Min&lt;M′(C), there would be a {a mathematical formula}y′ s.t. {a mathematical formula}M′,y′⊨C and {a mathematical formula}kM′(y′)&lt;kM′(y), hence {a mathematical formula}kM′(C)&lt;kM(C), against Proposition 2, Proposition 8. Hence, since {a mathematical formula}C|∼D holds in {a mathematical formula}M′, {a mathematical formula}M′,y⊨D and by construction also {a mathematical formula}M,y⊨D.For the conditionals with form {a mathematical formula}ϕCi∧ϕCj|∼⊥: they hold in {a mathematical formula}M⁎ since we have suitably extended {a mathematical formula}V⁎ in order to include at most one {a mathematical formula}ϕC at a time.Last, it obviously holds that {a mathematical formula}M⁎&lt;VIMSM′. Indeed the set of worlds of the two models coincide, and for all y taken from {a mathematical formula}M′, {a mathematical formula}kM⁎(y)=kM′(y), and for all y taken from {a mathematical formula}M, they were introduced as representatives of a given C antecedent of a conditional or equal to {a mathematical formula}A∧B, {a mathematical formula}A∧¬B. For all these formulas by Proposition 2, Proposition 8, it holds that {a mathematical formula}kM⁎(C)=kM(C)≤kM′(C), hence {a mathematical formula}kM⁎(y)≤kM′(C). Furthermore, for {a mathematical formula}A∧B we have shown above that {a mathematical formula}kM⁎(A∧B)=kM(A∧B)=i&lt;kM′(A∧B), hence {a mathematical formula}M⁎&lt;VIMSM′, which contradicts the minimality of {a mathematical formula}M′. We conclude that if {a mathematical formula}K″⊭VIMSA|∼B, then also {a mathematical formula}K⊭FIMSA|∼B.For the other direction, suppose {a mathematical formula}M⊭A|∼B, i.e., {a mathematical formula}kM(A∧¬B)≤kM(A∧B). Let {a mathematical formula}kM(A∧¬B)=i and {a mathematical formula}kM(A∧B)=j. Consider the model {a mathematical formula}M⁎ built as in the first part of the construction used above. More precisely {a mathematical formula}M⁎=〈W⁎,&lt;⁎,V⁎〉 is built from {a mathematical formula}M by cutting out its portion containing: x in {a mathematical formula}Min&lt;M(A∧B), {a mathematical formula}x′∈Min&lt;M(A∧¬B) and an element {a mathematical formula}y∈Min&lt;M(C) for each antecedent C of a conditional in K. {a mathematical formula}V⁎=V and {a mathematical formula}kM⁎=kM. If the same element y is associated to two different formulas, it must be duplicated into y and {a mathematical formula}y′ (and {a mathematical formula}V⁎(y′)=V⁎(y) and {a mathematical formula}kM⁎(y′)=kM⁎(y)). Furthermore, for each world y associated to a formula C, {a mathematical formula}V⁎(y) is extended in order to include {a mathematical formula}ϕC. Last, {a mathematical formula}&lt;⁎ is defined from {a mathematical formula}kM⁎ in the obvious way. By reasoning similarly to what we have done above, we can show that {a mathematical formula}M⁎ is a model of {a mathematical formula}K″. Furthermore, there cannot be an {a mathematical formula}M⁎′&lt;VIMSM⁎. Indeed, any model of {a mathematical formula}K″ must have a distinct element x satisfying {a mathematical formula}C∧ϕC for each C in {a mathematical formula}AK,A|∼B. Now suppose there was a model {a mathematical formula}M⁎′ of {a mathematical formula}K″ with {a mathematical formula}M⁎′&lt;VIMSM⁎. If {a mathematical formula}M⁎′&lt;VIMSM⁎, then for some x, {a mathematical formula}kM⁎′(x)&lt;kM⁎(x). Suppose in {a mathematical formula}M⁎,x⊨C∧ϕC (and hence also {a mathematical formula}M⁎′,x⊨C∧ϕC). By construction of {a mathematical formula}M⁎, {a mathematical formula}kM⁎(x)=kM(C). If {a mathematical formula}kM⁎′(x)&lt;kM⁎(x), then {a mathematical formula}kM⁎′(C)&lt;kM⁎(C), against Proposition 2, Proposition 8. We conclude that it cannot hold {a mathematical formula}M⁎′&lt;VIMSM⁎, hence {a mathematical formula}M⁎ is a minimal VIMS model of {a mathematical formula}K″. Furthermore by construction {a mathematical formula}kM⁎(A∧¬B)≤kM⁎(A∧B). We conclude that {a mathematical formula}K″⊭VIMSA|∼B.  □
       </paragraph>
       <paragraph>
        From Theorem 2 and Theorem 4 just shown, it follows that:
       </paragraph>
       <paragraph label="Corollary 1">
        Let K be a knowledge base. Given{a mathematical formula}K″defined as inDefinition 11, it holds that{a mathematical formula}where{a mathematical formula}K¯is the rational closure of K.
       </paragraph>
       <paragraph>
        We conclude the section with a comparison with the related works on rational closure.
       </paragraph>
      </section>
     </section>
     <section label="2.4">
      Relation with {a mathematical formula}Pmin and Pearl's System Z
      <paragraph>
       In [19] an alternative nonmonotonic extension of preferential logic P called {a mathematical formula}Pmin is proposed. Similarly to the semantics presented in this work, {a mathematical formula}Pmin is based on a minimal modal semantics. However the preference relation among models is defined in a different way. Intuitively, in {a mathematical formula}Pmin the fact that a world x is a minimal A-world is expressed by the fact that x satisfies {a mathematical formula}A∧□¬A, where □ is defined with respect to the inverse of the preference relation (i.e. with respect to the accessibility relation given by Ruv if and only if {a mathematical formula}v&lt;u). The idea is that preferred models are those that minimize the set of worlds where {a mathematical formula}¬□¬A holds, that is A-worlds which are not minimal. As a difference from the approach presented in this work, the semantics of {a mathematical formula}Pmin is defined starting from preferential models, in which the relation &lt; is irreflexive and transitive (thus, no longer modular).
      </paragraph>
      <paragraph>
       {a mathematical formula}Pmin is a nonmonotonic logic considering only P models that, intuitively, minimize the non-typical worlds. More precisely, given a set of formulas K, a model {a mathematical formula}M=〈WM,&lt;M,VM〉 of K and a model {a mathematical formula}N=〈WN,&lt;N,VN〉 of K, we say that {a mathematical formula}M is preferred to {a mathematical formula}N if {a mathematical formula}WM=WN, and the set of pairs {a mathematical formula}(w,¬□¬A) such that {a mathematical formula}M,w⊨¬□¬A is strictly included in the corresponding set for {a mathematical formula}N. A model {a mathematical formula}M is a minimal model for K if it is a model of K and there is not a model {a mathematical formula}M′ of K which is preferred to {a mathematical formula}M. Entailment in {a mathematical formula}Pmin is restricted to minimal models of a given set of formulas K. In Section 3 of [19] it is observed that the logic {a mathematical formula}Pmin turns out to be quite strong. In general, if we only consider knowledge bases containing only positive conditionals, we get the same trivialization result (part of Proposition 1 in [19]) as the one contained in Proposition 6 for VIMS. This does not hold for rational closure. This is the reason why we have introduced the additional assumptions in order to obtain an equivalence with rational closure. Similarly, in order to tackle this trivialization in {a mathematical formula}Pmin, Section 3 in [19] is focused on the so called well-behaved knowledge bases, that explicitly include that A is possible ({a mathematical formula}¬(A|∼⊥)) for all conditional assertions {a mathematical formula}A|∼B in the knowledge base.
      </paragraph>
      <paragraph>
       We may now wonder whether {a mathematical formula}Pmin is equivalent to VIMS, which is seemingly the closer semantics.
      </paragraph>
      <paragraph>
       Or whether VIMS is equivalent to a stronger version of {a mathematical formula}Pmin obtained by replacing P with R as the underlying logic. We call {a mathematical formula}Rmin this stronger version of {a mathematical formula}Pmin.
      </paragraph>
      <paragraph label="Example 4">
       Let {a mathematical formula}K={PhD|∼¬worker,PhD|∼adult,adult|∼worker,italian|∼house_owner,PhD|∼¬house_owner}. What do we derive in {a mathematical formula}Pmin and {a mathematical formula}Rmin, and what in VIMS? By what said above, since K only contains positive conditionals, both in {a mathematical formula}Pmin and {a mathematical formula}Rmin, on the one side, and in VIMS, on the other side, we derive that {a mathematical formula}italian∧PhD|∼⊥. So let us add to K the constraint that people who are Italian and have a PhD do exist by introducing in K a conditional {a mathematical formula}¬(italian∧PhD|∼⊥), thus obtaining: {a mathematical formula}K′={PhD|∼¬worker,PhD|∼adult,adult|∼worker,italian|∼house_owner,PhD|∼¬house_owner,¬(italian∧PhD|∼⊥)}.Notice that, since {a mathematical formula}¬(italian∧PhD|∼⊥) entails both that {a mathematical formula}¬(italian|∼⊥) and that {a mathematical formula}¬(PhD|∼⊥), and that this in turn entails {a mathematical formula}¬(adult|∼⊥), {a mathematical formula}K′ is also well-behaved.It can be easily verified that the logical consequences of {a mathematical formula}K′ in {a mathematical formula}Pmin, {a mathematical formula}Rmin and VIMS differ. In both {a mathematical formula}Pmin and {a mathematical formula}Rmin, for instance, we derive neither that {a mathematical formula}italian∧PhD|∼house_owner nor that {a mathematical formula}italian∧PhD|∼¬house_owner: the two alternatives are equivalent. On the other hand, in VIMS we derive that {a mathematical formula}italian∧PhD|∼¬house_owner.
      </paragraph>
      <paragraph>
       The previous example shows that in some cases VIMS is stronger than both {a mathematical formula}Pmin and {a mathematical formula}Rmin. The following one shows that the two approaches are incomparable, since there are also logical consequences that hold for both {a mathematical formula}Pmin and {a mathematical formula}Rmin but not for VIMS.
      </paragraph>
      <paragraph label="Example 5">
       Let {a mathematical formula}K={PhD|∼adult,adult|∼work,PhD|∼¬work,italian|∼house_owner}. What do we derive about typical {a mathematical formula}italian∧PhD∧work, for instance? Do they inherit the property of typical Italians of being house_owner?Again, in order to prevent the entailment of {a mathematical formula}italian∧PhD∧work|∼⊥ from K both in VIMS and in {a mathematical formula}Pmin and {a mathematical formula}Rmin, we add to K the constraint that Italians with a PhD who work exist, henceforth they also have typical instances. Therefore we expand K into:{a mathematical formula} By reasoning as in Example 4 we can show that {a mathematical formula}K′ is a well-behaved knowledge base.Now it can be easily shown that the conditional assertion{a mathematical formula} is entailed in {a mathematical formula}Pmin and {a mathematical formula}Rmin, whereas nothing is entailed in VIMS. This difference can be explained intuitively as follows. The set of properties for which an individual is atypical matters in {a mathematical formula}Pmin and {a mathematical formula}Rmin, where one has to minimize the set of distinct {a mathematical formula}¬□¬C: even if an {a mathematical formula}italian∧PhD∧work is an atypical PhD, {a mathematical formula}Pmin and {a mathematical formula}Rmin still maximize its typicality as an Italian, and therefore entail that it is a house_owner, as all typical Italians. As a difference, in VIMS, what matters is the set of individuals which are more typical than a given x, rather than the set of properties by which they are more typical. As a consequence, since an x which is {a mathematical formula}italian∧PhD∧work is an atypical PhD, there is no need to maximize its typicality as an Italian, as long as this does not increase the set of individuals more typical than x.
      </paragraph>
      <paragraph>
       In [38] Pearl has introduced two notions of 0-entailment and 1-entailment to perform nonmonotonic reasoning. We recall here the semantic definition of both and then we remark upon their relation with our semantics and rational closure. A model {a mathematical formula}M for a finite knowledge base K has the form {a mathematical formula}M=({true,false}ATM,kM) where {a mathematical formula}{true,false}ATM is the set of propositional interpretations for, say, a fixed finite propositional language, and {a mathematical formula}kM is our height function mapping propositional interpretations to {a mathematical formula}N, the definition of height {a mathematical formula}kM(A) of a formula is the same as in our semantic. A conditional {a mathematical formula}A|∼B is true in a model {a mathematical formula}M if {a mathematical formula}kM(A∧B)&lt;kM(A∧¬B). Then the two entailment relations are defined as follows:{a mathematical formula}{a mathematical formula} where minimal with respect to {a mathematical formula}kM means that no other model {a mathematical formula}M′ assigns a lower value {a mathematical formula}kM′ to any propositional interpretation. First, observe that Pearl's semantics (both 0 and 1 entailment) cannot cope with conditionals having an inconsistent antecedent. This limitation is deliberate and is motivated by a probabilistic interpretation of conditionals: in asserting {a mathematical formula}A|∼B, A must not be impossible, no matter how it is unlikely. For this reason, a knowledge base such as {a mathematical formula}K={A|∼P,A|∼¬P,B|∼Q} is out of the scope of Pearl's semantics, and nothing can be said about its consequences. As a difference with respect to Pearl's approach we are able to consider such K, we just derive that A is impossible, without concluding that K is inconsistent or trivial, in the sense that everything follows from it. Moreover both 0-entailment and 1-entailment fail to validate:{a mathematical formula} which is valid in any KLM logic, whence in rational closure (as well as in our semantics). However, two definitions should make apparent the relations with our semantics and rational closure. If we consider a K such that {a mathematical formula}∀A|∼B∈K,K⊭RA|∼⊥, we get an obvious correspondence between our canonical models (which will contain worlds for very possible propositional interpretation) and models of Pearl's semantics. The correspondence preserves FIMS minimality, so that we immediately get:
      </paragraph>
      <paragraph label="Proposition 10">
       {a mathematical formula}K⊨1-entA|∼Bif and only if{a mathematical formula}M⊨A|∼Bfor all canonical models{a mathematical formula}Mof K that are minimal with respect to FIMS.
      </paragraph>
      <paragraph>
       By Theorem 2, we therefore obtain {a mathematical formula}K⊨1-entA|∼B if and only if {a mathematical formula}A|∼B∈K¯. This is not a surprise, the correspondence between 1-entailment and rational closure was already observed by Pearl in [38], [39]. However, it only works for knowledge bases with the strong consistency assumption as above.
      </paragraph>
     </section>
    </section>
    <section label="3">
     <section-title>
      Rational closure in description logics
     </section-title>
     <paragraph>
      As recalled in the Introduction, nonmonotonic reasoning in Description Logic has attracted an increasing interest in the last years [40], [2], [1], [12], [30], [8], [23], [5], [32], [13], [37]. Our purpose is to investigate whether rational closure can be extended in order to support nonmonotonic reasoning to Description Logics.
     </paragraph>
     <paragraph>
      In this section, we extend to {a mathematical formula}ALC the notion of rational closure proposed by Lehmann and Magidor [33], recalled in Section 2.2, and we define a semantic characterization of this notion of rational closure by introducing a minimal model semantics for {a mathematical formula}ALC with typical inclusions. This semantics is a direct generalization of the minimal (canonical) model semantics introduced in Section 2.3.
     </paragraph>
     <paragraph>
      To express typical inclusions, {a mathematical formula}ALC is extended with a typicality operator T, following the approach in [17], [23]. Differently from [23], here we consider special kinds of preferential models, namely, rational models, to define the semantics of the T operator, and we use a different notion of preference between models, namely, the preference relation {a mathematical formula}&lt;FIMS, introduced in Section 2.3. Given the typicality operator, the typical assertion {a mathematical formula}T(C)⊑D (all the typical C's are D's) plays the role of the conditional assertion {a mathematical formula}C|∼D in {a mathematical formula}R. We show that the correspondence result established by Theorem 2 can be lifted from the propositional calculus to {a mathematical formula}ALC.
     </paragraph>
     <section label="3.1">
      The logic {a mathematical formula}ALC+TR
      <paragraph>
       In order to apply rational closure to DLs we proceed in two steps. First, similarly to [17], we extend the standard {a mathematical formula}ALC by a typicality operator T that allows to single out the typical instances of a concept. Since we are dealing here with rational closure (that builds over R), we attribute to T properties related to R. The resulting logic is called {a mathematical formula}ALC+TR. As a second step, we build over {a mathematical formula}ALC+TR a rational closure mechanism.
      </paragraph>
      <paragraph>
       Our starting point is therefore the extension of logic {a mathematical formula}ALC with a typicality operator T: we allow concepts of the form {a mathematical formula}T(C), whose intuitive meaning is that {a mathematical formula}T(C) selects the typical instances of a concept C. We can therefore distinguish between the properties that hold for all instances of concept C ({a mathematical formula}C⊑D), and those that only hold for the typical such instances ({a mathematical formula}T(C)⊑D).
      </paragraph>
      <paragraph label="Definition 12">
       We consider an alphabet of concept names {a mathematical formula}C, of role names {a mathematical formula}R, and of individual constants {a mathematical formula}O. Given {a mathematical formula}A∈C and {a mathematical formula}R∈R, we define:{a mathematical formula}{a mathematical formula} A knowledge base is a pair (TBox, ABox). TBox contains a finite set of concept inclusions {a mathematical formula}CL⊑CR. ABox contains assertions of the form {a mathematical formula}CL(a) and {a mathematical formula}R(a,b), where {a mathematical formula}a,b∈O.
      </paragraph>
      <paragraph>
       The semantics of {a mathematical formula}ALC+TR can be formulated in terms of rational models: ordinary models of {a mathematical formula}ALC are equipped with a preference relation &lt; on the domain, whose intuitive meaning is to compare the “typicality” of domain elements, that is to say {a mathematical formula}x&lt;y means that x is more typical than y. Typical members of a concept C, that is members of {a mathematical formula}T(C), are the members x of C that are minimal with respect to this preference relation (s.t. there is no other member of C more typical than x).
      </paragraph>
      <paragraph label="Definition 13">
       Semantics of {a mathematical formula}ALC+TRA model {a mathematical formula}M of {a mathematical formula}ALC+TR is any structure {a mathematical formula}〈Δ,&lt;,I〉 where:
      </paragraph>
      <list>
       <list-item label="•">
        Δ is the domain;
       </list-item>
       <list-item label="•">
        &lt; is an irreflexive, transitive and modular (if {a mathematical formula}x&lt;y then either {a mathematical formula}x&lt;z or {a mathematical formula}z&lt;y) relation over Δ;
       </list-item>
       <list-item label="•">
        I is the extension function that maps each concept C to {a mathematical formula}CI⊆Δ, and each role R to {a mathematical formula}RI⊆Δ×Δ. For concepts of {a mathematical formula}ALC, {a mathematical formula}CI is defined in the usual way. For the T operator, we have{a mathematical formula} where {a mathematical formula}Min&lt;(S)={u:u∈S and ∄z∈S s.t. z&lt;u}.
       </list-item>
      </list>
      <paragraph>
       The semantics with one single preference relation &lt; is the one that, as we will show, corresponds to rational closure. One may think of considering a sharper semantics with several preference relations, we briefly discuss this variant in the last section.
      </paragraph>
      <paragraph>
       An alternative equivalent semantics of the T operator by means of a set of postulates that are essentially a reformulation of axioms and rules of nonmonotonic entailment in rational logic R can be found in Appendix A, together with the proof of the equivalence.
      </paragraph>
      <paragraph label="Definition 14">
       Model satisfying a knowledge baseGiven an {a mathematical formula}ALC+TR model {a mathematical formula}M=〈Δ,&lt;,I〉, we assume that I is extended to assign a domain element {a mathematical formula}aI of Δ to each individual constant a of {a mathematical formula}O. We say that:
      </paragraph>
      <list>
       <list-item label="•">
        a model {a mathematical formula}M satisfies an inclusion {a mathematical formula}C⊑D (written {a mathematical formula}M⊨ALC+TRC⊑D) if it holds {a mathematical formula}CI⊆DI;
       </list-item>
       <list-item label="•">
        {a mathematical formula}M satisfies an assertion {a mathematical formula}C(a) (written {a mathematical formula}M⊨ALC+TRC(a)) if {a mathematical formula}aI∈CI and {a mathematical formula}M satisfies an assertion {a mathematical formula}R(a,b) (written {a mathematical formula}M⊨ALC+TRR(a,b)) if {a mathematical formula}(aI,bI)∈RI.
       </list-item>
      </list>
      <paragraph>
       It is worth noticing that, as a difference with our previous approach in [23], here we do not assume the unique name assumption, that is to say we do not assume that, in a model {a mathematical formula}M, I is extended to assign a distinct element {a mathematical formula}aI of Δ to each individual constant a of {a mathematical formula}O. In [23], UNA is needed since the properties of the preference relation &lt; are built from preferential logic P: in that case, the unique name assumption avoids that models in which two names are mapped into the same individual of the domain are preferred to those in which they are mapped into distinct ones. This is needed in order to perform useful reasoning about two different individuals named in the ABox. As we will see in Definition 23 below, we restrict our concern to the only case of an FIMS semantics based on the minimization of ranks, therefore the unique name assumption is no longer needed.
      </paragraph>
      <paragraph>
       By a construction similar to that used in Theorem 2.3 of [17] for the weaker logic {a mathematical formula}ALC+T, we can prove the following theorem. The proofs and further details are provided in the technical report [25].
      </paragraph>
      <paragraph label="Theorem 5">
       Complexity of {a mathematical formula}ALC+TRGiven an{a mathematical formula}ALC+TRknowledge base{a mathematical formula}K=(TBox,ABox), the problem of deciding satisfiability of K isExpTime-complete.
      </paragraph>
      <paragraph>
       The finite model property of {a mathematical formula}ALC+TR follows as an easy consequence of the terminating tableau construction in Section 4.1 of [16].
      </paragraph>
      <paragraph label="Theorem 6">
       Finite model property for {a mathematical formula}ALC+TRGiven a knowledge base K, if it is satisfiable in{a mathematical formula}ALC+TRthen there exists a finite{a mathematical formula}ALC+TRmodel satisfying K, i.e.{a mathematical formula}ALC+TRhas the finite model property.
      </paragraph>
      <paragraph>
       Let us define the derivability of an inclusion and of an assertion in {a mathematical formula}ALC+TR:
      </paragraph>
      <paragraph label="Definition 15">
       Given a knowledge base K, an inclusion {a mathematical formula}CL⊑CR and an assertion {a mathematical formula}CL(a), with {a mathematical formula}a∈O, we say that:
      </paragraph>
      <list>
       <list-item label="•">
        the inclusion {a mathematical formula}CL⊑CR is entailed from K, written {a mathematical formula}K⊨ALC+TRCL⊑CR, if {a mathematical formula}CLI⊆CRI holds in all models {a mathematical formula}M=〈Δ,&lt;,I〉 satisfying K;
       </list-item>
       <list-item label="•">
        the assertion {a mathematical formula}CL(a) is entailed from K, written {a mathematical formula}K⊨ALC+TRCL(a), if {a mathematical formula}aI∈CLI holds in all models {a mathematical formula}M=〈Δ,&lt;,I〉 satisfying K.
       </list-item>
      </list>
      <paragraph>
       As usual, when, for a given knowledge base K and a concept C, it holds that {a mathematical formula}K⊭ALC+TRC⊑⊥ we say that C is satisfiable with respect to K.
      </paragraph>
      <paragraph>
       As an easy consequence of Theorem 6, we prove the following corollary:
      </paragraph>
      <paragraph label="Proof">
       Given a knowledge base K and a concept C satisfiable with respect to K, then there exists a finite{a mathematical formula}ALC+TRmodel{a mathematical formula}M=〈Δ,&lt;,I〉satisfying K, such that{a mathematical formula}CI≠∅.Let {a mathematical formula}K=(TBox,ABox) and let us assume that C is satisfiable with respect to K. Then there is a model {a mathematical formula}M=〈Δ,&lt;,I〉 satisfying K such that {a mathematical formula}CI≠∅. Let {a mathematical formula}x∈CI, let d be a new individual name not occurring in K and let {a mathematical formula}K′=(TBox,ABox′), where {a mathematical formula}ABox′=ABox∪{C(d)}. Clearly, {a mathematical formula}K′ is satisfiable, as the model obtained from {a mathematical formula}M by letting {a mathematical formula}dI=x satisfies {a mathematical formula}K′. By the finite model property (Theorem 6) there exists a finite model satisfying {a mathematical formula}K′. Let {a mathematical formula}M′ be such a model. {a mathematical formula}M′ is a finite model of K such that {a mathematical formula}CI′≠∅.  □
      </paragraph>
      <paragraph>
       As for propositional rational models, finite {a mathematical formula}ALC+TR models (to which we can restrict attention by Theorem 6) can be equivalently defined by postulating the existence of a function {a mathematical formula}kM:Δ⟼N, where {a mathematical formula}kM assigns a finite rank to each world, and is defined as follows.
      </paragraph>
      <paragraph label="Definition 16">
       Rank of a domain element {a mathematical formula}kM(x)Given a model {a mathematical formula}M=〈Δ,&lt;,I〉, the rank {a mathematical formula}kM of a domain element {a mathematical formula}x∈Δ, is the length of the longest chain {a mathematical formula}x0&lt;…&lt;x from x to a minimal {a mathematical formula}x0 (i.e. such that there is no {a mathematical formula}x′ such that {a mathematical formula}x′&lt;x0).
      </paragraph>
      <paragraph>
       As for the propositional case, the rank function {a mathematical formula}kM and &lt; can be defined from each other by letting {a mathematical formula}x&lt;y if and only if {a mathematical formula}kM(x)&lt;kM(y).
      </paragraph>
      <paragraph label="Definition 17">
       Rank of a concept {a mathematical formula}kM(CR) in a modelGiven a model {a mathematical formula}M=〈Δ,&lt;,I〉, the rank{a mathematical formula}kM(CR)of a concept{a mathematical formula}CRin the model{a mathematical formula}M is defined as{a mathematical formula} If {a mathematical formula}CRI=∅, then {a mathematical formula}CR has no rank and we write {a mathematical formula}kM(CR)=∞.
      </paragraph>
      <paragraph>
       It is immediate to verify that:
      </paragraph>
      <paragraph label="Proposition 11">
       For any{a mathematical formula}M=〈Δ,&lt;,I〉, we have that{a mathematical formula}Msatisfies{a mathematical formula}T(C)⊑Dif and only if{a mathematical formula}kM(C⊓D)&lt;kM(C⊓¬D).
      </paragraph>
      <paragraph>
       As already mentioned, although the typicality operator T itself is nonmonotonic (i.e. {a mathematical formula}T(C)⊑D does not imply {a mathematical formula}T(C⊓E)⊑D), the logic {a mathematical formula}ALC+TR is monotonic: what is inferred from K can still be inferred from any {a mathematical formula}K′ with {a mathematical formula}K⊆K′. This is a clear limitation in DLs. As a consequence of the monotonicity of {a mathematical formula}ALC+TR, one cannot deal with irrelevance, for instance. So one cannot derive from {a mathematical formula}K={Penguin⊑Bird,T(Bird)⊑Fly,T(Penguin)⊑¬Fly} that {a mathematical formula}K⊨ALC+TRT(Penguin⊓Black)⊑¬Fly, even if the property of being black is irrelevant with respect to flying. In the same way, if we add to K the information that Jim is a bird ({a mathematical formula}Bird(jim)), in {a mathematical formula}ALC+TR one cannot tentatively derive, in the absence of information to the contrary, that it is a typical bird and therefore it flies ({a mathematical formula}T(Bird)(jim) and {a mathematical formula}Fly(jim)).
      </paragraph>
      <paragraph>
       In the following section we investigate the possibility of overcoming this weakness by extending to {a mathematical formula}ALC+TR the notion of rational closure. As we will see, this extension allows to deal with irrelevance and allows to attribute typical properties to individuals.
      </paragraph>
     </section>
     <section label="3.2">
      Rational closure of the TBox in {a mathematical formula}ALC+TR
      <paragraph>
       In this section, we extend to {a mathematical formula}ALC+TR the definition of rational closure introduced by Lehmann and Magidor for the propositional case.
      </paragraph>
      <paragraph>
       We first consider the rational closure with respect to TBox, in which essentially we only consider which concept inclusions belong to the rational closure of K. Next we will consider rational closure with respect to ABox, in which we consider the individuals explicitly named in the Abox, and derive their properties.
      </paragraph>
      <paragraph>
       Let us first define the notion of query: a query is either an inclusion relation or an assertion of the ABox; we want to check whether it is entailed from a given knowledge base.
      </paragraph>
      <paragraph label="Definition 18">
       QueryA query F is either an assertion {a mathematical formula}CL(a) or an inclusion relation {a mathematical formula}CL⊑CR. Given a model {a mathematical formula}M=〈Δ,&lt;,I〉, a query F holds in {a mathematical formula}M if {a mathematical formula}M satisfies F, i.e. if {a mathematical formula}aI∈(CL(a))I or {a mathematical formula}CLI⊆CRI, respectively.{sup:4}
      </paragraph>
      <paragraph label="Definition 19">
       Exceptionality of concepts and inclusionsLet {a mathematical formula}K=(TBox,ABox) be a knowledge base. A concept C is said to be exceptional for K if and only if {a mathematical formula}K⊨ALC+TRT(⊤)⊑¬C. A T-inclusion {a mathematical formula}T(C)⊑D is exceptional for K if C is exceptional for K. The set of T-inclusions of K which are exceptional in K will be denoted as {a mathematical formula}E(K).
      </paragraph>
      <paragraph>
       Note that, differently from Lehmann and Magidor's notion of exceptionality in Section 2.2, the exceptionality of a concept is defined also taking into account the ABox. This is needed when the ABox contains typicality assertions of the form {a mathematical formula}T(C)(a). Indeed, as we will see later with an example, the construction of the rational closure of the TBox of a knowledge base K is affected by the presence of typicality assertions in the ABox: if the assertions {a mathematical formula}T(C)(a) and {a mathematical formula}¬D(a) are in the ABox, it is not the case that all the typical C's are D's, so that the defeasible inclusion {a mathematical formula}T(C)⊑D does not hold.
      </paragraph>
      <paragraph>
       Similarly to the propositional case, in the following we introduce a sequence of knowledge bases, starting from the initial one, K, in order to iteratively use exceptionality in the construction of the rational closure. At each step, in order to reason about the following exceptional subset of K, we remove the inclusions {a mathematical formula}T(C)⊑D of K that are not exceptional for K. Before we do this, if there is an assertion {a mathematical formula}T(C)(a) in ABox, we add to a all the typical properties of C that we are removing. Because we want to reason in the same way for equivalent concepts, this leads us to the slightly more complicated formulation of {a mathematical formula}ABoxi below.
      </paragraph>
      <paragraph label="Definition 20">
       Given a DL knowledge base {a mathematical formula}K=(TBox,ABox), it is possible to define a sequence of knowledge bases {a mathematical formula}E0,…,Ei,…,En by letting {a mathematical formula}E0=(TBox0,ABox0) where {a mathematical formula}TBox0=TBox and {a mathematical formula}ABox0=ABox and, for {a mathematical formula}i&gt;0, {a mathematical formula}Ei=(TBoxi,ABoxi) where
      </paragraph>
      <list>
       <list-item label="•">
        {a mathematical formula}TBoxi=E(Ei−1)∪{C⊑D∈TBox|T does not occur in C}
       </list-item>
       <list-item label="•">
        {a mathematical formula}ABoxi=ABoxi−1∪{(¬C⊔D)(a)|T(C)⊑D in (Ei−1−Ei) and there is a T(B)(a)∈ABox such that Ei−1⊭ALC+TRT(⊤)⊑¬B and Ej⊨ALC+TRT(⊤)⊑¬B for all j&lt;i−1}
       </list-item>
      </list>
      <paragraph>
       Clearly {a mathematical formula}TBox0⊇TBox1⊇TBox2,…, while {a mathematical formula}ABox0⊆ABox1⊆ABox2,…
      </paragraph>
      <paragraph>
       Observe that, being K finite, there is a least {a mathematical formula}n≥0 such that, for all {a mathematical formula}m&gt;n, {a mathematical formula}TBoxm=TBoxn or {a mathematical formula}TBoxm=∅. We take {a mathematical formula}(TBoxn,ABoxn) as the last element of the sequence of knowledge bases starting from K. Observe also that the definition of the {a mathematical formula}TBoxi's is the same as the definition of the {a mathematical formula}Ci's in Lehmann and Magidor's definition of rational closure in Section 2.2, except for the fact that here, at each step, we also add all the “strict” inclusions {a mathematical formula}C⊑D (where T does not occur in C).
      </paragraph>
      <paragraph>
       Informally, for the definition of {a mathematical formula}ABoxi, if {a mathematical formula}T(B)(a)∈ABox (i.e., a is a typical B-element), and B has rank {a mathematical formula}i−1, then, for all the inclusions {a mathematical formula}T(C)⊑D in {a mathematical formula}(Ei−1−Ei), since C has also rank {a mathematical formula}i−1 we have that: if a is a C-element, then it is a typical C-element and the assertion {a mathematical formula}(¬C⊔D)(a) must hold.
      </paragraph>
      <paragraph>
       Note that, when the ABox does not contain typicality assertions of the form {a mathematical formula}T(C)(a), we have that, for all i, {a mathematical formula}ABoxi=ABox. In this case, {a mathematical formula}ABoxi is irrelevant to determine the exceptionality of concepts as {a mathematical formula}Ei⊨ALC+TRT(⊤)⊑¬C if and only if {a mathematical formula}TBoxi⊨ALC+TRT(⊤)⊑¬C, for all concepts C. As in this case the definition of exceptionality of concepts does not depend on the ABox, the construction above can be simplified, by taking {a mathematical formula}E0=TBox and {a mathematical formula}Ei=TBoxi, and evaluating exceptionality only with respect to the TBox. Hence, we can avoid the computation of the {a mathematical formula}ABoxis and the construction becomes quite similar to the one of Lehmann and Magidor recalled in Section 2.2. This simplified construction can be found in [24].
      </paragraph>
      <paragraph label="Definition 21">
       Rank of a conceptA concept C has rank i (denoted by {a mathematical formula}rank(C)=i) for {a mathematical formula}K=(TBox,ABox), if and only if i is the least natural number for which C is not exceptional for {a mathematical formula}Ei. If C is exceptional for all {a mathematical formula}Ei then {a mathematical formula}rank(C)=∞, and we say that C has no rank.
      </paragraph>
      <paragraph>
       Consider the least {a mathematical formula}n≥0 such that, for all {a mathematical formula}m&gt;n, {a mathematical formula}TBoxm=TBoxn or {a mathematical formula}TBoxm=∅. Then from the above definition it follows that if a concept C has a rank, its highest possible value is n. As for propositional logic, the notion of rank of a formula allows to define the rational closure of a knowledge base K with respect to TBox.
      </paragraph>
      <paragraph label="Definition 22">
       Rational closure of TBoxLet {a mathematical formula}K=(TBox,ABox) be a DL knowledge base. We define {a mathematical formula}TBox¯, the rational closure of TBox, as{a mathematical formula}
      </paragraph>
      <paragraph>
       It can be easily seen that the rational closure of TBox is a nonmonotonic strengthening of {a mathematical formula}ALC+TR. For instance, it allows to deal with irrelevance, as the following example shows.
      </paragraph>
      <paragraph label="Example 6">
       Let {a mathematical formula}K=(TBox,ABox) where {a mathematical formula}ABox=∅ and {a mathematical formula}TBox={Penguin⊑Bird,T(Bird)⊑Fly,T(Penguin)⊑¬Fly}. It can be verified that {a mathematical formula}T(Bird⊓Black)⊑Fly∈TBox¯. This is a nonmonotonic inference that does no longer follow if we know that typical black birds do not fly: given {a mathematical formula}TBox′=TBox∪{T(Bird⊓Black)⊑¬Fly}, we have that {a mathematical formula}T(Bird⊓Black)⊑Fly∉TBox′¯. Similarly, as for the propositional case, rational closure is closed under rational monotonicity: from {a mathematical formula}T(Bird)⊑Fly∈TBox¯ and {a mathematical formula}T(Bird)⊑¬LivesEurope∉TBox¯ it follows that {a mathematical formula}T(Bird⊓LivesEurope)⊑Fly∈TBox¯.
      </paragraph>
      <paragraph label="Example 7">
       We can show that the presence of typicality assertions in the ABox has an impact on the construction of the rational closure. Let {a mathematical formula}K=(TBox,ABox), where TBox is as in Example 6 and {a mathematical formula}ABox={T(Bird⊓Black)(opus),¬Fly(opus)}. As opus is a typical black bird and it does not fly, it is clear the we are no longer ready to accept that typical black birds fly, otherwise we get an inconsistency with the ABox. Indeed, using the construction of rational closure given above, we have that {a mathematical formula}K⊨ALC+TRT(⊤)⊑¬(Bird⊓Black), so that {a mathematical formula}rank(Bird⊓Black)≠0. In particular, {a mathematical formula}rank(Bird⊓Black)=1 and {a mathematical formula}rank(Bird⊓Black⊓¬Fly)=1 as well. Hence, {a mathematical formula}T(Bird⊓Black)⊑Fly∉TBox¯.
      </paragraph>
      <paragraph>
       The next example shows that a sequence of ABoxes in the construction of the rational closure is actually needed.
      </paragraph>
      <paragraph label="Example 8">
       Let {a mathematical formula}K=(TBox,ABox) where {a mathematical formula}TBox={Penguin⊑Bird,T(Bird)⊑Fly,T(Penguin)⊑¬Fly,T(Bird)⊑∀HasFriend.Fly} and {a mathematical formula}ABox={T(Bird)(opus),HasFriend(opus,pio),T(Penguin⊓Violet)(pio)}.From the construction in Definition 20, we have:
       <list>
        {a mathematical formula}TBox0={Penguin⊑Bird,T(Bird)⊑Fly,T(Penguin)⊑¬Fly,T(Bird)⊑∀HasFriend.Fly},{a mathematical formula}ABox0={T(Bird)(opus),HasFriend(opus,pio),T(Penguin⊓Violet)(pio)}.{a mathematical formula}TBox1={Penguin⊑Bird,T(Penguin)⊑¬Fly},{a mathematical formula}ABox1={T(Bird)(opus),HasFriend(opus,pio),T(Penguin⊓Violet)(pio),(¬Bird⊔Fly)(opus),(¬Bird⊔∀HasFriend.Fly)(opus)}.{a mathematical formula}TBox2={Penguin⊑Bird},{a mathematical formula}ABox2={T(Bird)(opus),HasFriend(opus,pio),T(Penguin⊓Violet)(pio),(¬Bird⊔Fly)(opus),(¬Bird⊔∀HasFriend.Fly)(opus)}.We get
       </list>
       <paragraph>
        {a mathematical formula}rank(Penguin⊓Violet)=2, while {a mathematical formula}rank(Penguin)=1, and {a mathematical formula}rank(Bird)=0. Hence, we can conclude that typical penguins are not violet, {a mathematical formula}T(Penguin)⊑¬Violet∈TBox¯, as {a mathematical formula}rank(Penguin)&lt;rank(Penguin⊓Violet).
       </paragraph>
      </paragraph>
      <paragraph>
       So far we have extended to {a mathematical formula}ALC+TR the syntactic notion of rational closure. We wonder whether we provide a semantic characterization of this notion by extending the semantic characterization given at the propositional level.
      </paragraph>
      <paragraph>
       As for the propositional case (in the case of FIMS), in order to semantically characterize the rational closure, we first restrict our attention to minimal rational models that minimize the rank of domain elements. Informally, given two models of K, one in which a given domain element x has rank 2 (because for instance {a mathematical formula}z&lt;y&lt;x), and another in which it has rank 1 (because only {a mathematical formula}y&lt;x), we prefer the latter, as in this model the element x is assumed to be “more typical” than in the former.
      </paragraph>
      <paragraph label="Definition 23">
       Minimal modelsGiven {a mathematical formula}M=〈Δ,&lt;,I〉 and {a mathematical formula}M′=〈Δ′,&lt;′,I′〉 we say that {a mathematical formula}M is preferred to {a mathematical formula}M′ ({a mathematical formula}M&lt;FIMSM′) if:
      </paragraph>
      <list>
       <list-item label="•">
        {a mathematical formula}Δ=Δ′
       </list-item>
       <list-item label="•">
        {a mathematical formula}CI=CI′ for all concepts C
       </list-item>
       <list-item label="•">
        for all {a mathematical formula}x∈Δ, it holds that {a mathematical formula}kM(x)≤kM′(x) whereas there exists {a mathematical formula}y∈Δ such that {a mathematical formula}kM(y)&lt;kM′(y).
       </list-item>
      </list>
      <paragraph>
       It is worth noticing that roles are not considered in Definition 23, in other words, they are allowed to vary in the proposed preferential semantics. Subsequently, as for the propositional case, we restrict our attention to minimal canonical models. We define {a mathematical formula}S as the set of all the concepts (and subconcepts) occurring in K or in the query F together with their complements (observe that {a mathematical formula}S is finite).
      </paragraph>
      <paragraph>
       In order to define canonical models, we consider all the sets of concepts {a mathematical formula}{C1,C2,…,Cn}⊆S that are consistent with K, i.e., s.t. {a mathematical formula}K⊭ALC+TRC1⊓C2⊓…⊓Cn⊑⊥.
      </paragraph>
      <paragraph label="Definition 24">
       Canonical model with respect to {a mathematical formula}SGiven {a mathematical formula}K=(TBox,ABox) and a query F, a model {a mathematical formula}M=〈Δ,&lt;,I〉 satisfying K is canonical with respect to{a mathematical formula}S if, for each set of concepts {a mathematical formula}{C1,C2,…,Cn}⊆S consistent with K, there exists (at least) a domain element {a mathematical formula}x∈Δ such that {a mathematical formula}x∈(C1⊓C2⊓…⊓Cn)I.
      </paragraph>
      <paragraph>
       The intuition is that a canonical model contains all the individuals that enjoy properties that are consistent with the knowledge base. This is needed when reasoning about the (relative) rank of the concepts: it is important to have them all represented. As we will see in Theorem 7, in {a mathematical formula}ALC the existence of a canonical model is guaranteed for any consistent knowledge base. However, this may be not true for more expressive logics and, in particular, this is not true for {a mathematical formula}SHOIQ[28] (see Example 4 in [27]).
      </paragraph>
      <paragraph label="Definition 25">
       Next we define the notion of minimal canonical model. Minimal canonical models (with respect to TBox){a mathematical formula}M is a minimal canonical model of K if it satisfies K, it is minimal (with respect to Definition 23) and it is canonical (according to Definition 24).
      </paragraph>
      <paragraph label="Theorem 7">
       We can now prove the following: For any consistent knowledge base K, there exists a finite, minimal canonical model of K with respect to TBox.
      </paragraph>
      <paragraph label="Proof">
       Let {a mathematical formula}M=〈Δ,&lt;,I〉 be a finite model of K (which exists by the finite model property, since K is consistent), and let {a mathematical formula}{C1,C2,…,Cn}⊆S be any subset of {a mathematical formula}S consistent with K. We show that we can expand {a mathematical formula}M in order to obtain a finite model of K that contains an instance of {a mathematical formula}C1⊓C2⊓…⊓Cn. By repeating the same construction for all maximal consistent subsets {a mathematical formula}{C1,C2,…,Cn} of {a mathematical formula}S, we eventually obtain a finite canonical model of K.Indeed, for each {a mathematical formula}{C1,C2,…,Cn} consistent with K, it holds that {a mathematical formula}K⊭ALC+TRC1⊓C2⊓…⊓Cn⊑⊥, i.e. concept {a mathematical formula}C1⊓C2⊓…⊓Cn is satisfiable with respect to K. By Corollary 2 there exists a finite {a mathematical formula}ALC+TR model {a mathematical formula}M′=〈Δ′,&lt;′,I′〉 satisfying K, such that {a mathematical formula}(C1⊓C2⊓…⊓Cn)I′≠∅.Let {a mathematical formula}M′⁎ be the union of {a mathematical formula}M and {a mathematical formula}M′, i.e. {a mathematical formula}M′⁎=〈Δ′⁎,&lt;′⁎,I′⁎〉, where {a mathematical formula}Δ′⁎=Δ∪Δ′. As far as individuals named in the ABox are concerned, we define {a mathematical formula}I′⁎ as I, that is to say {a mathematical formula}aI′⁎=aI for all {a mathematical formula}a∈O occurring in ABox. For concepts and roles, {a mathematical formula}I′⁎ is defined as I for elements in Δ and as {a mathematical formula}I′ on elements in {a mathematical formula}Δ′, that is to say, for all atomic concepts {a mathematical formula}C∈C and all roles {a mathematical formula}R∈R:
       <list>
        {a mathematical formula}x∈CI′⁎ for all {a mathematical formula}x∈Δ, if {a mathematical formula}x∈CI;{a mathematical formula}x∈CI′⁎ for all {a mathematical formula}x∈Δ′, if {a mathematical formula}x∈CI′;{a mathematical formula}(x,y)∈RI′⁎ for all {a mathematical formula}x,y∈Δ, if {a mathematical formula}(x,y)∈RI;{a mathematical formula}(x,y)∈RI′⁎ for all {a mathematical formula}x,y∈Δ′, if {a mathematical formula}(x,y)∈RI′.Also,
       </list>
       <paragraph>
        {a mathematical formula}kM′⁎(x)=kM(x) for the elements in {a mathematical formula}x∈Δ, and {a mathematical formula}kM′⁎(x)=n+kM′(x) for all the elements {a mathematical formula}x∈Δ′, where n is the maximum value of {a mathematical formula}kM in {a mathematical formula}M (n is finite, as each element of {a mathematical formula}M has a finite rank). {a mathematical formula}&lt;′⁎ is straightforwardly defined from {a mathematical formula}kM′⁎ by letting {a mathematical formula}x&lt;′⁎y if and only if {a mathematical formula}kM′⁎(x)&lt;kM′⁎(y). It can be verified that {a mathematical formula}M′⁎ is a finite model of K which contains an instance of {a mathematical formula}C1⊓C2⊓…⊓Cn. For the inclusions and assertions of K that do not contain T this is obviously true. For the inclusions containing T, for each {a mathematical formula}T(C)⊑D, if {a mathematical formula}x∈Min&lt;′⁎(C) in {a mathematical formula}M′⁎, also {a mathematical formula}x∈Min&lt;(C) in {a mathematical formula}M or {a mathematical formula}x∈Min&lt;′(C) in {a mathematical formula}M′. In both cases x is an instance of D (since both {a mathematical formula}M and {a mathematical formula}M′ satisfy K), therefore {a mathematical formula}x∈DI′⁎, and {a mathematical formula}M′⁎ satisfies K.By repeating the same construction for all the (finitely many) maximal consistent subsets {a mathematical formula}{C1,C2,…,Cn} of {a mathematical formula}S, we obtain a finite canonical model of K, call it {a mathematical formula}M+. We do not know whether {a mathematical formula}M+ is minimal. Observe that, as the domain {a mathematical formula}Δ+ of {a mathematical formula}M+ is finite, the rank of each element in {a mathematical formula}Δ+ is finite. If {a mathematical formula}M+ is not minimal, then there is a model {a mathematical formula}M1 (over the same domain {a mathematical formula}Δ+) preferred to {a mathematical formula}M+, such that, for all {a mathematical formula}x∈Δ+{a mathematical formula}kM1(x)≤kM+(x) and for some {a mathematical formula}y∈Δ+{a mathematical formula}kM1(y)&lt;kM+(y). Again, if {a mathematical formula}M1 is not minimal there must be another {a mathematical formula}M2 preferred to {a mathematical formula}M1. And so on, lowering the ranks. As the domain {a mathematical formula}Δ+ is finite, this descending chain of models cannot be infinite and, eventually, we reach a minimal canonical model of K.  □
       </paragraph>
      </paragraph>
      <paragraph>
       To prove the correspondence between minimal canonical models and the rational closure of a TBox, we need to introduce some propositions. Given an {a mathematical formula}ALC+TR model {a mathematical formula}M=〈Δ,&lt;,I〉, we define a sequence {a mathematical formula}M0, {a mathematical formula}M1,M2,… of models as follows: We let {a mathematical formula}M0=M and, for all i, we let {a mathematical formula}Mi=〈Δ,&lt;i,I〉 be the {a mathematical formula}ALC+TR model obtained from {a mathematical formula}M by assigning a rank 0 to all the domain elements x with {a mathematical formula}kM(x)≤i, i.e., {a mathematical formula}kMi(x)=kM(x)−i if {a mathematical formula}kM(x)&gt;i, and {a mathematical formula}kMi(x)=0 otherwise.
      </paragraph>
      <paragraph label="Proposition 12">
       Let{a mathematical formula}K=〈TBox,ABox〉and let{a mathematical formula}M=〈Δ,&lt;,I〉be a minimal canonical{a mathematical formula}ALC+TRmodel satisfying K. For any concept C, if{a mathematical formula}rank(C)≥i, then
      </paragraph>
      <list>
       <list-item>
        {a mathematical formula}kM(C)≥i, and
       </list-item>
       <list-item>
        {a mathematical formula}Misatisfies{a mathematical formula}Ei.
       </list-item>
      </list>
      <paragraph label="Proof">
       By induction on i. For {a mathematical formula}i=0, 1) holds (since it always holds that {a mathematical formula}kM(C)≥0). 2) holds trivially as {a mathematical formula}M0=M.For {a mathematical formula}i&gt;0, 1) holds: if {a mathematical formula}rank(C)≥i, then, by Definition 21, for all {a mathematical formula}j&lt;i, we have that {a mathematical formula}Ej⊨ALC+TRT(⊤)⊑¬C. By inductive hypothesis on 2), for all {a mathematical formula}j&lt;i{a mathematical formula}Mj⊨ALC+TRT(⊤)⊑¬C. Hence, for all x with {a mathematical formula}kM(x)&lt;i, {a mathematical formula}x∉CI, and {a mathematical formula}kM(C)≥i.To prove 2), we reason as follows. Since {a mathematical formula}TBoxi⊆TBox0, {a mathematical formula}M⊨ALC+TRTBoxi. Furthermore by definition of rank, for all {a mathematical formula}T(B)⊑D∈TBoxi, {a mathematical formula}rank(B)≥i, hence by 1) just proved {a mathematical formula}kM(B)≥i. Hence, in {a mathematical formula}M, the rank of all elements in {a mathematical formula}Min&lt;(BI) is ≥i, and also {a mathematical formula}Mi⊨ALC+TRT(B)⊑D.To prove that {a mathematical formula}Mi⊨ALC+TREi, we also need to show that {a mathematical formula}Mi⊨ALC+TRABoxi. By construction, for all the assertions {a mathematical formula}C(a)∈ABox, {a mathematical formula}M⊨ALC+TRC(a) and there is an element {a mathematical formula}x∈Δ such that {a mathematical formula}x∈CI and {a mathematical formula}aI=x. As {a mathematical formula}Mi only differs from {a mathematical formula}M for the ranks, if {a mathematical formula}C≠T(B), {a mathematical formula}Mi⊨ALC+TRC(a). If {a mathematical formula}C=T(B), as in {a mathematical formula}M it holds that {a mathematical formula}x∈(T(B))I, x is a B-minimal element in {a mathematical formula}M, and it can be proven that it remains a B-minimal element in {a mathematical formula}Mi. Thus, {a mathematical formula}Mi satisfies {a mathematical formula}T(B)(a).For each assertion {a mathematical formula}(¬C⊔D)(a)∈ABoxi such that {a mathematical formula}(¬C⊔D)(a)∉ABox, we distinguish two cases: either {a mathematical formula}(¬C⊔D)(a)∈ABoxi−1 or {a mathematical formula}(¬C⊔D)(a)∉ABoxi−1. In the first case, by inductive hypothesis, {a mathematical formula}Mi−1⊨ALC+TREi−1, and hence {a mathematical formula}Mi−1⊨ALC+TR(¬C⊔D)(a) and also {a mathematical formula}Mi⊨ALC+TR(¬C⊔D)(a) (since T does not occur in C). In the second case, the assertion {a mathematical formula}(¬C⊔D)(a) has been added to {a mathematical formula}ABoxi and was not in {a mathematical formula}ABoxi−1. Hence, there is an inclusion {a mathematical formula}T(C)⊑D in ({a mathematical formula}Ei−1−Ei) and there is a {a mathematical formula}T(B)(a)∈ABox (and hence in {a mathematical formula}ABoxi) such that {a mathematical formula}Ei−1⊭ALC+TRT(⊤)⊑¬B. As {a mathematical formula}T(B)(a)∈ABox, {a mathematical formula}M⊨ALC+TRT(B)(a) and for some {a mathematical formula}x∈Δ, {a mathematical formula}x∈Min&lt;(BI) and {a mathematical formula}x=aI. We want to show that {a mathematical formula}x∈(¬C⊔D)I, for all {a mathematical formula}T(C)⊑D in {a mathematical formula}Ei−1, so that {a mathematical formula}(¬C⊔D)(a) is satisfied in {a mathematical formula}Mi−1 and hence in {a mathematical formula}Mi.By construction, {a mathematical formula}rank(B)=i−1, and by inductive hypothesis, part 1), {a mathematical formula}kM(B)≥i−1. We show that {a mathematical formula}kM(B)=i−1 and {a mathematical formula}kMi−1(B)=0.From {a mathematical formula}Ei−1⊭ALC+TRT(⊤)⊑¬B, we know there is a model, {a mathematical formula}M″ satisfying {a mathematical formula}Ei−1 and such that, for some domain element y, {a mathematical formula}kM″(y)=0 and {a mathematical formula}y∈BI″. Clearly, for all {a mathematical formula}T(C)⊑D∈TBoxi−1, {a mathematical formula}y∈(¬C⊔D)I″. Let {a mathematical formula}{C1,…,Cr} be the maximal consistent set of concepts of which y is an instance. We can show that {a mathematical formula}{C1,…,Cr} is consistent with K. Indeed, we can define a new model of K by adding to {a mathematical formula}M all the domain elements in {a mathematical formula}M″, including y, by keeping the interpretation of concepts and relations on such elements as in {a mathematical formula}M″ and by letting the rank {a mathematical formula}kM(y)=i−1 and {a mathematical formula}kM(z)=n+1 (where n is the highest rank in {a mathematical formula}M), for all {a mathematical formula}z∈Δ″ such that {a mathematical formula}z≠y. The obtained model is clearly a model of K satisfying {a mathematical formula}{C1,…,Cr}, which proves the consistency of this set w.r.t. K.As {a mathematical formula}M is a canonical model, and {a mathematical formula}{C1,…,Cr} is consistent with K, there must be a {a mathematical formula}y′ in Δ such that {a mathematical formula}y′ is an instance of {a mathematical formula}C1⊓…⊓Cr. Furthermore, for all {a mathematical formula}T(C)⊑D∈TBoxi−1, {a mathematical formula}y′∈(¬C⊔D)I, and {a mathematical formula}y′ must have rank {a mathematical formula}kM(y′)=i−1 (as {a mathematical formula}M is a minimal model of K). Hence, {a mathematical formula}kMi−1(B)=0, and, since {a mathematical formula}Mi−1 satisfies {a mathematical formula}T(B)(a), it must be {a mathematical formula}kMi−1(x)=0 for {a mathematical formula}x=aI. Thus, in {a mathematical formula}Mi−1, if {a mathematical formula}x∈CI, then {a mathematical formula}x∈(T(C))I, and from the fact that {a mathematical formula}Mi−1 satisfies {a mathematical formula}T(C)⊑D, we can conclude that {a mathematical formula}x∈DI. Hence, {a mathematical formula}x∈(¬C⊔D)I for {a mathematical formula}x=aI, so that {a mathematical formula}(¬C⊔D)(a) is satisfied in {a mathematical formula}Mi−1. It is easy to see that {a mathematical formula}(¬C⊔D)(a) is satisfied in {a mathematical formula}Mi as well. Therefore {a mathematical formula}Mi⊨ALC+TREi.  □
      </paragraph>
      <paragraph>
       The next proposition is still concerned with minimal canonical models, to prove the correspondence between the rank of a concept (as in Definition 21) and the rank of a concept in a minimal canonical model (as in Definition 17).
      </paragraph>
      <paragraph label="Proposition 13">
       Given a consistent K and{a mathematical formula}S, for all{a mathematical formula}C∈S, if{a mathematical formula}rank(C)=i, then:
      </paragraph>
      <list>
       <list-item>
        there is a{a mathematical formula}{C1,C2,…,Cr}⊆Smaximal and consistent with K such that{a mathematical formula}C∈{C1,C2,…,Cr}and{a mathematical formula}rank(C1⊓C2⊓…⊓Cr)=i
       </list-item>
       <list-item>
        for any{a mathematical formula}Mminimal canonical model of K, it holds that{a mathematical formula}kM(C)=i
       </list-item>
      </list>
      <paragraph label="Proof">
       We prove (1). If {a mathematical formula}i=0, we have that {a mathematical formula}K⊭ALC+TRT(⊤)⊑¬C. Then there is a model {a mathematical formula}M0 of K with a domain element x such that {a mathematical formula}kM0(x)=0 and x is an instance of C. Consider the maximal consistent set of concepts in {a mathematical formula}S of which x is an instance in {a mathematical formula}M0. This is a maximal consistent set {a mathematical formula}{C1,C2,…,Cr}⊆S containing C. Furthermore, {a mathematical formula}rank(C1⊓C2⊓…⊓Cr)=0 since clearly {a mathematical formula}K⊭ALC+TRT(⊤)⊑¬(C1⊓C2⊓…⊓Cr) (given that {a mathematical formula}kM0(x)=0).For all {a mathematical formula}i&gt;0 we proceed as follows. We have that {a mathematical formula}Ei⊭ALC+TRT(⊤)⊑¬C, then there must be a model {a mathematical formula}Mi=〈Δi,&lt;i,Ii〉 of {a mathematical formula}Ei, and a domain element x such that {a mathematical formula}kMi(x)=0 and x is an instance of C. Consider the maximal consistent set of concepts {a mathematical formula}{C1,…,Cr}⊆S of which x is an instance in {a mathematical formula}Mi. Clearly, {a mathematical formula}C∈{C1,…,Cr}. Furthermore, {a mathematical formula}rank(C1⊓C2⊓…⊓Cr)=i. Indeed {a mathematical formula}Ei−1⊨ALC+TRT(⊤)⊑¬(C1⊓C2⊓…⊓Cr) (since {a mathematical formula}Ei−1⊨ALC+TRT(⊤)⊑¬C and {a mathematical formula}C∈{C1,…,Cr}), whereas clearly by the existence of x, {a mathematical formula}Ei⊭ALC+TRT(⊤)⊑¬(C1⊓C2⊓…⊓Cr).We have to prove that the set {a mathematical formula}{C1,…,Cr} is consistent with K. The proof is the same for {a mathematical formula}i=0 and for {a mathematical formula}i&gt;0. Let {a mathematical formula}Mi=〈Δi,&lt;i,Ii〉 be the model, considered few lines above in this proof, such that {a mathematical formula}x∈Δi is an instance of C. Starting from a finite model {a mathematical formula}M=〈Δ,&lt;,I〉 of K ({a mathematical formula}M exists by the finite model property, Theorem 6), we add to {a mathematical formula}M all the domain elements of {a mathematical formula}Mi.We define the resulting model {a mathematical formula}M′=〈Δ′,&lt;′,I′〉 as follows: {a mathematical formula}Δ′=Δ∪Δi; {a mathematical formula}I′ is defined on the elements of Δ as I in {a mathematical formula}M, and on the elements of {a mathematical formula}Δi as {a mathematical formula}Ii in {a mathematical formula}Mi. For the interpretation of concepts: for {a mathematical formula}x∈Δ, {a mathematical formula}x∈CI′ if and only if {a mathematical formula}x∈CI; for {a mathematical formula}x∈Δi, {a mathematical formula}x∈CI′ if and only if {a mathematical formula}x∈CIi. For the interpretation of roles: for {a mathematical formula}x,y∈Δ, {a mathematical formula}(x,y)∈RI′ if and only if {a mathematical formula}(x,y)∈RI; for {a mathematical formula}x,y∈Δi, {a mathematical formula}(x,y)∈RI′ if and only if {a mathematical formula}(x,y)∈RIi; and, for any two elements {a mathematical formula}x∈Δ and {a mathematical formula}y∈Δi, {a mathematical formula}(x,y)∉RI′ and {a mathematical formula}(y,x)∉RI′. For all individual constants {a mathematical formula}a∈O, we let {a mathematical formula}aI′=aI. Finally, for all {a mathematical formula}w∈Δ, we let {a mathematical formula}kM′(w)=kM(w) and, for all {a mathematical formula}y∈Δi, we let {a mathematical formula}kM′(y)=n+1+kMi(y), where n is the highest value of {a mathematical formula}kM in {a mathematical formula}M (n is finite as each element in {a mathematical formula}M has a finite rank).We can show that by construction the resulting model satisfies K. Let {a mathematical formula}C⊑D be an inclusion in TBox. We distinguish two cases: C does not contain the typicality operator and {a mathematical formula}C=T(B) for some B. In the first case, {a mathematical formula}C⊆D is a strict inclusion. Let {a mathematical formula}x∈CI′. There are two cases: either {a mathematical formula}x∈Δ or {a mathematical formula}x∈Δi. In the first case, {a mathematical formula}x∈CI in {a mathematical formula}M. As {a mathematical formula}M satisfies K, {a mathematical formula}x∈DI and, by definition of {a mathematical formula}M′, {a mathematical formula}x∈DI′. In the second case, {a mathematical formula}x∈CIi. As {a mathematical formula}Mi satisfies all the strict inclusions in K (which belong to {a mathematical formula}Ei), {a mathematical formula}x∈DIi and, by definition of {a mathematical formula}M′, {a mathematical formula}x∈DI′.In case {a mathematical formula}C=T(B) for some B, observe that if {a mathematical formula}x∈(T(B))I′, then either {a mathematical formula}x∈Δ or {a mathematical formula}x∈Δi. In the first case, x is B-minimal in {a mathematical formula}M and {a mathematical formula}x∈DI. Hence, by definition of {a mathematical formula}M′, {a mathematical formula}x∈DI′. In the second case, x is B-minimal in {a mathematical formula}Mi and {a mathematical formula}x∈DIi. Hence, by definition of {a mathematical formula}M′, {a mathematical formula}x∈DI′.Observe that all the assertions in the ABox are satisfied in {a mathematical formula}M and we have interpreted individual constants over the elements of Δ as in {a mathematical formula}M: {a mathematical formula}aI′=aI, for all {a mathematical formula}a∈O. By construction, for {a mathematical formula}x∈Δ, {a mathematical formula}x∈CI′ iff {a mathematical formula}x∈CI. Hence, if {a mathematical formula}B(a)∈ABox is satisfied in {a mathematical formula}M, then it is satisfied in {a mathematical formula}M′ as well.From this, we can conclude that {a mathematical formula}M′ is a model satisfying K and {a mathematical formula}(C1⊓C2⊓…⊓Cr)I′≠∅. From this, point (1) follows.Let us prove point (2). By point (1), if {a mathematical formula}rank(C)=i there is a {a mathematical formula}{C1,C2,…,Cr}⊆S maximal and consistent with K containing C and such that {a mathematical formula}rank(C1⊓C2⊓…⊓Cr)=i. By Definition 24, we know that in all canonical models there is at least an instance of {a mathematical formula}(C1⊓C2⊓…⊓Cr). To prove point (2) we show that in all minimal canonical models {a mathematical formula}M of K, {a mathematical formula}kM(C1⊓C2⊓…⊓Cr)=i, which entails {a mathematical formula}kM(C)=i (since {a mathematical formula}C∈{C1,C2,…,Cr}). By Proposition 12 we know that {a mathematical formula}kM(C1⊓C2⊓…⊓Cr)≥i. We need to show that also {a mathematical formula}kM(C1⊓C2⊓…⊓Cr)≤i. For a contradiction suppose {a mathematical formula}kM(C1⊓C2⊓…⊓Cr)&gt;i, i.e., for all the domain elements x instances of {a mathematical formula}C1⊓C2⊓…⊓Cr, {a mathematical formula}kM(x)&gt;i. We show that this contradicts the minimality of {a mathematical formula}M. From {a mathematical formula}M we build another model {a mathematical formula}M′=〈Δ′,&lt;′,I′〉 of K by lowering the ranks of some elements in {a mathematical formula}M and leaving all the rest unchanged. We let {a mathematical formula}Δ′=Δ and {a mathematical formula}I′=I. For each element {a mathematical formula}y∈Δ, let {a mathematical formula}{C1,C2,…,Cr}⊆S be the maximal set of concepts consistent with K of which y is an instance. If {a mathematical formula}rank(C1⊓C2⊓…⊓Cr)=i&lt;kM(y), we let {a mathematical formula}kM′(y)=i. Otherwise, we let {a mathematical formula}kM′(y)=kM(y). Observe that we can obtain {a mathematical formula}M′ from the model {a mathematical formula}M by repeatedly lowering the rank of the elements in Δ rank by rank, starting from rank {a mathematical formula}i=0.{a mathematical formula}M′ would still be a model of TBox: at each step, when the rank of an element y is lowered to i (together with all the other elements whose rank is lowered to i), the only thing that changes with respect to {a mathematical formula}M is that y might have become in {a mathematical formula}M′ a minimal instance of a concept of which it was only a non-typical instance in {a mathematical formula}M. This might compromise the satisfaction in {a mathematical formula}M′ of a typicality inclusion as {a mathematical formula}T(E)⊑G. We show that this cannot happen by reasoning by induction on i to prove that, after lowering the rank of an element y in Δ, the modified model still satisfies all the inclusions in K. Let {a mathematical formula}rank(C1⊓C2⊓…⊓Cr)=i&lt;kM(y), consider a step in which we let {a mathematical formula}kM′(y)=i.For {a mathematical formula}i=0, let {a mathematical formula}T(E)⊑G∈K. It can be easily proven that being {a mathematical formula}rank(C1⊓C2⊓…⊓Cr)=0, then if {a mathematical formula}E∈{C1,C2,…,Cr} also {a mathematical formula}G∈{C1,C2,…,Cr} (indeed if on the contrary {a mathematical formula}¬G∈{C1,C2,…,Cr}, then clearly {a mathematical formula}K⊨ALC+TRT(⊤)⊑¬(C1⊓C2⊓…⊓Cr), against the hypothesis that {a mathematical formula}rank(C1⊓C2⊓…⊓Cr)=0). Therefore if {a mathematical formula}y∈EI′, also {a mathematical formula}y∈GI′, and {a mathematical formula}T(E)⊑G holds in {a mathematical formula}M′.For {a mathematical formula}i&gt;0, let {a mathematical formula}T(E)⊑G∈K. We consider two cases: {a mathematical formula}rank(E)≥i and {a mathematical formula}rank(E)&lt;i. If {a mathematical formula}rank(E)≥i we reason as above (with {a mathematical formula}Ei instead of K and i instead of 0) to conclude that if {a mathematical formula}E∈{C1,C2,…,Cr} also {a mathematical formula}G∈{C1,C2,…,Cr}, hence if {a mathematical formula}y∈EI′, also {a mathematical formula}y∈GI′, and {a mathematical formula}T(E)⊑G holds in {a mathematical formula}M′. If {a mathematical formula}rank(E)&lt;i, then {a mathematical formula}rank(E)≤i−1, and we know by construction that {a mathematical formula}kM′(E)&lt;i and y is not a minimal instance of E in {a mathematical formula}M′. Hence lowering the rank of y does not compromise the satisfaction of {a mathematical formula}T(E)⊑G∈Ei.The resulting {a mathematical formula}M′ is such that for all maximal set of concepts consistent with K, {a mathematical formula}{C1,…,Cr}, {a mathematical formula}kM′(C1⊓…⊓Cr)=rank(C1⊓…⊓Cr). Furthermore, by the above reasoning, {a mathematical formula}M′ satisfies TBox. We show that {a mathematical formula}M′ also satisfies ABox, and in particular it is not the case that a {a mathematical formula}T(B)(a)∈ABox might turn false in {a mathematical formula}M′.For all assertions {a mathematical formula}T(B)(a)∈ABox, from the hypothesis we know that {a mathematical formula}M satisfies {a mathematical formula}T(B)(a). Hence, there is a {a mathematical formula}z∈Δ such that {a mathematical formula}aI=z and {a mathematical formula}z∈(T(B))I. We show that it must be the case that {a mathematical formula}z∈(T(B))I′ and, therefore, {a mathematical formula}T(B)(a) is satisfied in {a mathematical formula}M′ as well. Let {a mathematical formula}{C1,…,Cr} be the maximal consistent set of concepts of which z is an instance in {a mathematical formula}M. We prove that, {a mathematical formula}rank(C1⊓…⊓Cr)=rank(B).Clearly {a mathematical formula}rank(C1⊓…Cr)≥rank(B) (since {a mathematical formula}B∈{C1,…,Cr}). Suppose for a contradiction that {a mathematical formula}rank(C1⊓…⊓Cr)&gt;rank(B), i.e. there is an {a mathematical formula}Ei s.t. {a mathematical formula}Ei⊭ALC+TRT(⊤)⊑¬B but {a mathematical formula}Ei⊨ALC+TRT(⊤)⊑¬(C1⊓…⊓Ck). Take the minimal i for which this happens, we show a contradiction. As {a mathematical formula}T(B)(a)∈ABox, for all {a mathematical formula}T(C)⊑D∈Ei, {a mathematical formula}(¬C⊔D)(a) has been added to {a mathematical formula}ABoxi. We know by Proposition 12 that {a mathematical formula}Mi satisfies {a mathematical formula}Ei and, in particular, it satisfies {a mathematical formula}ABoxi. Thus {a mathematical formula}Mi⊨ALC+TR(¬C⊔D)(a), and {a mathematical formula}z∈(¬C⊔D)I, for all {a mathematical formula}T(C)⊑D∈Ei. As {a mathematical formula}M is a minimal model, it must be the case that {a mathematical formula}kM(z)=i (otherwise we can define a canonical model {a mathematical formula}M″ such that {a mathematical formula}M″&lt;FIMSM). Therefore, {a mathematical formula}kMi(z)=0 and, as {a mathematical formula}Mi satisfies {a mathematical formula}Ei, {a mathematical formula}Mi is a model of {a mathematical formula}Ei such that {a mathematical formula}kMi(C1⊓…⊓Ck)=0, thus contradicting the fact that {a mathematical formula}Ei⊨ALC+TRT(⊤)⊑¬(C1⊓…⊓Ck). Hence, {a mathematical formula}rank(C1⊓…⊓Cr)=rank(B).As by the construction of {a mathematical formula}M′, it must be that {a mathematical formula}kM′(aI′)=rank(C1⊓…⊓Cr). To conclude that {a mathematical formula}z∈(T(B))I′, observe that it is not possible that there is an element {a mathematical formula}y∈BI′ such that {a mathematical formula}kM′(y)&lt;kM′(aI′). In fact, otherwise it would be: {a mathematical formula}kM′(y)&lt;rank(B), which contradicts Proposition 12, point (1). This concludes the proof that {a mathematical formula}M′ satisfies ABox.It follows that {a mathematical formula}M′ would be a model of K, and {a mathematical formula}M′&lt;FIMSM, against the minimality of {a mathematical formula}M. We are therefore forced to conclude that {a mathematical formula}kM(C1⊓C2⊓…⊓Cr)=i, hence also {a mathematical formula}kM(C)=i, and 2) holds.  □
      </paragraph>
      <paragraph>
       As a consequence of Proposition 13 and by what we know about the highest rank of a concept (in case it has a rank) we state the following proposition.
      </paragraph>
      <paragraph label="Proposition 14">
       Let us consider the least{a mathematical formula}n≥0such that, for all{a mathematical formula}m&gt;n,{a mathematical formula}TBoxm=TBoxnor{a mathematical formula}TBoxm=∅. Then, in all minimal canonical models{a mathematical formula}M, for all domain elements x,{a mathematical formula}kM(x)≤n.
      </paragraph>
      <paragraph>
       We can now prove the following theorem:
      </paragraph>
      <paragraph label="Theorem 8">
       Let{a mathematical formula}K=(TBox,ABox)be a knowledge base and{a mathematical formula}C⊑Da query. We have that{a mathematical formula}C⊑D∈TBox¯if and only if{a mathematical formula}C⊑Dholds in all minimal canonical models of K with respect to TBox.
      </paragraph>
      <paragraph label="Proof">
       (If part) Assume that {a mathematical formula}C⊑D holds in all minimal canonical models of K with respect to TBox, and let {a mathematical formula}M=〈Δ,&lt;,I〉 be a minimal canonical model of K satisfying {a mathematical formula}C⊑D. Observe that C and D (and their complements) belong to {a mathematical formula}S. We consider two cases: (1) the left hand side of the inclusion C does not contain the typicality operator, and (2) the left hand side of the inclusion is {a mathematical formula}T(C).In case (1), the minimal canonical model {a mathematical formula}M of K satisfies {a mathematical formula}C⊑D. Then, {a mathematical formula}CI⊆DI. For a contradiction, let us assume that {a mathematical formula}C⊑D∉TBox¯. Then, by definition of {a mathematical formula}TBox¯, it must be: {a mathematical formula}K⊭ALC+TRC⊑D. Hence, {a mathematical formula}K⊭ALC+TRC⊓¬D⊑⊥, and the set of concepts {a mathematical formula}{C,¬D} is consistent with K. As {a mathematical formula}M is a canonical model of K, there must be an element {a mathematical formula}x∈Δ such that {a mathematical formula}x∈(C⊓¬D)I. This contradicts the fact that {a mathematical formula}CI⊆DI.In case (2), assume {a mathematical formula}M satisfies {a mathematical formula}T(C)⊑D. Then, {a mathematical formula}T(C)I⊆DI, i.e., for each {a mathematical formula}x∈Min&lt;(CI), {a mathematical formula}x∈DI. If {a mathematical formula}Min&lt;(CI)=∅, then there is no {a mathematical formula}x∈CI (by the smoothness condition), hence C has no rank {a mathematical formula}kM in {a mathematical formula}M and, by Proposition 13, C has no rank ({a mathematical formula}rank(C)=∞). In this case, by Definition 22, {a mathematical formula}T(C)⊑D∈TBox¯. Otherwise, let us assume that {a mathematical formula}kM(C)=i. Since {a mathematical formula}M satisfies {a mathematical formula}T(C)⊑D, {a mathematical formula}kM(C⊓D)&lt;kM(C⊓¬D), then {a mathematical formula}kM(C⊓¬D)&gt;i. By Proposition 13, {a mathematical formula}rank(C)=i and {a mathematical formula}rank(C⊓¬D)&gt;i. Hence, by Definition 22, {a mathematical formula}T(C)⊑D∈TBox¯.(Only if part) If {a mathematical formula}C⊑D∈TBox¯, then, by definition of {a mathematical formula}TBox¯, {a mathematical formula}K⊨ALC+TRC⊑D. Therefore, each minimal canonical model {a mathematical formula}M of K satisfies {a mathematical formula}C⊑D.If {a mathematical formula}T(C)⊑D∈TBox¯, then by Definition 22, either (a) {a mathematical formula}rank(C)&lt;rank(C⊓¬D), or (b) C has no rank. Let {a mathematical formula}M be any minimal canonical model of K. In the case (a), by Proposition 13, {a mathematical formula}kM(C)&lt;kM(C⊓¬D), which entails {a mathematical formula}kM(C⊓D)&lt;kM(C⊓¬D). Hence {a mathematical formula}M satisfies {a mathematical formula}T(C)⊑D. In case (b), by Proposition 13, C has no rank in {a mathematical formula}M, hence {a mathematical formula}M satisfies {a mathematical formula}T(C)⊑D.  □
      </paragraph>
      <paragraph>
       For a strict inclusion {a mathematical formula}C⊑D the problem of deciding whether {a mathematical formula}C⊑D∈TBox¯ is clearly in ExpTime as, by definition of {a mathematical formula}TBox¯ (Definition 22), it amounts to check whether {a mathematical formula}K⊨ALC+TRC⊑D (Theorem 5). The problem of deciding whether {a mathematical formula}T(C)⊑D∈TBox¯ is in ExpTime as well.
      </paragraph>
      <paragraph label="Theorem 9">
       Complexity of rational closure over the TBoxGiven a knowledge base{a mathematical formula}K=(TBox,ABox), the problem of deciding whether{a mathematical formula}T(C)⊑D∈TBox¯is inExpTime.
      </paragraph>
      <paragraph label="Proof">
       Checking if {a mathematical formula}T(C)⊑D∈TBox¯ can be done by computing the finite sequence {a mathematical formula}TBox0,TBox1,…,TBoxn of non-increasing subsets of TBox inclusions and the sequence {a mathematical formula}ABox0,ABox1,…,ABoxn of non-decreasing supersets of ABox in the construction of the rational closure. Note that the number n of the {a mathematical formula}TBoxi (and {a mathematical formula}ABoxi) is {a mathematical formula}O(|K|), where {a mathematical formula}|K| is the size of the knowledge base K.Computing each {a mathematical formula}TBoxi=E(TBoxi−1), requires to check, for all concepts {a mathematical formula}C′ occurring on the left hand side of a T-inclusion in the TBox, whether {a mathematical formula}TBoxi−1⊨ALC+TRT(⊤)⊑¬C′, which requires an exponential time [25] in the size of {a mathematical formula}TBoxi−1 (and hence in the size of K). The number of the concepts {a mathematical formula}C′ to be considered is {a mathematical formula}O(|K|).Computing each {a mathematical formula}ABoxi requires to check whether {a mathematical formula}Ei−1⊭ALC+TRT(⊤)⊑¬B which requires an exponential time in the size of {a mathematical formula}Ei−1 (and hence in the size of K).If not already checked, the exceptionality of C and of {a mathematical formula}C⊓¬D have to be checked for each {a mathematical formula}TBoxi, to determine the ranks of C and of {a mathematical formula}C⊓¬D (which also requires an exponential time in the size of K). Hence, verifying if {a mathematical formula}T(C)⊑D∈TBox¯ is in ExpTime.  □
      </paragraph>
      <paragraph>
       The above result provides an ExpTime upper bound for deciding whether {a mathematical formula}T(C)⊑D∈TBox¯ (the ExpTime lower bound comes from the fact that subsumption in {a mathematical formula}ALC is ExpTime-hard). It requires a quadratic (in the size of K) number of calls to an ExpTime algorithm for checking subsumption in {a mathematical formula}ALC+TR. In the case the ABox does not contain typicality assertions, it is possible to see that subsumption in {a mathematical formula}ALC+TR can be polynomially reduced to subsumption in {a mathematical formula}ALC so that optimized {a mathematical formula}ALC prover can be used to this purpose. The encoding is the same as the one introduced in [26] for reducing subsumption in {a mathematical formula}SHIQRT to subsumption in {a mathematical formula}SHIQ (see [26], Proposition 3).
      </paragraph>
      <paragraph>
       To conclude the session, we want to observe that our definition of exceptionality (Definition 19), which exploits preferential entailment, cannot be equivalently replaced with a notion of exceptionality which directly exploits entailment in {a mathematical formula}ALC over the materialization of the KB, in the spirit of the other proposals of rational closure in [8], [7]. In particular, consider a knowledge base {a mathematical formula}K=(TBox,ABox) and let {a mathematical formula}KS={A⊑B|A⊑B∈TBox} be the set of strict inclusions in K and {a mathematical formula}KD˜=⨅{¬A⊔B|T(A)⊑B∈TBox} be the materialization of the defeasible inclusions in K. One can wonder whether the following notion of exceptionality: “B is exceptional with respect to K if and only if{a mathematical formula}(KS,ABox)⊨ALCKD˜⊑¬B” is equivalent to the notion of exceptionality introduced in Definition 19. The next example shows that this is not the case at least in the context of our rational closure construction (Definition 20).
      </paragraph>
      <paragraph label="Example 9">
       Let {a mathematical formula}K=(TBox,ABox) where {a mathematical formula}TBox={Faun⊑∃HasFriend.WingedHorse,T(WingedHorse)⊑Fly,T(WingedHorse)⊑¬Fly} and {a mathematical formula}ABox=∅.From the construction in Definition 20, we have that {a mathematical formula}ABoxm=ABox and {a mathematical formula}TBoxm=TBox, for all m, as WingedHorse is exceptional for K, that is, {a mathematical formula}K⊨ALC+TRT(⊤)⊑¬WingedHorse. Furthermore, Faun is exceptional for K (that is, {a mathematical formula}K⊨ALC+TRT(⊤)⊑¬Faun) and is exceptional for all the {a mathematical formula}Ei=(ABoxi,TBoxi) in the construction. Hence {a mathematical formula}rank(Faun)=∞. Observe that, in {a mathematical formula}ALC+TR, any model {a mathematical formula}M satisfying K contains neither a WingedHorse nor a Faun-element, i.e., {a mathematical formula}K⊨ALC+TRWingedHorse⊑⊥, {a mathematical formula}K⊨ALC+TRFaun⊑⊥ and, of course, also {a mathematical formula}K⊨ALC+TRT(Faun)⊑⊥. Therefore, {a mathematical formula}T(Faun)⊑⊥ holds in all the minimal canonical models of K and this is in accordance with the fact that, being {a mathematical formula}rank(Faun)=∞, {a mathematical formula}T(Faun)⊑⊥ is in the rational closure of TBox.If we adopt the definition of exceptionality introduced just above, we get a different result. We have: {a mathematical formula}KS={Faun⊑∃HasFriend.WingedHorse} and {a mathematical formula}KD˜=((¬WingedHorse⊔Fly)⊓(¬WingedHorse⊔¬Fly)), therefore{a mathematical formula}{a mathematical formula} For the second statement, observe that there is an {a mathematical formula}ALC model satisfying {a mathematical formula}KS containing a Faun-element x, which is an instance of {a mathematical formula}KD˜ and is not a Winged Horse, but is in the relation HasFriend with a WingedHorse-element y. Also, y is not required to be an instance of {a mathematical formula}KD˜. Hence, Faun is not exceptional with respect to K while WingedHorse is exceptional, and we get {a mathematical formula}rank(Faun)=0 and {a mathematical formula}rank(WingedHorse)=∞. Therefore, with this notion of exceptionality, {a mathematical formula}T(Faun)⊑⊥ would not be in the rational closure of TBox, as {a mathematical formula}rank(Faun)≮rank(Faun⊓¬⊥), since, clearly, {a mathematical formula}rank(Faun⊓¬⊥)=rank(Faun).
      </paragraph>
      <paragraph>
       The same example knowledge base K above can be used to show the difference between our notion of exceptionality in Definition 19 and the notion of exceptionality in [7], which exploits the materialization of both the strict and the defeasible part in the TBox. For simplicity, let us consider the case when ABox is empty and is not considered in the construction of the rational closure of TBox. Following [7], we could define exceptionality as follows: “B is exceptional with respect to K if and only if{a mathematical formula}⊨ALCKS˜⊓KD˜⊑¬B”, where {a mathematical formula}KS˜=⊓{¬A⊔B|A⊑B∈KS} is the materialization of the strict inclusions in K and {a mathematical formula}KD˜ is the materialization of the defeasible inclusions in K (as defined above). Consider the following example:
      </paragraph>
      <paragraph label="Example 10">
       Let K be the knowledge base in Example 9. We have {a mathematical formula}KS=(¬Faun⊔∃HasFriend.WingedHorse) and {a mathematical formula}KD˜=((¬WingedHorse⊔Fly)⊓(¬WingedHorse⊔¬Fly)). Therefore, {a mathematical formula}⊭ALCKS˜⊓KD˜⊑¬Faun, i.e., Faun is not exceptional for K if we adopt the notion of exceptionality from [7] and hence {a mathematical formula}rank(Faun)=0. Again, with this notion of exceptionality, {a mathematical formula}T(Faun)⊑⊥ would not be in the rational closure of TBox, as {a mathematical formula}rank(Faun)≮rank(Faun⊓¬⊥), while, as we have seen in Example 9, with the notion of exceptionality in Definition 19 we get {a mathematical formula}rank(Faun)=∞ and {a mathematical formula}T(Faun)⊑⊥∈TBox¯.
      </paragraph>
      <paragraph>
       An alternative notion of exceptionality can be defined along the lines of [8]. Consider a knowledge base {a mathematical formula}K=(TBox,ABox) (again we assume ABox is empty). We can define exceptionality as follows: “B is exceptional with respect to K if and only if{a mathematical formula}KS∪KD⊨ALC⊤⊑¬B”, where {a mathematical formula}KS={A⊑B|A⊑B∈TBox} is the set of strict inclusions in K and {a mathematical formula}KD={A⊑B|T(A)⊑B∈TBox} is the set containing a strict inclusion for each defeasible inclusion in K. This notion of exceptionality is not equivalent to the one in Definition 19 when used in the context of our rational closure construction, as shown by the following example.
      </paragraph>
      <paragraph label="Example 11">
       Let {a mathematical formula}K=(TBox,ABox) where {a mathematical formula}TBox={Penguin⊑Bird,Bird⊑∃HasEnemy.Penguin,T(Bird)⊑Fly,T(Penguin)⊑¬Fly} and {a mathematical formula}ABox=∅.We have {a mathematical formula}KS={Penguin⊑Bird,Bird⊑∃HasEnemy.Penguin} and {a mathematical formula}KD={Bird⊑Fly,Penguin⊑¬Fly}.It holds that: {a mathematical formula}KS∪KD⊨ALC⊤⊑¬Penguin and {a mathematical formula}KS∪KD⊨ALC⊤⊑¬Bird. For the first entailment, if {a mathematical formula}M were an {a mathematical formula}ALC model satisfying the inclusions {a mathematical formula}KS∪KD and x an instance of Penguin in {a mathematical formula}M, then x would also be an instance of Bird and, by the inclusions {a mathematical formula}Bird⊑Fly, {a mathematical formula}Penguin⊑¬Fly in {a mathematical formula}KD, x would be an instance of both Fly and ¬Fly. For the second entailment, as there is no model satisfying {a mathematical formula}KS∪KD that contains an instance of Penguin, then, there is no model containing an instance of Bird, since any instance of Bird must be in the relation HasEnemy with an instance of Penguin.Therefore, Penguin and Bird are both exceptional for K, so that {a mathematical formula}rank(Bird)=∞ and {a mathematical formula}rank(Penguin)=∞. Hence, with this notion of exceptionality, {a mathematical formula}T(Bird)⊑⊥ and {a mathematical formula}T(Bird)⊑¬Fly would be in the rational closure of TBox. Conversely, with our notion of exceptionality in Definition 19, we get that Bird is not exceptional for K, and that {a mathematical formula}rank(Bird)=0. Thus, {a mathematical formula}T(Bird)⊑⊥ and {a mathematical formula}T(Bird)⊑¬Fly are not in the rational closure of TBox (in agreement with the fact that these inclusions do not hold in all the minimal models of K).
      </paragraph>
      <paragraph>
       In conclusion, if we replace, in our definition of rational closure (Definition 20), the notion of exceptionality in Definition 19 (based on the entailment in {a mathematical formula}ALC+TR) with a different notion of exceptionality which exploits the materialization of the KB and entailment in {a mathematical formula}ALC, inspired to the notions of exceptionality used in [8], [7], the rational closure we obtain is different from the rational closure obtained based on exceptionality in Definition 19.
      </paragraph>
     </section>
     <section label="3.3">
      <section-title>
       Rational closure over the ABox: maximizing the typicality of named individuals
      </section-title>
      <paragraph>
       In this section we extend the notion of rational closure defined in the previous one in order to take into account the individual constants in the ABox. Consider, for instance, a K with {a mathematical formula}TBox={T(Bird)⊑Fly} and {a mathematical formula}ABox={Bird(tweety)}. We would like to be able to conclude that Tweety flies although the ABox does not contain the information that Tweety is a typical bird. The rational closure of the TBox, in the previous section, does not say anything about the individual constants in the ABox, although its construction exploits the information in the ABox for consistency. We therefore address the question: what does the rational closure of a knowledge base K allow to infer about a specific individual constant a occurring in the ABox of K?
      </paragraph>
      <paragraph>
       The definition of rational closure of a knowledge base K considered so far only exploits the ABox (and, in particular, the typicality assertions {a mathematical formula}T(C)(a) in the ABox) to determine the exceptionality of concepts and hence to build the sequence {a mathematical formula}TBox0,TBox1,…,TBoxn of subsets of TBox required to define {a mathematical formula}TBox¯, and to reason about concept inclusions. We address the question of the ABox by first considering the semantic aspect, in order to treat individuals explicitly mentioned in the ABox in a uniform way with respect to the other domain elements: as for all the domain elements we would like to attribute to each individual constant named in the ABox the lowest possible rank. So we further refine Definition 25 by taking into account the interpretation of individual constants of the ABox: given two minimal canonical models {a mathematical formula}M and {a mathematical formula}M′, we will prefer {a mathematical formula}M to {a mathematical formula}M′ if there is an individual constant b occurring in ABox such that {a mathematical formula}kM(bI)&lt;kM(bI′) (whereas {a mathematical formula}kM(aI)≤kM(aI′) for all other individual constants occurring in ABox).
      </paragraph>
      <paragraph label="Definition 26">
       Minimal canonical model of K minimally satisfying ABoxGiven {a mathematical formula}K=(TBox,ABox), let {a mathematical formula}M=〈Δ,&lt;,I〉 and {a mathematical formula}M′=〈Δ′,&lt;′,I′〉 be two canonical models of K which are minimal with respect to Definition 25. We say that {a mathematical formula}M is preferred to {a mathematical formula}M′ with respect to ABox, and we write {a mathematical formula}M&lt;ABoxM′, if, for all individual constants a occurring in ABox, it holds that {a mathematical formula}kM(aI)≤kM′(aI′) and there is at least one individual constant b occurring in ABox such that {a mathematical formula}kM(bI)&lt;kM′(bI′).
      </paragraph>
      <paragraph label="Proof">
       As a consequence of Theorem 7 we prove the following: For any{a mathematical formula}K=(TBox,ABox)there exists a finite minimal canonical model of K minimally satisfying ABox.Observe that, as a consequence of Theorem 7, a finite minimal canonical model {a mathematical formula}M of K (with respect to TBox) exists. In this model the rank of each element is finite (hence for each individual constant a, {a mathematical formula}kM(aI) is finite). If {a mathematical formula}M is not minimally satisfying ABox, then there must be a canonical model {a mathematical formula}M1 such that {a mathematical formula}M1&lt;ABoxM, i.e., such that: {a mathematical formula}kM1(aI1)≤kM(aI) for all individual constants a of ABox, and for some individual constant {a mathematical formula}b1 occurring in ABox {a mathematical formula}kM1(b1I1)&lt;kM(b1I). In turn, if {a mathematical formula}M1 is not minimally satisfying ABox, there must be a canonical model {a mathematical formula}M2, such that {a mathematical formula}M2&lt;ABoxM1, i.e., such that: {a mathematical formula}kM2(aI2)≤kM1(aI1) for all individual constants a of ABox, and for some individual constant {a mathematical formula}b2 occurring in ABox {a mathematical formula}kM2(b2I2)&lt;kM1(b2I1). And so on. Observe that the number of individual constants of ABox is finite, as well as the rank associated to each constant in each model in the chain. Hence, any descending chain of models in the relation {a mathematical formula}&lt;ABox must be finite, and a minimal canonical model minimally satisfying ABox exists.  □
      </paragraph>
      <paragraph label="Example 12">
       In order to see the power of the above semantic notion, consider the standard birds and penguins example. Suppose we have a knowledge base K where {a mathematical formula}TBox={T(Bird)⊑Fly,T(Penguin)⊑¬Fly,Penguin⊑Bird}, and {a mathematical formula}ABox={Penguin(pio),Bird(tweety)}. Knowing that tweety is a bird and pio is a penguin, we would like to be able to assume, in the absence of other information, that tweety is a typical bird, whereas pio is a typical penguin, and therefore tweety flies whereas pio does not. Consider any minimal canonical model {a mathematical formula}M of K. Being canonical, {a mathematical formula}M will contain, among other elements, the following:
      </paragraph>
      <list>
       <list-item label="•">
        {a mathematical formula}x∈(Bird)I, {a mathematical formula}x∈(Fly)I, {a mathematical formula}x∈(¬Penguin)I, {a mathematical formula}kM(x)=0;
       </list-item>
       <list-item label="•">
        {a mathematical formula}y∈(Bird)I, {a mathematical formula}y∈(¬Fly)I, {a mathematical formula}y∈(¬Penguin)I, {a mathematical formula}kM(y)=1;
       </list-item>
       <list-item label="•">
        {a mathematical formula}z∈(Penguin)I, {a mathematical formula}z∈(Bird)I, {a mathematical formula}z∈(¬Fly)I, {a mathematical formula}kM(z)=1;
       </list-item>
       <list-item label="•">
        {a mathematical formula}w∈(Penguin)I, {a mathematical formula}w∈(Bird)I, {a mathematical formula}w∈(Fly)I, {a mathematical formula}kM(w)=2;
       </list-item>
      </list>
      <paragraph>
       Our purpose is to give an algorithmic construction that we call rational closure of the ABox, which captures entailment determined by minimal canonical models of the ABox. The idea is that of considering all the possible minimal consistent assignments of ranks to the individuals explicitly named in the ABox. Each assignment adds some properties to named individuals which can be used to infer new conclusions. We adopt a skeptical view of considering only those conclusions which hold for all assignments. The equivalence with the semantics shows that the minimal entailment captures a skeptical approach when reasoning about the ABox.
      </paragraph>
      <paragraph>
       More formally, in order to calculate the rational closure of ABox, written {a mathematical formula}ABox¯, for all individual constants of the ABox we find which is the lowest possible rank they can have in minimal canonical models with respect to Definition 25: the idea is that an individual constant {a mathematical formula}ai can have a given rank {a mathematical formula}kj(ai) just in case it is compatible with all the inclusions of the TBox that do not contain the T operator or that have a {a mathematical formula}T(C) on the left side with C's rank {a mathematical formula}≥kj(ai) (the inclusions whose antecedent C's rank is {a mathematical formula}&lt;kj(ai) do not matter since, in the minimal canonical model, there will be an instance of C with rank {a mathematical formula}&lt;kj(ai) and therefore {a mathematical formula}ai will not be a typical instance of C). The minimal possible rank assignment {a mathematical formula}kj for all {a mathematical formula}ai is computed in the algorithm below: {a mathematical formula}μij computes all the concepts that {a mathematical formula}ai would need to satisfy in case it had the rank {a mathematical formula}kj(ai). The algorithm verifies whether {a mathematical formula}μij is compatible with {a mathematical formula}(TBox¯,ABox) and whether it is minimal. Notice that, in this phase, all constants are considered simultaneously (indeed, the possible ranks of different individual constants depend on each other, as Example 14 below shows). For this reason, {a mathematical formula}μj (which is the union of all {a mathematical formula}μij for all {a mathematical formula}ai) takes into account the ranks attributed to all individual constants. Example 13, Example 14 below illustrate the use of the algorithm.
      </paragraph>
      <paragraph label="Definition 27">
       {a mathematical formula}ABox¯: rational closure of ABoxLet {a mathematical formula}a1,…,am be the individuals explicitly named in the ABox. Let {a mathematical formula}k1,k2,…,kh be all the possible rank assignments (ranging from 1 to n, for n in Proposition 14) to the individuals occurring in ABox.
      </paragraph>
      <list>
       <list-item label="•">
        Given a rank assignment {a mathematical formula}kj we define:
       </list-item>
       <list-item label="•">
        We say that {a mathematical formula}kj is consistent with {a mathematical formula}(TBox¯,ABox) if:
       </list-item>
       <list-item label="•">
        We say that {a mathematical formula}kj is minimal and consistent with {a mathematical formula}(TBox¯,ABox) if {a mathematical formula}kj is consistent with {a mathematical formula}(TBox¯,ABox) and there is no {a mathematical formula}ki consistent with {a mathematical formula}(TBox¯,ABox) s.t. for all {a mathematical formula}ai, {a mathematical formula}ki(ai)≤kj(ai) and for some b, {a mathematical formula}ki(b)&lt;kj(b).
       </list-item>
       <list-item label="•">
        The rational closure of ABox ({a mathematical formula}ABox¯) is the set of all assertions derivable in {a mathematical formula}ALC+TR from {a mathematical formula}TBox∪ABox∪μj for all minimal consistent rank assignments {a mathematical formula}kj, i.e.:{a mathematical formula}
       </list-item>
      </list>
      <paragraph>
       Before we provide soundness and completeness of the algorithm, let us illustrate its use by the two following examples. The first example is the syntactic counterpart of the semantic Example 12 above.
      </paragraph>
      <paragraph label="Example 13">
       Consider the standard penguin example. Let {a mathematical formula}K=(TBox,ABox), where {a mathematical formula}TBox={T(Bird)⊑Fly,T(Penguin)⊑¬Fly,Penguin⊑Bird}, and {a mathematical formula}ABox={Penguin(pio),Bird(tweety)}.Computing the ranking of concepts we get that {a mathematical formula}rank(Bird)=0, {a mathematical formula}rank(Penguin)=1, {a mathematical formula}rank(Bird⊓¬Fly)=1, {a mathematical formula}rank(Penguin⊓Fly)=2. It is easy to see that a rank assignment {a mathematical formula}k0 with {a mathematical formula}k0(pio)=0 is inconsistent with K as {a mathematical formula}μ0 would contain {a mathematical formula}(¬Penguin⊔Bird)(pio), {a mathematical formula}(¬Bird⊔Fly)(pio), {a mathematical formula}(¬Penguin⊔¬Fly)(pio) and {a mathematical formula}Penguin(pio). Thus we are left with only two ranks {a mathematical formula}k1 and {a mathematical formula}k2 with respectively {a mathematical formula}k1(pio)=1, {a mathematical formula}k1(tweety)=0 and {a mathematical formula}k2(pio)=k2(tweety)=1.The set {a mathematical formula}μ1 contains, among the others, {a mathematical formula}(¬Penguin⊔¬Fly)(pio), {a mathematical formula}(¬Bird⊔Fly)(tweety). It is tedious but easy to check that {a mathematical formula}K∪μ1 is consistent and that {a mathematical formula}k1 is the only minimal consistent assignment (being {a mathematical formula}k1 preferred to {a mathematical formula}k2), thus both {a mathematical formula}¬Fly(pio) and {a mathematical formula}Fly(tweety) belong to {a mathematical formula}ABox¯.
      </paragraph>
      <paragraph label="Example 14">
       This example shows the need of considering multiple ranks of individual constants: normally computer science courses (CS) are taught only by academic members (A), whereas business courses (B) are taught only by consultants (C), consultants and academics are disjoint, this gives the following TBox: {a mathematical formula}T(CS)⊑∀taught.A, {a mathematical formula}T(B)⊑∀taught.C, {a mathematical formula}C⊑¬A. Suppose the ABox contains: {a mathematical formula}CS(c1), {a mathematical formula}B(c2), {a mathematical formula}taught(c1,joe), {a mathematical formula}taught(c2,joe) and let {a mathematical formula}K=(TBox,ABox). Computing the rational closure of TBox, we get that all atomic concepts have rank 0. Any rank assignment {a mathematical formula}ki, with {a mathematical formula}ki(c1)=ki(c2)=0, is inconsistent with K since the respective {a mathematical formula}μi will contain both {a mathematical formula}(¬CS⊔∀taught.A)(c1) and {a mathematical formula}(¬B⊔∀taught.C)(c2), from which both {a mathematical formula}C(joe) and {a mathematical formula}A(joe) follow, which gives an inconsistency.There are two minimal consistent ranks: {a mathematical formula}k1, such that {a mathematical formula}k1(joe)=0, {a mathematical formula}k1(c1)=0, {a mathematical formula}k1(c2)=1, and {a mathematical formula}k2, such that {a mathematical formula}k2(joe)=0, {a mathematical formula}k2(c1)=1, {a mathematical formula}k2(c2)=0. We have that {a mathematical formula}ABox∪μ1⊨A(joe) and {a mathematical formula}ABox∪μ2⊨C(joe). According to the skeptical definition of {a mathematical formula}ABox¯, neither {a mathematical formula}A(joe), nor {a mathematical formula}C(joe) belongs to {a mathematical formula}ABox¯, however {a mathematical formula}(A⊔C)(joe) belongs to {a mathematical formula}ABox¯.
      </paragraph>
      <paragraph>
       We are now ready to show the completeness and soundness of the algorithm with respect to the semantic definition of rational closure of ABox.
      </paragraph>
      <paragraph label="Theorem 11">
       Completeness of {a mathematical formula}ABox¯Given{a mathematical formula}K=(TBox,ABox), for all individual constants a in ABox, we have that if{a mathematical formula}C(a)holds in all minimal canonical models of K minimally satisfying ABox, then{a mathematical formula}C(a)∈ABox¯.
      </paragraph>
      <paragraph label="Proof">
       We show the contrapositive. Suppose {a mathematical formula}C(a)∉ABox¯, i.e. there is a minimal {a mathematical formula}kj consistent with {a mathematical formula}(TBox¯,ABox) s.t. {a mathematical formula}TBox∪ABox∪μj⊭ALC+TRC(a). This means that there is an {a mathematical formula}M′=〈Δ′,&lt;′,I′〉 such that for all {a mathematical formula}ai∈ABox, {a mathematical formula}kM′(ai)=kj(ai), {a mathematical formula}M′⊨ALC+TRTBox∪ABox∪μj and {a mathematical formula}M′⊭ALC+TRC(a). We build a minimal canonical model {a mathematical formula}M=〈Δ,&lt;,I〉 of K, minimally satisfying ABox and such that {a mathematical formula}C(a) does not hold in {a mathematical formula}M as follows. Since we do not know whether {a mathematical formula}M′ is minimal or canonical, we cannot use it directly; rather, we only use it as a support to the construction of {a mathematical formula}M. In particular we use it for the following {a mathematical formula}Δ1 component of {a mathematical formula}M concerning the individuals explicitly named in ABox. Let {a mathematical formula}Δ=Δ1∪Δ2 where {a mathematical formula}Δ1={ai:ai in ABox} and {a mathematical formula}Δ2={{C1,…,Ck}⊆S:{C1,…,Ck} is maximal consistent with K and T does not occur in {C1,…,Ck}}. Notice that {a mathematical formula}Δ2 is necessary to make the model canonical. We define the rank {a mathematical formula}kM of each domain element as follows: for {a mathematical formula}Δ1, {a mathematical formula}kM(ai)=kj(ai), and for {a mathematical formula}Δ2, {a mathematical formula}kM({C1,…,Ck})=rank(C1⊓…⊓Ck). We then define &lt; in the obvious way: {a mathematical formula}x&lt;y if and only if {a mathematical formula}kM(x)&lt;kM(y).We then define I as follows. First, for all {a mathematical formula}ai in ABox we let {a mathematical formula}aiI=ai. For the interpretation of concepts we reason in two different ways for {a mathematical formula}Δ1 and {a mathematical formula}Δ2. For {a mathematical formula}Δ1, we use {a mathematical formula}M′: for all atomic concepts {a mathematical formula}C′, we let {a mathematical formula}ai∈C′I in {a mathematical formula}M if {a mathematical formula}(ai)I′∈C′I′ in {a mathematical formula}M′. For {a mathematical formula}Δ2, for all atomic concepts {a mathematical formula}C′, we let {a mathematical formula}{C1,…,Ck}∈C′I if and only if {a mathematical formula}C′∈{C1,…,Ck}. I then extends to boolean combinations of concepts in the usual way.In order to conclude the model's construction, for each role R, we define {a mathematical formula}RI as follows. For {a mathematical formula}ai,aj∈Δ1, {a mathematical formula}(ai,aj)∈RI if and only if {a mathematical formula}((ai)I′,(aj)I′)∈RI′ in {a mathematical formula}M′. For {a mathematical formula}X,Y∈Δ2, {a mathematical formula}(X,Y)∈RI if and only if {a mathematical formula}{C′:∀R.C′∈X}⊆Y.For {a mathematical formula}ai∈Δ1, {a mathematical formula}X∈Δ2, {a mathematical formula}(ai,X)∈RI if and only if there is an {a mathematical formula}x∈Δ′ of {a mathematical formula}M′ such that {a mathematical formula}(aiI′,x)∈RI′ in {a mathematical formula}M′ and, for all concepts {a mathematical formula}C′, we have {a mathematical formula}x∈C′I′ if and only if {a mathematical formula}X∈C′I.I is extended to quantified concepts in the usual way.By definition of {a mathematical formula}RI and of I, it follows that for all {a mathematical formula}X∈Δ2, {a mathematical formula}X∈∀R.CI iff {a mathematical formula}∀R.C∈X. Also, by maximality and consistency of X, for all {a mathematical formula}X∈Δ2, {a mathematical formula}X∈∃R.CI iff {a mathematical formula}∃R.C∈X, as can be easily verified. If {a mathematical formula}X∈∃R.CI, then by what just stated, {a mathematical formula}∀R.¬C∉X, and by maximality of X, {a mathematical formula}∃R.C∈X. For the other direction, if {a mathematical formula}∃R.C∈X then by consistency of X{a mathematical formula}∀R.¬C∉X, hence by what just stated, {a mathematical formula}X∉∀R.¬CI, and therefore {a mathematical formula}X∈∃R.CI. For {a mathematical formula}ai∈Δ1, it obviously holds that {a mathematical formula}ai∈∀R.CI iff {a mathematical formula}ai∈∀R.CI′ in {a mathematical formula}M′.We first consider the TBox. {a mathematical formula}M satisfies TBox: for elements {a mathematical formula}ai∈Δ1, for the inclusion {a mathematical formula}Cl⊑Cj∈TBox, if T does not occur in {a mathematical formula}Cl this obviously follows from definition of I since it holds in {a mathematical formula}M′. For {a mathematical formula}T(Cl)⊑Cj, for all {a mathematical formula}ai we reason as follows. First of all, if {a mathematical formula}kj(ai)&gt;rank(Cl) then {a mathematical formula}ai∉Min&lt;(ClI) and the inclusion trivially holds. On the other side, if {a mathematical formula}kj(ai)=rank(Cl), {a mathematical formula}(¬Cl⊔Cj)(ai)∈μj, and therefore {a mathematical formula}(ai)I′∈(¬Cl⊔Cj)I′ in {a mathematical formula}M′, hence {a mathematical formula}(ai)I∈(¬Cl⊔Cj)I in {a mathematical formula}M. Last, if {a mathematical formula}kj(ai)&lt;rank(Cl), by Proposition 12 (for {a mathematical formula}M′) then {a mathematical formula}ai∉(Cl)I, and we are done.For the elements {a mathematical formula}X∈Δ2: let {a mathematical formula}Cl⊑Cj∈TBox. If {a mathematical formula}X∉(Cl)I the property trivially holds. Let {a mathematical formula}X∈(Cl)I, i.e. {a mathematical formula}Cl∈X. We show that {a mathematical formula}X∈(Cj)I. We consider two cases: either {a mathematical formula}Cl is different from {a mathematical formula}T(C′) or {a mathematical formula}Cl is {a mathematical formula}T(C′). Let us consider the first case. Suppose, for a contradiction, that {a mathematical formula}X∉(Cj)I and, hence, {a mathematical formula}Cj∉X. As {a mathematical formula}X={C1,…,Ck} is consistent with K, {a mathematical formula}K⊭ALC+TRC1⊓…⊓Cn⊑⊥. As {a mathematical formula}Cj∉X and X is maximal among the consistent sets of concepts in {a mathematical formula}S, {a mathematical formula}K⊨ALC+TRC1⊓…⊓Cn⊓Cj⊑⊥. Therefore, {a mathematical formula}K⊨ALC+TRC1⊓…⊓Cn⊑¬Cj. But, from the fact that {a mathematical formula}Cl⊑Cj∈TBox and {a mathematical formula}Cl∈X, we get {a mathematical formula}K⊨ALC+TRC1⊓…⊓Cn⊑Cj. A contradiction. Let us consider the case that {a mathematical formula}Cl is {a mathematical formula}T(C′). Since {a mathematical formula}X∈(T(C′))I also {a mathematical formula}X∈C′I and by inductive hypothesis {a mathematical formula}C′∈X. We reason by contradiction: suppose {a mathematical formula}Cj∉X, hence {a mathematical formula}¬Cj∈X. Since {a mathematical formula}T(C′)⊑Cj∈TBox, it can be easily verified that {a mathematical formula}rank(C′⊓¬Cj)&gt;rank(C′). Consider an {a mathematical formula}Y∈Δ2 s.t. {a mathematical formula}C′∈Y and {a mathematical formula}rank(Y)=rank(C′) (by Proposition 13 this Y exists). Hence by definition of {a mathematical formula}kM, {a mathematical formula}kM(X)&gt;kM(Y)=kM(C), which contradicts the possibility that {a mathematical formula}X∈Min(C′)I, and hence that {a mathematical formula}X∈(T(C′))I. Also in this case we can conclude that {a mathematical formula}Cj∈X. Notice that by what said above about quantified concepts, this also holds in case {a mathematical formula}Ci or {a mathematical formula}Cj are quantified.Furthermore, {a mathematical formula}M is a minimal canonical model: it is canonical by construction. It is minimal with respect to Definition 23: for all {a mathematical formula}X∈Δ2, we have that {a mathematical formula}kM(X) is the lowest possible rank it can have in any model (by Proposition 13).We now consider the ABox. {a mathematical formula}M satisfies ABox by definition of I and since {a mathematical formula}M′ satisfies it. This is obvious for ABox assertions that do not contain the T operator. If {a mathematical formula}T(C)(ai)∈ABox, then by the algorithm {a mathematical formula}kj(ai)=kM(ai)=rank(C). By Proposition 13, and since {a mathematical formula}M is minimal and canonical, we know that {a mathematical formula}rank(C)=kM(C), therefore {a mathematical formula}(ai)I∈Min&lt;(CI) and {a mathematical formula}M satisfies {a mathematical formula}T(C)(ai).Last, {a mathematical formula}M minimally satisfies ABox. This follows by minimality of {a mathematical formula}kj. Suppose for a contradiction that there is another canonical model {a mathematical formula}M′=〈Δ′,&lt;′,I′〉 of K such that {a mathematical formula}M′&lt;ABoxM, for all {a mathematical formula}ai{a mathematical formula}kM′(ai)≤kM(ai), and for at least one b, {a mathematical formula}kM′(b)&lt;kM(b). Consider {a mathematical formula}kj′, the rank assignment corresponding to {a mathematical formula}M′ (s.t. for all {a mathematical formula}ai∈ABox, {a mathematical formula}kj′(ai)=kM′(ai)I′). Clearly {a mathematical formula}kj′ threatens the minimality of {a mathematical formula}kj. Furthermore {a mathematical formula}M′⊨ALC+TRTBox∪ABox∪μj′: it satisfies {a mathematical formula}TBox∪ABox because it is a model of K. It satisfies {a mathematical formula}μj′: for the inclusions without the T operator this is obvious. Let {a mathematical formula}ai∈ABox, and let {a mathematical formula}T(C)⊑D with rank {a mathematical formula}C≥kj′(ai). It clearly holds that {a mathematical formula}(ai)I′∈(¬C⊔D)I′ in {a mathematical formula}M′: indeed if {a mathematical formula}rank(C)&gt;kj′(ai), then by Proposition 13{a mathematical formula}(ai)I′∈(¬C)I′. On the other hand, if {a mathematical formula}rank(C)=kj′(ai) always by Proposition 13, {a mathematical formula}ai∈min(C)I′, and since by hypothesis {a mathematical formula}M′ satisfies TBox, also {a mathematical formula}ai∈(D)I′. However, if all this holds, this contradicts the hypothesis that {a mathematical formula}kj is a minimal consistent assignment. Therefore, {a mathematical formula}TBox∪ABox∪μj′ is consistent in {a mathematical formula}ALC+TR, which contradicts the minimality of {a mathematical formula}kj. It follows that such {a mathematical formula}M′ cannot exist, and therefore {a mathematical formula}M minimally satisfies ABox.Last, {a mathematical formula}C(a) does not hold in {a mathematical formula}M, since it does not hold in {a mathematical formula}M′.We have then built a minimal canonical model of K minimally satisfying ABox in which {a mathematical formula}C(a) does not hold. The theorem follows by contraposition.  □
      </paragraph>
      <paragraph label="Proof">
       The theorem follows by contraposition.  □
      </paragraph>
      <paragraph>
       Let us conclude this section by estimating the complexity of computing the rational closure of the ABox:
      </paragraph>
      <paragraph label="Theorem 13">
       Complexity of rational closure over the ABoxGiven a knowledge base{a mathematical formula}K=(TBox,ABox), an individual constant a and a concept C, the problem of deciding whether{a mathematical formula}C(a)∈ABox¯isExpTime-complete.
      </paragraph>
      <paragraph label="Proof">
       To evaluate the complexity of the algorithm for computing the rational closure of the ABox, observe that:(i) For each j, the number of sets {a mathematical formula}μij is k (which is linear in {a mathematical formula}|K|). The number of inclusions in each {a mathematical formula}μij is {a mathematical formula}O(|K|2), as the size of {a mathematical formula}S is {a mathematical formula}O(|K|) and the number of T-inclusions {a mathematical formula}T(C)⊑D∈TBox¯, with {a mathematical formula}C,D∈S is {a mathematical formula}O(|K|2), while the number of T-inclusions {a mathematical formula}C⊑D∈TBox is {a mathematical formula}O(|K|). Hence, the size of set {a mathematical formula}μj is {a mathematical formula}O(|K|3).(ii) For each {a mathematical formula}kj, the consistency with {a mathematical formula}(TBox¯,ABox) can be verified by checking the consistency of {a mathematical formula}TBox∪ABox∪μj in {a mathematical formula}ALC+TR, which requires exponential time in the size of the set of formulas {a mathematical formula}TBox∪ABox∪μj (which, as we have seen, is polynomial in the size of K). Hence, the consistency of each {a mathematical formula}kj can be verified in exponential time in the size of K.(iii) The identification of the minimal assignments {a mathematical formula}kj among the consistent ones requires the comparison of each consistent assignment with each other (i.e. {a mathematical formula}k2n comparisons), where each comparison between {a mathematical formula}kj and {a mathematical formula}kj′ requires k steps. Hence, the identification of the minimal assignments requires {a mathematical formula}k×k2n steps, i.e. a number of steps exponential in {a mathematical formula}|K|.(iv) To define the rational closure {a mathematical formula}ABox¯ of ABox, for each concept C occurring in K or in the query (there are {a mathematical formula}O(|K|) many concepts), and for each named individual {a mathematical formula}ai, we have to check if {a mathematical formula}C(ai) is derivable in {a mathematical formula}ALC+TR from {a mathematical formula}TBox∪ABox∪μj for all minimal consistent rank assignments {a mathematical formula}kj. As the number of different minimal consistent assignments {a mathematical formula}kj is exponential in {a mathematical formula}|K|, this requires an exponential number of checks, each one requiring exponential time in the size of the knowledge base {a mathematical formula}|K|. The cost of the overall algorithm is therefore exponential in the size of the knowledge base. Completeness comes from the complexity of the underlying {a mathematical formula}ALC+TR, as stated in Theorem 5.  □
      </paragraph>
     </section>
    </section>
    <section label="4">
     <section-title>
      Conclusions and related works
     </section-title>
     <paragraph>
      In the first part of the paper we have provided a semantic reconstruction of the well known notion of propositional rational closure. We have provided two minimal model semantics, based on the idea that preferred rational models are those in which the rank of the worlds is minimized. We have then shown that when adding suitable possibility assumptions to a knowledge base, these two minimal model semantics correspond to rational closure.
     </paragraph>
     <paragraph>
      The correspondence between the proposed minimal model semantics and rational closure suggests the possibility of defining variants of rational closure by varying the three ingredients underlying our approach, namely: (i) the properties of the preference relation &lt;: for instance just preorder, or multi-linear or weakly-connected; (ii) the comparison relation on models: based for instance on the rank of the worlds or on the inclusion between the relations &lt;, or on a special kind of formulas satisfied by a world, as in the logic {a mathematical formula}Pmin[19]; (iii) the choice between fixed or variable interpretations. The systems obtained by various combinations of the three ingredients are largely unexplored and may give rise to useful nonmonotonic logics.
     </paragraph>
     <paragraph>
      In the second part of the paper we have defined a rational closure construction for the Description Logic {a mathematical formula}ALC extended with a typicality operator and provided a minimal model semantics for it based on the idea of minimizing the rank of objects in the domain, that is their level of “untypicality”. This semantics corresponds to a natural extension to DLs of Lehmann and Magidor's notion of rational closure. We have also extended the notion of rational closure to the ABox, by providing an algorithm for computing it that is sound and complete with respect to the minimal model semantics. Last, we have shown an ExpTime upper bound for the algorithm. The work presented in this paper is an extension of the work in [22] and in [24].
     </paragraph>
     <paragraph>
      In another direction, we aim to develop a generalization of the notion of rational closure introduced in this paper and of its minimal model semantics to deal with more expressive DLs and, in particular, with DLs which do not enjoy the finite model property, such as {a mathematical formula}ALCOIQ and {a mathematical formula}SHOIQ, for which the notion of canonical model as introduced in this paper appears to be too strong.
     </paragraph>
     <paragraph>
      As far as rational closure is concerned, it is worth noticing that rational closure for Description Logics inherits both the virtues and the weakness of propositional rational closure. We have already said about the strengths, among which there are the good computational properties. For what concerns the weaknesses, rational closure does not allow to separately reason about the inheritance of different properties. For instance, in the classical birds and penguins example, rational closure does not allow to reason in this way: penguins inherit all typical properties of birds, except those for which we know they are an exception (as the property of flying). On the contrary, once penguins are recognized as non-typical birds, no inheritance of typical properties is possible. In order to solve this problem, a strengthening of a rational closure-like algorithm with defeasible inheritance networks has been studied by [9].
     </paragraph>
     <paragraph>
      In future work, we aim to explore possible strengthening of the notion of rational closure at the semantic level, to overcome the weaknesses mentioned above. One possible direction we briefly discuss here, could be to “relativize” the notion of typicality enforced by the semantics. In order to achieve this, we aim to refine the semantics by considering models equipped with multiple preference relations, whence with multiple “typicality” operators. In this variant, it should be possible to distinguish different aspects of typicality/exceptionality and consequently to avoid the “all or nothing” behavior of rational closure with respect to property inheritance. For the time being, we just notice that in order to make this variant interesting and meaningful, one should deal with issues like: what does differentiate one preference relation from another? What are the dependencies between different preference relations? Can different preference relations or (syntactically) different typicality operators be combined? All these issues require a suitable analysis/understanding which is preliminary to the technical development. Furthermore, one should also study an algorithmic counterpart of this semantics, that is to say, a suitable reformulation of the rational closure mechanism, with the hope of keeping a reasonable complexity.
     </paragraph>
     <paragraph>
      In [23], [21] nonmonotonic extensions of DLs based on the T operator have been proposed. In these extensions, the semantics of T is based on preferential logic P. Nonmonotonic inference is obtained by restricting entailment to minimal models, where minimal models are those that minimize the truth of formulas of a special kind. In this work, we have presented an alternative approach. First, the semantics underlying the T is R. Moreover and more importantly, we have adopted a minimal model semantics, where, as a difference with the previous approach, the notion of minimal model is completely independent from the language and is determined only by the relational structure of models.
     </paragraph>
     <paragraph>
      Casini and Straccia in [8] develop a notion of rational closure for DLs. They propose a construction to compute the rational closure of an {a mathematical formula}ALC knowledge base, which is not directly based on Lehmann and Magidor definition of rational closure [33], but is similar to the construction of rational closure proposed by Freund in [14] for the propositional calculus. [8] keeps the ABox into account, and defines closure operations over individuals. It introduces a consequence relation ⊩ among a knowledge base K and assertions, under the requirement that the TBox is unfoldable and the ABox is closed under completion rules, such as, for instance, that if {a mathematical formula}a:∃R.C∈ABox, then both aRb and {a mathematical formula}b:C (for some individual constant b) must belong to the ABox, too. Under such restrictions, a procedure is defined to compute the rational closure of the ABox, assuming that the individuals explicitly named are linearly ordered, and different orders determine different sets of consequences. The authors show that, for each order s, the consequence relation {a mathematical formula}⊩s is rational and can be computed in PSpace. In a subsequent work [9], [11], the authors introduce an approach based on the combination of rational closure and Defeasible Inheritance Networks (INs). The authors first develop their approach at a propositional level, then they extend it to DLs, addressing both TBox and ABox reasoning. The resulting construction is a nonmonotonic mechanism enjoying the logical properties of rational entailment, but not suffering from the “all-or-nothing” behavior with respect to inheritance of defeasible properties. The nonmonotonic mechanism proposed by the authors corresponds to an algorithm to compute inferences, however, as a difference with our proposal, no declarative characterization of those inferences is provided. To overcome the limitations of rational closure, in [10] Casini and Straccia also define a notion of lexicographic closure for {a mathematical formula}ALC.
     </paragraph>
     <paragraph>
      In [7] a semantic characterization of a variant of the notion of rational closure introduced in [8] has been presented, which is based on a generalization to {a mathematical formula}ALC of our semantics in [22]. In [7], defeasible subsumption statements have the form {a mathematical formula}C⊏̰D and typicality assertions are not allowed in the ABox, which is defined as a standard {a mathematical formula}ALC ABox. As we have seen, in this paper the presence of typicality assertions in the ABox may force some typicality inclusion not to hold, which is similar to allowing negated conditionals in KLM logics. While the minimal model semantics naturally deals with the presence of typicality assertions, the presence of typicality assertions in the ABox has to be taken into account, as we have done, in the definition of rational closure of the TBox and of the ABox.
     </paragraph>
     <paragraph>
      A further difference of our construction with those in [8], [7] is in the notion of exceptionality: our definition of exceptionality exploits preferential entailment, while [8], [7] directly use entailment in {a mathematical formula}ALC over a materialization of the knowledge base. We have seen in Section 3.2 that we cannot replace entailment in {a mathematical formula}ALC+TR by entailment in {a mathematical formula}ALC over a materialization of the knowledge base. However, when typicality assertions are not allowed in the ABox, our notion of rational closure for TBox can be computed in {a mathematical formula}ALC by defining a linear encoding of {a mathematical formula}ALC+TR entailment into {a mathematical formula}ALC (the encoding is exactly the same as the one provided in [26] for encoding of {a mathematical formula}SHIQRT entailment into {a mathematical formula}SHIQ).
     </paragraph>
     <paragraph>
      A related approach can be found in [3]. The basic idea of their semantics for the propositional case is similar to ours: to consider models of the K where the rank of each world is as small as possible. This idea has its roots in the work by Pearl [38] and by Lehmann and Magidor [33]. The construction of [3] differs from ours as the very notion of model is different (although equivalent): a model is a sequence of sets of “atoms” (conjunctions of literals for every propositional variable). Each set of the sequence represents a set of worlds with the same ranking. A unique model of the rational closure is then defined by considering all models of the K and by taking for each level, starting from the bottom one, the union of the worlds (not already considered) at that level. This construction corresponds to building a model where each world has a minimal rank. In contrast, we proceed in a different way: our semantics is defined in terms of standard Kripke models where the rank is given by the preference (or accessibility) relation, and models of the rational closure are defined as the minimal ones with respect to a comparison relation on models. Our presentation is then more abstract and declarative than the one proposed in [3], whilst theirs is more “operational”, as it relies on a specific representation of models and it provides a recipe to build a model of the rational closure, rather than a characterization of its properties.
     </paragraph>
     <paragraph>
      The logic {a mathematical formula}ALC+TR we consider as our base language is equivalent to the logic for defeasible subsumptions in DLs proposed by [5]. At a syntactic level the two logics differ, so that in [5] one finds the defeasible inclusions {a mathematical formula}C⊏̰D instead of {a mathematical formula}T(C)⊑D of {a mathematical formula}ALC+TR, however it has be shown in [20] that the logic of defeasible subsumption can be translated into {a mathematical formula}ALC+TR by replacing {a mathematical formula}C⊏̰D with {a mathematical formula}T(C)⊑D.
     </paragraph>
     <paragraph>
      In [6] the semantics of the logic of defeasible subsumptions is strengthened by a preferential semantics. Intuitively, given a TBox, the authors first introduce a preference ordering ≪ on the class of all subsumption relations ⊏̰ including TBox, then they define the rational closure of TBox as the most preferred relation ⊏̰ with respect to ≪, i.e. such that there is no other relation {a mathematical formula}⊏̰′ such that TBox {a mathematical formula}⊆⊏̰′ and {a mathematical formula}⊏̰′≪⊏̰. Furthermore, the authors describe an ExpTime algorithm in order to compute the rational closure of a given TBox. [6] does not address the problem of dealing with the ABox. In [36] a plug-in for the Protégé ontology editor implementing the mentioned algorithm for computing the rational closure for a TBox for OWL ontologies is described.
     </paragraph>
     <paragraph>
      Recent works discuss the combination of open and closed world reasoning in DLs. In particular, formalisms have been defined for combining DLs with logic programming rules (see, for instance, [13] and [37]). A grounded circumscription approach for DLs with local closed world capabilities has been defined in [32].
     </paragraph>
    </section>
   </content>
   <appendices>
    <section label="Appendix A">
     An alternative semantics for {a mathematical formula}ALC+TR
     <paragraph>
      An alternative semantic characterization of T can be given by means of a set of postulates that are essentially a reformulation of axioms and rules of nonmonotonic entailment in rational logic R: in this respect, the T-assertion {a mathematical formula}T(C)⊑D is equivalent to the conditional assertion {a mathematical formula}C|∼D in {a mathematical formula}R.{sup:5} Given a domain Δ and a valuation function I, one can define the function {a mathematical formula}fT(S) for {a mathematical formula}S⊆Δ that selects the typical instances of S, and in case {a mathematical formula}S=CI for a concept C, it selects the typical instances of C. In this semantics, we define {a mathematical formula}(T(C))I=fT(CI), and {a mathematical formula}fT has the intuitive properties for all subsets S of Δ of Definition 28 below:
     </paragraph>
     <paragraph label="Definition 28">
      Semantics of T with selection functionA model is any structure{a mathematical formula} where:
     </paragraph>
     <list>
      <list-item label="•">
       Δ is the domain;
      </list-item>
      <list-item label="•">
       {a mathematical formula}fT:Pow(Δ)⟼Pow(Δ) is a function satisfying the following properties (given {a mathematical formula}S⊆Δ):
      </list-item>
      <list-item label="•">
       I is the extension function that maps each extended concept C to {a mathematical formula}CI⊆Δ, and each role R to {a mathematical formula}RI⊆Δ×Δ as follows:
      </list-item>
     </list>
     <paragraph>
      ({a mathematical formula}fT−1) enforces that typical elements of S belong to S. ({a mathematical formula}fT−2) enforces that if there are elements in S, then there are also typical such elements. ({a mathematical formula}fT−3) expresses a weak form of monotonicity, namely cautious monotonicity. The next properties constraint the behavior of {a mathematical formula}fT with respect to ∩ and ∪ in such a way that they do not entail monotonicity. Last, {a mathematical formula}(fT−R) corresponds to rational monotonicity, and forces again a form of monotonicity: if there is a typical S having the property R, then all typical S-and-Rs inherit the properties of typical Ss.
     </paragraph>
     <paragraph>
      The following representation theorem shows that the above semantics for {a mathematical formula}ALC+TR in Definition 28 is equivalent to the one in Definition 13.
     </paragraph>
     <paragraph>
      First of all, we need to recall Lemma 2.1 in [17]:
     </paragraph>
     <paragraph label="Lemma 1">
      (Lemma 2.1 in[17], page 5.) If{a mathematical formula}fTsatisfies{a mathematical formula}(fT−1)−(fT−5), then{a mathematical formula}fT(S∪R)∩S⊆fT(S).
     </paragraph>
     <paragraph>
      Now we are able to prove the representation theorem:
     </paragraph>
     <paragraph label="Proof">
      A knowledge base is satisfiable in an{a mathematical formula}ALC+TRmodel described inDefinition 13if and only if it is satisfiable in a model{a mathematical formula}M=〈Δ,fT,I〉where{a mathematical formula}fTsatisfies{a mathematical formula}(fT−1)−(fT−5)and{a mathematical formula}(fT−R), and{a mathematical formula}(T(C))I=fT(CI).Here we only consider the property {a mathematical formula}(fT−R). For the other properties, we refer to the proof of the Representation Theorem for {a mathematical formula}ALC+T, as presented in [17], Theorem 2.1, page 5. The only if direction is trivial and left to the reader. For the if direction, as in [17], we define the &lt; relation as follows:
     </paragraph>
     <list>
      <list-item label="•">
       for all {a mathematical formula}x,y∈Δ, we let {a mathematical formula}x&lt;y if {a mathematical formula}∀S⊆Δ, if {a mathematical formula}y∈fT(S), then (a) {a mathematical formula}x∉S and (b) {a mathematical formula}∃R⊆Δ such that {a mathematical formula}S⊂R and {a mathematical formula}x∈fT(R).
      </list-item>
     </list>
    </section>
   </appendices>
  </root>
 </body>
</html>